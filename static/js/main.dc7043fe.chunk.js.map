{"version":3,"sources":["utils/helpers.js","prototypes/Floatboxes.js","components/notifications/Notifications.js","context/DataContext.js","context/NotificationContext.js","prototypes/Canvasboxes.js","prototypes/GameOfLife.js","components/shapes.js","components/shades.js","components/grid.js","prototypes/Prototype.js","components/rules.js","static/color-grid.js","components/notifications/notification-templates.js","components/quick-access/ex-comps.js","components/quick-access/qa-buttons.js","components/quick-access/QaTooltip.js","components/quick-access/QaSlider.js","components/quick-access/ExRules.js","components/quick-access/ExShapes.js","components/quick-access/palette/PrefsPalette.js","utils/color-utils.js","components/quick-access/palette/AgePalette.js","components/controls/Controls.js","components/resizer/Resizer.js","components/touch-quick-access/ShapeMenu.js","components/quick-access/palette/ExPalette.js","components/quick-access/QuickAccess.js","components/receivers/MouseReceiver.js","components/receivers/TouchReceiver.js","components/touch-quick-access/BrushToggle.js","components/touch-quick-access/RadialMenu.js","components/touch-quick-access/TqaRules.js","components/touch-quick-access/TouchQuickAccess.js","static/dynamic-rules.js","touch-controllers/rules-tc.js","static/dynamic-shades.js","touch-controllers/shades-tc.js","components/touch-options/touch-option-controls.js","components/World.js","components/touch-options/TouchOptions.js","components/controls/TouchControls.js","components/splash/Splash.js","App.js","index.js"],"names":["window","helperNames","createHelpers","helpers","forEach","helper","name","charAt","toUpperCase","substring","push","print2dArray","arr2d","printStr","y","length","x","console","log","Math","clamp","a","b","min","max","lerp","inverseLerp","tid","gridW","floor","innerWidth","gridH","innerHeight","constructFillers","fill","config","init","range","fillers","contextState","rules","s","shapes","DataContext","createContext","DataProvider","children","useState","state","setState","Provider","value","setDimensions","_gridW","_gridH","RuleNotification","highlightS","className","Notifications","message","timeout","messageIndex","show","setShow","outPhase","setOutPhase","outQuick","setOutQuick","useEffect","clearTimeout","setTimeout","undefined","onAnimationEnd","e","animationName","NotificationContext","NotificationProvider","setMessage","setMessageIndex","showNotification","pv","hideNotification","initPop","i","rows","grid","pop","updateCellAt","v","randomisePop","yi","xi","random","aliveAt","getLiveNeighbours","reduce","c","updateNeighbour","d","playActive","size","tw","th","gw","gh","cw","ch","speed","neighbours","icIndex","cond_S","cond_B","conditionPresets","neighbourStatus","top","topRt","right","botRt","bottom","botLt","left","topLt","_top","_topRt","_right","_botRt","_bottom","_botLt","_left","_topLt","reset","fillRandom","fillHStripe","fillVStripe","fillHStripes","fillVStripes","fillCheckered","fillRect","fillCross","fillGliderGun","fillRule","mat","nei","n_topLt","n_topRt","n_botRt","n_botLt","n_top","n_right","n_bottom","n_left","n_center","selector","index","isChecked","sx","sy","draw","ctx","clearRect","canvas","width","height","fillStyle","Controls","isPlaying","setIsPlaying","fontSize","fontWeight","padVert","text","onClick","marginBot","onChange","event","target","selectedIndex","padTop","split","map","cond","parseInt","defaultValue","Text","color","padBot","style","paddingTop","paddingBottom","Button","marginTop","type","marginBottom","GameOfLife","bX","bY","selectedShape","monoShade","shades","isLooped","ages","ageMax","updateAge","selectedShadesSeq","preserveAges","brushSize","wrapEnabled","pCells","pOutOfBounds","pX","pY","inverseBg","alphaBg","background","drawBackground","isClearCanvas","props","canvasRef","useRef","animationFrameId","current","context","getContext","findex","Date","now","setAttribute","render","row","alive","n","indexOf","update","requestAnimationFrame","cancelAnimationFrame","ref","Prototype","createGrid","args","constructGrid","clear","invert","vstripes","hstripes","dstripes","rect","checkered","cross","mesh","wraplines","create2dArray","si","wi","w","h","hi","snapshot","start","end","astart","xoff","yoff","xstart","ystart","sxi","ax","syi","ay","func","yiter","array","checkBounds","global_S","global_B","setRule","checkSurvival","checkBirth","resetAges","_","constructShades","shadeSeq","age","_updateLoopedAge","_updateAge","_resetAge","isAlive","_incrementAge","_incrementLoopedAge","initGrid","isMobile","calculateDimensions","ti","finalShape","titles","shape","initTitle","generateNeighbours","updateDrawBackground","reInitGrid","updateShades","reCreateGrid","drawGrid","drawInverse","drawShaded","drawShapes","setBrushSize","bsz","drawOnGrid","applyBrush","eraseOnGrid","paint","preview","cx","cy","gX","gY","cells","outOfBounds","offX","offY","getShape","setupPreview","setShape","setGridWrap","wrap","setFill","setShadeSeq","isLoop","setShades","setTrails","toString","hf","ox","oy","_x","_y","cX","cY","generation","tl","tr","br","bl","t","r","l","n_topLtW","n_topRtW","n_botRtW","n_botLtW","n_topW","n_rightW","n_bottomW","n_leftW","topW","topRtW","rtTopW","rightW","rtBotW","botRtW","bottomW","botLtW","ltBotW","leftW","ltTopW","topLtW","minX","minY","maxX","maxY","NotificationWithBody","title","body","ExCon","isCurrent","join","ExIndicator","lineWidth","strokeStyle","points","moveTo","lineTo","stroke","ExSubTitle","subtitle","isScrollable","ExCheckbox","checked","ExHexButton","hovered","setHovered","pressed","setPressed","textStyle","onMouseEnter","onMouseLeave","onMouseDown","onMouseUp","strokeWidth","QaButton","unhide","animDelay","animDuration","onRightClick","onHoverChanged","hoverRef","animationDuration","animationDelay","onContextMenu","preventDefault","Play","Draw","isDrawing","Speed","Shapes","Rules","Colors","Close","BrushIcon","GridIcon","SpeedIcon","tips","0","1","2","3","4","5","6","QaTooltip","vis","midX","path","msgConStyle","tip","liveValue","QaSlider","icon","onDismiss","offsetX","trackX","setTrackX","isPressed","setIsPressed","isHovered","setIsHovered","lower","upper","updateTrackX","rounded","round","mouseDown","useCallback","button","document","addEventListener","mouseUp","once","trackStyle","thumbStyle","labelStyle","conClass","thumbClass","labelClass","closeClass","onMouseMove","clientX","isKeyModeSurvival","Presets","currentIndex","onSelect","selected","ari","Custom","activeRule","onSelectPresets","onWrapChanged","onChanged","updateRule","nb","ns","numbers","onNumbersChanged","WrapGrid","setChecked","_checked","ActiveRule","RuleOption","Numbers","toggles","setToggles","updateNumbers","togs","checkChanged","DiamondBtn","btnStyle","btnClass","cbClass","RuleCell","nameCN","ruleCN","ExRules","pindex","onPindexChanged","useContext","arIndex","setArIndex","setActiveRule","pconStyle","transform","updateActiveRule","selectedRule","isCustom","keyListener","key","sarr","splice","_s","sort","barr","bi","_b","keyCode","removeEventListener","icat","ishape","Fillers","onSliding","setCurrentIndex","ex","onExpanded","exAction","FillCell","backgroundColor","borderColor","configAction","stopPropagation","iconClass","moded","onDown","onUp","FSlide","hov","setHov","setValue","slideClass","step","MidIndic","paths","visible","ExShapes","onShapeSelect","onFillSelect","onClear","isShapes","setIsShapes","Modes","states","selectColor","onMonoChanged","onGradientChanged","onImageSelect","onAgeConfigure","onTrailsChanged","mono","gradient","src","trails","uploadRef","modesClass","updateGradientStops","trailsChanged","uploadImage","click","onSrcChange","files","URL","createObjectURL","alt","renderContent","ColorSelection","hex","setHex","hasFocus","setHasFocus","_hex","test","onFocus","onBlur","padding","ModeDropdown","onExpand","baseClass","lblClass","modes","mode","Trails","showInfo","setShowInfo","opacity","PrefsPalette","onBackgroundSelect","onMonoSelect","onGradientSelect","modeEx","setModeEx","modeIndex","setModeIndex","modeStates","setModeStates","nextStates","st","grad","generateShadesFromList","list","colors","steps","isTint","hex2rgb","generateGradient","Error","prev","next","dr","dg","g","db","rgb2hex","bigint","slice","animActive","scrollListenerAttached","lastApplied","outId","Footer","hasBg","onReset","onApply","onAddTint","onAddGradient","onAddLoop","isAdd","setIsAdd","loopName","isControl","isIn","FooterButton","TintCell","onDeleteQueue","onDeleteFinish","contentStyle","getAccent","StepCell","borderImageSource","stepper","diff","rightClick","LoopCell","isStart","ExPalette","setList","setIsLoop","scrollAtEnd","setScrollAtEnd","listRef","createGradient","g1","g2","scrollToEnd","scroll","scrollHeight","behavior","scrollListener","scrollTop","clientHeight","updatedList","updateTint","deleteIndices","_list","deleteQueuedAtIndex","filter","updateSteps","COLOR_GRID","hsl2rgb","f","k","padStart","j","hideTimeoutIndex","mouseMoveIndex","timer","isSliding","ColorGrid","cgVisible","currentHex","onCustom","onCancel","isVisible","setIsVisible","isCustomChanged","setIsCustomChanged","inputRef","animEnded","qaExpanded","onBgSelect","onGradSelect","setCgVisible","cgCurrentHex","setCgCurrentHex","onColorSelectedRef","AgePalette","sliderValue","Back","animdelaysJson","sdat","na","brush","QuickAccess","animId","qaHidden","qaMinimised","qaSlider","onQaHoverChanged","onQaExpanded","onQaMinimised","onQaSlider","onPlayClicked","onDrawClicked","onQaClose","onTempPause","onRuleSelect","onShadesSelect","onBrushChanged","onSizeChanged","onSpeedChanged","qaIndex","setQaIndex","slideId","setSlideId","tipIndex","setTipIndex","tipVis","setTipVis","backVis","setBackVis","exPindices","setExPindices","setPhantomUpdateIndex","qaExAction","item","exChangePage","enableBack","showSlider","id","hoverChangedAtIndex","speedLower","speedUpper","ps","animdelays","closeAnimDuration","pi","drawStartHook","drawEndHook","drawHook","MouseReceiver","isPainting","onBrushDown","onBrushUp","onDraw","onErase","onPaint","onPreview","clientY","erase","qaEnabled","isTempPause","onIsPlayingChanged","onBrushDownChanged","onPreviewStart","onPreviewEnd","hide","exp","slide","qaState","setQaState","setIsDrawing","setIsPainting","updateQaHidden","inState","updateQaMinimised","outState","toggleIsPlaying","_isPlaying","toggleIsDrawing","_isDrawing","requestFullscreen","pause","Resizer","isResizing","onResizing","countdown","setCountdown","resizeHandler","clearInterval","setInterval","p","lx","ly","longPressTimeout","swipeUpStart","TouchReceiver","triggerOffset","isTouchOverride","onTap","onTapAndHold","onTouch","onTouchPointChange","onRelease","onUpTrigger","onRightTrigger","onDownTrigger","onLeftTrigger","onSwipeUp","touchEnd","clearLongPressTimeout","ady","abs","timeElapsed","onTouchStart","touches","onTouchMove","dx","dy","adx","onTouchEnd","onTouchCancel","BrushToggle","isEraser","onToggle","RadialMenu","isMenu","dirIndex","fi","allArgValues","ShapeMenu","dir","trig","argValues","setArgValues","argIndex","setArgIndex","stateIndex","setStateIndex","showLabel","setShowLabel","showSliders","setShowSliders","slidersOutPhase","setSlidersOutPhase","applyFill","slideArg","byVal","val","newVal","resetStateIndex","TqaRulesMain","onAnimOut","bState","setBState","sState","setSState","idx","toggleBBtn","toggleSBtn","TqaRules","isCustomRules","_props","TouchQuickAccess","touchTrigger","onEraserToggle","dynamicRules","dynRules_b","dynRules_s","currBRl","currSRl","extendColorMod","shortenColorMod","dynamicShades","monoShades","pulse","isMono","mi","dsi","msi","applyMods","Array","notification","configureColors","applyMono","extendSeq","shortenSeq","extendPulse","shortenPulse","nextMono","prevMono","inpStr","inputArr","hexes","outStr","ctxbg","gradientStops","TouchSwitch","inDelay","onCheckChange","TouchButton","extraMargin","TouchOptions","isOptions","altRender","onShowFpsChange","onWrapChange","onAltRenderChange","onClose","showFps","setShowFps","wrapGrid","setWrapGrid","isFullscreen","setIsFullscreen","fullscreenChange","fullscreenElement","exitFullscreen","MODES","arB","arS","TouchControls","upTrigger","rightTrigger","downTrigger","leftTrigger","onBrushDownChange","setIsMenu","setIsOptions","setIsEraser","setIsCustomRules","menuDirIndex","setMenuDirIndex","setTriggerOffset","setTouchTrigger","updateIsCustomRules","triggerTouch","applyMenuDirection","di","odi","applyDynamicRule","applyDynamicShades","MobileSplash","Splash","IS_MOBILE","clientWidth","initialised","drawSpeed","isBrushDown","isInverseDraw","isAgeShades","isInverseImage","isShapeShades","isPlayingChanged","_update","brushDownChanged","_isBrushDown","reconfigureDraw","shadesSelected","updateBackground","triggerDraw","speedChanged","spd","startPreview","previewConfig","endPreview","setBackground","bg","setGradient","stops","initInverseDraw","applyGradient","setupImageBackground","createLinearGradient","addColorStop","resizeBgRedraw","updateGrid","_draw","_fdraw","World","fps","setFps","bgImgSrc","setBgImgSrc","setIsResizing","isSplash","setIsSplash","setAltRender","canvasbgRef","updateCanvasSize","canvasBg","fLogIndex","fLogTime","contextBg","startTime","_render","logFps","renderAlt","rid","sz","_isResizing","Main","App","basename","process","element","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.dc7043fe.chunk.js","sourcesContent":["window.helperNames = []\r\n\r\nwindow.createHelpers = (helpers) => {\r\n  helpers.forEach(helper => {\r\n    let name = helper.name\r\n    if (window[name]) name = `f${name.charAt(0).toUpperCase()}${name.substring(1)}`\r\n    window[name] = helper\r\n    window.helperNames.push(name)\r\n  })\r\n}\r\n\r\nwindow.print2dArray = (arr2d) => {\r\n  let printStr = \"\"\r\n  for (let y = 0; y < arr2d.length; y++) {\r\n    for (let x = 0; x < arr2d[y].length; x++) {\r\n      printStr += `${arr2d[y][x]} `\r\n    }\r\n    printStr += '\\n'\r\n  }\r\n  console.log(printStr)\r\n}\r\n\r\nMath.clamp = (x, a, b) => Math.min(Math.max(x, a), b)\r\nMath.lerp = (a, b, x) => a + (b - a) * Math.clamp(x, 0, 1)\r\nMath.inverseLerp = (a, b, x) => Math.clamp((x - a) / (b - a), 0, 1)\r\n","import { useState, useEffect } from 'react'\r\n\r\nimport './prototypes.css'\r\n\r\nconst rows = 24\r\nconst columns = 50\r\nconst gridCount = rows * columns\r\n\r\nconst initPop = []\r\nfor (let i = 0; i < gridCount; i++) {\r\n  initPop[i] = 1\r\n}\r\n\r\nconst sequence = []\r\n\r\nlet updateCounter = 0\r\n\r\nconst Floatboxes = () => {\r\n  const [pop, setPop] = useState(initPop)\r\n\r\n  const updateLoop = () => {\r\n    setTimeout(() => {\r\n      _setPop((index) => {\r\n        return Math.random() > .5 ? 1 : 0\r\n      })\r\n\r\n      updateLoop()\r\n    }, 480)\r\n  }\r\n\r\n  const _setPop = (fillRule) => {\r\n    setPop(filler(fillRule))\r\n  }\r\n\r\n  const filler = (fillRule) => {\r\n    const pop = []\r\n    for (let i = 0; i < gridCount; i++) {\r\n      pop[i] = fillRule(i)\r\n    }\r\n\r\n    return pop\r\n  }\r\n\r\n  const getCoords = (index) => {\r\n    return { \r\n      x: index % columns, \r\n      y: Math.floor(index / columns) \r\n    }\r\n  }\r\n\r\n  const getIndex = (x, y) => {\r\n    return y * columns + x\r\n  }\r\n\r\n  const getMidCoords = () => {\r\n    const midCoords = []\r\n    const midXs = []\r\n    const midYs = []\r\n\r\n    if (columns % 2 === 0) {\r\n      midXs.push(columns / 2 - 1, columns / 2)\r\n    } else {\r\n      midXs.push((columns - 1) / 2)\r\n    }\r\n\r\n    if (rows % 2 === 0) {\r\n      midYs.push(rows / 2 - 1, rows / 2)\r\n    } else {\r\n      midYs.push((rows - 1) / 2)\r\n    }\r\n\r\n    midXs.forEach((x) => {\r\n      midYs.forEach((y) => {\r\n        midCoords.push({ x, y })\r\n      })\r\n    })\r\n    \r\n    return midCoords\r\n  }\r\n\r\n  const getMidIndices = () => {\r\n    const midIndices = []\r\n    const midCoords = getMidCoords()\r\n\r\n    midCoords.forEach(({ x, y }) => {\r\n      midIndices.push(getIndex(x, y))\r\n    })\r\n\r\n    return midIndices\r\n  }\r\n\r\n  const init = () => {\r\n    const pop = filler(() => 0)\r\n    const midIndices = getMidIndices()\r\n    const midCoords = getMidCoords()\r\n    \r\n    const side = Math.max(rows, columns)\r\n    const max = Math.floor(side)\r\n    \r\n    sequence.push(midCoords)\r\n\r\n    for (let index = 1; index < max; index++) {\r\n      \r\n    }\r\n\r\n    const test = [...midIndices]\r\n\r\n    test.forEach((index) => {\r\n      pop[index] = 1\r\n    })\r\n\r\n    setPop(pop)\r\n  }\r\n\r\n  // useEffect(updateLoop, [null])\r\n  useEffect(init, [null])\r\n\r\n  return (\r\n    <div className='prot-cont fill'>\r\n      {pop.map((status, index) => (<Cell key={index} status={status} />))}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst Cell = ({ status }) => {\r\n  const contentStyle = { transform: `scale(${status})` }\r\n\r\n  return (\r\n    <div className='cell'>\r\n      <div className='cell-content' style={contentStyle} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Floatboxes","import { useState, useEffect } from 'react'\r\nimport \"./notifications.css\"\r\n\r\nconst AUTO_HIDE_DELAY = 5000\r\n\r\nlet tid\r\n\r\n// message => string | JSX\r\n\r\nconst Notifications = ({ message, timeout, messageIndex }) => {\r\n  const [show, setShow] = useState(false)\r\n  const [outPhase, setOutPhase] = useState(false)\r\n  const [outQuick, setOutQuick] = useState(false)\r\n\r\n  const animEnded = e => {\r\n    if (e.animationName === \"fade-out-anim\") {\r\n      setShow(false)\r\n      setOutPhase(false)\r\n      setOutQuick(false)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (message) {\r\n      if (!show) {\r\n        setShow(true)\r\n      }\r\n\r\n      if (outPhase) {\r\n        setOutPhase(false)\r\n      }\r\n\r\n      if (outQuick) {\r\n        setOutQuick(false)\r\n      }\r\n      \r\n      if (tid) {\r\n        clearTimeout(tid)\r\n      }\r\n      tid = setTimeout(() => {\r\n        setOutPhase(true)\r\n        tid = undefined\r\n      }, timeout * 1000 || AUTO_HIDE_DELAY)\r\n\r\n      return () => {\r\n        if (tid) {\r\n          clearTimeout(tid)\r\n        }\r\n      }\r\n    } else {\r\n      setShow(false)\r\n      setOutPhase(false)\r\n      setOutQuick(false)\r\n    }\r\n  }, [message, messageIndex])\r\n\r\n  useEffect(() => {\r\n    if (timeout === -1) {\r\n      setOutQuick(true)\r\n      if (tid) {\r\n        clearTimeout(tid)\r\n      }\r\n    }\r\n  }, [timeout])\r\n\r\n  return (\r\n    <div>\r\n      {show && (\r\n        <div className='notification-container'>\r\n          <div \r\n            className={`notification-bubble ${outPhase && 'bubble-out'} ${outQuick && 'bubble-out-quick'}`}\r\n            onAnimationEnd={animEnded}\r\n          >\r\n            {message}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport const RuleNotification = ({ b, s, highlightS }) => (\r\n  <div>\r\n    <span className={highlightS ? \"text-dim\" : \"\"}>B{b}</span>{\" \"}\r\n    <span className={!highlightS ? \"text-dim\" : \"\"}>S{s}</span>\r\n  </div>\r\n)\r\n\r\nexport default Notifications","import { createContext, useState } from 'react'\r\n\r\nimport shapes from '../static/shapes.json'\r\n\r\nlet gridW = Math.floor(window.innerWidth / 5)\r\nlet gridH = Math.floor(window.innerHeight / 5)\r\n\r\nconst rules = [\r\n  { name: 'Conway\\'s Life', b: '3',       s: '23' },\r\n  { name: '2x2',            b: '36',      s: '125' },\r\n  { name: '34 Life',        b: '34',      s: '34' },\r\n  { name: 'Amoeba',         b: '357',     s: '1358' },\r\n  { name: 'Anneal',         b: '4678',    s: '35678' },\r\n  { name: 'Assimilation',   b: '345',     s: '4567' },\r\n  { name: 'Coagulations',   b: '378',     s: '235678' },\r\n  { name: 'Coral',          b: '3',       s: '45678' },\r\n  { name: 'Day & Night',    b: '3678',    s: '34678' },\r\n  { name: 'Diamoeba',       b: '35678',   s: '5678' },\r\n  { name: 'Gnarl',          b: '1',       s: '1' },\r\n  { name: 'High Life',      b: '36',      s: '23' },\r\n  { name: 'Inverse Life',   b: '0123478', s: '34678' },\r\n  { name: 'Life w/ Death',  b: '3',       s: '012345678' },\r\n  { name: 'Long Life',      b: '345',     s: '5' },\r\n  { name: 'Maze',           b: '3',       s: '12345' },\r\n  { name: 'Mazectric',      b: '3',       s: '1234' },\r\n  { name: 'Morley',         b: '368',     s: '245' },\r\n  { name: 'Move',           b: '368',     s: '245' },\r\n  { name: 'Pseudo Life',    b: '357',     s: '238' },\r\n  { name: 'Replicator',     b: '1357',    s: '1357' },\r\n  { name: 'Seeds',          b: '2',       s: '' },\r\n  { name: 'Serviettes',     b: '234',     s: '' },\r\n  { name: 'Stains',         b: '3678',    s: '235678' },\r\n  { name: 'Untitled',       b: '25',      s: '4' },\r\n  { name: 'Walled Cities',  b: '45678',   s: '2345' }\r\n]\r\n\r\nconst constructFillers = () => {\r\n  return [\r\n    { name: 'Chaotic Random', fill: 'random', config: [\r\n      { name: 'Density', init: 50, range: [1, 99] }\r\n    ]},\r\n    { name: 'Ordered Random', fill: 'wraplines', config: [\r\n      { name: 'Offset A', init: Math.floor(gridW / 20), range: [1, Math.floor(gridW / 2)] },\r\n      { name: 'Offset B', init: Math.floor(gridW / 15), range: [1, Math.floor(gridW / 2)] }\r\n    ]},\r\n    { name: 'Vertical Stripes', fill: 'vstripes', config: [\r\n      { name: 'Spacing', init: 1, range: [1, Math.floor(gridW / 2)] },\r\n      { name: 'Thickness', init: 1, range: [1, Math.floor(gridW / 2)] }\r\n    ]},\r\n    { name: 'Horizontal Stripes', fill: 'hstripes', config: [\r\n      { name: 'Spacing', init: 1, range: [1, Math.floor(gridH / 2)] } ,\r\n      { name: 'Thickness', init: 1, range: [1, Math.floor(gridH / 2)] }\r\n    ]},\r\n    { name: 'Diagonal Stripes', fill: 'dstripes', config: [\r\n      { name: 'Spacing', init: 5, range: [1, Math.floor(Math.min(gridW, gridH) / 2)] },\r\n      { name: 'Thickness', init: 2, range: [1, Math.floor(Math.min(gridW, gridH) / 2)] }\r\n    ]},\r\n    { name: 'Rectangle', fill: 'rect', config: [\r\n      { name: 'Width', init: gridW, range: [2, gridW] }, \r\n      { name: 'Height', init: gridH, range: [2, gridH] }\r\n    ]},\r\n    { name: 'Checkered', fill: 'checkered', config: [\r\n      { name: 'Width', init: 4, range: [1, Math.floor(gridW / 2)] },\r\n      { name: 'Height', init: 4, range: [1, Math.floor(gridH / 2)] }\r\n    ]},\r\n    { name: 'Cross', fill: 'cross', config: [\r\n      { name: 'X Offset', init: 0, range: [-gridW / 2, gridW / 2 - (1 - gridW % 2)] }, // -1 if gridW is even\r\n      { name: 'Y Offset', init: 0, range: [-gridH / 2, gridH / 2 - (1 - gridH % 2)] }, \r\n      { name: 'Width', init: 1, range: [1, gridW / 2] }, \r\n      { name: 'Height', init: 1, range: [1, gridW / 2] }, \r\n    ]},\r\n    { name: 'Mesh', fill: 'mesh', config: [\r\n      { name: 'X Spacing', init: 5, range: [1, Math.floor(gridW / 2)] },\r\n      { name: 'Y Spacing', init: 5, range: [1, Math.floor(gridH / 2)] },\r\n      { name: 'X Thickness', init: 1, range: [1, Math.floor(gridW / 2)] },\r\n      { name: 'X Thickness', init: 1, range: [1, Math.floor(gridH / 2)] }\r\n    ]},\r\n  ]\r\n}\r\n\r\nconst fillers = constructFillers()\r\n\r\nconst contextState = { gridW, gridH, rules, shapes, fillers }\r\nconst DataContext = createContext(contextState)\r\n\r\nconst DataProvider = ({ children }) => {\r\n  const [state, setState] = useState(contextState)\r\n\r\n  const setDimensions = (_gridW, _gridH) => {\r\n    gridW = _gridW; gridH = _gridH\r\n    setState({ ...state, fillers: constructFillers() })\r\n  }\r\n\r\n  return (\r\n    <DataContext.Provider value={{ ...state, setDimensions }}>\r\n      {children}\r\n    </DataContext.Provider>\r\n  )\r\n}\r\n\r\nexport { DataContext, DataProvider }","import { createContext, useState } from \"react\"\r\nimport Notifications from \"../components/notifications/Notifications\"\r\n\r\nconst NotificationContext = createContext({})\r\n\r\nconst NotificationProvider = ({ children }) => {\r\n  const [message, setMessage] = useState(\"\")\r\n  const [timeout, setTimeout] = useState(0)\r\n  const [messageIndex, setMessageIndex] = useState(0)\r\n\r\n  const showNotification = (message, timeout = 0) => {\r\n    setMessage(message)\r\n    setTimeout(timeout)\r\n    setMessageIndex(pv => pv + 1)\r\n  }\r\n\r\n  const hideNotification = () => {\r\n    if (timeout > -1) {\r\n      setTimeout(-1)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <NotificationContext.Provider \r\n      value={{ \r\n        showNotification,\r\n        hideNotification \r\n      }}\r\n    >\r\n      {children}\r\n      <Notifications \r\n        message={message} \r\n        timeout={timeout}\r\n        messageIndex={messageIndex} \r\n      />\r\n    </NotificationContext.Provider>\r\n  )\r\n}\r\n\r\nexport { NotificationContext, NotificationProvider }","import { useRef, useEffect } from 'react'\r\nimport './prototypes.css'\r\n\r\nlet RENDER = 0\r\nconst RUN_ONCE = 0\r\n\r\nconst gw = 100\r\nconst gh = 100\r\n\r\nconst size = 10\r\nconst stepSize = .05\r\n\r\nconst grid = []\r\nlet pop = []\r\n\r\nwindow.updateCellAt = (x, y, v) => {\r\n  pop[y][x] = v\r\n}\r\n\r\nwindow.randomisePop = () => {\r\n  for (let yi in grid) {\r\n    for (let xi in grid[yi]) {\r\n      pop[yi][xi] = Math.random() > .5 ? 1 : 0\r\n    } \r\n  }\r\n}\r\n\r\nconst aliveAt = (x, y) => {\r\n  if (x > -1 && y > -1 && x < gw && y < gh) {\r\n    return pop[y][x]\r\n  } else return 0\r\n}\r\n\r\nwindow.aliveAt = aliveAt\r\n\r\nwindow.getLiveNeighbours = (x, y) => {\r\n  const neighbours = [\r\n    aliveAt(x - 1, y), aliveAt(x - 1, y - 1), aliveAt(x, y - 1), aliveAt(x + 1, y - 1),\r\n    aliveAt(x + 1, y), aliveAt(x + 1, y + 1), aliveAt(x, y + 1), aliveAt(x - 1, y + 1)\r\n  ]\r\n  \r\n  return neighbours.reduce((i, c) => i + c)\r\n}\r\n\r\nwindow.updateNeighbour = (x, y, d, v) => {\r\n  switch (d) {\r\n    case 'l':   pop[  y  ][x - 1] = v; break\r\n    case 'lt':  pop[y - 1][x - 1] = v; break\r\n    case 't':   pop[y - 1][  x  ] = v; break\r\n    case 'tr':  pop[y - 1][x + 1] = v; break\r\n    case 'r':   pop[  y  ][x + 1] = v; break\r\n    case 'rb':  pop[y + 1][x + 1] = v; break\r\n    case 'b':   pop[y + 1][  x  ] = v; break\r\n    case 'bl':  pop[y + 1][x - 1] = v; break\r\n  }\r\n}\r\n\r\nconst Canvasboxes = (props) => {\r\n\r\n  const canvasRef = useRef(null)\r\n\r\n  const update = (timeElasped, frameCount) => {\r\n    for (let yi in grid) {\r\n      for (let xi in grid[yi]) {\r\n        let g = grid[yi][xi]\r\n        const p = pop[yi][xi]\r\n\r\n        if (g < p) {\r\n          g = Math.min(g + stepSize, 1)\r\n        } else if (g > p) {\r\n          g = Math.max(g - stepSize, 0)\r\n        }\r\n\r\n        grid[yi][xi] = g\r\n      } \r\n    }\r\n\r\n    if (frameCount % 20 === 0) {\r\n      // fillPop(() => Math.random() > .5 ? 1 : 0)\r\n      const _pop = []\r\n      for (let yi = 0; yi < pop.length; yi++) {\r\n        const row = []\r\n        for (let xi = 0; xi < pop[yi].length; xi++) {\r\n          try {\r\n            const aliveNeighbours = getLiveNeighbours(xi, yi)\r\n\r\n            if (pop[yi][xi]) {\r\n              row.push(aliveNeighbours < 2 || aliveNeighbours > 3 ? 0 : 1)\r\n            } else {\r\n              row.push(aliveNeighbours === 3 ? 1 : 0)\r\n            }\r\n          } catch (e) {\r\n            throw(`${typeof xi}, ${typeof yi}: ${e}`)\r\n          }\r\n        }\r\n\r\n        _pop.push(row)\r\n      }\r\n\r\n      pop = _pop\r\n    }\r\n  }\r\n\r\n  const draw = (ctx, frameCount) => {\r\n    ctx.fillStyle = 'rgb(0, 0, 0)'\r\n    ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height)\r\n    ctx.font = \"30px Arial\";\r\n\r\n    for (let yi in grid) {\r\n      const row = grid[yi]\r\n      for (let xi in row) {\r\n        const g = row[xi]\r\n        const sz = g * size\r\n        const sc_mod = (size - sz) / 2\r\n\r\n        ctx.fillStyle = `rgb(${g * 255}, ${g * 255}, ${g * 255})`\r\n        // ctx.fillStyle = `white`\r\n        ctx.fillRect(xi * size + sc_mod, yi * size + sc_mod, sz, sz)\r\n\r\n        // ctx.fillStyle = 'red'\r\n        // ctx.fillText(`${xi}, ${yi}`, xi * size + 20, yi * size + 30)\r\n      }\r\n    }\r\n  }\r\n\r\n  const fillPop = (fillRule) => {\r\n    for (let yi in pop) {\r\n      for (let xi in pop[yi]) {\r\n        pop[yi][xi] = fillRule(xi, yi)\r\n      } \r\n    }\r\n  }\r\n\r\n  const aliveAt = (x, y) => {\r\n    try {\r\n      if (x > -1 && y > -1 && x < gw && y < gh) {\r\n        return pop[y][x]\r\n      } else return 0\r\n    } catch {\r\n      throw(`Invalid coords? ${x}, ${y} :: ${typeof x}, ${typeof y}`)\r\n    }\r\n  }\r\n\r\n  const getLiveNeighbours = (x, y) => {\r\n    const neighbours = [\r\n      aliveAt(x - 1, y), aliveAt(x - 1, y - 1), aliveAt(x, y - 1), aliveAt(x + 1, y - 1),\r\n      aliveAt(x + 1, y), aliveAt(x + 1, y + 1), aliveAt(x, y + 1), aliveAt(x - 1, y + 1)\r\n    ]\r\n    \r\n    return neighbours.reduce((i, c) => i + c)\r\n  }\r\n\r\n  const draw_medium = (ctx, frameCount) => {\r\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height)\r\n    ctx.fillStyle = '#000000'\r\n    ctx.beginPath()\r\n    ctx.arc(50, 100, 20 * Math.sin(frameCount * .05) ** 2, 0, 2 * Math.PI)\r\n    ctx.fill()\r\n  }\r\n\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current\r\n    const context = canvas.getContext('2d')\r\n    const startTime = Date.now()\r\n\r\n    let timeElasped = 0\r\n\r\n    let frameCount = 0\r\n    let animationFrameId\r\n\r\n    const init = () => {\r\n      for (let y = 0; y < gh; y++) {\r\n        const rowG = []\r\n        const rowP = []\r\n        for (let x = 0; x < gw; x++) {\r\n          const rando = Math.random() > .5 ? 1 : 0\r\n          rowG.push(rando)\r\n          rowP.push(rando)\r\n        }\r\n        grid.push(rowG)\r\n        pop.push(rowP)\r\n      }\r\n\r\n      canvas.setAttribute('width', window.innerWidth)\r\n      canvas.setAttribute('height', window.innerHeight)\r\n    }\r\n\r\n    const render = () => {\r\n      updateFrames()\r\n\r\n      update(timeElasped, frameCount)\r\n      draw(context, frameCount)\r\n\r\n      animationFrameId = window.requestAnimationFrame(render)\r\n    }\r\n\r\n    const updateFrames = () => {\r\n      frameCount += 1\r\n\r\n      const now = Date.now()\r\n      timeElasped = now - startTime\r\n      // console.log(`frame: ${frameCount}, timeElasped: ${timeElasped}ms, FPS: ${frameCount / (timeElasped / 1000)}`)\r\n    }\r\n\r\n    init()\r\n    if (RENDER) {\r\n      render()\r\n\r\n      if (RUN_ONCE) {\r\n        RENDER = 0\r\n      }\r\n    }\r\n    \r\n    return () => {\r\n      window.cancelAnimationFrame(animationFrameId)\r\n    }\r\n  }, [draw])\r\n\r\n  return <canvas ref={canvasRef} {...props} />\r\n}\r\n\r\nexport default Canvasboxes\r\n","import { useRef, useState, useEffect } from 'react'\r\n\r\nimport './prototypes.css'\r\n\r\nlet playActive = true\r\n\r\nlet size = 5\r\n\r\nlet tw = Math.floor(window.innerWidth / 5)\r\nlet th = Math.floor(window.innerHeight / size)\r\n\r\nlet gw = tw\r\nlet gh = th\r\n\r\nlet cw = gw - 1\r\nlet ch = gh - 1\r\n\r\nlet speed = 4\r\n\r\nlet grid = []\r\nlet neighbours = []\r\n\r\nlet icIndex = 0\r\n\r\nlet cond_S = [2, 3]\r\nlet cond_B = [3]\r\n\r\nconst conditionPresets = [\r\n  {name: 'Life', b: '3', s: '23'},\r\n  {name: 'Replicator', b: '1357', s: '1357'},\r\n  {name: 'Seeds', b: '2', s: ''},\r\n  {name: 'Untitled', b: '25', s: '4'},\r\n  {name: 'Life w/ Death', b: '3', s: '012345678'},\r\n  {name: '34 Life', b: '34', s: '34'},\r\n  {name: 'Diamoeba', b: '35678', s: '5678'},\r\n  {name: '2x2', b: '36', s: '125'},\r\n  {name: 'HighLife', b: '36', s: '23'},\r\n  {name: 'Day & Night', b: '3678', s: '34678'},\r\n  {name: 'Morley', b: '368', s: '245'},\r\n  {name: 'Anneal', b: '4678', s: '35678'}\r\n]\r\n\r\nwindow.neighbourStatus = (x, y) => {\r\n  return {\r\n    top: top(x, y),\r\n    topRt: topRt(x, y),\r\n    right: right(x, y),\r\n    botRt: botRt(x, y),\r\n    bottom: bottom(x, y),\r\n    botLt: botLt(x, y),\r\n    left: left(x, y),\r\n    topLt: topLt(x, y)\r\n  }\r\n}\r\n\r\nwindow.aliveAt = (x, y) => {\r\n  return grid[y][x]\r\n}\r\n\r\nconst top = (x, y) => y > 0 ? grid[y - 1][x] : 0\r\nconst topRt = (x, y) => x < cw && y > 0 ? grid[y - 1][x + 1] : 0\r\nconst right = (x, y) => x < cw ? grid[y][x + 1] : 0\r\nconst botRt = (x, y) => x < cw && y < ch ? grid[y + 1][x + 1] : 0\r\nconst bottom = (x, y) => y < ch ? grid[y + 1][x] : 0\r\nconst botLt = (x, y) => x > 0 && y < ch ? grid[y + 1][x - 1] : 0\r\nconst left = (x, y) => x > 0 ? grid[y][x - 1] : 0\r\nconst topLt = (x, y) => x > 0 && y > 0 ? grid[y - 1][x - 1] : 0\r\n\r\nconst _top = (x, y) => grid[y - 1][x]\r\nconst _topRt = (x, y) => grid[y - 1][x + 1]\r\nconst _right = (x, y) => grid[y][x + 1]\r\nconst _botRt = (x, y) => grid[y + 1][x + 1]\r\nconst _bottom = (x, y) => grid[y + 1][x]\r\nconst _botLt = (x, y) => grid[y + 1][x - 1]\r\nconst _left = (x, y) => grid[y][x - 1]\r\nconst _topLt = (x, y) => grid[y - 1][x - 1]\r\nconst _outOfBounds = () => 0\r\n\r\nconst reset = () => {\r\n  updateIndex = 0\r\n  totalTimeElapsed = 0\r\n\r\n  if (tw !== gw) { gw = tw; cw = gw - 1 }\r\n  if (th !== gh) { gh = th; ch = gh - 1 }\r\n\r\n  switch (icIndex) {\r\n    case 0: fillRandom(.25); break\r\n    case 1: fillHStripe(); break\r\n    case 2: fillVStripe(); break\r\n    case 3: fillHStripes(); break\r\n    case 4: fillVStripes(); break\r\n    case 5: fillCheckered(); break\r\n    case 6: fillRect(); break\r\n    case 7: fillCross(); break\r\n    case 8: fillGliderGun(); break\r\n  }\r\n}\r\n\r\nconst fill = (fillRule) => {\r\n  const mat = []\r\n  const nei = []\r\n  for (let y = 0; y < gh; y++) {\r\n    mat[y] = []\r\n    nei[y] = []\r\n    for (let x = 0; x < gw; x++) {\r\n      mat[y][x] = fillRule(x, y)\r\n\r\n      if (x === 0 && y === 0) nei[y][x] = n_topLt\r\n      else if (x === cw && y === 0) nei[y][x] = n_topRt\r\n      else if (x === cw && y === ch) nei[y][x] = n_botRt\r\n      else if (x === 0 && y === ch) nei[y][x] = n_botLt\r\n      else if (y === 0) nei[y][x] = n_top\r\n      else if (x === cw) nei[y][x] = n_right\r\n      else if (y === ch) nei[y][x] = n_bottom\r\n      else if (x === 0) nei[y][x] = n_left\r\n      else nei[y][x] = n_center\r\n    }\r\n  }\r\n  grid = mat\r\n  neighbours = nei\r\n}\r\n\r\nconst fillRandom = (selector = .5) => fill(() => Math.random() > (1 - selector) ? 1 : 0)\r\nconst fillVStripe = (index = Math.floor(gw / 2)) => fill((x) => index === x ? 1 : 0)\r\nconst fillHStripe = (index = Math.floor(gh / 2)) => fill((x, y) => index === y ? 1 : 0)\r\nconst fillHStripes = () => fill((x, y) => y % 2)\r\nconst fillVStripes = () => fill((x) => x % 2)\r\n\r\nconst fillCheckered = () => {\r\n  let isChecked = false\r\n  const mat = []\r\n  for (let y = 0; y < gh; y++) {\r\n    mat[y] = []\r\n    for (let x = 0; x < gw; x++) {\r\n      isChecked = y > 0 && x === 0 ? !mat[y - 1][0] : !isChecked\r\n      mat[y][x] = isChecked\r\n    }\r\n  }\r\n  grid = mat\r\n}\r\n\r\nconst fillRect = () => fill((x, y) => x === 20 || y === 20 || x === cw - 20 || y === ch - 20 ? 1 : 0)\r\nconst fillCross = () => fill((x, y) => x === Math.floor(gw / 2) || y === Math.floor(gh / 2) ? 1 : 0)\r\n\r\nconst fillGliderGun = (sx = 34, sy = 10) => {\r\n  const mat = []\r\n  for (let y = 0; y < gh; y++) {\r\n    mat[y] = []\r\n    for (let x = 0; x < gw; x++) {\r\n      mat[y][x] = 0\r\n    }\r\n  }\r\n\r\n  sx -= 24\r\n\r\n  mat[sy][sx + 24] = 1\r\n\r\n  sy += 1\r\n  mat[sy][sx + 22] = 1\r\n  mat[sy][sx + 24] = 1\r\n\r\n  sy += 1\r\n  mat[sy][sx + 12] = 1\r\n  mat[sy][sx + 13] = 1\r\n  mat[sy][sx + 20] = 1\r\n  mat[sy][sx + 21] = 1\r\n  mat[sy][sx + 34] = 1\r\n  mat[sy][sx + 35] = 1\r\n\r\n  sy += 1\r\n  mat[sy][sx + 11] = 1\r\n  mat[sy][sx + 15] = 1\r\n  mat[sy][sx + 20] = 1\r\n  mat[sy][sx + 21] = 1\r\n  mat[sy][sx + 34] = 1\r\n  mat[sy][sx + 35] = 1\r\n\r\n  sy += 1\r\n  mat[sy][sx] = 1\r\n  mat[sy][sx + 1] = 1\r\n  mat[sy][sx + 10] = 1\r\n  mat[sy][sx + 16] = 1\r\n  mat[sy][sx + 20] = 1\r\n  mat[sy][sx + 21] = 1\r\n\r\n  sy += 1\r\n  mat[sy][sx] = 1\r\n  mat[sy][sx + 1] = 1\r\n  mat[sy][sx + 10] = 1\r\n  mat[sy][sx + 14] = 1\r\n  mat[sy][sx + 16] = 1\r\n  mat[sy][sx + 17] = 1\r\n  mat[sy][sx + 22] = 1\r\n  mat[sy][sx + 24] = 1\r\n\r\n  sy += 1\r\n  mat[sy][sx + 10] = 1\r\n  mat[sy][sx + 16] = 1\r\n  mat[sy][sx + 24] = 1\r\n\r\n  sy += 1\r\n  mat[sy][sx + 11] = 1\r\n  mat[sy][sx + 15] = 1\r\n\r\n  sy += 1\r\n  mat[sy][sx + 12] = 1\r\n  mat[sy][sx + 13] = 1\r\n\r\n  grid = mat\r\n}\r\n\r\nconst fillCustom = () => {\r\n  \r\n}\r\n\r\nconst n_top = [_right, _botRt, _bottom, _botLt, _left]\r\nconst n_topRt = [_bottom, _botLt, _left]\r\nconst n_right = [_top, _bottom, _botLt, _left, _topLt]\r\nconst n_botRt = [_top, _left, _topLt]\r\nconst n_bottom = [_top, _topRt, _right, _left, _topLt]\r\nconst n_botLt = [_top, _topRt, _right]\r\nconst n_left = [_top, _topRt, _right, _botRt, _bottom]\r\nconst n_topLt = [_right, _botRt, _bottom]\r\nconst n_center = [_top, _topRt, _right, _botRt, _bottom, _botLt, _left, _topLt]\r\n\r\nconst neighbour_checks = [top, topRt, right, botRt, bottom, botLt, left, topLt]\r\n\r\nlet updateIndex = 0\r\nlet totalTimeElapsed = 0\r\n\r\nconst update = (findex) => {\r\n  if (findex % speed === 0) {\r\n    // const start = Date.now()\r\n    const pop = []\r\n\r\n    for (let yi = 0; yi < grid.length; yi++) {\r\n      const row = []\r\n      for (let xi = 0; xi < grid[yi].length; xi++) {\r\n        let alive = 0\r\n        for (let n of neighbours[yi][xi]) {\r\n          alive += n(xi, yi)\r\n        }\r\n\r\n        if (grid[yi][xi]) {\r\n          /* Survival */\r\n          row.push(cond_S.indexOf(alive) > -1)\r\n        } else {\r\n          /* New */\r\n          row.push(cond_B.indexOf(alive) > -1)\r\n        }\r\n      }\r\n\r\n      pop.push(row)\r\n    }\r\n\r\n    grid = pop\r\n    updateIndex += 1\r\n    // const timeElapsed = Date.now() - start\r\n    // totalTimeElapsed += timeElapsed\r\n\r\n    // console.log(`timeElapsed: ${timeElapsed}, avg: ${totalTimeElapsed / updateIndex}`)\r\n  }\r\n}\r\n\r\nconst draw = (ctx) => {\r\n  ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height)\r\n  ctx.fillStyle = '#ffffff'\r\n  for (let yi = 0; yi < grid.length; yi++) {\r\n    for (let xi = 0; xi < grid[yi].length; xi++) {\r\n      if (grid[yi][xi]) {\r\n        ctx.fillRect(xi * size, yi * size, size, size)\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nconst GameOfLife = (props) => {\r\n  const canvasRef = useRef(null)\r\n\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current\r\n    const context = canvas.getContext('2d')\r\n    const startTime = Date.now()\r\n\r\n    let findex = 0, animationFrameId\r\n\r\n    const init = () => {\r\n      fillRandom(.5)\r\n\r\n      canvas.setAttribute('width', window.innerWidth)\r\n      canvas.setAttribute('height', window.innerHeight)\r\n    }\r\n\r\n    const render = () => {\r\n      findex += 1\r\n      if (playActive) {\r\n        update(findex)\r\n        draw(context)\r\n      }\r\n      // console.log(\"FPS: \" + (findex / (Date.now() - startTime) * 1000))\r\n      animationFrameId = window.requestAnimationFrame(render)\r\n    }\r\n\r\n    init()\r\n    render()\r\n\r\n    return () => {\r\n      window.cancelAnimationFrame(animationFrameId)\r\n    }\r\n  }, [draw])\r\n\r\n  return (\r\n    <div className='life-container'>\r\n      <canvas ref={canvasRef} {...props} />\r\n\r\n      <Controls />\r\n    </div>\r\n  )\r\n}\r\n\r\nconst Controls = () => {\r\n  const [isPlaying, setIsPlaying] = useState(true)\r\n\r\n  const toggleIsPlaying = () => {\r\n    playActive = !isPlaying\r\n    setIsPlaying(playActive)\r\n  }\r\n\r\n  const updateIcIndex = (event) => {\r\n    icIndex = event.target.selectedIndex\r\n  }\r\n\r\n  const updateConditions = (event) => {\r\n    const {b, s} = conditionPresets[event.target.selectedIndex]\r\n    cond_S = s.split('').map(cond => parseInt(cond))\r\n    cond_B = b.split('').map(cond => parseInt(cond))\r\n    console.log(`Selected conditions: B: ${cond_B}, S: ${cond_S}`)\r\n  }\r\n\r\n  const updateTw = (event) => {\r\n    tw = Math.clamp(event.target.value, 10, 1000)\r\n  }\r\n\r\n  const updateTh = (event) => {\r\n    th = Math.clamp(event.target.value, 10, 1000)\r\n  }\r\n\r\n  const updateSize = (event) => {\r\n    size = Math.clamp(event.target.value, 2, 50)\r\n  }\r\n\r\n  const updateSpeed = (event) => {\r\n    speed = 41 - Math.clamp(event.target.value, 1, 40)\r\n  }\r\n\r\n  return (\r\n    <div className='life-controls'>\r\n      <Text fontSize={30} fontWeight={900} padVert={8}>CONTROLS</Text>\r\n\r\n      <Button width={148} text={isPlaying ? 'Pause' : 'Play'} onClick={toggleIsPlaying} />\r\n\r\n      <div />\r\n\r\n      <Button width={148} marginBot={8} text='Reset' onClick={reset} />\r\n\r\n      <Text >Initial Condition: *</Text>\r\n      <select onChange={updateIcIndex}>\r\n        <option>Random</option>\r\n        <option>Hori Stripe</option>\r\n        <option>Vert Stripe</option>\r\n        <option>Hori Stripes</option>\r\n        <option>Vert Stripes</option>\r\n        <option>Checkered</option>\r\n        <option>Rect Kinda</option>\r\n        <option>Cross</option>\r\n        <option>Glider Gun</option>\r\n      </select>\r\n\r\n      <Text padTop={8}>Rules:</Text>\r\n      <select onChange={updateConditions}>\r\n        {conditionPresets.map(({name}) => <option key={name}>{name}</option>)}\r\n      </select>\r\n      \r\n      <Text padTop={8}>Width: *</Text>\r\n      <input defaultValue={gw} onChange={updateTw}></input>\r\n\r\n      <Text padTop={8}>Height: *</Text>\r\n      <input defaultValue={gh} onChange={updateTh}></input>\r\n\r\n      <Text padTop={8}>Size:</Text>\r\n      <input defaultValue={size} onChange={updateSize}></input>\r\n\r\n      <Text padTop={8}>Speed:</Text>\r\n      <input defaultValue={41 - speed} onChange={updateSpeed} ></input>\r\n\r\n      <Text fontSize={12} padTop={8}>* <i>These changes will only be visible on a reset</i></Text>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst Text = ({ children, fontSize, fontWeight, color, padVert, padTop, padBot }) => {\r\n  return (\r\n    <div style={{\r\n      fontSize: fontSize || 15,\r\n      fontWeight: fontWeight || 500,\r\n      color: color || '#f7f7f7',\r\n      paddingTop: padVert || padTop || 0,\r\n      paddingBottom: padVert || padBot || 0\r\n    }}>{children}</div>\r\n  )\r\n}\r\n\r\nconst Button = ({ text, onClick, width, marginTop, marginBot }) => {\r\n  return (\r\n    <input type=\"button\" value={text} style={{\r\n      height: 24, width: width || 'auto', marginTop: marginTop || 0, marginBottom: marginBot || 0\r\n    }} onClick={onClick} />\r\n  )\r\n}\r\n\r\nMath.clamp = (x, a, b) => Math.min(Math.max(x, a), b)\r\n\r\nexport default GameOfLife","import titles from '../static/titles.json'\r\n\r\nlet bX, bY, selectedShape\r\n\r\nconst randomInit = [\r\n  'random', 'vstripes', 'hstripes', 'dstripes', \r\n  'rect','checkered', 'cross', 'mesh', 'wraplines'\r\n]\r\n\r\nconst setBounds = (x, y) => {\r\n  bX = x\r\n  bY = y\r\n}\r\n\r\nconst setShape = shape => {\r\n  selectedShape = shape\r\n}\r\n\r\nconst getShape = (gX, gY) => {\r\n  const cells = []\r\n  let outOfBounds = false\r\n  for (let [offX, offY] of selectedShape) {\r\n    const x = gX + offX\r\n    const y = gY + offY\r\n    if (checkBounds(x, y)) {\r\n      cells.push([x, y])\r\n    } else {\r\n      if (!outOfBounds) {\r\n        outOfBounds = true\r\n      }\r\n    }\r\n  }\r\n\r\n  return { cells, outOfBounds }\r\n}\r\n\r\nconst initTitle = (isMobile) => {\r\n  const ti = isMobile ? 0 : 1\r\n  const finalShape = []\r\n  for (let i = 0; i < 2; i++) {\r\n    const { width, height, shape } = titles[ti][i]\r\n    const sx = Math.floor((bX / 2) - (width / 2))\r\n    const sy = 10 + (i * (height + Math.floor(height / 3)))\r\n    shape.forEach(([x, y]) => {\r\n      finalShape.push([x + sx, y + sy])\r\n    })\r\n  }\r\n  const grid = create2dArray(() => 0)\r\n  finalShape.forEach(([x, y]) => grid[y][x] = 1)\r\n  return grid\r\n}\r\n\r\nconst createGrid = ({ fill, grid, args }) => {\r\n  return constructGrid(fill, grid, args)\r\n}\r\n\r\nconst createRandom = ({ grid }) => {\r\n  const fill = randomInit[Math.floor(Math.random() * randomInit.length)]\r\n  console.log(`Created random fill: ${fill}`)\r\n  return createGrid({ fill, grid })\r\n}\r\n\r\nconst reCreateGrid = ({ grid }) => {\r\n  return create2dArray(({ x, y }) => (\r\n    (grid[y] && grid[y][x]) || 0\r\n  ))\r\n}\r\n\r\nconst constructGrid = (fill, grid, args) => {\r\n  switch (fill) {\r\n    case 'clear': return clear()\r\n    case 'invert': return invert(grid)\r\n    case 'random': return random(args)\r\n    case 'vstripes': return vstripes(args)\r\n    case 'hstripes': return hstripes(args)\r\n    case 'dstripes': return dstripes(args)\r\n    case 'rect': return rect(args)\r\n    case 'checkered': return checkered(args)\r\n    case 'cross': return cross(args)\r\n    case 'mesh': return mesh(args)\r\n    case 'wraplines': return wraplines(args)\r\n    default: break\r\n  }\r\n}\r\n\r\nconst clear = () => create2dArray(() => 0)\r\nconst invert = (grid) => create2dArray(({ x, y }) => 1 - grid[y][x])\r\n\r\nconst random = (args = [50]) => create2dArray(() => {\r\n  return Math.random() < args[0] / 100 ? 1 : 0\r\n})\r\n\r\nconst vstripes = (args = [1, 1]) => {\r\n  const [s, w] = args\r\n  let si, wi, a\r\n  return create2dArray(() => {\r\n    if (a) {\r\n      if (wi < w) { wi += 1; a = 1 } \r\n      else { si = 1; a = 0 }\r\n    } else {\r\n      if (si < s) { si += 1; a = 0 } \r\n      else { a = 1; wi = 1 }\r\n    }\r\n    return a\r\n  }, () => {\r\n    a = 0; wi = 0; si = 0\r\n  })\r\n}\r\n\r\nconst hstripes = (args = [1, 1]) => {\r\n  const [s, h] = args\r\n  let si = 0, hi = 0, a = 0\r\n  return create2dArray(() => {\r\n    return a\r\n  }, () => {\r\n    if (a) {\r\n      if (hi < h) { hi += 1; a = 1 }\r\n      else { si = 1; a = 0 }\r\n    } else {\r\n      if (si < s) { si += 1; a = 0 }\r\n      else { a = 1; hi = 1 }\r\n    }\r\n  })\r\n}\r\n\r\nconst dstripes = (args = [1, 1]) => {\r\n  const [s, w] = args\r\n  let snapshot = {}\r\n  let wi = 0, si = 0, a = 0\r\n  return create2dArray(({ x }) => {\r\n    if (x === 1) snapshot = { wi, si, a }\r\n    if (a) {\r\n      if (wi < w) { wi += 1; a = 1 } \r\n      else { si = 1; a = 0 }\r\n    } else {\r\n      if (si < s) { si += 1; a = 0 } \r\n      else { a = 1; wi = 1 }\r\n    }\r\n    return a\r\n  }, ({ y }) => {\r\n    if (y > 0) {\r\n      ({ wi, si, a } = snapshot)\r\n    }\r\n  })\r\n}\r\n\r\nconst rect = (args = [bX, bY]) => {\r\n  const [w, h] = args\r\n  const start = { \r\n    x: Math.floor((bX - w) / 2), \r\n    y: Math.floor((bY - h) / 2)\r\n  }\r\n  const end = { x: start.x + w - 1, y: start.y + h - 1 }\r\n  const grid = create2dArray(() => 0)\r\n  for (let wi = start.x; wi <= end.x; wi++) {\r\n    grid[start.y][wi] = 1\r\n    grid[end.y][wi] = 1\r\n  }\r\n  for (let hi = start.y; hi <= end.y; hi++) {\r\n    grid[hi][start.x] = 1\r\n    grid[hi][end.x] = 1\r\n  }\r\n  return grid\r\n}\r\n\r\nconst checkered = (args = [4, 4]) => {\r\n  const [w, h] = args\r\n  let wi = 0, hi = 0, astart = 0, a = astart\r\n  return create2dArray(() => {\r\n    if (wi < w) { wi += 1 }\r\n    else { wi = 1; a = 1 - a }\r\n    return a\r\n  }, () => {\r\n    if (hi < h) { hi += 1 }\r\n    else { hi = 1; astart = 1 - astart }\r\n    a = astart; wi = 0\r\n  })\r\n}\r\n\r\nconst cross = (args = [0, 0, bX, bY]) => {\r\n  const [xoff, yoff, w, h] = args\r\n  const xstart = Math.floor(bX / 2) + xoff - Math.floor(w / 2)\r\n  const ystart = Math.floor(bY / 2) + yoff - Math.floor(h / 2)\r\n  const grid = create2dArray(() => 0)\r\n  for (let xi = 0; xi < bX; xi++) {\r\n    for (let hi = 0; hi < h; hi++) {\r\n      if (ystart + hi < bY) {\r\n        grid[ystart + hi][xi] = 1\r\n      }\r\n    }\r\n  }\r\n  for (let yi = 0; yi < bY; yi++) {\r\n    for (let wi = 0; wi < w; wi++) {\r\n      if (xstart + wi < bX) {\r\n        grid[yi][xstart + wi] = 1\r\n      }\r\n    }\r\n  }\r\n  return grid\r\n}\r\n\r\nconst mesh = (args = [1, 1, 1, 1]) => {\r\n  const [sx, sy, w, h] = args\r\n  let sxi, wi, ax\r\n  let syi = 0, hi = 0, ay = 0\r\n  return create2dArray(() => {\r\n    if (ay) {\r\n      return 1\r\n    } else if (ax) {\r\n      if (wi < w) { wi += 1; ax = 1 }\r\n      else { sxi = 1; ax = 0 }\r\n    } else {\r\n      if (sxi < sx) { sxi += 1; ax = 0 }\r\n      else { ax = 1; wi = 1 }\r\n    }\r\n    return ax\r\n  }, () => {\r\n    ax = 0; wi = 0; sxi = 0\r\n    if (ay) {\r\n      if (hi < h) { hi += 1; ay = 1 }\r\n      else { syi = 1; ay = 0 }\r\n    } else {\r\n      if (syi < sy) { syi += 1; ay = 0 }\r\n      else { ay = 1; hi = 1 }\r\n    }\r\n  })\r\n}\r\n\r\nconst wraplines = (args = [1, 1]) => {\r\n  const [w, s] = args\r\n  let si = 0, wi = 0, a = 0\r\n  return create2dArray(() => {\r\n    if (a) {\r\n      if (wi < w) { wi += 1; a = 1 } \r\n      else { si = 1; a = 0 }\r\n    } else {\r\n      if (si < s) { si += 1; a = 0 } \r\n      else { a = 1; wi = 1 }\r\n    }\r\n    return a\r\n  })\r\n}\r\n\r\nconst create2dArray = (func, yiter = () => {}) => {\r\n  const array = []\r\n  for (let y = 0; y < bY; y++) {\r\n    array[y] = []\r\n    yiter({ y })\r\n    for (let x = 0; x < bX; x++) {\r\n      array[y][x] = func({ x, y })\r\n    }\r\n  }\r\n  return array\r\n}\r\n\r\n/* Yes this is a duplicate of grid.js checkBounds */\r\nconst checkBounds = (x, y) => x > -1 && y > -1 && x < bX && y < bY\r\n\r\nexport { setBounds, setShape, getShape, createGrid, reCreateGrid, createRandom, initTitle }","let monoShade, shades, isLooped, ages, ageMax, updateAge, selectedShadesSeq, preserveAges\r\n\r\nconst getShade = (x, y) => shades[ages[y][x]]\r\n\r\nconst initShades = (grid) => {\r\n  selectedShadesSeq = [\"#ffffff\"]\r\n  isLooped = false\r\n  resetAges(grid)\r\n  constructShades(selectedShadesSeq)\r\n}\r\n\r\nconst setShades = ({ shadeSeq, isLoop, grid }) => {\r\n  preserveAges = isLoop && isLooped && selectedShadesSeq.length === shadeSeq\r\n  selectedShadesSeq = shadeSeq\r\n  isLooped = isLoop\r\n  constructShades(shadeSeq, grid)\r\n}\r\n\r\nconst updateShades = ({ grid }) => {\r\n  resetAges(grid)\r\n  constructShades(selectedShadesSeq)\r\n}\r\n\r\nconst resetAges = (grid) => ages = grid.map(row => row.map(_ => 0))\r\n\r\nconst constructShades = (shadeSeq) => {\r\n  if (shadeSeq.length > 1) {\r\n    shades = ['age starts from index 1', ...shadeSeq]\r\n    ageMax = shades.length - 1\r\n    if (!preserveAges) { // if this true than _updateLoopedAge is already selected\r\n      ages = ages.map(row => row.map(age => Math.min(age, ageMax)))\r\n      updateAge = isLooped ? _updateLoopedAge : _updateAge\r\n    }\r\n  } else {\r\n    monoShade = shadeSeq[0]\r\n    updateAge = () => {}\r\n  }\r\n}\r\n\r\nconst _incrementAge = (x, y) => {\r\n  if (ages[y][x] < ageMax) {\r\n    ages[y][x] += 1\r\n  }\r\n}\r\n\r\nconst _incrementLoopedAge = (x, y) => {\r\n  if (ages[y][x] < ageMax) {\r\n    ages[y][x] += 1\r\n  } else {\r\n    ages[y][x] = 1\r\n  }\r\n}\r\n\r\nconst _resetAge = (x, y) => {\r\n  if (ages[y][x] > 0) {\r\n    ages[y][x] = 0\r\n  }\r\n}\r\n\r\nconst _updateAge = (isAlive, x, y) => {\r\n  if (isAlive) _incrementAge(x, y)\r\n  else _resetAge(x, y)\r\n}\r\n\r\nconst _updateLoopedAge = (isAlive, x, y) => {\r\n  if (isAlive) _incrementLoopedAge(x, y)\r\n  else _resetAge(x, y)\r\n}\r\n\r\nexport { monoShade, getShade, initShades, setShades, updateShades, resetAges, updateAge }","import { setBounds, setShape, getShape, createGrid, reCreateGrid, createRandom, initTitle } from './shapes'\r\nimport { setRule, checkSurvival, checkBirth } from './rules'\r\nimport { monoShade, getShade, initShades, setShades, updateShades, resetAges, updateAge } from './shades'\r\n\r\nlet gridW, gridH, size, brushSize\r\nlet grid, neighbours, wrapEnabled\r\nlet pCells, pOutOfBounds, pX, pY // pX, pY = Current preview cell coordinates\r\nlet inverseBg, alphaBg, background, drawBackground, isClearCanvas // background = inverseBg + alphaBg\r\n\r\n\r\n/* --- Exports --- */\r\n\r\nconst initGrid = (isMobile) => {\r\n  size = 5\r\n  brushSize = 25\r\n  calculateDimensions()\r\n\r\n  wrapEnabled = false\r\n\r\n  grid = initTitle(isMobile)\r\n  generateNeighbours(gridW, gridH)\r\n\r\n  alphaBg = '00'\r\n  background = inverseBg + alphaBg // inverseBg initialised in World init\r\n  initShades(grid)\r\n\r\n  isClearCanvas = true\r\n  updateDrawBackground()\r\n}\r\n\r\nconst reInitGrid = () => {\r\n  calculateDimensions()\r\n  grid = reCreateGrid({ grid })\r\n  updateShades({ grid })\r\n  generateNeighbours(gridW, gridH)\r\n\r\n  return { gridW, gridH }\r\n}\r\n\r\nconst updateGrid = () => {\r\n  let isAlive\r\n  const pop = []\r\n  for (let yi = 0; yi < grid.length; yi++) {\r\n    const row = []\r\n    for (let xi = 0; xi < grid[yi].length; xi++) {\r\n      const alive = neighbours[yi][xi](xi, yi)\r\n      if (grid[yi][xi]) {\r\n        isAlive = checkSurvival(alive, xi, yi)\r\n      } else {\r\n        isAlive = checkBirth(alive, xi, yi)\r\n      }\r\n      row.push(isAlive)\r\n      updateAge(isAlive, xi, yi)\r\n    }\r\n    pop.push(row)\r\n  }\r\n  grid = pop\r\n}\r\n\r\nconst drawGrid = (ctx) => {\r\n  drawBackground(ctx)\r\n  ctx.fillStyle = monoShade\r\n  for (let yi = 0; yi < grid.length; yi++) {\r\n    for (let xi = 0; xi < grid[yi].length; xi++) {\r\n      if (grid[yi][xi]) {\r\n        ctx.fillRect(xi * size, yi * size, size, size)\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nconst drawInverse = (ctx) => {\r\n  ctx.fillStyle = inverseBg\r\n  ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height)\r\n  for (let yi = 0; yi < grid.length; yi++) {\r\n    for (let xi = 0; xi < grid[yi].length; xi++) {\r\n      if (grid[yi][xi]) {\r\n        ctx.clearRect(xi * size, yi * size, size, size)\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nconst drawShaded = (ctx) => {\r\n  drawBackground(ctx)\r\n  for (let yi = 0; yi < grid.length; yi++) {\r\n    for (let xi = 0; xi < grid[yi].length; xi++) {\r\n      if (grid[yi][xi]) {\r\n        ctx.fillStyle = getShade(xi, yi)\r\n        ctx.fillRect(xi * size, yi * size, size, size)\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nconst drawShapes = (ctx) => {\r\n  ctx.fillStyle = '#000000'\r\n  ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height)\r\n  ctx.fillStyle = '#a2a2a2'\r\n  for (let yi = 0; yi < grid.length; yi++) {\r\n    for (let xi = 0; xi < grid[yi].length; xi++) {\r\n      if (grid[yi][xi]) {\r\n        ctx.fillRect(xi * size, yi * size, size, size)\r\n      }\r\n    }\r\n  }\r\n  ctx.fillStyle = pOutOfBounds ? '#ff3434' : '#ffffff'\r\n  for (let i = 0; i < pCells.length; i++) {\r\n    const [x, y] = pCells[i]\r\n    ctx.fillRect(x * size, y * size, size, size)\r\n  }\r\n}\r\n\r\nconst setBrushSize = bsz => brushSize = bsz\r\n\r\nconst drawOnGrid = (x, y) => applyBrush(x, y, 1)\r\nconst eraseOnGrid = (x, y) => applyBrush(x, y, 0)\r\n\r\nconst paint = () => {\r\n  if (!pOutOfBounds) {\r\n    for (let i = 0; i < pCells.length; i++) {\r\n      const [x, y] = pCells[i]\r\n      grid[y][x] = 1\r\n    }\r\n  }\r\n}\r\n\r\nconst preview = (x, y) => { \r\n  const cx = Math.min(Math.floor(x / size), gridW - 1)\r\n  const cy = Math.min(Math.floor(y / size), gridH - 1)\r\n  if (cx !== pX || cy !== pY) {\r\n    pX = cx; pY = cy\r\n    const { cells, outOfBounds } = getShape(cx, cy)\r\n    pCells = cells; pOutOfBounds = outOfBounds\r\n  }\r\n}\r\n\r\nconst setSize = (sz) => {\r\n  if (sz !== size) {\r\n    size = sz\r\n    reInitGrid()\r\n  }\r\n\r\n  return { gridW, gridH }\r\n}\r\n\r\nconst setupPreview = shape => {\r\n  setShape(shape)\r\n  pX = -1; pY = -1\r\n  pCells = []; pOutOfBounds = false\r\n}\r\n\r\nconst setGridWrap = wrap => {\r\n  wrapEnabled = wrap\r\n  generateNeighbours(gridW, gridH)\r\n}\r\n\r\nconst setFill = (fill, args) => {\r\n  grid = createGrid({ fill, grid, args })\r\n  resetAges(grid)\r\n}\r\n\r\nconst setInverseBg = invbg => {\r\n  inverseBg = invbg\r\n  background = inverseBg + alphaBg\r\n}\r\n\r\nconst setShadeSeq = ({ shades, isLoop }) => {\r\n  setShades({ shadeSeq: shades, isLoop, grid })\r\n}\r\n\r\nconst setTrails = i => {\r\n  i = 255 - i\r\n  alphaBg = `${i < 16 ? '0' : ''}${i.toString(16)}`\r\n  background = inverseBg + alphaBg\r\n\r\n  if (i < 255) {\r\n    if (isClearCanvas) {\r\n      isClearCanvas = false\r\n      updateDrawBackground()\r\n    }\r\n  } else {\r\n    /* Cause you can hit 255 only once */\r\n    isClearCanvas = true\r\n    updateDrawBackground()\r\n  }\r\n}\r\n\r\n/* --- End Exports --- */\r\n\r\nconst setDimensions = (_gridW, _gridH) => {\r\n  gridW = _gridW\r\n  gridH = _gridH\r\n\r\n  setBounds(gridW, gridH)\r\n}\r\n\r\nconst calculateDimensions = () => {\r\n  setDimensions(\r\n    Math.floor(window.innerWidth / size),\r\n    Math.floor(window.innerHeight / size)\r\n  )\r\n\r\n  console.log(`Calculated gridW: ${gridW}, gridH: ${gridH}`)\r\n}\r\n\r\nconst updateDrawBackground = () => {\r\n  drawBackground = isClearCanvas ? ctx => {\r\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height)\r\n  } : ctx => {\r\n    ctx.fillStyle = background\r\n    ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height)\r\n  }\r\n}\r\n\r\nconst applyBrush = (x, y, b) => {\r\n  const bsz = Math.max(1, Math.floor(brushSize / size))\r\n  const cx = Math.min(Math.floor(x / size), gridW - 1)\r\n  const cy = Math.min(Math.floor(y / size), gridH - 1)\r\n  if (bsz > 1) {\r\n    const hf = Math.floor(bsz / 2)\r\n    const ox = cx - hf\r\n    const oy = cy - hf\r\n    for (let xi = 0; xi < bsz; xi++) {\r\n      for (let yi = 0; yi < bsz; yi++) {\r\n        const _x = ox + xi\r\n        const _y = oy + yi\r\n        if (checkBounds(_x, _y)) {\r\n          grid[_y][_x] = b\r\n        }\r\n      }\r\n    }\r\n  } else {\r\n    grid[cy][cx] = b\r\n  }\r\n}\r\n\r\nconst generateNeighbours = (bX, bY) => {\r\n  const cX = bX - 1\r\n  const cY = bY - 1\r\n  const nei = []\r\n  const generation = (tl, tr, br, bl, t, r, b, l) => {\r\n    for (let y = 0; y < bY; y++) {\r\n      nei[y] = []\r\n      for (let x = 0; x < bX; x++) {\r\n        if (x === 0 && y === 0) nei[y][x] = tl\r\n        else if (x === cX && y === 0) nei[y][x] = tr\r\n        else if (x === cX && y === cY) nei[y][x] = br\r\n        else if (x === 0 && y === cY) nei[y][x] = bl\r\n        else if (y === 0) nei[y][x] = t\r\n        else if (x === cX) nei[y][x] = r\r\n        else if (y === cY) nei[y][x] = b\r\n        else if (x === 0) nei[y][x] = l\r\n        else nei[y][x] = n_center\r\n      }\r\n    }\r\n  }\r\n  if (!wrapEnabled) generation(n_topLt, n_topRt, n_botRt, n_botLt, n_top, n_right, n_bottom, n_left)\r\n  else generation(n_topLtW, n_topRtW, n_botRtW, n_botLtW, n_topW, n_rightW, n_bottomW, n_leftW) \r\n  neighbours = nei\r\n}\r\n\r\n/* --- NAMING ---\r\n * topRt    - Top Right\r\n * topRtW   - Top Right Wraped\r\n * topRtWC  - Top Right Wraped Corner \r\n * rtTopW   - Right Top Wraped\r\n * 'Corners' and 'topRtW/rtTopW separations' are extra checks that arise because of wraping\r\n */\r\n\r\nconst top = (x, y) => grid[y - 1][x]\r\nconst topRt = (x, y) => grid[y - 1][x + 1]\r\nconst right = (x, y) => grid[y][x + 1]\r\nconst botRt = (x, y) => grid[y + 1][x + 1]\r\nconst bottom = (x, y) => grid[y + 1][x]\r\nconst botLt = (x, y) => grid[y + 1][x - 1]\r\nconst left = (x, y) => grid[y][x - 1]\r\nconst topLt = (x, y) => grid[y - 1][x - 1]\r\n\r\nconst topW = (x) => grid[gridH - 1][x]\r\nconst topRtW = (x) => grid[gridH - 1][x + 1]\r\nconst topRtWC = () => grid[gridH - 1][0]\r\nconst rtTopW = (_, y) => grid[y - 1][0]\r\nconst rightW = (_, y) => grid[y][0]\r\nconst rtBotW = (_, y) => grid[y + 1][0]\r\nconst botRtWC = () => grid[0][0]\r\nconst botRtW = (x) => grid[0][x + 1]\r\nconst bottomW = (x) => grid[0][x]\r\nconst botLtW = (x) => grid[0][x - 1]\r\nconst botLtWC = () => grid[0][gridW - 1]\r\nconst ltBotW = (_, y) => grid[y + 1][gridW - 1]\r\nconst leftW = (_, y) => grid[y][gridW - 1]\r\nconst ltTopW = (_, y) => grid[y - 1][gridW - 1]\r\nconst topLtWC = () => grid[gridH - 1][gridW - 1]\r\nconst topLtW = (x) => grid[gridH - 1][x - 1]\r\n\r\nconst n_top = (x, y) => right(x, y) + botRt(x, y) + bottom(x, y) + botLt(x, y) + left(x, y)\r\nconst n_topRt = (x, y) => bottom(x, y) + botLt(x, y) + left(x, y)\r\nconst n_right = (x, y) => top(x, y) + bottom(x, y) + botLt(x, y) + left(x, y) + topLt(x, y)\r\nconst n_botRt = (x, y) => top(x, y) + left(x, y) + topLt(x, y)\r\nconst n_bottom = (x, y) => top(x, y) + topRt(x, y) + right(x, y) + left(x, y) + topLt(x, y)\r\nconst n_botLt = (x, y) => top(x, y) + topRt(x, y) + right(x, y)\r\nconst n_left = (x, y) => top(x, y) + topRt(x, y) + right(x, y) + botRt(x, y) + bottom(x, y)\r\nconst n_topLt = (x, y) => right(x, y) + botRt(x, y) + bottom(x, y)\r\nconst n_center = (x, y) => top(x, y) + topRt(x, y) + right(x, y) + botRt(x, y) + bottom(x, y) + botLt(x, y) + left(x, y) + topLt(x, y)\r\n\r\nconst n_topW = (x, y) => topW(x, y) + topRtW(x, y) + right(x, y) + botRt(x, y) + bottom(x, y) + botLt(x, y) + left(x, y) + topLtW(x, y)\r\nconst n_topRtW = (x, y) => topW(x, y) + topRtWC(x, y) + rightW(x, y) + rtBotW(x, y) + bottom(x, y) + botLt(x, y) + left(x, y) + topLtW(x, y)\r\nconst n_rightW = (x, y) => top(x, y) + rtTopW(x, y) + rightW(x, y) + rtBotW(x, y) + bottom(x, y) + botLt(x, y) + left(x, y) + topLt(x, y)\r\nconst n_botRtW = (x, y) => top(x, y) + rtTopW(x, y) + rightW(x, y) + botRtWC(x, y) + bottomW(x, y) + botLtW(x, y) + left(x, y) + topLt(x, y)\r\nconst n_bottomW = (x, y) => top(x, y) + topRt(x, y) + right(x, y) + botRtW(x, y) + bottomW(x, y) + botLtW(x, y) + left(x, y) + topLt(x, y)\r\nconst n_botLtW = (x, y) => top(x, y) + topRt(x, y) + right(x, y) + botRtW(x, y) + bottomW(x, y) + botLtWC(x, y) + leftW(x, y) + ltTopW(x, y)\r\nconst n_leftW = (x, y) => top(x, y) + topRt(x, y) + right(x, y) + botRt(x, y) + bottom(x, y) + ltBotW(x, y) + leftW(x, y) + ltTopW(x, y)\r\nconst n_topLtW = (x, y) => topW(x, y) + topRtW(x, y) + right(x, y) + botRt(x, y) + bottom(x, y) + ltBotW(x, y) + leftW(x, y) + topLtWC(x, y)\r\n\r\nconst checkBounds = (x, y) => x > -1 && y > -1 && x < gridW && y < gridH\r\n\r\nconst createShapeFromGrid = () => {\r\n  let shape = [], minX = gridW - 1, minY = gridH - 1, maxX = 0, maxY = 0\r\n  for (let y = 0; y < grid.length; y++) {\r\n    for (let x = 0; x < grid[y].length; x++) {\r\n      if (grid[y][x]) {\r\n        shape.push([x, y])\r\n        if (x < minX) minX = x\r\n        if (y < minY) minY = y\r\n        if (x > maxX) maxX = x\r\n        if (y > maxY) maxY = y\r\n      }\r\n    }\r\n  }\r\n  shape = shape.map(([x, y]) => [x - minX, y - minY])\r\n  return { width: maxX - minX + 1, height: maxY - minY + 1, shape }\r\n}\r\n\r\nwindow.createHelpers([createShapeFromGrid])\r\n\r\nexport { \r\n  initGrid, reInitGrid, updateGrid, drawGrid, drawInverse, drawShaded, drawShapes, drawOnGrid, eraseOnGrid, paint, preview,\r\n  setBrushSize, setSize, setupPreview, setFill, setGridWrap, setRule, setShadeSeq, setInverseBg, setTrails\r\n}","import Floatboxes from './Floatboxes'\r\nimport Canvasboxes from './Canvasboxes'\r\nimport GameOfLife from './GameOfLife'\r\n\r\nconst Prototype = () => {\r\n  return (\r\n    // <Floatboxes />\r\n    // <Canvasboxes />\r\n    <GameOfLife />\r\n  )\r\n}\r\n\r\nexport default Prototype","let global_S = [2, 3]\r\nlet global_B = [3]\r\n\r\nconst setRule = ({ b, s }) => {\r\n  global_B = b.split('').map(i => parseInt(i))\r\n  global_S = s.split('').map(i => parseInt(i))\r\n}\r\n\r\nconst globalSurvivalTrigger = (alive, x, y) => {\r\n  return global_S.indexOf(alive) > -1 ? 1 : 0\r\n}\r\n\r\nconst globalBirthTrigger = (alive, x, y) => {\r\n  return global_B.indexOf(alive) > -1 ? 1 : 0\r\n}\r\n\r\nconst localSurvivalTrigger = (alive, x, y) => {\r\n\r\n}\r\n\r\nconst localBirthTrigger = (alive, x, y) => {\r\n\r\n}\r\n\r\nlet checkSurvival = globalSurvivalTrigger\r\nlet checkBirth = globalBirthTrigger\r\n\r\nexport { setRule, checkSurvival, checkBirth }","const COLOR_GRID = []\r\n\r\nconst hsl2rgb = (h, s, l) => {\r\n  l /= 100;\r\n  const a = s * Math.min(l, 1 - l) / 100;\r\n  const f = n => {\r\n    const k = (n + h / 30) % 12;\r\n    const color = l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);\r\n    return Math.round(255 * color).toString(16).padStart(2, '0');   // convert to Hex and prefix \"0\" if needed\r\n  };\r\n  return `#${f(0)}${f(8)}${f(4)}`;\r\n}\r\n\r\nconst kStep = 100 / 17\r\nfor (let k = 0; k < 17; k++) {\r\n  COLOR_GRID.push(hsl2rgb(0, 0, k * kStep))\r\n}\r\nCOLOR_GRID.push(\"#ffffff\")\r\n\r\nconst iStep = 360 / 16\r\nconst jStep = 80 / 18\r\nfor (let i = 0; i < 16; i++) {\r\n  for (let j = 0; j < 18; j++) {\r\n    COLOR_GRID.push(hsl2rgb(i * iStep, 100, 10 + j * jStep))\r\n  }\r\n}\r\n\r\nexport default COLOR_GRID","import React from 'react'\r\nimport \"./notifications.css\"\r\n\r\nexport const NotificationWithBody = ({ title, body }) => (\r\n  <span>\r\n    {title}<br/>\r\n    <span className='text-light'>{body}</span>\r\n  </span>\r\n)","import { useState, useRef, useEffect } from 'react'\r\nimport { IoMdCheckboxOutline, IoMdSquareOutline } from 'react-icons/io'\r\n\r\n/* Need to adjust width if any changes to qa */\r\nconst width = 324 * 2\r\n\r\nconst ExCon = ({ title, isCurrent, children }) => {\r\n  return (\r\n    <div className={`ex-con ex-con-${isCurrent ? 'in' : 'out'}`}>\r\n      <div className='ex-title'>\r\n        <div className='ex-title-lbl center'>\r\n          {title.split('').join(' ').toUpperCase()}\r\n        </div>\r\n      </div>\r\n      <div className='ex-cont'>\r\n        {children}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst ExIndicator = (props) => {\r\n  const { selectedIndex } = props\r\n  const canvasRef = useRef(null)\r\n\r\n  const style = {\r\n    width, left: (8 - width / 2 + 22) + (44 * selectedIndex)\r\n  }\r\n\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current\r\n    const ctx = canvas.getContext('2d')\r\n\r\n    canvas.setAttribute('width', width)\r\n    canvas.setAttribute('height', 444)\r\n\r\n    ctx.lineWidth = 2\r\n    ctx.strokeStyle = '#a2a2a2'\r\n\r\n    const points = [[width / 2 - 10, 400], [width / 2, 406], [width / 2 + 10, 400], [width, 400]]\r\n\r\n    ctx.moveTo(0, 400)\r\n    points.forEach(([x, y]) => ctx.lineTo(x, y))\r\n    ctx.stroke()\r\n\r\n  }, [])\r\n\r\n  return (\r\n    <canvas className='ex-indic' ref={canvasRef} style={style} />\r\n  )\r\n}\r\n\r\nconst ExSubTitle = ({ \r\n  children,\r\n  subtitle, fontSize = 10,\r\n  width, isScrollable = false, \r\n  left = 0, right = 0 \r\n}) => {\r\n  const className = `ex-st-con ex-item-${isScrollable ? 'scrl' : 'con'}`\r\n\r\n  return (\r\n    <div className={className} style={{height: fontSize + 3}}>\r\n      <div className='ex-st-hr' style={{ width, left }} />\r\n      <div className='ex-st-lbl' style={{ fontSize }}>\r\n        {subtitle ? subtitle.toUpperCase() : children}\r\n      </div>\r\n      <div className='ex-st-hr' style={{ width, right }} />\r\n    </div>\r\n  )\r\n}\r\n\r\nconst ExCheckbox = ({ name, checked, style = {}, onChange }) => {\r\n  return (\r\n    <div \r\n      className='ex-cb-con' style={style} \r\n      onClick={() => onChange(!checked)}\r\n    >\r\n      {name}\r\n      {checked ? \r\n      <IoMdCheckboxOutline className='ex-cb-ico' /> : \r\n      <IoMdSquareOutline className='ex-cb-ico' />}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst ExHexButton = ({ name, x, y, onClick }) => {\r\n  const [hovered, setHovered] = useState(false)\r\n  const [pressed, setPressed] = useState(false)\r\n\r\n  const mouseLeave = _ => {\r\n    setHovered(false)\r\n    setPressed(false)\r\n  }\r\n\r\n  const fill = pressed ? '#fff' : '#00000000'\r\n  const stroke = hovered ? '#fff' : '#a2a2a2'\r\n  const textStyle = { color: pressed ? '#000' : stroke }\r\n\r\n  return (\r\n    <div\r\n      className='ex-hb-con'\r\n      style={{left: x, top: y}}\r\n      onMouseEnter={_ => setHovered(true)}\r\n      onMouseLeave={mouseLeave}\r\n      onMouseDown={_ => setPressed(true)}\r\n      onMouseUp={_ => setPressed(false)}\r\n      onClick={onClick}\r\n    >\r\n      <svg className='ex-hb-svg'>\r\n        <path d='M 0 13 L 10 0 L 134 0 L 144 13 L 134 26 L 10 26 Z' fill={fill} />\r\n        <path d='M 1 13 L 10 0 M 133 0 L 142 13 L 133 26 M 10 26 L 0 13' strokeWidth={1.5} stroke={stroke} fill='#00000000' />\r\n        <path d='M 10 0 L 134 0 M 133 26 L 10 26' strokeWidth={2.5} stroke={stroke} />\r\n      </svg>\r\n      <div className='ex-hb-lbl center' style={textStyle}>{name}</div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport { ExCon, ExIndicator, ExSubTitle, ExCheckbox, ExHexButton }","import { useRef } from 'react'\r\nimport { FaPlay, FaPause } from 'react-icons/fa'\r\nimport { IoSpeedometer } from 'react-icons/io5'\r\nimport { CgExtension } from 'react-icons/cg'\r\nimport { RiHeartPulseFill } from 'react-icons/ri'\r\nimport { RiBrushFill, RiBrushLine } from 'react-icons/ri'\r\nimport { IoIosColorPalette, IoMdCloseCircle } from 'react-icons/io'\r\n\r\nconst QaButton = ({ \r\n  children, unhide, animDelay, animDuration = 240, \r\n  onClick, onRightClick = () => {}, onHoverChanged \r\n}) => {\r\n  const hoverRef = useRef(false)\r\n\r\n  const rightClick = (e) => {\r\n    e.preventDefault()\r\n    onRightClick()\r\n  }\r\n\r\n  const mouseEnter = () => {\r\n    hoverRef.current = true\r\n    setTimeout(() => {\r\n      if (hoverRef.current) {\r\n        onHoverChanged(true)\r\n      }\r\n    }, 1000)\r\n  }\r\n\r\n  const mouseLeave = () => {\r\n    hoverRef.current = false\r\n    onHoverChanged(false)\r\n  }\r\n\r\n  const className = `qa-btn-con ${unhide ? 'qa-btn-in' : 'qa-btn-out'}`\r\n\r\n  const style = {\r\n    animationDuration: `${animDuration}ms`,\r\n    animationDelay: unhide ? `${animDelay}ms` : '0ms'\r\n  }\r\n\r\n  return (\r\n    <div \r\n      className={className} style={style}\r\n      onClick={onClick} onContextMenu={rightClick}\r\n      onMouseEnter={mouseEnter} onMouseLeave={mouseLeave}\r\n    >{children}</div>\r\n  )\r\n}\r\n\r\nconst Play = ({ isPlaying, unhide, animDelay, onClick, onHoverChanged }) => {\r\n  return (\r\n    <QaButton \r\n      onClick={onClick} \r\n      unhide={unhide} \r\n      animDelay={animDelay} \r\n      onHoverChanged={onHoverChanged}\r\n    >\r\n      {isPlaying ?\r\n      <FaPause className='center' /> :\r\n      <FaPlay className='center' />}\r\n    </QaButton>\r\n  )\r\n}\r\n\r\nconst Draw = ({ isDrawing, unhide, animDelay, onClick, onRightClick, onHoverChanged }) => {\r\n  return (\r\n    <QaButton \r\n      onClick={onClick} \r\n      onRightClick={onRightClick} \r\n      unhide={unhide} \r\n      animDelay={animDelay} \r\n      onHoverChanged={onHoverChanged}\r\n    >\r\n      {isDrawing ? <RiBrushFill className='center qa-draw' /> : <BrushIcon />}\r\n    </QaButton>\r\n  )\r\n}\r\n\r\nconst Speed = ({ unhide, animDelay, onClick, onHoverChanged }) => {\r\n  return (\r\n    <QaButton \r\n      onClick={onClick} \r\n      unhide={unhide} \r\n      animDelay={animDelay} \r\n      onHoverChanged={onHoverChanged}\r\n    >\r\n      <SpeedIcon />\r\n    </QaButton>\r\n  )\r\n}\r\n\r\nconst Shapes = ({ unhide, animDelay, onClick, onRightClick, onHoverChanged }) => {\r\n  return (\r\n    <QaButton \r\n      onClick={onClick} \r\n      onRightClick={onRightClick} \r\n      unhide={unhide} \r\n      animDelay={animDelay} \r\n      onHoverChanged={onHoverChanged}\r\n    >\r\n      <GridIcon />\r\n    </QaButton>\r\n  )\r\n}\r\n\r\nconst Rules = ({ unhide, animDelay, onClick, onRightClick, onHoverChanged }) => {\r\n  return (\r\n    <QaButton \r\n      onClick={onClick} \r\n      onRightClick={onRightClick}\r\n      unhide={unhide} \r\n      animDelay={animDelay} \r\n      onHoverChanged={onHoverChanged}\r\n    >\r\n      <RiHeartPulseFill className='center qa-rules' />\r\n    </QaButton>\r\n  )\r\n}\r\n\r\nconst Colors = ({ unhide, animDelay, onClick, onRightClick, onHoverChanged }) => {\r\n  return (\r\n    <QaButton \r\n      onClick={onClick} \r\n      onRightClick={onRightClick}\r\n      unhide={unhide} \r\n      animDelay={animDelay} \r\n      onHoverChanged={onHoverChanged}\r\n    >\r\n      <IoIosColorPalette className='center qa-colors' />\r\n    </QaButton>\r\n  )\r\n}\r\n\r\nconst Close = ({ unhide, animDelay, animDuration, onClick, onRightClick, onHoverChanged }) => {\r\n  return (\r\n    <QaButton \r\n      onClick={onClick} \r\n      onRightClick={onRightClick}\r\n      unhide={unhide} \r\n      animDelay={animDelay} \r\n      animDuration={animDuration}\r\n      onHoverChanged={onHoverChanged}\r\n    >\r\n      <IoMdCloseCircle className='center qa-close' />\r\n    </QaButton>\r\n  )\r\n}\r\n\r\nconst BrushIcon = () => <RiBrushLine className='center qa-draw' />\r\nconst GridIcon = () => <CgExtension className='center qa-shapes' />\r\nconst SpeedIcon = () => <IoSpeedometer className='center qa-speed' />\r\n\r\nexport { \r\n  Play, Draw, Speed, Shapes, Rules, Colors, Close,\r\n  BrushIcon, GridIcon, SpeedIcon\r\n}","const QaTooltip = ({ vis, index }) => {\r\n  const startX = (window.innerWidth - 324) / 2\r\n  const midX = startX + 8 + (44 * index) + 22\r\n  const path = `M ${midX - 12} 8 L ${midX} 0 L ${midX + 12} 8`\r\n  const msgConStyle = { left: midX }\r\n\r\n  const className = `qa-tt-con ${vis ? 'qa-tt-con-in' : ''}`\r\n  const tip = tips[index]\r\n\r\n  return (\r\n    <div className={className}>\r\n      <svg className='qa-tt-svg'>\r\n        <path d={path} fill='#dfdfdf' />\r\n      </svg>\r\n      <div className='qa-tt-msg-con' style={msgConStyle}>\r\n        <div className='qa-tt-msg'>{tip}</div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst tips = {\r\n  0: ['Play | Pause'],\r\n  1: ['LMB: Toggle Brush | RMB: Brush Size'],\r\n  2: ['LMB: Pattern List | RMB: Grid Cell Size'],\r\n  3: ['LMB: Configure Rules | RMB: Rule Presets'],\r\n  4: ['LMB: Color Palette | RMB: Age Based Palette'],\r\n  5: ['Sim Speed'],\r\n  6: ['LMB: Close | RMB: Minimise']\r\n}\r\n\r\nexport default QaTooltip\r\n","import { useState, useEffect, useCallback } from 'react'\r\nimport { IoMdCloseCircle } from 'react-icons/io'\r\n\r\nlet liveValue = 0\r\n\r\nconst QaSlider = ({ unhide, icon, value, range, onChange, onDismiss }) => {\r\n  const offsetX = window.innerWidth / 2 - 162\r\n  \r\n  const [trackX, setTrackX] = useState(150)\r\n  const [isPressed, setIsPressed] = useState(false)\r\n  const [isHovered, setIsHovered] = useState(false)\r\n\r\n  useEffect(() => {\r\n    const [lower, upper] = range\r\n    updateTrackX(Math.lerp(20, 300, Math.inverseLerp(lower, upper, value)))\r\n  }, [value])\r\n\r\n  const updateTrackX = (trackX) => {\r\n    setTrackX(trackX)\r\n    const [lower, upper] = range\r\n    const rounded = Math.round(Math.lerp(lower, upper, Math.inverseLerp(20, 300, trackX)))\r\n    \r\n    if (rounded !== liveValue) {\r\n      liveValue = rounded\r\n      onChange(rounded)\r\n    }\r\n  }\r\n\r\n  const mouseMove = (e) => {\r\n    if (isPressed && e.button === 0) {\r\n      updateTrackX(Math.clamp(e.clientX - offsetX, 20, 300))\r\n    }\r\n  }\r\n\r\n  const mouseClick = (e) => {\r\n    updateTrackX(Math.clamp(e.clientX - offsetX, 20, 300))\r\n  }\r\n\r\n  const rightClick = (e) => {\r\n    e.preventDefault()\r\n    onDismiss()\r\n  }\r\n\r\n  const mouseDown = useCallback((e) => {\r\n    if (e.button === 0) {\r\n      setIsPressed(true)\r\n      document.addEventListener('mouseup', mouseUp, { once: true })\r\n    }\r\n  }, [])\r\n\r\n  const mouseUp = () => {\r\n    setIsPressed(false)\r\n  }\r\n\r\n  const trackStyle = { width: trackX }\r\n  const thumbStyle = { left: trackX - 20 }\r\n  const labelStyle = { left: trackX + offsetX - 18 }\r\n  const conClass = `qa-sl-con ${unhide ? 'qa-sl-in' : ''}`\r\n  const thumbClass = `qa-sl-thumb ${isHovered ? 'qa-sl-thumb-hov' : ''}`\r\n  const labelClass = `qa-sl-lbl ${isPressed ? 'qa-sl-lbl-pressed' : ''}`\r\n  const closeClass = `qa-sl-x ${unhide ? 'qa-sl-x-in' : 'qa-sl-x-out'}`\r\n\r\n  return (\r\n    <div className={conClass}>\r\n      <div className='qa-sl-track-con'>\r\n        <div className='qa-sl-track' style={trackStyle} />\r\n      </div>\r\n\r\n      <div className={thumbClass} style={thumbStyle}>\r\n        {icon}\r\n      </div>\r\n\r\n      <div \r\n        className='qa-sl-receiver' \r\n        onMouseMove={mouseMove} \r\n        onMouseDown={mouseDown}\r\n        onMouseEnter={_ => setIsHovered(true)}\r\n        onMouseLeave={_ => setIsHovered(false)}\r\n        onContextMenu={rightClick}\r\n        onClick={mouseClick}\r\n      >\r\n        <div className={labelClass} style={labelStyle}>{liveValue}</div>\r\n      </div>\r\n\r\n      <div className={closeClass} onClick={onDismiss}>\r\n        <IoMdCloseCircle className='qa-sl-x-ico' />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default QaSlider\r\n","import { useState, useEffect, useContext, useCallback } from 'react'\r\nimport { FiChevronRight } from 'react-icons/fi'\r\n\r\nimport { DataContext } from '../../context/DataContext'\r\nimport { NotificationContext } from '../../context/NotificationContext'\r\nimport { RuleNotification } from '../notifications/Notifications'\r\nimport { ExCon, ExSubTitle, ExCheckbox } from './ex-comps'\r\n\r\nlet isKeyModeSurvival = false\r\n\r\nconst ExRules = ({ isCurrent, pindex, onSelect, onWrapChanged, onPindexChanged }) => {\r\n  const { rules } = useContext(DataContext)\r\n  const { showNotification } = useContext(NotificationContext)\r\n\r\n  const [arIndex, setArIndex] = useState(0)\r\n  const [activeRule, setActiveRule] = useState(rules[arIndex]) // Conway's Life\r\n\r\n  const pconStyle = {\r\n    transform: `translateX(${pindex * -324}px)`\r\n  }\r\n\r\n  const updateActiveRule = useCallback(({ b, s, ari }) => {\r\n    let selectedRule = {...activeRule}\r\n    if (ari > -1) {\r\n      if (ari !== arIndex) {\r\n        setArIndex(ari)\r\n        selectedRule = rules[ari]\r\n      }\r\n    } else {\r\n      let isCustom = true\r\n      for (let i = 0; i < rules.length; i++) {\r\n        if (rules[i].b === b && rules[i].s === s) {\r\n          if (arIndex !== i) {\r\n            isCustom = false\r\n            setArIndex(i)\r\n            selectedRule = rules[i]\r\n          }\r\n          break\r\n        }\r\n      }\r\n      if (isCustom) {\r\n        selectedRule = { name: 'Custom', b, s }\r\n        setArIndex(-1)\r\n      }\r\n    }\r\n    setActiveRule(selectedRule)\r\n    onSelect(selectedRule)\r\n  }, [activeRule, arIndex, onSelect, rules])\r\n\r\n  useEffect(() => {\r\n    const keyListener = e => {\r\n      const { b, s } = activeRule\r\n      switch (e.key) {\r\n        case \"b\": \r\n          isKeyModeSurvival = 0\r\n          showNotification(<RuleNotification b={b} s={s} highlightS={false} />)\r\n          break\r\n        case \"s\":\r\n          isKeyModeSurvival = 1\r\n          showNotification(<RuleNotification b={b} s={s} highlightS={true} />)\r\n          break\r\n        case \"0\":\r\n        case \"1\":\r\n        case \"2\":\r\n        case \"3\":\r\n        case \"4\":\r\n        case \"5\":\r\n        case \"6\":\r\n        case \"7\":\r\n        case \"8\": \r\n          if (isKeyModeSurvival) {\r\n            const sarr = s.split(\"\")\r\n            const si = sarr.indexOf(e.key)\r\n            if (si > -1) {\r\n              sarr.splice(si, 1)\r\n            } else {\r\n              sarr.push(e.key)\r\n            }\r\n            const _s = sarr.sort().join(\"\")\r\n            updateActiveRule({ b, s: _s, ari: -1 })\r\n            showNotification(<RuleNotification b={b} s={_s} highlightS={true} />)\r\n          } else {\r\n            const barr = b.split(\"\")\r\n            const bi = barr.indexOf(e.key)\r\n            if (bi > -1) {\r\n              barr.splice(bi, 1)\r\n            } else {\r\n              barr.push(e.key)\r\n            }\r\n            const _b = barr.sort().join(\"\")\r\n            updateActiveRule({ b: _b, s, ari: -1 })\r\n            showNotification(<RuleNotification b={_b} s={s} highlightS={false} />)\r\n          }\r\n          break\r\n        default:\r\n          if (e.keyCode === 38) {\r\n            if (arIndex > 0) {\r\n              updateActiveRule({ ari: arIndex - 1 })\r\n              showNotification(rules[arIndex - 1].name)\r\n            }\r\n          } else if (e.keyCode === 40) {\r\n            if (arIndex < rules.length - 1) {\r\n              updateActiveRule({ ari: arIndex + 1 })\r\n              showNotification(rules[arIndex + 1].name)\r\n            }\r\n          }\r\n          break\r\n      }\r\n    }\r\n\r\n    document.body.addEventListener(\"keydown\", keyListener)\r\n\r\n    return () => {\r\n      document.body.removeEventListener(\"keydown\", keyListener)\r\n    }\r\n  }, [updateActiveRule])\r\n\r\n  return (\r\n    <ExCon title='Rules' isCurrent={isCurrent}>\r\n      <div className='ex-pcon' style={pconStyle}>\r\n        <Presets \r\n          rules={rules} \r\n          currentIndex={arIndex} \r\n          onSelect={updateActiveRule} \r\n        />\r\n\r\n        <Custom \r\n          activeRule={activeRule}\r\n          onChanged={updateActiveRule} \r\n          onWrapChanged={onWrapChanged}\r\n          onSelectPresets={() => onPindexChanged(1)} \r\n        />\r\n      </div>\r\n    </ExCon>\r\n  )\r\n}\r\n\r\nconst Presets = ({ rules, currentIndex, onSelect }) => {\r\n  return (\r\n    <div className='ex-pg ex-pg2'>\r\n      <div className='ex-flick'>\r\n        {rules.map(({name, b, s}, index) => \r\n        <RuleCell \r\n          key={index}  \r\n          name={name} b={b} s={s} \r\n          selected={currentIndex === index}\r\n          onClick={() => onSelect({ ari: index })} \r\n        />)}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst Custom = ({ activeRule, onSelectPresets, onWrapChanged, onChanged }) => {\r\n  const { name, b, s } = activeRule\r\n\r\n  const updateRule = ({ nb, ns }) => {\r\n    onChanged({\r\n      ari: -1,\r\n      b: nb !== undefined ? nb : b,\r\n      s: ns !== undefined ? ns : s\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div className='ex-pg'>\r\n      <div style={{height: 5}} />\r\n\r\n      <WrapGrid onChanged={onWrapChanged} />\r\n      <ActiveRule name={name} onClick={onSelectPresets} />\r\n\r\n      <div style={{height: 8}} />\r\n      <div className='rule-info'>\r\n        NUMBER OF NEIGHBOUR CELLS REQUIRED FOR\r\n      </div>\r\n\r\n      <div style={{height: 4}} />\r\n      <ExSubTitle fontSize={13} width={68}>A NEW CELL TO BE <b>B</b>ORN</ExSubTitle>\r\n      <Numbers numbers={b} onNumbersChanged={nb => updateRule({ nb })} />\r\n\r\n      <div style={{height: 8}} />\r\n      <ExSubTitle fontSize={13} width={50}>AN EXISTING CELL TO <b>S</b>URVIVE</ExSubTitle>\r\n      <Numbers numbers={s} onNumbersChanged={ns => updateRule({ ns })} />\r\n    </div>\r\n  )\r\n}\r\n\r\nconst WrapGrid = ({ onChanged }) => {\r\n  const [checked, setChecked] = useState(false)\r\n\r\n  const updateChecked = () => {\r\n    const _checked = !checked\r\n    setChecked(_checked)\r\n    onChanged(_checked)\r\n  }\r\n\r\n  return <ExCheckbox \r\n    name='Wrap Grid' \r\n    checked={checked}\r\n    style={{marginTop: 10}}\r\n    onChange={updateChecked} \r\n  />\r\n}\r\n\r\nconst ActiveRule = ({ name, onClick }) => {\r\n  return (\r\n    <RuleOption title='Active Rule' onClick={onClick}>\r\n      <div className='roc-lbl'>{name}</div>\r\n      <FiChevronRight className='roc-ico roc-chev' />\r\n    </RuleOption>\r\n  )\r\n}\r\n\r\nconst RuleOption = ({ children, title, onClick }) => {\r\n  return (\r\n    <div className='rule-opt-con' onClick={onClick}>\r\n      {title}\r\n      <div className='ro-ctrl'>{children}</div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst Numbers = ({ numbers, onNumbersChanged }) => {\r\n  const [toggles, setToggles] = useState([0, 0, 0, 0, 0, 0, 0, 0, 0])\r\n\r\n  const updateNumbers = (index, value) => {\r\n    let numbers = ''\r\n    toggles.map(\r\n      (n, i) => i === index ? value : n\r\n    ).forEach(\r\n      (t, i) => numbers += `${t ? i : ''}`\r\n    )\r\n    onNumbersChanged(numbers)\r\n  }\r\n\r\n  useEffect(() => {\r\n    const togs = [0, 0, 0, 0, 0, 0, 0, 0, 0]\r\n    for (let i = 0; i < numbers.length; i++) {\r\n      togs[parseInt(numbers.charAt(i))] = 1\r\n    }\r\n    setToggles(togs)\r\n\r\n  }, [numbers])\r\n\r\n  return (\r\n    <div className='dia-lt'>\r\n      <DiamondBtn text={0} x={10} y={10} checked={toggles[0]} checkChanged={v => updateNumbers(0, v)} />\r\n      <DiamondBtn text={1} x={40} y={40} checked={toggles[1]} checkChanged={v => updateNumbers(1, v)} />\r\n      <DiamondBtn text={2} x={70} y={10} checked={toggles[2]} checkChanged={v => updateNumbers(2, v)} />\r\n      <DiamondBtn text={3} x={100} y={40} checked={toggles[3]} checkChanged={v => updateNumbers(3, v)} />\r\n      <DiamondBtn text={4} x={130} y={10} checked={toggles[4]} checkChanged={v => updateNumbers(4, v)} />\r\n      <DiamondBtn text={5} x={160} y={40} checked={toggles[5]} checkChanged={v => updateNumbers(5, v)} />\r\n      <DiamondBtn text={6} x={190} y={10} checked={toggles[6]} checkChanged={v => updateNumbers(6, v)} />\r\n      <DiamondBtn text={7} x={220} y={40} checked={toggles[7]} checkChanged={v => updateNumbers(7, v)} />\r\n      <DiamondBtn text={8} x={250} y={10} checked={toggles[8]} checkChanged={v => updateNumbers(8, v)} />\r\n    </div>\r\n  )\r\n}\r\n\r\nconst DiamondBtn = ({ text, x, y, checked, checkChanged }) => {\r\n  const toggleCheck = () => checkChanged(1 - checked)\r\n\r\n  const btnStyle = { left: x , top: y }\r\n  const btnClass = `dia-btn ${checked ? 'dia-btn-c' : ''}`\r\n  const cbClass = `dia-cb ${checked ? 'dia-cb-c' : ''}`\r\n\r\n  return (\r\n    <div className={btnClass} style={btnStyle} onClick={toggleCheck} >\r\n      <div className={cbClass} />\r\n      <div className='dia-lbl-con'>\r\n        <div className='dia-lbl center'>{text}</div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst RuleCell = ({ selected, name, b, s, onClick }) => {\r\n  const nameCN = `rule-item-name ${selected ? 'rule-item-name-sel' : ''}`\r\n  const ruleCN = `rule-item-rule ${selected ? 'rule-item-rule-sel' : ''}`\r\n\r\n  return (\r\n    <div \r\n      className='rule-item-con'\r\n      onClick={onClick}\r\n    >\r\n      <div className={nameCN}>{name}</div>\r\n      <div className={ruleCN}><b>B</b>{b} <b>S</b>{s}</div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ExRules\r\n","import { HiOutlineAdjustments } from 'react-icons/hi'\r\nimport { IoChevronUp } from 'react-icons/io5'\r\n\r\nimport { useState, useEffect, useRef, useContext } from 'react'\r\nimport { DataContext } from '../../context/DataContext'\r\n\r\nimport { ExCon, ExHexButton, ExSubTitle } from './ex-comps'\r\n\r\nconst ExShapes = ({ isCurrent, onShapeSelect, onFillSelect, onClear, onSliding }) => {\r\n  const [isShapes, setIsShapes] = useState(true)\r\n  const { shapes, fillers } = useContext(DataContext)\r\n\r\n  const className = `shape-con ${isShapes ? '' : 'shape-up'}`\r\n\r\n  return (\r\n    <ExCon title='Patterns' isCurrent={isCurrent}>\r\n      <div className={className}>\r\n        <Fillers fillers={fillers} onSelect={onFillSelect} onSliding={onSliding} />\r\n\r\n        <div className='shape-mid'>\r\n          <ExHexButton name='Clear'   x={1}   y={6} onClick={onClear} />\r\n          <ExHexButton name='Invert'  x={159} y={6} onClick={() => onFillSelect('invert')} />\r\n\r\n          <MidIndic y={4} visible={!isShapes} onClick={_ => setIsShapes(true)} paths={[\r\n            'M 1 1 L 10 12 L 19 1', 'M 0 0 L 20 0'\r\n          ]} />\r\n\r\n          <MidIndic y={17} visible={isShapes} onClick={_ => setIsShapes(false)} paths={[\r\n            'M 1 12 L 10 1 L 19 12', 'M 0 13 L 20 13'\r\n          ]} />\r\n        </div>\r\n\r\n        <Shapes shapes={shapes} onSelect={onShapeSelect} />\r\n      </div>\r\n    </ExCon>\r\n  )\r\n}\r\n\r\nconst Shapes = ({ shapes, onSelect }) => {\r\n  return (\r\n    <div className='shape-list'>\r\n      <div className='shape-info'>\r\n        The patterns listed below are meant to be used in<br/>\r\n        conjuction with <b>Conway's Life (B3-S23)</b> rule.\r\n      </div>\r\n      {shapes.map(({ name, shapes }, icat) => (\r\n        <div key={icat}>\r\n          <div className='shape-item-pad' />\r\n          <ExSubTitle subtitle={name} width={132 - name.length * 2} isScrollable={true} />\r\n\r\n          {shapes.map(({ name, shape }, ishape) => (\r\n            <div className='sc-con' key={ishape} onClick={() => onSelect(shape)} >\r\n              <div className='sc-lbl center'>{name}</div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ))}\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nconst Fillers = ({ fillers, onSelect, onSliding }) => {\r\n  const [currentIndex, setCurrentIndex] = useState(-1)\r\n\r\n  const exAction = (index) => setCurrentIndex(index === currentIndex ? -1 : index)\r\n\r\n  return (\r\n    <div className='shape-list'>\r\n      <div className='shape-item-pad' />\r\n\r\n      {fillers.map(({ name, fill, config }, index) =>\r\n        <FillCell \r\n          key={index}\r\n          name={name} \r\n          config={config} \r\n          ex={currentIndex === index} \r\n          onSelect={args => onSelect(fill, args)} \r\n          onSliding={onSliding}\r\n          onExpanded={() => exAction(index)}\r\n        />)}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst FillCell = ({ name, config, ex, onSelect, onSliding, onExpanded }) => {\r\n  const [hovered, setHovered] = useState(false)\r\n  const [pressed, setPressed] = useState(false)\r\n  const args = useRef(config.map(({init}) => init))\r\n\r\n  const style = {\r\n    height: ex ? 32 + 24 * config.length : 30,\r\n    backgroundColor: pressed && !ex ? '#ffffff' : '#00000000',\r\n    color: ex || pressed ? '#000000' : (hovered ? '#ffffff' : '#a2a2a2'),\r\n    borderColor: ex ? '#a2a2a2' : (hovered ? '#ffffff' : '#00000000')\r\n  }\r\n\r\n  const configAction = e => {\r\n    e.stopPropagation()\r\n    onExpanded()\r\n  }\r\n\r\n  const moded = (value, index) => {\r\n    args.current[index] = value\r\n    onSelect(args.current)\r\n  }\r\n\r\n  const select = () => onSelect(args.current)\r\n  \r\n  const labelClass = `fc-lbl-con ${ex ? 'fc-lbl-con-ex' : ''}`\r\n  const iconClass = `fc-icon ${ex ? 'fc-icon-ex' : `${hovered ? '' : 'fc-icon-hid'}`}`\r\n\r\n  return (\r\n    <div \r\n      className='fc-con' \r\n      style={style} \r\n      onMouseEnter={() => setHovered(true)}\r\n      onMouseLeave={() => setHovered(false)}\r\n      onMouseDown={() => setPressed(true)}\r\n      onMouseUp={() => setPressed(false)}\r\n    >\r\n      <div className={labelClass} onClick={select}>\r\n        <div className='fc-lbl center'>{name}</div>\r\n      </div>\r\n      \r\n      {ex ? \r\n      <IoChevronUp className={iconClass} onClick={configAction} /> :\r\n      <HiOutlineAdjustments className={iconClass} onClick={configAction} onMouseDown={e => e.stopPropagation()} />}\r\n\r\n      <div className='fc-ex'>\r\n        {config.map(({ name, init, range }, index) => <FSlide \r\n          key={index}\r\n          name={name} init={init} range={range} \r\n          onChange={(value) => moded(value, index)}\r\n          onDown={() => onSliding(true)}\r\n          onUp={() => onSliding(false)} \r\n        />)}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst FSlide = ({ name, init, range, onChange, onDown, onUp }) => {\r\n  const [hov, setHov] = useState(false)\r\n  const [value, setValue] = useState(1)\r\n\r\n  const slideAction = e => {\r\n    const v = parseInt(e.target.value)\r\n    setValue(v)\r\n    onChange(v)\r\n  }\r\n\r\n  useEffect(() => {\r\n    setValue(init)\r\n  }, [])\r\n\r\n  const slideClass = `fslide ${hov ? 'fslide-hov' : ''}`\r\n\r\n  return (\r\n    <div className='fslide-con'>\r\n      <div className='fslide-lbl'>{name} (<b>{value}</b>)</div>\r\n      <input \r\n        className={slideClass} \r\n        type='range'\r\n        value={value}\r\n        step={1}\r\n        min={range[0]} max={range[1]}\r\n        onMouseEnter={() => setHov(true)}\r\n        onMouseLeave={() => setHov(false)}\r\n        onMouseDown={onDown}\r\n        onMouseUp={onUp}\r\n        onChange={slideAction}\r\n      ></input>\r\n      {/* <div className='fslide-val'>{value}</div> */}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst MidIndic = ({ paths, visible, y, onClick }) => {\r\n  const [hovered, setHovered] = useState(false)\r\n  const [pressed, setPressed] = useState(false)\r\n\r\n  const mouseLeave = _ => {\r\n    setHovered(false)\r\n    setPressed(false)\r\n  }\r\n\r\n  const fill = pressed ? '#fff' : '#00000000'\r\n  const stroke = hovered ? '#fff' : '#a2a2a2'\r\n  const className = `mi-con ${visible ? '' : 'mi-not'}`\r\n\r\n  return (\r\n    <div\r\n      className={className}\r\n      style={{top: y}}\r\n      onClick={onClick}\r\n      onMouseEnter={_ => setHovered(true)}\r\n      onMouseLeave={mouseLeave}\r\n      onMouseDown={_ => setPressed(true)}\r\n      onMouseUp={_ => setPressed(false)}\r\n    >\r\n      <svg className='mi-svg'>\r\n        <path d={paths[0]} strokeWidth={1.5} stroke={stroke} fill={fill} />\r\n        <path d={paths[1]} strokeWidth={2.5} stroke={stroke} />\r\n      </svg>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ExShapes","import { useState, useEffect, useRef, useCallback } from 'react'\r\nimport { BsChevronRight, BsCloudUpload } from 'react-icons/bs'\r\n\r\nimport { ExSubTitle } from '../ex-comps'\r\n\r\nconst offsetX = window.innerWidth / 2 - 152\r\n\r\nconst PrefsPalette = ({ \r\n  shades, onBackgroundSelect, onMonoSelect, onGradientSelect, \r\n  onImageSelect, onAgeConfigure, onTrailsChanged, selectColor\r\n}) => {\r\n  /* trails state in Modes */\r\n  const [modeEx, setModeEx] = useState(false)\r\n  const [modeIndex, setModeIndex] = useState(0)\r\n  const [modeStates, setModeStates] = useState([\r\n    '#ffffff', ['#ff2600', '#0096ff'], '', shades\r\n  ])\r\n\r\n  const select = i => {\r\n    if (i !== modeIndex) {\r\n      const events = [onMonoSelect, onGradientSelect, onImageSelect, onAgeConfigure]\r\n      events[i](modeStates[i])\r\n      setModeIndex(i)\r\n    }\r\n\r\n    setModeEx(false)\r\n  }\r\n\r\n  const monoSelect = mono => {\r\n    setModeStates(modeStates.map((st, i) => i === 0 ? mono : st))\r\n    onMonoSelect(mono)\r\n  }\r\n\r\n  const gradientSelect = grad => {\r\n    setModeStates(modeStates.map((st, i) => i === 1 ? grad : st))\r\n    onGradientSelect(grad)\r\n  }\r\n\r\n  const imageSelect = src => {\r\n    setModeStates(modeStates.map((st, i) => i === 2 ? src : st))\r\n    onImageSelect(src)\r\n  }\r\n\r\n  useEffect(() => {\r\n    const nextStates = [...modeStates]\r\n    if (shades.shades.length === 1) {\r\n      setModeIndex(0)\r\n      nextStates[0] = shades.shades[0]\r\n    } else {\r\n      setModeIndex(3)\r\n    }\r\n    nextStates[3] = shades\r\n    setModeStates(nextStates)\r\n  }, [shades])\r\n\r\n  return (\r\n    <div className='ex-pg'>\r\n      <ExSubTitle fontSize={13} width={78} subtitle='BACKGROUND COLOR' />\r\n      <ColorSelection color='#000000' selectColor={selectColor} onChange={onBackgroundSelect} />\r\n\r\n      <div style={{height: 12}} />\r\n\r\n      <ExSubTitle fontSize={13} width={103} subtitle='COLOR MODE' />\r\n      <ModeDropdown \r\n        ex={modeEx} onExpand={ex => setModeEx(ex)}\r\n        currentIndex={modeIndex} onSelect={select} \r\n      />\r\n\r\n      <Modes \r\n        vis={!modeEx} \r\n        currentIndex={modeIndex} \r\n        states={modeStates}\r\n        selectColor={selectColor}\r\n        onMonoChanged={monoSelect}\r\n        onGradientChanged={gradientSelect}\r\n        onImageSelect={imageSelect}\r\n        onAgeConfigure={onAgeConfigure}\r\n        onTrailsChanged={onTrailsChanged}\r\n      />\r\n    </div>\r\n  )\r\n} \r\n\r\nconst Modes = ({ \r\n  vis, currentIndex, states, selectColor,\r\n  onMonoChanged, onGradientChanged, onImageSelect, onAgeConfigure, onTrailsChanged\r\n}) => {\r\n  const [mono, gradient, src, shades] = states\r\n\r\n  const [trails, setTrails] = useState(0)\r\n  const uploadRef = useRef(null)\r\n  const canvasRef = useRef(null)\r\n\r\n  const modesClass = `mds-con ${vis ? '' : 'mds-inv'}`\r\n\r\n  const updateGradientStops = (v, index) => {\r\n    onGradientChanged(gradient.map((s, i) => i === index ? v : s))\r\n  }\r\n\r\n  const trailsChanged = trails => {\r\n    setTrails(trails)\r\n    onTrailsChanged(trails)\r\n  }\r\n\r\n  const uploadImage = () => uploadRef.current.click()\r\n\r\n  const onSrcChange = e => {\r\n    if (e.target.files && e.target.files[0]) {\r\n      onImageSelect(URL.createObjectURL(e.target.files[0]))\r\n    }\r\n  }\r\n\r\n  const renderContent = () => {\r\n    switch (currentIndex) {\r\n      // Mono\r\n      case 0: return (\r\n        <div>\r\n          <ExSubTitle fontSize={13} width={102} subtitle='MONO COLOR' />\r\n          <ColorSelection color={mono} selectColor={selectColor} onChange={onMonoChanged} />\r\n          <Trails value={trails} onChange={trailsChanged} />\r\n        </div>\r\n      )\r\n\r\n      // Gradient\r\n      case 1: return (\r\n        <div>\r\n          <ExSubTitle fontSize={13} width={91} subtitle='GRADIENT STOPS' />\r\n          <ColorSelection color={gradient[0]} selectColor={selectColor} onChange={v => updateGradientStops(v, 0)} />\r\n          <div style={{ height: 4 }} />\r\n          <ColorSelection color={gradient[1]} selectColor={selectColor} onChange={v => updateGradientStops(v, 1)} />\r\n        </div>\r\n      )\r\n\r\n      // Image\r\n      case 2: return (\r\n        <div>\r\n          {src ? <img className='upl-preview' src={src} alt=\"\" /> : <div />}\r\n          <div className='pp-con ppb-con' onClick={uploadImage}>\r\n            <div className='ppb-lbl'>Upload Image</div>\r\n            <div className='ppb-ri-con' style={{right: 4}}>\r\n              <BsCloudUpload className='ppb-ri center' />\r\n            </div>\r\n            <input type='file' ref={uploadRef} onChange={onSrcChange} />\r\n          </div>\r\n        </div>\r\n      )\r\n\r\n      // AgeBased\r\n      case 3: return (\r\n        <div>\r\n          <ExSubTitle fontSize={11} width={22}>Cells change color from left to right as they age</ExSubTitle>\r\n          <div className='pp-con'>\r\n            <canvas className='age-preview' ref={canvasRef} />\r\n          </div>\r\n          <div style={{ height: 12 }} />\r\n          <div className='pp-con ppb-con' onClick={onAgeConfigure}>\r\n            <div className='ppb-lbl'>Configure Age Based</div>\r\n            <div className='ppb-ri-con'>\r\n              <BsChevronRight className='ppb-ri center' />\r\n            </div>\r\n          </div>\r\n          <Trails value={trails} onChange={trailsChanged} />\r\n        </div>\r\n      )\r\n\r\n      default: return <div />\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (currentIndex === 3) {\r\n      const canvas = canvasRef.current\r\n      canvas.setAttribute('width', 304)\r\n      canvas.setAttribute('height', 26)\r\n\r\n      const ctx = canvas.getContext('2d')\r\n      const width = 304 / shades.shades.length\r\n\r\n      ctx.clearRect(0, 0, 304, 26)\r\n      for (let i = 0; i < shades.shades.length; i++) {\r\n        ctx.fillStyle = shades.shades[i]\r\n        ctx.fillRect(i * width, 0, width, 26)\r\n      }\r\n    }\r\n  }, [currentIndex, shades])\r\n\r\n  return (\r\n    <div className={modesClass}>\r\n      <div style={{ height: 12 }} />\r\n      {renderContent()}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst ColorSelection = ({ color, selectColor, onChange }) => {\r\n  const [hex, setHex] = useState('#000000')\r\n  const [hasFocus, setHasFocus] = useState(false)\r\n\r\n  const showColorGrid = () => {\r\n    selectColor(_hex => {\r\n      setHex(_hex)\r\n      onChange(_hex)\r\n    }, hex)\r\n  }\r\n\r\n  const updateHex = e => {\r\n    const text = e.target.value\r\n    if (text.indexOf('#') < 0) {\r\n      setHex(`#${text}`)\r\n    } else if (text.length > hex.length && text.length < 8) {\r\n      if (/^[0-9A-Fa-f]+$/.test(text.substring(1))) setHex(text)\r\n      if (text.length === 7) onChange(text)\r\n    } else if (text.length < hex.length && text.length > 0) {\r\n      setHex(text)\r\n    }\r\n  }\r\n\r\n  const editingComplete = () => {\r\n    let _hex = hex\r\n    const padding = 7 - _hex.length\r\n    for (let i = 0; i < padding; i++) {\r\n      _hex += \"0\"\r\n    }\r\n    setHex(_hex)\r\n    setHasFocus(false)\r\n    onChange(_hex)\r\n  }\r\n\r\n  useEffect(() => setHex(color), [color])\r\n\r\n  return (\r\n    <div className='pp-con' style={{borderColor: hasFocus ? '#ffffff' : '#a2a2a2'}}>\r\n      <div className='cs-cp' style={{backgroundColor: hex}} onClick={showColorGrid} />\r\n      <input \r\n        type='text' className='cs-tf tint-tf' value={hex.toUpperCase()} \r\n        onChange={updateHex} onFocus={() => setHasFocus(true)} onBlur={editingComplete}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nconst ModeDropdown = ({ ex, currentIndex, onExpand, onSelect }) => {\r\n  const baseClick = () => {\r\n    if (!ex) onExpand(true)\r\n  }\r\n\r\n  const baseClass = `pp-con md-con ${ex ? 'md-ex' : ''}`\r\n  const lblClass = `md-lbl ${ex ? 'md-lbl-ex' : ''}`\r\n\r\n  return (\r\n    <div className={baseClass} onClick={baseClick}>\r\n      <div className={lblClass}>{modes[currentIndex]}</div>\r\n        \r\n      <div className='mex-con'>\r\n        {modes.map((mode, i) => (\r\n          <div className='mex-item' key={i}\r\n            onClick={() => onSelect(i)}>{mode}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst Trails = ({ value, onChange }) => {\r\n  const [trackX, setTrackX] = useState(13)\r\n  const [isPressed, setIsPressed] = useState(false)\r\n  const [showInfo, setShowInfo] = useState(false)\r\n\r\n  const updateTrackX = trackX => {\r\n    setTrackX(trackX)\r\n    const rounded = Math.round(Math.lerp(0, 255, Math.inverseLerp(13, 289, trackX)))\r\n    setShowInfo(rounded > 200)\r\n    onChange(rounded)\r\n  }\r\n\r\n  const mouseMove = e => {\r\n    if (isPressed && e.button === 0) {\r\n      /* min/max should have been 14 and 300 but is -1 each instead (because topMargin: -1) */\r\n      updateTrackX(Math.clamp(e.clientX - offsetX, 13, 289))\r\n    }\r\n  }\r\n\r\n  const mouseDown = useCallback((e) => {\r\n    if (e.button === 0) {\r\n      setIsPressed(true)\r\n      document.addEventListener('mouseup', mouseUp, { once: true })\r\n    }\r\n  }, [])\r\n\r\n  const mouseClick = e => {\r\n    updateTrackX(Math.clamp(e.clientX - offsetX, 13, 289))\r\n  }\r\n\r\n  useEffect(() => {\r\n    updateTrackX(Math.lerp(13, 289, Math.inverseLerp(0, 255, value)))\r\n  }, [])\r\n\r\n  const mouseUp = () => setIsPressed(false)\r\n\r\n  const trackStyle = { width: Math.max(trackX - 14, 0) }\r\n  const thumbStyle = { transform: `translateX(${trackX - 14}px)` }\r\n\r\n  return (\r\n    <div>\r\n      <div style={{height: 12}} />\r\n      <ExSubTitle fontSize={13} width={124} subtitle='TRAILS' />\r\n\r\n      <div \r\n        className='pp-con pps-con' \r\n        onMouseMove={mouseMove}\r\n        onMouseDown={mouseDown}\r\n        onClick={mouseClick}\r\n      >\r\n        <div className='pps-trk' style={trackStyle} />\r\n          <div className='pps-th' style={thumbStyle}>\r\n        </div>\r\n      </div>\r\n\r\n      <div className='clr-info' style={{opacity: showInfo ? 1 : 0}}><i>Higher values will \r\n        cause the canvas to not clear when applying patterns or changing rules and palette. \r\n        Use </i><b>Clear</b><i> button in </i><b>PATTERNS</b><i> to force clear the grid.</i></div> : <div />\r\n    </div>\r\n  )\r\n}\r\n\r\nconst modes = [\"Mono\", \"Gradient\", \"Image\", \"Age Based\"]\r\n\r\nexport default PrefsPalette\r\n","/**\r\n * list = [{ isTint, value }]\r\n * value = hex if isTint else gradient-step\r\n * isTint needs to alternate between true/false\r\n */\r\n\r\nexport const generateShadesFromList = list => {\r\n  const colors = [], steps = []\r\n\r\n  let index = 0\r\n  while (index < list.length) {\r\n    const { isTint, value } = list[index]\r\n\r\n    if (isTint) {\r\n      colors.push(hex2rgb(value))\r\n    } else {\r\n      steps.push(value)\r\n    }\r\n    \r\n    index += 1\r\n  }\r\n\r\n  return generateGradient({ colors, steps })\r\n}\r\n\r\n/* colors = [{ r, g, b }] */\r\nexport const generateGradient = ({ colors, steps }) => {\r\n  const gradient = []\r\n\r\n  if (colors.length - steps.length !== 1) {\r\n    throw new Error('Length of colors must be one more than steps')\r\n  } else {\r\n    let index = 1\r\n    while (index < colors.length) {\r\n      const prev = colors[index - 1]\r\n      const next = colors[index]\r\n      const step = steps[index - 1] - 1\r\n\r\n      const dr = (next.r - prev.r) / step\r\n      const dg = (next.g - prev.g) / step\r\n      const db = (next.b - prev.b) / step\r\n\r\n      gradient.push(rgb2hex(prev))\r\n\r\n      for (let i = 1; i < step; i++) {\r\n        gradient.push(rgb2hex({ r: prev.r + dr * i, g: prev.g + dg * i, b: prev.b + db * i }))\r\n      }\r\n\r\n      gradient.push(rgb2hex(next))\r\n      index += 1\r\n    }\r\n  }\r\n\r\n  return gradient\r\n}\r\n\r\nexport const hex2rgb = (hex) => {\r\n  const bigint = parseInt(hex.substring(1), 16)\r\n  return {\r\n    r: (bigint >> 16) & 255,\r\n    g: (bigint >> 8) & 255,\r\n    b: bigint & 255\r\n  }\r\n}\r\n\r\nexport const rgb2hex = ({ r, g, b }) => {\r\n  return \"#\" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1, 7)\r\n}","import { VscChevronLeft, VscChevronRight, VscTrash } from 'react-icons/vsc'\r\nimport { IoColorPaletteOutline } from 'react-icons/io5'\r\nimport { useState, useRef, useEffect } from 'react'\r\nimport { ExSubTitle } from '../ex-comps'\r\nimport { generateShadesFromList, hex2rgb } from '../../../utils/color-utils'\r\n\r\nlet animActive = false, scrollListenerAttached = false\r\nlet lastApplied = { isLoop: false, list: [{ isTint: true, value: '#ffffff', outId: '' }] }\r\n\r\nconst ExPalette = ({ isCurrent, selectColor, onSelect }) => {\r\n  const [list, setList] = useState([\r\n    { isTint: true, value: '#ffffff', outId: '' }\r\n  ])\r\n\r\n  const [isLoop, setIsLoop] = useState(false)\r\n  const [scrollAtEnd, setScrollAtEnd] = useState(false)\r\n\r\n  const listRef = useRef(null)\r\n\r\n  const updateTint = ({ index, value }) => {\r\n    const updatedList = [...list]\r\n    updatedList[index]['value'] = value\r\n    setList(updatedList)\r\n  }\r\n\r\n  const updateSteps = ({ index, value }) => {\r\n    if (/^\\d*\\.?\\d*$/.test(value) && value.length < 5) {\r\n      const updatedList = [...list]\r\n      updatedList[index]['value'] = value === '' ? 0 : parseInt(value)\r\n      setList(updatedList)\r\n    }\r\n  }\r\n\r\n  const createGradient = (index) => {\r\n    const g1 = list[index - 1] ? list[index - 1].value : '#ffffff'\r\n    const g2 = list[index + 1] ? list[index + 1].value : '#ffffff'\r\n    return `linear-gradient(${g1}, ${g2})`\r\n  }\r\n\r\n  const scrollToEnd = _ => {\r\n    setTimeout(_ => {\r\n      listRef.current.scroll({ top: listRef.current.scrollHeight, behavior: 'smooth' })\r\n    }, 60)\r\n  }\r\n\r\n  const scrollListener = () => {\r\n    setScrollAtEnd(listRef.current.scrollTop < listRef.current.scrollHeight - listRef.current.clientHeight)\r\n  }\r\n\r\n  /* --- Footer Actions --- */\r\n\r\n  const clear = () => {\r\n    listRef.current.scrollTop = listRef.current.scrollHeight\r\n    setList([{ isTint: true, value: '#ffffff', outId: '' }])\r\n    setIsLoop(false)\r\n  }\r\n\r\n  const reset = () => {\r\n    listRef.current.scrollTop = listRef.current.scrollHeight\r\n    setIsLoop(lastApplied.isLoop)\r\n\r\n    /* \r\n     * --- Some Bizarre react bug (Or prolly me being ignorant of how react works) ---\r\n     * \r\n     * The following lines seem to set a reference of lastApplied.list to list instead of setting a copy of the lastApplied.list:\r\n     * setList(lastApplied.list) -> This seems obvious\r\n     * setList([...lastApplied.list]) -> Isnt this supposed to create a new array with elements of lastApplied.list?\r\n     * setList(lastApplied.list.slice()) -> Isnt this supposed to create a copy of lastApplied.list?\r\n     * setList(lastApplied.list.map(item => item)) -> Again isnt this supposed to be a completely new array?\r\n     * Seriously WTF is going on?\r\n     * - Could be cause Im not using useRef to store lastApplied. NEED TO TEST.\r\n     * \r\n     * Only the line below seems to create a copy. I could really use some explaination on this.\r\n     */\r\n    setList(lastApplied.list.map(({ isTint, value, outId }) => ({ isTint, value, outId })))\r\n  }\r\n\r\n  const addTint = () => {\r\n    if (!animActive) {\r\n      setList([...list, { isTint: true, value: '#ffffff', outId: '' }])\r\n      scrollToEnd()\r\n    }\r\n  }\r\n\r\n  const addGradient = () => {\r\n    if (!animActive) {\r\n      animActive = true\r\n\r\n      const _list = [...list, { isTint: false, value: 20, outId: '' }]\r\n      setList(_list)\r\n\r\n      setTimeout(_ => {\r\n        setList([..._list, { isTint: true, value: '#ffffff', outId: '' }])\r\n        scrollToEnd()\r\n        animActive = false\r\n      }, 60)\r\n    }\r\n  }\r\n\r\n  const addLoop = () => setIsLoop(!isLoop)\r\n\r\n  const deleteQueuedAtIndex = index => {\r\n    if (list.length > 1 && !animActive) {\r\n      const deleteIndices = [index]\r\n      if (index > 0 && !list[index - 1].isTint) {\r\n        deleteIndices.push(index - 1)\r\n      } else if (index == 0 && !list[index + 1].isTint) {\r\n        deleteIndices.push(index + 1)\r\n      }\r\n\r\n      const _list = [...list]\r\n      _list[deleteIndices[0]].outId = 'pc-out'\r\n      if (deleteIndices.length > 1) {\r\n        _list[deleteIndices[1]].outId = 'pc-out'\r\n      }\r\n      setList(_list)\r\n    }\r\n  }\r\n\r\n  const deleteAtIndex = () => {\r\n    setList(list.filter(({ outId }) => outId != 'pc-out'))\r\n  }\r\n\r\n  const apply = () => {\r\n    lastApplied = { isLoop, list }\r\n    onSelect({ isLoop, shades: generateShadesFromList(list)})\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (isCurrent) {\r\n      reset()\r\n    \r\n      if (!scrollListenerAttached) {\r\n        listRef.current.addEventListener('scroll', scrollListener)\r\n        scrollListenerAttached = true\r\n      }\r\n    }\r\n    return () => {\r\n      if (scrollListenerAttached && listRef.current) {\r\n        listRef.current.removeEventListener('scroll', scrollListener)\r\n        scrollListenerAttached = false\r\n      }\r\n    }\r\n  }, [isCurrent])\r\n\r\n  const isScrollable = list.length > 8\r\n\r\n  return (\r\n    <div className='ex-pg ex-pg2'>\r\n      <div className='palette-list' ref={listRef}>\r\n        {isLoop ? <LoopCell isStart={true} isScrollable={isScrollable} /> : <div />}\r\n\r\n        {list.map(({ isTint, outId, value }, index) => (\r\n          isTint ? \r\n          <TintCell \r\n            key={index}\r\n            color={value} outId={outId}\r\n            isScrollable={isScrollable}\r\n            selectColor={selectColor}\r\n            onChange={v => updateTint({ index, value: v })} \r\n            onDeleteQueue={_ => deleteQueuedAtIndex(index)}\r\n            onDeleteFinish={_ => deleteAtIndex(index)}\r\n          /> : \r\n          <StepCell \r\n            key={index}\r\n            steps={value} outId={outId}\r\n            isScrollable={isScrollable}\r\n            gradient={createGradient(index)} \r\n            onChange={value => updateSteps({ index, value })} \r\n          />\r\n        ))}\r\n\r\n        {isLoop ? <LoopCell isStart={false} isScrollable={isScrollable} /> : <div />}\r\n\r\n        {list.length > 1 ? <div />:\r\n        <div className='palette-info'><i>Color mode will be converted to Mono on </i><b>Apply</b>.<br/>\r\n        <i>To use Age Based color mode add at least one </i><b>Color</b> <i>or</i> <b>Gradient</b> <i>from the</i> <b>Add</b> <i>menu</i></div>}\r\n\r\n        <div style={{ height: isScrollable ? 65 : 0 }} />\r\n      </div>\r\n\r\n      <Footer \r\n        hasBg={isScrollable && scrollAtEnd}\r\n        isLoop={isLoop}\r\n        onClear={clear} onReset={reset} onApply={apply}\r\n        onAddGradient={addGradient} onAddTint={addTint} onAddLoop={addLoop}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nconst Footer = ({ \r\n  hasBg, isLoop,\r\n  onClear, onReset, onApply,\r\n  onAddTint, onAddGradient, onAddLoop \r\n}) => {\r\n  const [isAdd, setIsAdd] = useState(false)\r\n\r\n  const className = `palette-footer ${hasBg ? 'pf-bg' : ''}`\r\n  const loopName = `${isLoop ? '-' : '+'} Loop`\r\n\r\n  return (\r\n    <div className={className}>\r\n      <FooterButton name={isAdd ? '< Back' : '+ Add'} isControl={true} isIn={true} x={100} onClick={_ => setIsAdd(!isAdd)} />\r\n      <FooterButton name='Clear' isControl={true} isIn={!isAdd} x={1} y={22} onClick={onClear} />\r\n      <FooterButton name='Reset' isControl={true} isIn={!isAdd} x={199} y={21} onClick={onReset} />\r\n      <FooterButton name='Apply' isControl={true} isIn={!isAdd} x={100} y={37} onClick={onApply} />\r\n\r\n      {/* <FooterButton name='< Controls' isControl={false} isIn={isAdd} x={100} onClick={_ => setIsAdd(false)} /> */}\r\n      <FooterButton name='+ Color'    isControl={false} isIn={isAdd} x={1} y={22} onClick={onAddTint} />\r\n      <FooterButton name='+ Gradient' isControl={false} isIn={isAdd} x={199} y={21} onClick={onAddGradient} />\r\n      <FooterButton name={loopName}   isControl={false} isIn={isAdd} x={100} y={37} onClick={onAddLoop} />\r\n    </div>\r\n  )\r\n}\r\n\r\nconst FooterButton = ({ name, isControl, isIn, x, y, onClick }) => {\r\n  const [hovered, setHovered] = useState(false)\r\n  const [pressed, setPressed] = useState(false)\r\n\r\n  const fill = pressed ? '#fff' : '#00000000'\r\n  const stroke = hovered ? '#fff' : '#a2a2a2'\r\n  const textStyle = { color: pressed ? '#000' : stroke }\r\n\r\n  const id = isControl ? 1 : 2\r\n  const className = `fb-con fb-${id}-${isIn ? 'in' : 'out'}`\r\n\r\n  const mouseLeave = _ => {\r\n    setHovered(false)\r\n    setPressed(false)\r\n  }\r\n\r\n  return (\r\n    <div \r\n      className={className}\r\n      style={{left: x, top: y}}\r\n      onClick={onClick}\r\n      onMouseEnter={_ => setHovered(true)}\r\n      onMouseLeave={mouseLeave}\r\n      onMouseDown={_ => setPressed(true)}\r\n      onMouseUp={_ => setPressed(false)}\r\n    >\r\n      <svg className='fb-svg'>\r\n        <path d='M 0 13 L 10 0 L 94 0 L 104 13 L 94 26 L 10 26 Z' fill={fill} />\r\n        <path d='M 1 13 L 10 0 M 93 0 L 103 13 L 93 26 M 10 26 L 0 13' strokeWidth={1.5} stroke={stroke} fill='#00000000' />\r\n        <path d='M 10 0 L 94 0 M 93 26 L 10 26' strokeWidth={2.5} stroke={stroke} />\r\n      </svg>\r\n      <div className='fb-lbl center' style={textStyle}>{name}</div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst TintCell = ({ color, isScrollable, outId, selectColor, onChange, onDeleteQueue, onDeleteFinish }) => {\r\n  const [hex, setHex] = useState('#FFFFFF')\r\n\r\n  const getAccent = () => {\r\n    const { r, g, b } = hex2rgb(color)\r\n    const bright = (r * 299 + g * 587 + b * 114) / 1000\r\n    return bright < 140 ? '#ffffff' : '#000000'\r\n  }\r\n\r\n  const animEnded = event => {\r\n    if (event.animationName === 'pc-out-anim') {\r\n      onDeleteFinish()\r\n    }\r\n  }\r\n\r\n  const updateHex = e => {\r\n    const text = e.target.value\r\n    if (text.indexOf('#') < 0) {\r\n      setHex(`#${text}`)\r\n    } else if (text.length > hex.length && text.length < 8) {\r\n      if (/^[0-9A-Fa-f]+$/.test(text.substring(1))) setHex(text)\r\n      if (text.length === 7) onChange(text)\r\n    } else if (text.length < hex.length && text.length > 0) {\r\n      setHex(text)\r\n    }\r\n  }\r\n\r\n  const editingComplete = () => {\r\n    let _hex = hex\r\n    const padding = 7 - _hex.length\r\n    for (let i = 0; i < padding; i++) {\r\n      _hex += \"0\"\r\n    }\r\n    setHex(_hex)\r\n    onChange(_hex)\r\n  }\r\n\r\n  const showColorGrid = () => {\r\n    selectColor(_hex => {\r\n      onChange(_hex)\r\n    }, hex)\r\n  }\r\n\r\n  useEffect(() => setHex(color), [color])\r\n\r\n  const style = { backgroundColor: color }\r\n  const contentStyle = { color: getAccent() }\r\n  const className = `tint-con pc-${isScrollable ? 'scrl' : 'con'} ${outId}`\r\n\r\n  return (\r\n    <div className={className} style={style} onAnimationEnd={animEnded}>\r\n      <div className='tint-icon-con'>\r\n        <IoColorPaletteOutline className='tint-icon center' style={contentStyle} onClick={showColorGrid} />\r\n      </div>\r\n      <div className='tint-icon-con tint-trash-con' onClick={onDeleteQueue}>\r\n        <VscTrash className='tint-icon center' style={contentStyle} />\r\n      </div>\r\n\r\n      <input \r\n        className='palette-tf tint-tf' type='input' \r\n        value={hex.toUpperCase()} style={contentStyle} \r\n        onChange={updateHex} onBlur={editingComplete}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nconst StepCell = ({ steps, isScrollable, outId, gradient, onChange }) => {\r\n  const style = { borderImageSource: gradient }\r\n  \r\n  const stepper = (diff) => {\r\n    onChange(`${steps + diff}`)\r\n  }\r\n\r\n  const rightClick = (e, diff) => {\r\n    stepper(diff)\r\n    e.preventDefault()\r\n  }\r\n\r\n  const className = `step-con pc-${isScrollable ? 'scrl' : 'con'} ${outId}`\r\n\r\n  return (\r\n    <div className={className}>\r\n      <VscChevronLeft className='step-arrow' onClick={_ => stepper(-1)} onContextMenu={e => rightClick(e, -10)} />\r\n      <VscChevronRight className='step-arrow step-right' onClick={_ => stepper(1)} onContextMenu={e => rightClick(e, 10)} />\r\n\r\n      <input \r\n        className='palette-tf step-tf' type='input' \r\n        value={steps} style={style} \r\n        onChange={e => onChange(e.target.value)}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nconst LoopCell = ({ isStart, isScrollable }) => <ExSubTitle \r\n  subtitle={`LOOP ${isStart ? 'START' : 'END'}`} \r\n  width={isStart ? 118 : 122} isScrollable={isScrollable}\r\n/>\r\n\r\nexport default ExPalette","import { useState, useEffect, useCallback, useContext } from 'react'\r\n\r\nimport { NotificationContext } from '../../context/NotificationContext'\r\nimport { NotificationWithBody } from '../notifications/notification-templates'\r\nimport QuickAccess from '../quick-access/QuickAccess'\r\nimport MouseReceiver from '../receivers/MouseReceiver'\r\n\r\nimport './controls.css'\r\n\r\nlet qaEnabled = true, isTempPause = false\r\nlet hideTimeoutIndex, mouseMoveIndex\r\n\r\nconst Controls = ({\r\n  onIsPlayingChanged, onBrushDownChanged, onDraw, onErase, onPaint, onPreview,\r\n\r\n  onPreviewStart, onPreviewEnd, onFillSelect, onClear, onRuleSelect, onWrapChanged,\r\n  onBgSelect, onShadesSelect, onGradSelect, onImageSelect, onTrailsChanged,\r\n\r\n  onBrushChanged, onSizeChanged, onSpeedChanged\r\n}) => {\r\n  const { showNotification } = useContext(NotificationContext)\r\n\r\n  const [qaState, setQaState] = useState({\r\n    prev: 'out', next: 'in', hide: false, exp: false, slide: false, min: false\r\n  })\r\n\r\n  const [isPlaying, setIsPlaying] = useState(true)\r\n  const [isDrawing, setIsDrawing] = useState(false)\r\n  const [isPainting, setIsPainting] = useState(false)\r\n\r\n  const updateQaHidden = (qaHidden) => {\r\n    const inState = qaState.min ? 'min' : 'in'\r\n    if (qaHidden) {\r\n      setQaState({ ...qaState, prev: inState, next: 'out', hide: true })\r\n    } else {\r\n      setQaState({ ...qaState, prev: 'out', next: inState, hide: false })\r\n    }\r\n  }\r\n\r\n  const updateQaExpanded = (qaExpanded) => {\r\n    if (qaExpanded) {\r\n      setQaState({ ...qaState, prev: 'in', next: 'ex', exp: true })\r\n    } else {\r\n      setQaState({ ...qaState, prev: 'ex', next: 'in', exp: false })\r\n    }\r\n  }\r\n\r\n  const updateQaSlider = (qaSlider) => {\r\n    if (qaSlider) {\r\n      if (qaState.exp) {\r\n        setQaState({ ...qaState, prev: 'ex', next: 'sl', exp: false, slide: true })\r\n      } else {\r\n        setQaState({ ...qaState, prev: 'in', next: 'sl', slide: true })\r\n      }\r\n    } else {\r\n      setQaState({ ...qaState, prev: 'sl', next: 'in', slide: false })\r\n    }\r\n  }\r\n\r\n  const updateQaMinimised = useCallback((qaMinimised) => {\r\n    if (qaMinimised) {\r\n      const inState = qaState.exp ? 'ex' : 'in'\r\n      setQaState({ ...qaState, prev: inState, next: 'min', min: true, exp: false })\r\n    } else {\r\n      const outState = isPainting ? 'ex' : 'in'\r\n      setQaState({ ...qaState, prev: 'min', next: outState, min: false, exp: isPainting })\r\n\r\n      // End preview if Painting\r\n      if (isPainting) {\r\n        setIsPainting(false)\r\n        onPreviewEnd()\r\n      }\r\n    }\r\n  }, [isPainting, onPreviewEnd, qaState])\r\n\r\n  const toggleIsPlaying = useCallback(() => {\r\n    const _isPlaying = !isPlaying\r\n    setIsPlaying(_isPlaying)\r\n    onIsPlayingChanged(_isPlaying)\r\n  }, [isPlaying, onIsPlayingChanged]);\r\n\r\n  const toggleIsDrawing = () => {\r\n    const _isDrawing = !isDrawing\r\n    if (_isDrawing) {\r\n      showNotification(\r\n        <NotificationWithBody\r\n          title='Brush Enabled'\r\n          body='Press left mouse button to draw and right mouse button to erase on the grid.'\r\n        />\r\n      )\r\n    } else {\r\n      showNotification(\"Brush Disabled\")\r\n    }\r\n    setIsDrawing(_isDrawing)\r\n  }\r\n\r\n  const mouseMove = () => {\r\n    /* \r\n     * Maybe do it a different way. This just seems like cheating \r\n     * qaState.min is always true when isPainting is true so no need to add it as a condition\r\n     */\r\n    if (!(qaState.exp || qaState.slide || isPainting)) {\r\n      if (qaState.hide) {\r\n        if (qaEnabled) {\r\n          updateQaHidden(false)\r\n          hideTimeoutIndex = setTimeout(() => updateQaHidden(true), 5000)\r\n        }\r\n      } else {\r\n        if (mouseMoveIndex % 20 === 0) {\r\n          clearTimeout(hideTimeoutIndex)\r\n          hideTimeoutIndex = setTimeout(() => updateQaHidden(true), 5000)\r\n        }\r\n        mouseMoveIndex += 1\r\n      }\r\n    }\r\n  }\r\n\r\n  const qaHoverChanged = (hovered) => {\r\n    if (hovered) clearTimeout(hideTimeoutIndex)\r\n    else if (!(qaState.exp || qaState.slide || isPainting)) {\r\n      if (qaEnabled) {\r\n        hideTimeoutIndex = setTimeout(() => updateQaHidden(true), 5000)\r\n      }\r\n    }\r\n  }\r\n\r\n  const hideQa = () => {\r\n    updateQaHidden(true)\r\n    qaEnabled = false\r\n    setTimeout(() => qaEnabled = true, 1000)\r\n  }\r\n\r\n  const tempPause = (pause) => {\r\n    if (isPlaying) {\r\n      toggleIsPlaying()\r\n      isTempPause = true\r\n    } else {\r\n      if (isTempPause) {\r\n        toggleIsPlaying()\r\n        isTempPause = false\r\n      }\r\n    }\r\n  }\r\n\r\n  const shapeSelected = shape => {\r\n    setIsPainting(true)\r\n    updateQaMinimised(true)\r\n    onPreviewStart(shape)\r\n    showNotification(\r\n      (<span>\r\n        Left click to place pattern on grid. For best results clear the grid (shortcut: C)<br/>\r\n        Click on the small circle at the bottom or press Esc to go back to pattern list\r\n      </span>), 10\r\n    )\r\n  }\r\n\r\n  useEffect(() => {\r\n    mouseMoveIndex = 0\r\n\r\n    const keyListener = e => {\r\n      console.log(`keydown with code ${e.keyCode}`)\r\n      switch (e.keyCode) {\r\n        case 27:\r\n          if (qaState.min) {\r\n            updateQaMinimised()\r\n          }\r\n          break\r\n        case 32: toggleIsPlaying(); break\r\n        case 67:\r\n          onClear()\r\n          showNotification('Grid cleared')\r\n          break\r\n        case 70: document.body.requestFullscreen(); break\r\n        case 73:\r\n          onFillSelect('invert')\r\n          showNotification('Grid inverted')\r\n          break\r\n        case 80: toggleIsDrawing(); break\r\n        default: break\r\n      }\r\n    }\r\n\r\n    document.body.addEventListener(\"keydown\", keyListener)\r\n\r\n    return () => {\r\n      document.body.removeEventListener(\"keydown\", keyListener)\r\n    }\r\n  }, [onClear, qaState.min, showNotification, toggleIsPlaying, toggleIsDrawing, updateQaMinimised])\r\n\r\n  return (\r\n    <div className='controls-base'>\r\n      <MouseReceiver\r\n        isDrawing={isDrawing}\r\n        isPainting={isPainting}\r\n        onBrushDown={() => onBrushDownChanged(true)}\r\n        onBrushUp={() => onBrushDownChanged(false)}\r\n        onDraw={onDraw}\r\n        onErase={onErase}\r\n        onPaint={onPaint}\r\n        onPreview={onPreview}\r\n        onMouseMove={mouseMove}\r\n      />\r\n\r\n      <QuickAccess\r\n        animId={`${qaState.prev}2${qaState.next}`}\r\n        qaHidden={qaState.hide}\r\n        qaExpanded={qaState.exp}\r\n        qaMinimised={qaState.min}\r\n        qaSlider={qaState.slide}\r\n        isPlaying={isPlaying}\r\n        isDrawing={isDrawing}\r\n        onQaHoverChanged={qaHoverChanged}\r\n        onQaExpanded={updateQaExpanded}\r\n        onQaMinimised={updateQaMinimised}\r\n        onQaSlider={updateQaSlider}\r\n        onPlayClicked={toggleIsPlaying}\r\n        onDrawClicked={toggleIsDrawing}\r\n        onQaClose={hideQa}\r\n        onTempPause={tempPause}\r\n        onShapeSelect={shapeSelected}\r\n        onFillSelect={onFillSelect}\r\n        onClear={onClear}\r\n        onRuleSelect={onRuleSelect}\r\n        onWrapChanged={onWrapChanged}\r\n        onBgSelect={onBgSelect}\r\n        onShadesSelect={onShadesSelect}\r\n        onGradSelect={onGradSelect}\r\n        onImageSelect={onImageSelect}\r\n        onTrailsChanged={onTrailsChanged}\r\n        onBrushChanged={onBrushChanged}\r\n        onSizeChanged={onSizeChanged}\r\n        onSpeedChanged={onSpeedChanged}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Controls","import React, { useEffect, useState } from 'react'\r\nimport { GiResize } from \"react-icons/gi\"\r\nimport './Resizer.css'\r\n\r\nconst COUNTDOWN_MAX = 1\r\nlet timer\r\n\r\nconst Resizer = ({ isResizing, onResizing }) => {\r\n  const [countdown, setCountdown] = useState(COUNTDOWN_MAX)\r\n\r\n  useEffect(() => {\r\n    const resizeHandler = () => {\r\n      onResizing(true)\r\n      setCountdown(COUNTDOWN_MAX)\r\n\r\n      if (timer) {\r\n        clearInterval(timer)\r\n      }\r\n\r\n      timer = setInterval(() => {\r\n        setCountdown(p => p - 1)\r\n      }, 1000)\r\n    }\r\n\r\n    window.addEventListener(\"resize\", resizeHandler)\r\n    return () => window.removeEventListener(\"resize\", resizeHandler)\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (countdown === 0) {\r\n      clearInterval(timer)\r\n      timer = null\r\n      onResizing(false)\r\n    }\r\n  }, [countdown])\r\n\r\n  if (isResizing) {\r\n    return (\r\n      <div className='resizer-base fill'>\r\n        <GiResize className='resizer-icon center' />\r\n      </div>\r\n    )\r\n  } else {\r\n    return null\r\n  }\r\n}\r\n\r\nexport default Resizer\r\n","import React, { useContext, useEffect, useState } from 'react'\r\nimport { TiChevronRight } from 'react-icons/ti'\r\n\r\nimport { DataContext } from '../../context/DataContext'\r\nimport { NotificationContext } from '../../context/NotificationContext'\r\n\r\nlet fi = 0, allArgValues = [], isSliding\r\n\r\nconst ShapeMenu = ({ modeIndex, dir, trig, onFillSelect, onSliding }) => {\r\n  const { fillers } = useContext(DataContext)\r\n  const { hideNotification } = useContext(NotificationContext)\r\n\r\n  const [fill, setFill] = useState(fillers[fi])\r\n  const [argValues, setArgValues] = useState([])\r\n  const [argIndex, setArgIndex] = useState(0)\r\n  const [stateIndex, setStateIndex] = useState(0)\r\n\r\n  const [showLabel, setShowLabel] = useState(false)\r\n  const [showSliders, setShowSliders] = useState(false)\r\n  const [slidersOutPhase, setSlidersOutPhase] = useState(false)\r\n\r\n  const applyFill = () => {\r\n    onFillSelect(\r\n      fillers[fi].fill,\r\n      allArgValues[fi]\r\n    )\r\n    setFill(fillers[fi])\r\n    setArgValues(allArgValues[fi])\r\n  }\r\n\r\n  const slideArg = (byVal) => {\r\n    const val = argValues[argIndex]\r\n    const newVal = Math.clamp(\r\n      val + byVal,\r\n      fill.config[argIndex].range[0],\r\n      fill.config[argIndex].range[1]\r\n    )\r\n    if (newVal !== val) {\r\n      setArgValues(argValues.map((v, i) => i === argIndex ? newVal : v))\r\n      allArgValues[fi][argIndex] = newVal\r\n      onFillSelect(fill.fill, allArgValues[fi])\r\n    }\r\n\r\n    if (!isSliding) {\r\n      isSliding = true\r\n      onSliding(true)\r\n    }\r\n  }\r\n\r\n  const animEnded = e => {\r\n    if (e.animationName === 'fade-out-anim') {\r\n      setShowSliders(false)\r\n      setSlidersOutPhase(false)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    const upTrigger = () => {\r\n      if (stateIndex < 2) {\r\n        if (fi > 0) {\r\n          fi -= 1\r\n        } else {\r\n          fi = fillers.length - 1\r\n        }\r\n        applyFill()\r\n        resetStateIndex()\r\n        if (!showLabel) {\r\n          setShowLabel(true)\r\n        }\r\n        hideNotification()\r\n      } else {\r\n        if (argIndex > 0) {\r\n          setArgIndex(pv => pv - 1)\r\n        }\r\n      }\r\n    }\r\n\r\n    const rightTrigger = () => {\r\n      if (stateIndex === 0) {\r\n        setStateIndex(1)\r\n        if (!showLabel) {\r\n          setShowLabel(true)\r\n        }\r\n        hideNotification()\r\n      } else if (stateIndex === 2) {\r\n        slideArg(1)\r\n      }\r\n    }\r\n\r\n    const downTrigger = () => {\r\n      if (stateIndex < 2) {\r\n        if (fi < fillers.length - 1) {\r\n          fi += 1\r\n        } else {\r\n          fi = 0\r\n        }\r\n        applyFill()\r\n        resetStateIndex()\r\n        if (!showLabel) {\r\n          setShowLabel(true)\r\n        }\r\n        hideNotification()\r\n      } else {\r\n        if (argIndex < argValues.length - 1) {\r\n          setArgIndex(pv => pv + 1)\r\n        }\r\n      }\r\n    }\r\n\r\n    const leftTrigger = () => {\r\n      if (stateIndex === 1) {\r\n        setStateIndex(0)\r\n      } else if (stateIndex === 2) {\r\n        slideArg(-1)\r\n      }\r\n    }\r\n\r\n    const tapTrigger = () => {\r\n      if (stateIndex === 0) {\r\n        applyFill()\r\n      } else if (stateIndex === 2) {\r\n        setStateIndex(0)\r\n        setShowLabel(false)\r\n        setSlidersOutPhase(true)\r\n      }\r\n    }\r\n\r\n    const releaseTrigger = () => {\r\n      if (stateIndex === 0) {\r\n        if (showLabel) {\r\n          setShowLabel(false)\r\n        }\r\n      } else if (stateIndex === 1) {\r\n        setArgIndex(0)\r\n        setStateIndex(2)\r\n        setShowSliders(true)\r\n      } else {\r\n        if (isSliding) {\r\n          isSliding = false\r\n          onSliding(false)\r\n        }\r\n      }\r\n    }\r\n\r\n    const resetStateIndex = () => {\r\n      if (stateIndex === 1) {\r\n        setStateIndex(0)\r\n      }\r\n    }\r\n\r\n    switch (dir) {\r\n      case 0: upTrigger(); break\r\n      case 1: rightTrigger(); break\r\n      case 2: downTrigger(); break\r\n      case 3: leftTrigger(); break\r\n      case 4: tapTrigger(); break\r\n      case 5: releaseTrigger(); break\r\n      default: break\r\n    }\r\n  }, [trig])\r\n\r\n  useEffect(() => {\r\n    allArgValues = []\r\n    fillers.forEach(({ config }) => {\r\n      const args = []\r\n      config.forEach(({ init }) => {\r\n        args.push(init)\r\n      })\r\n      allArgValues.push(args)\r\n    })\r\n    setArgValues(allArgValues[0])\r\n  }, [fillers])\r\n\r\n  if (modeIndex !== 2) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div className='sm-root'>\r\n      <div className={`sm-label-con ${showLabel && 'sm-lc-show'} ${showSliders && 'sm-lc-ex'}`}>\r\n        <div className='sm-arrow' />\r\n        <div className='sm-label'>\r\n          {fill.name}\r\n        </div>\r\n        <TiChevronRight \r\n          className={`sm-arrow ${stateIndex === 1 && 'sm-arrow-vis'}`} \r\n        />\r\n      </div>\r\n      {showSliders && (\r\n        <div \r\n          className={`sm-sliders-con ${slidersOutPhase && 'fade-out'}`}\r\n          onAnimationEnd={animEnded}\r\n        >\r\n          <div className='sm-ss-bg' />\r\n\r\n          <div className='sm-sliders'>\r\n            {fill.config.map(({ name }, i) => (\r\n              <div \r\n                key={i}\r\n                style={{ animationDelay: `${i * 40}ms` }}\r\n                className={`sm-slider-con ${i === argIndex && 'sm-sc-highlight'}`}\r\n              >\r\n                <div>{name} ({argValues[i]})</div>\r\n                <div className='sm-slider'>\r\n                  <div \r\n                    className='sm-s-track'\r\n                    style={{\r\n                      width: `${Math.inverseLerp(\r\n                        fill.config[i].range[0], \r\n                        fill.config[i].range[1], \r\n                        argValues[i]) * 100}%`\r\n                    }} \r\n                  />\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ShapeMenu","import { useState, useRef, useEffect } from 'react'\r\nimport { ExCon, ExHexButton } from '../ex-comps'\r\n\r\nimport PrefsPalette from './PrefsPalette'\r\nimport AgePalette from './AgePalette.js'\r\nimport COLOR_GRID from '../../../static/color-grid'\r\n\r\nimport './palette.css'\r\n\r\nconst ExPalette = ({ \r\n  isCurrent, pindex, qaExpanded, onBgSelect, onSelect, \r\n  onGradSelect, onImageSelect, onTrailsChanged, onPindexChanged \r\n}) => {\r\n  const [shades, setShades] = useState({ isLoop: false, shades: ['#ffffff'] })\r\n  const [cgVisible, setCgVisible] = useState(false)\r\n  const [cgCurrentHex, setCgCurrentHex] = useState('#fff')\r\n\r\n  const onColorSelectedRef = useRef(null)\r\n  \r\n  const monoSelect = mono => onSelect({ isLoop: false, shades: [mono] })\r\n  const ageSelect = shades => { setShades(shades); onSelect(shades) }\r\n\r\n  const selectColor = (onSelect, current = '#000') => {\r\n    setCgVisible(true)\r\n    setCgCurrentHex(current)\r\n    onColorSelectedRef.current = onSelect\r\n  }\r\n\r\n  const onColorSelected = hex => {\r\n    setCgVisible(false)\r\n    onColorSelectedRef.current(hex)\r\n  }\r\n\r\n  const onCustomSelected = hex => {\r\n    onColorSelectedRef.current(hex)\r\n  }\r\n\r\n  const pconStyle = {\r\n    transform: `translateX(${pindex * -324}px)`\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!isCurrent || !qaExpanded) {\r\n      setCgVisible(false)\r\n    }\r\n  }, [isCurrent, qaExpanded])\r\n\r\n  return (\r\n    <ExCon title='Palette' isCurrent={isCurrent}>\r\n      <div className='ex-pcon' style={pconStyle}>\r\n        <PrefsPalette \r\n          shades={shades}\r\n          selectColor={selectColor}\r\n          onBackgroundSelect={onBgSelect} \r\n          onMonoSelect={monoSelect}\r\n          onGradientSelect={onGradSelect}\r\n          onImageSelect={onImageSelect}\r\n          onTrailsChanged={onTrailsChanged}\r\n          onAgeConfigure={() => onPindexChanged(1)} \r\n        />\r\n\r\n        <AgePalette \r\n          isCurrent={isCurrent} \r\n          selectColor={selectColor}\r\n          onSelect={ageSelect} \r\n        />\r\n      </div>\r\n\r\n      <ColorGrid \r\n        cgVisible={cgVisible} \r\n        currentHex={cgCurrentHex}\r\n        onSelect={onColorSelected}\r\n        onCustom={onCustomSelected}\r\n        onCancel={() => setCgVisible(false)} \r\n      />\r\n    </ExCon>\r\n  )\r\n}\r\n\r\nconst ColorGrid = ({ cgVisible, currentHex, onSelect, onCustom, onCancel }) => {\r\n  const [isVisible, setIsVisible] = useState(false)\r\n  const [isCustomChanged, setIsCustomChanged] = useState(false)\r\n  const inputRef = useRef(null)\r\n\r\n  const animEnded = (e, i) => {\r\n    if (i === COLOR_GRID.length - 1 && e.animationName === 'cgc-out-anim') {\r\n      setIsVisible(false)\r\n    }\r\n  }\r\n\r\n  const customChange = e => {\r\n    if (!isCustomChanged) {\r\n      setIsCustomChanged(true)\r\n    }\r\n    onCustom(e.target.value)\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (cgVisible) {\r\n      setIsVisible(true)\r\n      setIsCustomChanged(false)\r\n    }\r\n  }, [cgVisible])\r\n\r\n  return (\r\n    <>\r\n      {isVisible && (\r\n        <div className='color-grid'>\r\n          <div className={`cg-bg ${!cgVisible && 'cg-bg-out'}`}>\r\n            <div className='cg-footer'>\r\n              <ExHexButton name={isCustomChanged ? 'Apply' : 'Cancel'} x={13} y={4} onClick={onCancel} />\r\n              <ExHexButton name='Custom' x={171} y={4} onClick={() => inputRef.current.click()} />\r\n              <input \r\n                className='cg-dummy-input' \r\n                type='color' \r\n                value={currentHex}\r\n                ref={inputRef}\r\n                onChange={customChange} \r\n              />\r\n            </div>\r\n          </div>\r\n          <div className='cg-container'>\r\n            {COLOR_GRID.map((hex, i) => (\r\n              <div \r\n                key={hex}\r\n                className={`cg-cell ${!cgVisible && 'cg-cell-out'}`} \r\n                style={{ background: hex }} \r\n                onAnimationEnd={e => animEnded(e, i)}\r\n                onClick={() => onSelect(hex)}\r\n              />\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ExPalette\r\n","import { BsChevronLeft } from 'react-icons/bs'\r\n\r\nimport { ExIndicator } from './ex-comps'\r\nimport { useState, useEffect, useContext } from 'react'\r\nimport { \r\n  Play, Draw, Speed, Shapes, Rules, Colors, Close,\r\n  BrushIcon, GridIcon, SpeedIcon \r\n} from './qa-buttons'\r\n\r\nimport QaTooltip from './QaTooltip'\r\nimport QaSlider from './QaSlider'\r\nimport ExRules from './ExRules'\r\nimport ExShapes from './ExShapes'\r\nimport ExPalette from './palette/ExPalette'\r\n\r\nimport './quick-access.css'\r\nimport { NotificationContext } from '../../context/NotificationContext'\r\n\r\nlet sliderValue = 0\r\n\r\nconst QuickAccess = ({ \r\n  animId, qaHidden, qaExpanded, qaMinimised, \r\n  qaSlider, isPlaying, isDrawing, \r\n\r\n  onQaHoverChanged, onQaExpanded, onQaMinimised, onQaSlider, \r\n  onPlayClicked, onDrawClicked, onQaClose, onTempPause,\r\n\r\n  onShapeSelect, onFillSelect, onClear, onRuleSelect, onWrapChanged, onBgSelect, onShadesSelect, \r\n  onGradSelect, onImageSelect, onTrailsChanged, onBrushChanged, onSizeChanged, onSpeedChanged, \r\n}) => {\r\n  const { showNotification } = useContext(NotificationContext)\r\n\r\n  const [qaIndex, setQaIndex] = useState(0)\r\n  const [slideId, setSlideId] = useState('na')\r\n  const [tipIndex, setTipIndex] = useState(0)\r\n  const [tipVis, setTipVis] = useState(false)\r\n  const [backVis, setBackVis] = useState(false)\r\n  const [exPindices, setExPindices] = useState([0, 0, 0, 0, 0, 0])\r\n  const [, setPhantomUpdateIndex] = useState(0)\r\n\r\n  const qaExAction = (index, pindex = 0) => {\r\n    if (!qaExpanded) {\r\n      onQaExpanded(true)\r\n    } else {\r\n      if (qaIndex === index && exPindices[index] === pindex) {\r\n        onQaExpanded(false)\r\n        return\r\n      }\r\n    }\r\n\r\n    setExPindices(exPindices.map((item, i) => i === index ? pindex : item))\r\n    if (backVis) setBackVis(false)\r\n    setQaIndex(index)\r\n  }\r\n\r\n  const exChangePage = (index, pindex, enableBack = false) => {\r\n    setExPindices(exPindices.map((item, i) => i === index ? pindex : item))\r\n    setBackVis(enableBack)\r\n  }\r\n\r\n  const closeAction = () => {\r\n    if (qaExpanded) onQaExpanded(false)\r\n    else onQaClose()\r\n  }\r\n\r\n  const minimise = () => onQaMinimised(true)\r\n\r\n  const maximise = () => {\r\n    if (qaMinimised) onQaMinimised(false)\r\n  }\r\n\r\n  const showSlider = (id) => {\r\n    setSlideId(id)\r\n    onQaSlider(true)\r\n  }\r\n\r\n  const dismissSlider = () => {\r\n    onQaSlider(false)\r\n    if (slideId === 'grid') {\r\n      onSizeChanged(sliderValue)\r\n    }\r\n  }\r\n\r\n  const sliderValueChanged = (value) => {\r\n    sdat[slideId].value = value\r\n    sliderValue = value\r\n    \r\n    switch (slideId) {\r\n      case 'speed': onSpeedChanged(value); break\r\n      case 'brush': onBrushChanged(value); break\r\n      default: break\r\n    }\r\n  }\r\n\r\n  const hoverChangedAtIndex = (hovered, index) => {\r\n    setTipVis(hovered)\r\n    if (hovered) setTipIndex(index)\r\n  }\r\n\r\n  const phantomUpdate = _ => {\r\n    setPhantomUpdateIndex(ps => ps + 1)\r\n  }\r\n\r\n  useEffect(() => {\r\n    const keyListener = e => {\r\n      if (e.keyCode === 37 || e.keyCode === 39) {\r\n        let speed = sdat['speed'].value\r\n        const [speedLower, speedUpper] = sdat['speed'].range\r\n        if (e.keyCode === 37 && speed > speedLower) {\r\n          speed -= 1\r\n        } else if (e.keyCode === 39 && speed < speedUpper) {\r\n          speed += 1\r\n        }\r\n        sdat['speed'].value = speed\r\n        onSpeedChanged(speed)\r\n        showNotification(`Sim Speed ${speed}`)\r\n\r\n        if (slideId === \"speed\") {\r\n          phantomUpdate()\r\n        }\r\n      }\r\n    }\r\n\r\n    document.body.addEventListener(\"keydown\", keyListener)\r\n\r\n    return () => {\r\n      document.body.removeEventListener(\"keydown\", keyListener) \r\n    }\r\n  }, [onSpeedChanged, slideId])\r\n\r\n  const animdelays = animdelaysJson[animId]\r\n  const unhide = !qaHidden && !qaSlider && !qaMinimised\r\n  const closeAnimDuration = animId === 'sl2in' || animId === 'in2sl' || animId === 'ex2sl' ? 0 : 240\r\n\r\n  return (\r\n    <div className='qa-root'>\r\n      <div \r\n        className={`base base-${animId}`}\r\n        onClick={maximise}\r\n        onMouseEnter={() => onQaHoverChanged(true)}\r\n        onMouseLeave={() => onQaHoverChanged(false)}\r\n      >\r\n        <div className={`ex-base ex-base-${animId}`}>\r\n          <ExIndicator selectedIndex={qaIndex} />\r\n\r\n          <ExShapes \r\n            isCurrent={qaIndex === 2} \r\n            onShapeSelect={onShapeSelect} \r\n            onFillSelect={onFillSelect}\r\n            onClear={onClear}\r\n            onSliding={onTempPause} \r\n          />\r\n\r\n          <ExRules \r\n            isCurrent={qaIndex === 3} \r\n            pindex={exPindices[3]}\r\n            onSelect={onRuleSelect} \r\n            onWrapChanged={onWrapChanged}\r\n            onPindexChanged={pi => exChangePage(3, 1, true)}\r\n          />\r\n\r\n          <ExPalette \r\n            isCurrent={qaIndex === 4} \r\n            pindex={exPindices[4]}\r\n            qaExpanded={qaExpanded}\r\n            onBgSelect={onBgSelect}\r\n            onSelect={onShadesSelect} \r\n            onGradSelect={onGradSelect}\r\n            onImageSelect={onImageSelect}\r\n            onTrailsChanged={onTrailsChanged}\r\n            onPindexChanged={pi => exChangePage(4, 1, true)}\r\n          />\r\n\r\n          <Back vis={backVis} onClick={() => exChangePage(qaIndex, 0)} />\r\n        </div>\r\n\r\n        <div className='con'>\r\n          <QaSlider \r\n            unhide={qaSlider} \r\n            icon={sdat[slideId].icon} \r\n            value={sdat[slideId].value}\r\n            range={sdat[slideId].range}\r\n            onChange={sliderValueChanged}\r\n            onDismiss={dismissSlider} \r\n          />\r\n\r\n          <div className='qa-padding' />\r\n\r\n          <Play \r\n            isPlaying={isPlaying} unhide={unhide} animDelay={animdelays[0]} \r\n            onClick={onPlayClicked} \r\n            onHoverChanged={h => hoverChangedAtIndex(h, 0)}\r\n          />\r\n\r\n          <Draw \r\n            isDrawing={isDrawing} unhide={unhide} animDelay={animdelays[1]} \r\n            onClick={onDrawClicked} onRightClick={_ => showSlider('brush')} \r\n            onHoverChanged={h => hoverChangedAtIndex(h, 1)}\r\n          />\r\n          \r\n          <Shapes \r\n            unhide={unhide} animDelay={animdelays[2]} \r\n            onClick={_ => qaExAction(2)} onRightClick={_ => showSlider('grid')} \r\n            onHoverChanged={h => hoverChangedAtIndex(h, 2)}\r\n          />\r\n\r\n          <Rules \r\n            unhide={unhide} animDelay={animdelays[3]} \r\n            onClick={_ => qaExAction(3, 0)} onRightClick={_ => qaExAction(3, 1)} \r\n            onHoverChanged={h => hoverChangedAtIndex(h, 3)}\r\n          />\r\n\r\n          <Colors \r\n            unhide={unhide} animDelay={animdelays[4]} \r\n            onClick={_ => qaExAction(4)} onRightClick={_ => qaExAction(4, 1)}\r\n            onHoverChanged={h => hoverChangedAtIndex(h, 4)}\r\n          />\r\n\r\n          <Speed \r\n            unhide={unhide} animDelay={animdelays[5]} \r\n            onClick={_ => showSlider('speed')} \r\n            onHoverChanged={h => hoverChangedAtIndex(h, 5)}\r\n          />\r\n\r\n          <Close \r\n            unhide={unhide} animDelay={animdelays[6]} animDuration={closeAnimDuration}\r\n            onClick={closeAction} onRightClick={minimise}\r\n            onHoverChanged={h => hoverChangedAtIndex(h, 6)}\r\n          />\r\n\r\n          <div className='qa-padding' />\r\n        </div>\r\n      </div>\r\n\r\n      <QaTooltip vis={tipVis} index={tipIndex} />\r\n    </div>\r\n  )\r\n}\r\n\r\nconst Back = ({ vis, onClick }) => {\r\n  return (\r\n    <div \r\n      className={`ex-back ${vis ? 'ex-back-vis' : ''}`}\r\n      onClick={onClick}\r\n    >\r\n      <BsChevronLeft className='ex-back-ico center' />\r\n      {/* <div className='ex-back-lbl center'>{'<'}</div> */}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst animdelaysJson = {\r\n  'out2in': [280, 320, 360, 400, 440, 480, 520],\r\n  'in2out': [0, 0, 0, 0, 0, 0, 0],\r\n  'min2out': [0, 0, 0, 0, 0, 0, 0],\r\n  'out2min': [0, 0, 0, 0, 0, 0, 0],\r\n  'in2min': [0, 0, 0, 0, 0, 0, 0],\r\n  'min2in': [280, 320, 360, 400, 440, 480, 520],\r\n  'in2ex': [0, 0, 0, 0, 0, 0, 0],\r\n  'ex2in': [0, 0, 0, 0, 0, 0, 0],\r\n  'ex2sl': [0, 0, 0, 0, 0, 0, 0],\r\n  'ex2min': [0, 0, 0, 0, 0, 0, 0],\r\n  'min2ex': [280, 320, 360, 400, 440, 480, 520],\r\n  'sl2in': [240, 200, 160, 120, 80, 40, 240],\r\n  'in2sl': [0, 0, 0, 0, 0, 0, 0]\r\n}\r\n\r\nconst sdat = {\r\n  na: { value: -1, range: [0, 1], icon: <div /> },\r\n  brush: { value: 25, range: [1, 100], icon: <BrushIcon /> },\r\n  grid: { value: 5, range: [1, 50], icon: <GridIcon /> },\r\n  speed: { value: 97, range: [1, 100], icon: <SpeedIcon /> }\r\n}\r\n\r\nexport default QuickAccess\r\n","const MouseReceiver = ({ \r\n  isDrawing, isPainting, \r\n  onBrushDown, onBrushUp,\r\n  onDraw, onErase, onPaint, onMouseMove, onPreview \r\n}) => {\r\n\r\n  /* Hooked onPreview to drawHook */\r\n  \r\n  const draw = (e) => onDraw(e.clientX, e.clientY)\r\n  const erase = (e) => onErase(e.clientX, e.clientY)\r\n  const preview = e => onPreview(e.clientX, e.clientY)\r\n  \r\n  const drawStart = (e) => {\r\n    if (e.button === 0) drawHook = draw\r\n    else if (e.button === 2) drawHook = erase\r\n    onBrushDown()\r\n  }\r\n  \r\n  const drawEnd = (e) => {\r\n    drawHook(e)\r\n    drawHook = () => {}\r\n    onBrushUp()\r\n  }\r\n  \r\n  const mouseMove = (e) => {\r\n    drawHook(e)\r\n    onMouseMove()\r\n  }\r\n\r\n  const clickAction = () => {\r\n    if (isPainting) onPaint()\r\n  }\r\n\r\n  const contextAction = e => {\r\n    e.preventDefault()\r\n  }\r\n\r\n  /* --- Init --- */\r\n  if (isPainting) {\r\n    drawStartHook = () => {}\r\n    drawEndHook = () => {}\r\n    drawHook = preview\r\n  } else if (isDrawing) {\r\n    drawStartHook = drawStart\r\n    drawEndHook = drawEnd\r\n    drawHook = () => {}\r\n  } else {\r\n    drawStartHook = () => {}\r\n    drawEndHook = () => {}\r\n    drawHook = () => {}\r\n  }\r\n\r\n  return (\r\n    <div \r\n      className={`receiver${isDrawing || isPainting ? ' receiver-active' : ''}`}\r\n      \r\n      onClick={clickAction}\r\n      onContextMenu={contextAction}\r\n      onMouseDown={drawStartHook}\r\n      onMouseUp={drawEndHook}\r\n      onMouseLeave={drawEndHook}\r\n      onMouseMove={mouseMove}\r\n    />\r\n  )\r\n}\r\n  \r\nlet drawStartHook = () => {}\r\nlet drawEndHook = () => {}\r\nlet drawHook = () => {}\r\n\r\nexport default MouseReceiver\r\n","import React from 'react'\r\n\r\nconst TOUCH_UPPER_PERCENT = .85\r\nconst TAP_AND_HOLD_INTERVAL = 480\r\nconst SWIPE_UP_DISTANCE = 120\r\nconst SWIPE_UP_INTERVAL = 240\r\n\r\nlet sx = 0, sy = 0, lx = 0, ly = 0, xi = 0, yi = 0\r\nlet longPressTimeout = null, swipeUpStart = 0\r\n\r\nconst TouchReceiver = ({ \r\n  triggerOffset, isTouchOverride,\r\n  onTap, onTapAndHold, onTouch, onTouchPointChange, onRelease,\r\n  onUpTrigger, onRightTrigger, onDownTrigger, onLeftTrigger,\r\n  onSwipeUp \r\n}) => {\r\n  const touchStart = e => {\r\n    sx = e.touches[0].clientX\r\n    sy = e.touches[0].clientY\r\n    lx = sx\r\n    ly = sy\r\n    longPressTimeout = setTimeout(() => {\r\n      if (Math.abs(sx - lx) < 5 && Math.abs(sy - ly) < 5) {\r\n        onTapAndHold()\r\n        longPressTimeout = null\r\n      }\r\n    }, TAP_AND_HOLD_INTERVAL)\r\n    \r\n    onTouch(lx, ly)\r\n\r\n    if (!isTouchOverride && ly > window.innerHeight * TOUCH_UPPER_PERCENT) {\r\n      swipeUpStart = Date.now()\r\n    }\r\n  }\r\n\r\n  const touchMove = e => {\r\n    if (isTouchOverride) {\r\n      lx = e.touches[0].clientX\r\n      ly = e.touches[0].clientY\r\n      \r\n      onTouchPointChange(e.touches[0].clientX, e.touches[0].clientY)\r\n      return\r\n    }\r\n\r\n    if (swipeUpStart) {\r\n      if (Date.now() - swipeUpStart < SWIPE_UP_INTERVAL) {\r\n        lx = e.touches[0].clientX\r\n        ly = e.touches[0].clientY\r\n        return\r\n      }\r\n    }\r\n\r\n    const dx = e.touches[0].clientX - lx\r\n    const dy = e.touches[0].clientY - ly\r\n    const adx = Math.abs(dx)\r\n    const ady = Math.abs(dy)\r\n    lx = e.touches[0].clientX\r\n    ly = e.touches[0].clientY\r\n\r\n    if (adx > ady) {\r\n      xi += adx * adx\r\n      if (yi && xi > triggerOffset / 2) {\r\n        yi = 0\r\n      }\r\n    } else {\r\n      yi += ady * ady\r\n      if (xi && yi > triggerOffset / 2) {\r\n        xi = 0\r\n      }\r\n    }\r\n    if (xi > triggerOffset) {\r\n      if (dx > 0) {\r\n        onRightTrigger(dx)\r\n      } else {\r\n        onLeftTrigger(dx)\r\n      }\r\n      xi = 0\r\n    }\r\n    if (yi > triggerOffset) {\r\n      if (dy > 0) {\r\n        onDownTrigger(dy)\r\n      } else {\r\n        onUpTrigger(dy)\r\n      }\r\n      yi = 0\r\n    }\r\n  }\r\n\r\n  const touchEnd = e => {\r\n    xi = 0\r\n    yi = 0\r\n    clearLongPressTimeout()\r\n    onRelease()\r\n\r\n    if (!isTouchOverride && swipeUpStart) {\r\n      const ady = Math.abs(sy - ly)\r\n      const timeElapsed = Date.now() - swipeUpStart\r\n\r\n      if (\r\n        ady > SWIPE_UP_DISTANCE && \r\n        timeElapsed < SWIPE_UP_INTERVAL\r\n      ) {\r\n        onSwipeUp()\r\n      }\r\n\r\n      swipeUpStart = 0\r\n    }\r\n  }\r\n\r\n  const clearLongPressTimeout = () => {\r\n    if (longPressTimeout) {\r\n      clearInterval(longPressTimeout)\r\n      longPressTimeout = null\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div \r\n      className='receiver'\r\n      onTouchStart={touchStart}\r\n      onTouchMove={touchMove}\r\n      onTouchEnd={touchEnd}\r\n      onTouchCancel={touchEnd}\r\n      onClick={onTap}\r\n      onContextMenu={e => e.preventDefault()}\r\n    />\r\n  )\r\n}\r\n\r\nexport default TouchReceiver","import React from 'react'\r\nimport { RiBrushFill, RiEraserFill } from 'react-icons/ri'\r\n\r\nlet longPressTimeout = null\r\n\r\nconst BrushToggle = ({ isEraser, onToggle, onClear }) => {\r\n  const click = e => {\r\n    onToggle()\r\n    e.stopPropagation()\r\n  }\r\n\r\n  const touchStart = () => {\r\n    longPressTimeout = setTimeout(() => {\r\n      onClear()\r\n    }, 480);\r\n  }\r\n\r\n  const touchEnd = () => {\r\n    if (longPressTimeout) {\r\n      clearInterval(longPressTimeout)\r\n      longPressTimeout = null\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div \r\n      className='bt-root' \r\n      onClick={click}\r\n      onTouchStart={touchStart}\r\n      onTouchEnd={touchEnd}\r\n      onTouchCancel={touchEnd}\r\n      onContextMenu={e => e.preventDefault()}\r\n    >\r\n      <div className='bt-con'>\r\n        {isEraser ? (\r\n          <RiEraserFill className='bt-icon center' />\r\n        ) : (\r\n          <RiBrushFill className='bt-icon center' />\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default BrushToggle","import React, { useState, useEffect } from 'react'\r\n\r\nimport { RiBrushFill, RiBrushLine, RiHeartPulseFill, RiHeartPulseLine } from 'react-icons/ri'\r\nimport { IoColorPalette, IoColorPaletteOutline, IoGrid, IoGridOutline } from 'react-icons/io5'\r\nimport { VscChevronUp, VscChevronRight, VscChevronDown, VscChevronLeft } from 'react-icons/vsc'\r\n\r\nconst RadialMenu = ({ isMenu, modeIndex, dirIndex }) => {\r\n  const [show, setShow] = useState(false)\r\n  const [outPhase, setOutPhase] = useState(false)\r\n\r\n  const animEnded = e => {\r\n    if (e.animationName === 'scale-out-anim') {\r\n      setShow(false)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (isMenu) {\r\n      setShow(true)\r\n\r\n      if (outPhase) {\r\n        setOutPhase(false)\r\n      }\r\n    } else {\r\n      setOutPhase(true)\r\n    }\r\n  }, [isMenu])\r\n\r\n  if (!show) return null\r\n\r\n  return (\r\n    <div\r\n      className={`rm-root ${outPhase && 'scale-out'}`}\r\n      onAnimationEnd={animEnded}\r\n    >\r\n      {/* BG ALSO CONTAINS ARROWS */}\r\n      <div className='rm-bg' >\r\n\r\n        {/* ARROWS */}\r\n        <div className='rm-arrow-con arrow-up'>\r\n          <VscChevronUp\r\n            className={\r\n              `rm-arrow ${dirIndex === -1 && 'collapsed'} ${dirIndex === 0 && 'highlight'}`\r\n            }\r\n          />\r\n        </div>\r\n\r\n        <div className='rm-arrow-con arrow-right'>\r\n          <VscChevronRight\r\n            className={\r\n              `rm-arrow ${dirIndex === -1 && 'collapsed'} ${dirIndex === 1 && 'highlight'}`\r\n            }\r\n          />\r\n        </div>\r\n\r\n        <div className='rm-arrow-con arrow-down'>\r\n          <VscChevronDown\r\n            className={\r\n              `rm-arrow ${dirIndex === -1 && 'collapsed'} ${dirIndex === 2 && 'highlight'}`\r\n            }\r\n          />\r\n        </div>\r\n\r\n        <div className='rm-arrow-con arrow-left'>\r\n          <VscChevronLeft\r\n            className={\r\n              `rm-arrow ${dirIndex === -1 && 'collapsed'} ${dirIndex === 3 && 'highlight'}`\r\n            }\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* ICONS */}\r\n      <div className='rm-item-con item-up'>\r\n        {modeIndex === 0 ? (\r\n          <IoColorPalette\r\n            className={\r\n              `rm-item rm-colors rm-rules center ${dirIndex === 0 && 'highlight'}`\r\n            }\r\n          />\r\n        ) : (\r\n          <IoColorPaletteOutline\r\n            className={\r\n              `rm-item rm-colors rm-rules center ${dirIndex === 0 && 'highlight'}`\r\n            }\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      <div className='rm-item-con item-right'>\r\n        {modeIndex === 1 ? (\r\n          <RiHeartPulseFill\r\n            className={\r\n              `rm-item rm-rules center ${dirIndex === 1 && 'highlight'}`\r\n            }\r\n          />\r\n        ) : (\r\n          <RiHeartPulseLine\r\n            className={\r\n              `rm-item rm-rules center ${dirIndex === 1 && 'highlight'}`\r\n            }\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      <div className='rm-item-con item-down'>\r\n        {modeIndex === 2 ? (\r\n          <IoGrid\r\n            className={\r\n              `rm-item rm-shapes center ${dirIndex === 2 && 'highlight'}`\r\n            }\r\n          />\r\n        ) : (\r\n          <IoGridOutline\r\n            className={\r\n              `rm-item rm-shapes center ${dirIndex === 2 && 'highlight'}`\r\n            }\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      <div className='rm-item-con item-left'>\r\n        {modeIndex === 3 ? (\r\n          <RiBrushFill\r\n            className={\r\n              `rm-item rm-draw center ${dirIndex === 3 && 'highlight'}`\r\n            }\r\n          />\r\n        ) : (\r\n          <RiBrushLine\r\n            className={\r\n              `rm-item rm-draw center ${dirIndex === 3 && 'highlight'}`\r\n            }\r\n          />\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default RadialMenu","import React, { useState, useEffect } from 'react'\r\n\r\nconst TqaRulesMain = ({ activeRule, outPhase, onSelect, onAnimOut }) => {\r\n  const [bState, setBState] = useState([0, 0, 0, 0, 0, 0, 0, 0, 0])\r\n  const [sState, setSState] = useState([0, 0, 0, 0, 0, 0, 0, 0, 0])\r\n\r\n  const toggleBBtn = (i) => {\r\n    updateActiveRule(\r\n      bState.map((st, idx) => i === idx ? 1 - st : st), \r\n      sState\r\n    )\r\n  }\r\n\r\n  const toggleSBtn = (i) => {\r\n    updateActiveRule(\r\n      bState,\r\n      sState.map((st, idx) => i === idx ? 1 - st : st)\r\n    )\r\n  }\r\n\r\n  const animEnded = (i, e) => {\r\n    if (\r\n      i === 0 && \r\n      e.animationName === 'fade-out-anim'\r\n    ) {\r\n      onAnimOut()\r\n    }\r\n  }\r\n\r\n  const updateActiveRule = (bState, sState) => {\r\n    let b = '', s = ''\r\n    bState.forEach((st, i) => {\r\n      if (st) b += i\r\n    })\r\n    sState.forEach((st, i) => {\r\n      if (st) s += i\r\n    })\r\n    onSelect(b, s)\r\n  }\r\n\r\n  useEffect(() => {\r\n    const { b, s } = activeRule\r\n    let i = 0\r\n    const bState = [0, 0, 0, 0, 0, 0, 0, 0, 0]\r\n    const sState = [0, 0, 0, 0, 0, 0, 0, 0, 0]\r\n    for (i = 0; i < b.length; i++) {\r\n      bState[parseInt(b.charAt(i))] = 1\r\n    }\r\n    for (i = 0; i < s.length; i++) {\r\n      sState[parseInt(s.charAt(i))] = 1\r\n    }\r\n    setBState(bState)\r\n    setSState(sState)\r\n  }, [activeRule])\r\n\r\n  return (\r\n    <div>\r\n      <div className='tqa-r-btns'>\r\n        <div className={`tqa-rb tqa-rl ${outPhase && 'tqa-rb-out'}`}>B</div>\r\n        {bState.map((s, i) => (\r\n          <div \r\n            key={i} \r\n            className={`tqa-rb ${s && 'tqa-rb-checked'} ${outPhase && 'tqa-rb-out'}`}\r\n            onClick={() => toggleBBtn(i)}\r\n            onAnimationEnd={e => animEnded(i, e)}\r\n          >\r\n            {i}\r\n          </div>\r\n        ))}\r\n      </div>\r\n      <div className='tqa-r-btns tqa-rbs-s'>\r\n        <div className={`tqa-rb tqa-rl ${outPhase && 'tqa-rb-out'}`}>S</div>\r\n        {sState.map((s, i) => (\r\n          <div \r\n            key={i} \r\n            className={`tqa-rb ${s && 'tqa-rb-checked'} ${outPhase && 'tqa-rb-out'}`}\r\n            onClick={() => toggleSBtn(i)}\r\n          >\r\n            {i}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst TqaRules = props => {\r\n  const [show, setShow] = useState(false)\r\n  const [outPhase, setOutPhase] = useState(false)\r\n\r\n  const { isCustomRules } = props\r\n\r\n  const onAnimOut = () => {\r\n    setShow(false)\r\n    setOutPhase(false)\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (isCustomRules) {\r\n      setShow(true)\r\n    } else {\r\n      if (show) {\r\n        setOutPhase(true)\r\n      }\r\n    }\r\n  }, [isCustomRules])\r\n\r\n  if (!show) {\r\n    return null\r\n  }\r\n\r\n  const _props = {\r\n    ...props, outPhase, onAnimOut\r\n  }\r\n\r\n  return (\r\n    <TqaRulesMain {..._props} />\r\n  )\r\n}\r\n\r\nexport default TqaRules","import React from 'react'\r\nimport BrushToggle from './BrushToggle'\r\nimport RadialMenu from './RadialMenu'\r\nimport ShapeMenu from './ShapeMenu'\r\nimport TqaRules from './TqaRules'\r\n\r\nimport './touch-quick-access.css'\r\n\r\nconst TouchQuickAccess = ({ \r\n  isMenu, isEraser, isCustomRules, modeIndex, dirIndex, touchTrigger, activeRule,\r\n  onEraserToggle, onClear, onFillSelect, onRuleSelect, onTempPause \r\n}) => {\r\n  return (\r\n    <div className='tqa-root'>\r\n      <RadialMenu \r\n        isMenu={isMenu} \r\n        modeIndex={modeIndex}\r\n        dirIndex={dirIndex}\r\n      />\r\n\r\n      {modeIndex === 3 && (\r\n        <BrushToggle \r\n          isEraser={isEraser}\r\n          onToggle={onEraserToggle}\r\n          onClear={onClear}\r\n        />\r\n      )}\r\n\r\n      <TqaRules\r\n        isCustomRules={isCustomRules}\r\n        activeRule={activeRule}\r\n        onSelect={onRuleSelect}\r\n      />\r\n\r\n      <ShapeMenu \r\n        modeIndex={modeIndex}\r\n        dir={touchTrigger.dir}\r\n        trig={touchTrigger.trig}\r\n        onFillSelect={onFillSelect}\r\n        onSliding={onTempPause}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default TouchQuickAccess","export const dynamicRules = [\r\n  '0',\r\n  '1',\r\n  '2',\r\n  '3',\r\n  '4',\r\n  '5',\r\n  '6',\r\n  '7',\r\n  '8',\r\n  '',\r\n  '0',\r\n  '01',\r\n  '012',\r\n  '0123',\r\n  '01234',\r\n  '012345',\r\n  '0123456',\r\n  '01234567',\r\n  '012345678',\r\n  '12345678',\r\n  '2345678',\r\n  '345678',\r\n  '45678',\r\n  '5678',\r\n  '678',\r\n  '78',\r\n  '8',\r\n  '1',\r\n  '12',\r\n  '123',\r\n  '1234',\r\n  '12345',\r\n  '123456',\r\n  '1234567',\r\n  '12345678',\r\n  '',\r\n  '01',\r\n  '12',\r\n  '23',\r\n  '34',\r\n  '45',\r\n  '56',\r\n  '67',\r\n  '78',\r\n  '80',\r\n  '',\r\n  '02',\r\n  '13',\r\n  '24',\r\n  '35',\r\n  '46',\r\n  '57',\r\n  '68',\r\n  '70',\r\n  '',\r\n  '012',\r\n  '123',\r\n  '234',\r\n  '345',\r\n  '456',\r\n  '567',\r\n  '678',\r\n  '780',\r\n  '801',\r\n  '',\r\n  '0123',\r\n  '1234',\r\n  '2345',\r\n  '3456',\r\n  '4567',\r\n  '5678',\r\n  '6780',\r\n  '7801',\r\n  '8012',\r\n  '',\r\n  '01234',\r\n  '12345',\r\n  '23456',\r\n  '34567',\r\n  '45678',\r\n  '56780',\r\n  '67801',\r\n  '78012',\r\n  '80123',\r\n  ''\r\n]","import { dynamicRules } from \"../static/dynamic-rules\"\r\n\r\nlet dynRules_b = [], dynRules_s = [], bi = 0, si = 0\r\n\r\nconst init = () => {\r\n  dynRules_b = [...dynamicRules]\r\n  dynRules_s = dynamicRules.filter(r => r !== \"\")\r\n  bi = dynRules_b.indexOf(\"3\")\r\n  si = dynRules_s.indexOf(\"23\")\r\n}\r\n\r\nconst currBRl = () => dynRules_b[bi]\r\nconst currSRl = () => dynRules_s[si]\r\n\r\nconst nextBRl = () => {\r\n  if (bi < dynRules_b.length - 1) {\r\n    bi += 1\r\n  } else {\r\n    bi = 0\r\n  }\r\n  return dynRules_b[bi]\r\n}\r\n\r\nconst prevBRl = () => {\r\n  if (bi > 0) {\r\n    bi -= 1\r\n  } else {\r\n    bi = dynRules_b.length - 1\r\n  }\r\n  return dynRules_b[bi]\r\n}\r\n\r\nconst nextSRl = () => {\r\n  if (si < dynRules_s.length - 1) {\r\n    si += 1\r\n  } else {\r\n    si = 0\r\n  }\r\n  return dynRules_s[si]\r\n}\r\n\r\nconst prevSRl = () => {\r\n  if (si > 0) {\r\n    si -= 1\r\n  } else {\r\n    si = dynRules_s.length - 1\r\n  }\r\n  return dynRules_s[si]\r\n}\r\n\r\ninit()\r\n\r\nexport { currBRl, currSRl, nextBRl, prevBRl, nextSRl, prevSRl }","export const dynamicShades = [\r\n  // 1\r\n  {\r\n    name: 'Mono White',\r\n    colors: [\r\n      { r: 255, g: 255, b: 255 }\r\n    ]\r\n  },\r\n  // 3\r\n  {\r\n    name: 'RGB',\r\n    colors: [\r\n      { r: 255, g: 0, b: 0 },\r\n      { r: 0, g: 255, b: 0 },\r\n      { r: 0, g: 0, b: 255 },\r\n    ]\r\n  },\r\n  {\r\n    name: 'Pasture of Dreams',\r\n    colors: [\r\n      { r: 211, g: 177, b: 194 },\r\n      { r: 193, g: 151, b: 210 },\r\n      { r:97, g:54, b:89 },\r\n    ]\r\n  },\r\n  {\r\n    name: \"Mellow Barnyard\",\r\n    colors: [\r\n      { r: 230, g: 194, b: 191 },\r\n      { r: 248, g: 239, b: 228 },\r\n      { r: 250, g: 208, b: 44 },\r\n    ]\r\n  },\r\n  {\r\n    name: \"Warm Sunset\",\r\n    colors: [\r\n      { r: 253, g: 127, b: 32 },\r\n      { r: 252, g: 46, b: 32 },\r\n      { r: 253, g: 183, b: 80 },\r\n    ]\r\n  },\r\n  // 4\r\n  {\r\n    name: 'Deep Blue',\r\n    isLooped: false,\r\n    colors: [\r\n      { r: 5, g: 10, b: 48 },\r\n      { r: 0, g: 12, b: 102 },\r\n      { r: 0, g: 0, b: 255 },\r\n      { r: 126, g: 200, b: 227 },\r\n    ]\r\n  },\r\n  {\r\n    name: \"Crack of Dawn\",\r\n    colors: [\r\n      { r: 232, g: 122, b: 0 },\r\n      { r: 216, g: 156, b: 96 },\r\n      { r: 4, g: 81, b: 116 },\r\n      { r: 0, g: 31, b: 61 },\r\n    ]\r\n  },\r\n  {\r\n    name: \"Ice Infinity\",\r\n    colors: [\r\n      { r: 217, g: 228, b: 236 },\r\n      { r: 183, g: 207, b: 220 },\r\n      { r: 106, g: 171, b: 210 },\r\n      { r: 56, g: 94, b: 114 },\r\n    ]\r\n  },\r\n  {\r\n    name: 'Facing Forward',\r\n    colors: [\r\n      { r: 229, g: 221, b: 200 },\r\n      { r: 1, g: 148, b: 154 },\r\n      { r: 0, g: 67, b: 105 },\r\n      { r: 219, g: 31, b: 72 },\r\n    ]\r\n  },\r\n  {\r\n    name: 'Rose Petals',\r\n    colors: [\r\n      { r: 59, g: 4, b: 4 },\r\n      { r: 222, g: 179, b: 173 },\r\n      { r: 222, g: 132, b: 123 },\r\n      { r: 185, g: 92, b: 80 },\r\n    ]\r\n  },\r\n  {\r\n    name: \"Backdoor Casual\",\r\n    colors: [\r\n      { r: 233, g: 137, b: 115 },\r\n      { r: 231, g: 212, b: 192 },\r\n      { r: 136, g: 178, b: 204 },\r\n      { r: 101, g: 142, b: 169 },\r\n    ]\r\n  },\r\n  {\r\n    name: 'Healthy Leaves',\r\n    colors: [\r\n      { r: 61, g: 85, b: 12 },\r\n      { r: 129, g: 184, b: 34 },\r\n      { r: 236, g: 248, b: 127 },\r\n      { r: 89, g: 152, b: 26 },\r\n    ]\r\n  },\r\n  {\r\n    name: \"Cotton Dandelions\",\r\n    colors: [\r\n      { r: 1, g: 58, b: 32 },\r\n      { r: 212, g: 214, b: 207 },\r\n      { r: 83, g: 111, b: 22 },\r\n      { r: 63, g: 65, b: 34 },\r\n    ]\r\n  },\r\n  {\r\n    name: 'Trees During Fall',\r\n    colors: [\r\n      { r: 219, g: 164, b: 14 },\r\n      { r: 75, g: 90, b: 32 },\r\n      { r: 120, g: 125, b: 18 },\r\n      { r: 126, g: 110, b: 19 },\r\n    ]\r\n  },\r\n  {\r\n    name: \"Rustic Project\",\r\n    colors: [\r\n      { r: 116, g: 93, b: 32 },\r\n      { r: 206, g: 166, b: 96 },\r\n      { r: 243, g: 237, b: 224 },\r\n      { r: 107, g: 122, b: 64 },\r\n    ]\r\n  },\r\n  // 5\r\n  {\r\n    name: 'Flame of Fire',\r\n    colors: [\r\n      { r: 255, g: 232, b: 8 },\r\n      { r: 255, g: 206, b: 0 },\r\n      { r: 255, g: 154, b: 0 },\r\n      { r: 255, g: 90, b: 0 },\r\n      { r: 255, g: 0, b: 0 },\r\n    ]\r\n  },\r\n  {\r\n    name: \"Fire & Ice\",\r\n    colors: [\r\n      { r: 0, g: 0, b: 0 },\r\n      { r: 255, g: 95, b: 13 },\r\n      { r: 182, g: 30, b: 35 },\r\n      { r: 5, g: 81, b: 190 },\r\n      { r: 62, g: 172, b: 236 },\r\n      { r: 23, g: 41, b: 105 },\r\n      { r: 0, g: 0, b: 0 }\r\n    ]\r\n  },\r\n  {\r\n    name: \"Desert & Sky\",\r\n    colors: [\r\n      { r: 0, g: 0, b: 0 },\r\n      { r: 255, g: 244, b: 218 },\r\n      { r: 249, g: 207, b: 127 },\r\n      { r: 170, g: 60, b: 60 },\r\n      { r: 57, g: 138, b: 147 },\r\n      { r: 1, g: 43, b: 82 },\r\n      { r: 0, g: 0, b: 0 }\r\n    ]\r\n  },\r\n  {\r\n    name: \"HSB\",\r\n    colors: [\r\n      { r: 0, g: 0, b: 0 },\r\n      { r: 245, g: 107, b: 41 },\r\n      { r: 68, g: 179, b: 174 },\r\n      { r: 216, g: 228, b: 191 },\r\n      { r: 44, g: 33, b: 25 },\r\n      { r: 198, g: 81, b: 87 },\r\n      { r: 0, g: 0, b: 0 }\r\n    ]\r\n  },\r\n]\r\n\r\nexport const monoShades = [\r\n  { name: 'White', hex: '#ffffff' },\r\n  { name: 'Gray', hex: '#828282' },\r\n  { name: 'Pearl River', hex: '#d9dddc' },\r\n  { name: 'Smoke', hex: '#bebd88' },\r\n  { name: 'Steel', hex: '#777b7e' },\r\n  { name: 'Steel', hex: '#777b7e' },\r\n  { name: 'Brown', hex: '#7c4700' },\r\n  { name: 'Cinnamon', hex: '#622a0f' },\r\n  { name: 'Tortilla', hex: '#997950' },\r\n  { name: 'Caramel', hex: '#613613' },\r\n  { name: 'Red', hex: '#d30000' },\r\n  { name: 'Scarlet', hex: '#ff2400' },\r\n  { name: 'Imperial', hex: '#ed2939' },\r\n  { name: 'Maroon', hex: '#800000' },\r\n  { name: 'Ferrari', hex: '#ff2800' },\r\n  { name: 'Burgandy', hex: '#8d021f' },\r\n  { name: 'Sangria', hex: '#5e1914' },\r\n  { name: 'Orange', hex: '#fc6600' },\r\n  { name: 'Tiger', hex: '#fd6a02' },\r\n  { name: 'Tangerine', hex: '#cf9812' },\r\n  { name: 'Bronze', hex: '#b1560f' },\r\n  { name: 'Amber', hex: '#ffbf00' },\r\n  { name: 'Gold', hex: '#f9a602' },\r\n  { name: 'Fire', hex: '#fda50f' },\r\n  { name: 'Yellow', hex: '#fff200' },\r\n  { name: 'Tuscany', hex: '#fcd12a' },\r\n  { name: 'Mustard', hex: '#fedc56' },\r\n  { name: 'Flax', hex: '#eedc82' },\r\n  { name: 'Lemon', hex: '#effd5f' },\r\n  { name: 'Lime', hex: '#c7ea46' },\r\n  { name: 'Kelly', hex: '#4cbb17' },\r\n  { name: 'Green', hex: '#3bb143' },\r\n  { name: 'Forest', hex: '#0b6623' },\r\n  { name: 'Olive', hex: '#708238' },\r\n  { name: 'Jade', hex: '#00a86b' },\r\n  { name: 'Jungle', hex: '#29ab87' },\r\n  { name: 'Turkish', hex: '#5097a4' },\r\n  { name: 'Sky', hex: '#95c8d8' },\r\n  { name: 'Azure', hex: '#0080fe' },\r\n  { name: 'Blue', hex: '#0018f9' },\r\n  { name: 'Navy', hex: '#000080' },\r\n  { name: 'Sapphire', hex: '#0f52ba' },\r\n  { name: 'Electric', hex: '#8f00ff' },\r\n  { name: 'Violet', hex: '#b200ed' },\r\n  { name: 'Royal', hex: '#7852a9' },\r\n  { name: 'Fandango', hex: '#b5338a' },\r\n  { name: 'Plum', hex: '#8d4585' },\r\n  { name: 'Floral', hex: '#b47ede' },\r\n  { name: 'Thistle', hex: '#d7bfdc' }\r\n]","import { dynamicShades, monoShades } from \"../static/dynamic-shades\"\r\nimport { generateGradient, hex2rgb, rgb2hex } from \"../utils/color-utils\"\r\n\r\nconst STEP_MAX = 100\r\nconst PULSE_MAX = 20\r\n\r\nlet step = 10, pulse = 1, isMono = true\r\nlet mi = 0 // Mode Index -> 0 - step, 1 - pulse\r\nlet dsi = 0 // dynamic shade index\r\nlet msi = 0 // mono shade index\r\n\r\nlet extendColorMod, shortenColorMod\r\n\r\nconst init = () => {\r\n  extendColorMod = nextMono\r\n  shortenColorMod = prevMono\r\n}\r\n\r\nconst applyMods = () => {\r\n  let name, colors, steps\r\n  ({ name, colors } = dynamicShades[dsi])\r\n  if (step === 0) {\r\n    return {\r\n      shades: [\r\n        ...colors.map(color => rgb2hex(color)),\r\n        ...(new Array(pulse).fill('#000000'))\r\n      ],\r\n      notification: `${name} | ${mi ? `Pulse ${pulse}` : `Step ${step}`}`\r\n    }\r\n  }\r\n  ({ colors, steps } = configureColors(colors))\r\n  return {\r\n    shades: generateGradient({ colors, steps }),\r\n    notification: `${name} | ${mi ? `Pulse ${pulse}` : `Step ${step}`}`\r\n  }\r\n}\r\n\r\nconst configureColors = colors => {\r\n  let steps = []\r\n  if (pulse) {\r\n    if (pulse > 1) {\r\n      colors = [\r\n        { r: 0, g: 0, b: 0 },\r\n        ...colors,\r\n        { r: 0, g: 0, b: 0 },\r\n        { r: 0, g: 0, b: 0 }\r\n      ]\r\n      steps = new Array(colors.length - 1).fill(step)\r\n      steps[steps.length - 1] *= pulse\r\n    } else {\r\n      colors = [\r\n        { r: 0, g: 0, b: 0 },\r\n        ...colors,\r\n        { r: 0, g: 0, b: 0 }\r\n      ]\r\n      steps = new Array(colors.length - 1).fill(step)\r\n    }\r\n  } else {\r\n    colors = [...colors, colors[0]]\r\n    steps = new Array(colors.length - 1).fill(step)\r\n  }\r\n  return { colors, steps }\r\n}\r\n\r\nconst applyMono = () => {\r\n  const { name, hex } = monoShades[msi]\r\n  return { shades: [hex], notification: `Mono - ${name}` }\r\n}\r\n\r\nconst extendSeq = () => {\r\n  if (step < STEP_MAX) {\r\n    step += 1\r\n  }\r\n  return applyMods()\r\n}\r\n\r\nconst shortenSeq = () => {\r\n  if (step > 0) {\r\n    step -= 1\r\n  }\r\n  return applyMods()\r\n}\r\n\r\nconst extendPulse = () => {\r\n  if (pulse < PULSE_MAX) {\r\n    pulse += 1\r\n  }\r\n  return applyMods()\r\n}\r\n\r\nconst shortenPulse = () => {\r\n  if (pulse > 0) {\r\n    pulse -= 1\r\n  }\r\n  return applyMods()\r\n} \r\n\r\nconst nextMono = () => {\r\n  if (msi < monoShades.length - 1) {\r\n    msi += 1\r\n  } else {\r\n    msi = 0\r\n  }\r\n  return applyMono()\r\n}\r\n\r\nconst prevMono = () => {\r\n  if (msi > 0) {\r\n    msi -= 1\r\n  } else {\r\n    msi = monoShades.length - 1\r\n  }\r\n  return applyMono()\r\n}\r\n\r\nconst nextSeq = () => {\r\n  if (dsi < dynamicShades.length - 1) {\r\n    dsi += 1\r\n    if (isMono) {\r\n      isMono = false\r\n      extendColorMod = mi ? extendPulse : extendSeq\r\n      shortenColorMod = mi ? shortenPulse : shortenSeq\r\n    }\r\n  }\r\n  return applyMods()\r\n}\r\n\r\nconst prevSeq = () => {\r\n  if (dsi > 0) {\r\n    dsi -= 1\r\n  }\r\n  if (dsi === 0) {\r\n    if (!isMono) {\r\n      isMono = true\r\n      extendColorMod = nextMono\r\n      shortenColorMod = prevMono\r\n    }\r\n    return applyMono()\r\n  }\r\n  return applyMods()\r\n}\r\n\r\nconst switchColorSubMod = () => {\r\n  if (dsi > 0) {\r\n    mi = 1 - mi\r\n    extendColorMod = mi ? extendPulse : extendSeq\r\n    shortenColorMod = mi ? shortenPulse : shortenSeq\r\n    return { \r\n      notification: `Selected ↑↓ Modifier - ${mi ? 'Pulse' : 'Step'}` \r\n    }\r\n  }\r\n  return { notification: '' }\r\n}\r\n\r\ninit()\r\n\r\nexport { extendColorMod, shortenColorMod, nextSeq, prevSeq, switchColorSubMod }\r\n\r\n\r\n// HELPERS\r\n\r\nconst converti = (inpStr) => {\r\n  const inputArr = inpStr.split(\"-\")\r\n  const name = inputArr[0]\r\n  const hexes = inputArr[1].split(\" \")\r\n  let outStr = `\\n{\\n  name: \"${name}\",\\n  colors: [\\n    { r: 0, g: 0, b: 0 },\\n`\r\n  hexes.forEach((hex, i) => {\r\n    const { r, g, b } = hex2rgb(hex)\r\n    outStr += `    { r: ${r}, g: ${g}, b: ${b} },\\n`\r\n    if (i === hexes.length - 1) {\r\n      outStr += '    { r: 0, g: 0, b: 0 }\\n  ]\\n},\\n\\n'\r\n    }\r\n  })\r\n  console.log(outStr)\r\n  return 0\r\n}\r\n\r\nwindow.createHelpers([converti])\r\n","export const TouchSwitch = ({ name, checked, inDelay = 0, onCheckChange }) => (\r\n  <div \r\n    className='to-control-con'\r\n    style={{ animationDelay: `${inDelay}ms` }}\r\n  >\r\n    <div className='to-c-label'>\r\n      {name}\r\n    </div>\r\n    <div \r\n      className='to-c-switch' \r\n      onClick={() => onCheckChange(!checked)}\r\n    >\r\n      <div className='to-c-s-track center'>\r\n        <div className={`to-c-s-handle ${checked && 'to-c-s-h-checked'}`} />\r\n      </div>\r\n    </div>\r\n  </div>\r\n)\r\n\r\nexport const TouchButton = ({ name, onClick, extraMargin = false, inDelay = 0 }) => (\r\n  <div \r\n    className={`to-control-con to-c-button ${extraMargin && 'to-c-b-extra-margin'}`}\r\n    style={{ animationDelay: `${inDelay}ms` }}\r\n    onClick={onClick}\r\n  >\r\n    <div>{name}</div>\r\n  </div>\r\n)","import { useRef, useState, useEffect, useContext } from 'react'\r\nimport { \r\n  initGrid, updateGrid, drawGrid, drawInverse, drawShaded, drawShapes, drawOnGrid, eraseOnGrid, paint, preview,\r\n  setBrushSize, setSize, setupPreview, setFill, setRule, setGridWrap, setShadeSeq, setInverseBg, setTrails, reInitGrid\r\n} from './grid.js'\r\n\r\nimport Controls from './controls/Controls'\r\nimport { DataContext } from '../context/DataContext'\r\nimport Resizer from './resizer/Resizer.js'\r\nimport TouchControls from './controls/TouchControls.js'\r\nimport Splash from './splash/Splash.js'\r\n\r\nconst IS_MOBILE = document.body.clientWidth <= 768\r\n\r\nlet ctx\r\nlet ctxbg, background, gradientStops\r\nlet animationFrameId, findex, initialised = false\r\n\r\nlet speed = 4, drawSpeed = speed\r\nlet isBrushDown = false, isInverseDraw = false, isAgeShades = false, isInverseImage = false, isShapeShades = false\r\n\r\nconst World = (props) => {\r\n  const [fps, setFps] = useState(0)\r\n  const [showFps, setShowFps] = useState(false)\r\n  const [bgImgSrc, setBgImgSrc] = useState('')\r\n  const [isResizing, setIsResizing] = useState(false)\r\n  const [isSplash, setIsSplash] = useState(true)\r\n  const [altRender, setAltRender] = useState(false)\r\n\r\n  const canvasRef = useRef(null)\r\n  const canvasbgRef = useRef(null)\r\n  \r\n  const { setDimensions } = useContext(DataContext)\r\n\r\n  const sizeChanged = size => {\r\n    const { gridW, gridH } = setSize(size)\r\n    setDimensions(gridW, gridH)\r\n  }\r\n\r\n  const setBgImage = src => {\r\n    if (src) {\r\n      isInverseImage = true\r\n      setBgImgSrc(src)\r\n      setupImageBackground()\r\n    }\r\n  }\r\n\r\n  const windowResized = (_isResizing) => {\r\n    if (_isResizing !== isResizing) {\r\n      setIsResizing(_isResizing)\r\n      if (!isSplash) {\r\n        isPlayingChanged(!_isResizing)\r\n      }\r\n\r\n      if (!_isResizing) {\r\n        /* Resizing finished */\r\n        \r\n        updateCanvasSize()\r\n        resizeBgRedraw()\r\n        \r\n        const { gridW, gridH } = reInitGrid()\r\n        setDimensions(gridW, gridH)\r\n      }\r\n    }\r\n  }\r\n\r\n  const updateCanvasSize = () => {\r\n    const canvas = canvasRef.current\r\n    const canvasBg = canvasbgRef.current\r\n\r\n    canvas.setAttribute('width', window.innerWidth)\r\n    canvas.setAttribute('height', window.innerHeight)\r\n    canvasBg.setAttribute('width', window.innerWidth)\r\n    canvasBg.setAttribute('height', window.innerHeight)\r\n  }\r\n\r\n  const toggleFps = v => {\r\n    setShowFps(v)\r\n    if (!v) {\r\n      setFps(0)\r\n    }\r\n  }\r\n\r\n  const removeSplash = () => {\r\n    setIsSplash(false)\r\n    isPlayingChanged(true)\r\n  }\r\n\r\n  useEffect(() => {\r\n    const context = canvasRef.current.getContext('2d')\r\n    const contextBg = canvasbgRef.current.getContext('2d')\r\n\r\n    const startTime = Date.now()\r\n    let fLogIndex, fLogTime\r\n\r\n    const init = () => {\r\n      findex = 0\r\n\r\n      ctx = context\r\n      ctxbg = contextBg\r\n\r\n      updateCanvasSize()\r\n      setBackground('#000000')\r\n\r\n      initialised = true\r\n    }\r\n    \r\n    const initFps = () => {\r\n      fLogIndex = 0\r\n      fLogTime = startTime\r\n    }\r\n\r\n    const _render = () => {\r\n      findex += 1\r\n\r\n      update(findex)\r\n      draw(context, findex)\r\n\r\n      logFps()\r\n    }\r\n\r\n    const render = () => {\r\n      _render()\r\n      animationFrameId = window.requestAnimationFrame(render)\r\n    }\r\n\r\n    const renderAlt = _render\r\n\r\n    const logFps = () => {\r\n      if (showFps) {\r\n        const now = Date.now()\r\n        if (now - fLogTime < 1000) {\r\n          fLogIndex += 1\r\n        } else {\r\n          setFps(Math.floor(fLogIndex / (now - fLogTime) * 1000))\r\n          fLogTime = now\r\n          fLogIndex = 0\r\n        }\r\n      }\r\n    }\r\n\r\n    if (!initialised) {\r\n      init()\r\n    }\r\n    if (showFps) {\r\n      initFps()\r\n    }\r\n\r\n    if (altRender) {\r\n      const rid = setInterval(renderAlt, 1)\r\n      return () => {\r\n        clearInterval(rid)\r\n      }\r\n    } else {\r\n      render()\r\n      return () => {\r\n        window.cancelAnimationFrame(animationFrameId)\r\n      }\r\n    }\r\n  }, [showFps, altRender])\r\n\r\n  return (\r\n    <div className='world'>\r\n      <img className='bg-img' src={bgImgSrc} alt=\"Background\" />\r\n\r\n      <canvas ref={canvasbgRef} {...props} />\r\n      <canvas ref={canvasRef} {...props} />\r\n\r\n      {showFps && (\r\n        <div className='fpsCounter'>\r\n          {fps ? fps : 'Calculating...'}\r\n        </div>\r\n      )}\r\n\r\n      {isSplash ? (\r\n        <Splash \r\n          isMobile={IS_MOBILE}\r\n          onDismiss={removeSplash}\r\n        />\r\n      ) : (\r\n        IS_MOBILE ? (\r\n          <TouchControls \r\n            altRender={altRender}\r\n\r\n            onIsPlayingChanged={isPlayingChanged}\r\n            onDraw={drawOnGrid}\r\n            onErase={eraseOnGrid}\r\n            onClear={clear}\r\n            onBrushDownChange={brushDownChanged}\r\n            onRuleSelect={setRule}\r\n            onShadesSelect={shadesSelected}\r\n            onFillSelect={setFill}\r\n  \r\n            onShowFpsChange={toggleFps}\r\n            onWrapChange={setGridWrap}\r\n            onAltRenderChange={setAltRender}\r\n          />\r\n        ) : (\r\n          <Controls\r\n            onIsPlayingChanged={isPlayingChanged} \r\n            onBrushDownChanged={brushDownChanged}\r\n            onDraw={drawOnGrid}\r\n            onErase={eraseOnGrid}\r\n            onPaint={paint}\r\n            onPreview={preview}\r\n  \r\n            onPreviewStart={startPreview}\r\n            onPreviewEnd={endPreview}\r\n            onFillSelect={setFill}\r\n            onClear={clear}\r\n            onRuleSelect={setRule}\r\n            onWrapChanged={setGridWrap}\r\n            onBgSelect={setBackground}\r\n            onShadesSelect={shadesSelected}\r\n            onGradSelect={setGradient}\r\n            onImageSelect={setBgImage}\r\n            onTrailsChanged={setTrails}\r\n  \r\n            onSizeChanged={sizeChanged}\r\n            onSpeedChanged={speedChanged}\r\n            onBrushChanged={setBrushSize}\r\n          />\r\n        )\r\n      )}\r\n\r\n      <Resizer isResizing={isResizing} onResizing={windowResized} />\r\n    </div>\r\n  )\r\n}\r\n\r\n/* --- CONTROLS --- */\r\n\r\nconst isPlayingChanged = (isPlaying) => {\r\n  update = isPlaying ? _update : () => {}\r\n}\r\n\r\nconst brushDownChanged = (_isBrushDown) => {\r\n  isBrushDown = _isBrushDown\r\n  reconfigureDraw()\r\n}\r\n\r\nconst shadesSelected = ({ shades, isLoop }) => {\r\n  if (isInverseDraw) {\r\n    isInverseDraw = false\r\n    updateBackground()\r\n  }\r\n\r\n  isAgeShades = shades.length > 1\r\n  setShadeSeq({ shades, isLoop })\r\n  reconfigureDraw()\r\n  triggerDraw()\r\n}\r\n\r\nconst speedChanged = (spd) => {\r\n  speed = 101 - spd\r\n  drawSpeed = speed\r\n  reconfigureDraw()\r\n}\r\n\r\nconst startPreview = shape => {\r\n  setupPreview(shape)\r\n  previewConfig({ isStart: true })\r\n}\r\n\r\nconst endPreview = () => {\r\n  previewConfig({ isStart: false })\r\n}\r\n\r\nconst previewConfig = ({ isStart }) => {\r\n  isBrushDown = isStart\r\n  isShapeShades = isStart\r\n  reconfigureDraw()\r\n}\r\n\r\nconst clear = () => {\r\n  /* Will clear both canvas and grid */\r\n  ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height)\r\n  setFill('clear')\r\n}\r\n\r\n/* --- BACKGROUND LAYER --- */\r\n\r\nconst setBackground = bg => {\r\n  background = bg\r\n  setInverseBg(bg)\r\n  \r\n  if (!isInverseDraw) {\r\n    updateBackground()\r\n  }\r\n}\r\n\r\nconst setGradient = stops => {\r\n  isInverseImage = false\r\n  gradientStops = stops\r\n  initInverseDraw()\r\n  applyGradient()\r\n}\r\n\r\nconst setupImageBackground = () => {\r\n  initInverseDraw()\r\n  ctxbg.clearRect(0, 0, ctxbg.canvas.width, ctxbg.canvas.height)\r\n}\r\n\r\nconst updateBackground = () => {\r\n  ctxbg.fillStyle = background\r\n  ctxbg.fillRect(0, 0, ctxbg.canvas.width, ctxbg.canvas.height)\r\n}\r\n\r\nconst applyGradient = () => {\r\n  const grad = ctxbg.createLinearGradient(0, 0, ctxbg.canvas.width, 0)\r\n  grad.addColorStop(0, gradientStops[0])\r\n  grad.addColorStop(1, gradientStops[1])\r\n\r\n  ctxbg.fillStyle = grad\r\n  ctxbg.fillRect(0, 0, ctxbg.canvas.width, ctxbg.canvas.height)\r\n}\r\n\r\nconst initInverseDraw = () => {\r\n  if (!isInverseDraw) {\r\n    isInverseDraw = true\r\n    isAgeShades = false\r\n    reconfigureDraw()\r\n    triggerDraw()\r\n  }\r\n}\r\n\r\nconst resizeBgRedraw = () => {\r\n  if (isInverseDraw) {\r\n    if (isInverseImage) {\r\n      setupImageBackground()\r\n    } else applyGradient()\r\n  } else {\r\n    updateBackground()\r\n  }\r\n}\r\n\r\n\r\n/* --- EXT FUNCTIONS --- */\r\n\r\nconst initExt = () => {\r\n  initGrid(IS_MOBILE)\r\n}\r\n\r\nconst triggerDraw = () => draw(ctx, drawSpeed)\r\n\r\n/* - UPDATE - */\r\n\r\nlet update = () => {}\r\n\r\nconst _update = (findex) => {\r\n  if (findex % speed === 0) {\r\n    /* All updates go here */\r\n\r\n    updateGrid(findex)\r\n  }\r\n}\r\n\r\n/* - DRAW - */\r\n\r\nconst reconfigureDraw = () => {\r\n  if (isShapeShades) _draw = drawShapes\r\n  else if (isInverseDraw) _draw = drawInverse\r\n  else if (isAgeShades) _draw = drawShaded\r\n  else _draw = drawGrid\r\n\r\n  draw = isBrushDown || drawSpeed === 1 ? _draw : _fdraw\r\n}\r\n\r\n/*\r\n * Changed draw implemention to only use draw-on-each-render (not fast) for:\r\n * 1. When in brush mode and mouse is held down\r\n * 2. When previewing a shape for placement\r\n * 3. When previewing the filler modifiers\r\n */\r\n\r\nlet _draw = drawGrid\r\n\r\nconst _fdraw = (ctx, findex) => {\r\n  if (findex % drawSpeed === 0) {\r\n    _draw(ctx)\r\n  }\r\n}\r\n\r\nlet draw = _fdraw\r\n\r\ninitExt()\r\n\r\nexport default World\r\n","import React, { useState, useEffect } from 'react'\r\nimport { TouchSwitch, TouchButton } from './touch-option-controls'\r\n\r\nimport './touch-options.css'\r\n\r\nconst TouchOptions = ({ \r\n  isOptions, altRender, \r\n  onShowFpsChange, onWrapChange, onAltRenderChange, onClose \r\n}) => {\r\n  const [show, setShow] = useState(false)\r\n  const [outPhase, setOutPhase] = useState(false)\r\n\r\n  const [showFps, setShowFps] = useState(false)\r\n  const [wrapGrid, setWrapGrid] = useState(false)\r\n  const [isFullscreen, setIsFullscreen] = useState(false)\r\n\r\n  const animEnded = e => {\r\n    if (e.animationName === 'slide-out-anim') {\r\n      setShow(false)\r\n      setOutPhase(false)\r\n    }\r\n  }\r\n\r\n  const toggleFps = checked => {\r\n    setShowFps(checked)\r\n    onShowFpsChange(checked)\r\n  }\r\n\r\n  const toggleGridWrap = checked => {\r\n    setWrapGrid(checked)\r\n    onWrapChange(checked)\r\n  }\r\n\r\n  const fullscreen = () => {\r\n    if (!document.fullscreenElement) {\r\n      document.body.requestFullscreen()\r\n      setIsFullscreen(true)\r\n    } else {\r\n      document.exitFullscreen()\r\n      setIsFullscreen(false)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    const fullscreenChange = () => {\r\n      if (!document.fullscreenElement) {\r\n        setIsFullscreen(false)\r\n      }\r\n    }  \r\n\r\n    document.addEventListener('fullscreenchange', fullscreenChange)\r\n\r\n    return () => {\r\n      document.removeEventListener('fullscreenchange', fullscreenChange)\r\n    }\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (isOptions) {\r\n      setShow(true)\r\n    } else if (show) {\r\n      setOutPhase(true)\r\n    }\r\n  }, [isOptions])\r\n\r\n  if (!show) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div className='touch-options-root'>\r\n      <div \r\n        className={`to-con ${outPhase && 'slide-out'}`}\r\n        onAnimationEnd={animEnded}\r\n      >\r\n        <div className='to-title'>\r\n          OPTIONS\r\n        </div>\r\n        <div className='to-items'>\r\n          <TouchSwitch \r\n            name='Show FPS' \r\n            checked={showFps} \r\n            inDelay={80} \r\n            onCheckChange={toggleFps} \r\n          />\r\n\r\n          <TouchSwitch \r\n            name='Wrap Grid' \r\n            checked={wrapGrid} \r\n            inDelay={120} \r\n            onCheckChange={toggleGridWrap} \r\n          />\r\n\r\n          <TouchSwitch\r\n            name='Faster Rendering'\r\n            checked={altRender}\r\n            inDelay={160}\r\n            onCheckChange={onAltRenderChange}\r\n          />\r\n\r\n          <TouchButton \r\n            name={isFullscreen ? 'Exit Fullscreen' : 'Fullscreen'} \r\n            inDelay={200} \r\n            onClick={fullscreen} \r\n          />\r\n\r\n          <TouchButton \r\n            name='Close OPTIONS' \r\n            extraMargin={true} \r\n            inDelay={240} \r\n            onClick={onClose} \r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default TouchOptions","import React, { useState, useContext } from 'react'\r\nimport TouchReceiver from '../receivers/TouchReceiver'\r\nimport TouchQuickAccess from '../touch-quick-access/TouchQuickAccess'\r\nimport { NotificationContext } from '../../context/NotificationContext'\r\nimport { currBRl, currSRl, nextBRl, nextSRl, prevBRl, prevSRl } from '../../touch-controllers/rules-tc'\r\nimport { extendColorMod, shortenColorMod, nextSeq, prevSeq, switchColorSubMod } from '../../touch-controllers/shades-tc'\r\n\r\nimport './controls.css'\r\nimport { NotificationWithBody } from '../notifications/notification-templates'\r\nimport TouchOptions from '../touch-options/TouchOptions'\r\n\r\n/**\r\n * [ ] Add dx, dy to trigger index in TouchReceiver not 1\r\n * [ ] Rule mode down / right cycle between zero rules and up / left cycle non-zero rules\r\n * [ ] ON TAP OF MODES\r\n *     [ ] Multihandle slider for color mode\r\n *     [ ] Custom rules panel\r\n *     [ ] Menu access by up chevron for further customisation. Maybe put all this to the right for more space\r\n * [ ] Some explaination regarding modes instead of notification (Can be toggles wiht tutorial or something independant of notifications)\r\n * [-] Color mode implement interval (pulse -> step size at loop end) apart from steps\r\n *     [x] Add similar menu for color mode as shape mode to cycle between the sub-modes\r\n */\r\n\r\n/* \r\n * menuDirIndex:\r\n *    0\r\n * 3 -1  1\r\n *    2\r\n */\r\n\r\nconst MODES = [\r\n  { notification: 'Switched to Color Mode', triggerOffset: 5 },\r\n  { notification: 'Switched to Rule Mode', triggerOffset: 5 },\r\n  { notification: 'Switched to Fill Mode', triggerOffset: 5 },\r\n  {\r\n    notification: (\r\n      <NotificationWithBody\r\n        title='Switched to Brush Mode'\r\n        body='Swipe up menu disabled. Please select another mode to re-enable swipe up menu.'\r\n      />\r\n    ),\r\n    triggerOffset: -1\r\n  },\r\n]\r\n\r\nlet arB = '3', arS = '23'\r\n\r\nconst TouchControls = ({ \r\n  altRender,\r\n  onIsPlayingChanged,\r\n  onDraw, onErase, onClear, onBrushDownChange, \r\n  onRuleSelect, onShadesSelect, onFillSelect,\r\n  onShowFpsChange, onWrapChange, onAltRenderChange\r\n }) => {\r\n  const { showNotification } = useContext(NotificationContext)\r\n\r\n  const [isMenu, setIsMenu] = useState(false)\r\n  const [isOptions, setIsOptions] = useState(false)\r\n  const [isEraser, setIsEraser] = useState(false)\r\n  const [isCustomRules, setIsCustomRules] = useState(false)\r\n  const [modeIndex, setModeIndex] = useState(1)\r\n  const [menuDirIndex, setMenuDirIndex] = useState(-2)\r\n  const [triggerOffset, setTriggerOffset] = useState(5)\r\n  const [touchTrigger, setTouchTrigger] = useState({ dir: -1, trig: 0 }) // dir same as menuDirIndex + 4 as tap & 5 as release\r\n  const [activeRule, setActiveRule] = useState({ b: '3', s: '23' })\r\n\r\n  let upTrigger, rightTrigger, downTrigger, leftTrigger\r\n\r\n  const updateIsCustomRules = v => {\r\n    if (v) {\r\n      setActiveRule({ b: arB, s: arS })\r\n    } else {\r\n      arB = activeRule.b\r\n      arS = activeRule.s\r\n    }\r\n    setIsCustomRules(v)\r\n  }\r\n\r\n  const tap = () => {\r\n    if (modeIndex === 0) {\r\n      const { notification } = switchColorSubMod()\r\n      showNotification(notification)\r\n    } else if (modeIndex === 1) {\r\n      updateIsCustomRules(!isCustomRules)\r\n    } else if (modeIndex === 2) {\r\n      triggerTouch(4)\r\n    }\r\n  }\r\n\r\n  const tapAndHold = () => {\r\n    if (!isMenu) {\r\n      setIsMenu(true)\r\n      setTriggerOffset(25)\r\n\r\n      // if menu opened onBrushDownChange(false) does not trigger\r\n      if (modeIndex === 3) {\r\n        onBrushDownChange(false)\r\n      }\r\n    }\r\n  }\r\n\r\n  const touch = (x, y) => {\r\n    if (modeIndex === 3) {\r\n      applyBrush(x, y)\r\n      onBrushDownChange(true)\r\n    }\r\n  }\r\n\r\n  const touchPointChange = (x, y) => {\r\n    // only called on modeIndex === 3 atm\r\n    applyBrush(x, y)\r\n  }\r\n\r\n  const release = () => {\r\n    if (isMenu) {\r\n      if (menuDirIndex > -1 && menuDirIndex !== modeIndex) {\r\n        const { notification, triggerOffset } = MODES[menuDirIndex]\r\n        if (menuDirIndex === 3 && isEraser) {\r\n          setIsEraser(false)\r\n        }\r\n\r\n        setModeIndex(menuDirIndex)\r\n        setTriggerOffset(triggerOffset)\r\n        if (isCustomRules && menuDirIndex !== 1) {\r\n          updateIsCustomRules(false)\r\n        }\r\n        if (modeIndex === 3) {\r\n          showNotification(\r\n            <NotificationWithBody\r\n              title={notification}\r\n              body='Swipe up menu re-enabled'\r\n            />\r\n          )\r\n        } else {\r\n          showNotification(notification)\r\n        }\r\n      } else {\r\n        setTriggerOffset(MODES[modeIndex].triggerOffset)\r\n      }\r\n\r\n      setIsMenu(false)\r\n      setMenuDirIndex(-2)\r\n    } else {\r\n      if (modeIndex === 2) {\r\n        triggerTouch(5)\r\n      } else if (modeIndex === 3) {\r\n        onBrushDownChange(false)\r\n      }\r\n    }\r\n  }\r\n\r\n  const triggerTouch = (dir) => {\r\n    setTouchTrigger({ dir, trig: 1 - touchTrigger.trig })\r\n  }\r\n\r\n  const swipeUp = () => {\r\n    setIsOptions(true)\r\n  }\r\n\r\n  const applyMenuDirection = (di, odi) => {\r\n    if (menuDirIndex === odi) {\r\n      setMenuDirIndex(-1)\r\n    } else if (menuDirIndex !== di) {\r\n      setMenuDirIndex(di)\r\n    }\r\n  }\r\n\r\n  const applyDynamicRule = (b, s) => {\r\n    onRuleSelect({ b, s })\r\n    if (isCustomRules) {\r\n      setActiveRule({ b, s })\r\n    } else {\r\n      arB = b\r\n      arS = s\r\n      showNotification(`B${b} S${s}`, 2)\r\n    }\r\n  }\r\n\r\n  const applyDynamicShades = ({ shades, notification }) => {\r\n    onShadesSelect({ shades, isLoop: true })\r\n    showNotification(notification)\r\n  }\r\n\r\n  const applyBrush = (x, y) => {\r\n    if (isEraser) {\r\n      onErase(x, y)\r\n    } else {\r\n      onDraw(x, y)\r\n    }\r\n  }\r\n\r\n  const toggleEraser = () => {\r\n    setIsEraser(!isEraser)\r\n    showNotification(`Switched to ${isEraser ? 'Brush' : 'Eraser'}`) // bc isEraser still prev value at this point\r\n  }\r\n\r\n  const clear = () => {\r\n    showNotification('Grid cleared')\r\n    onClear()\r\n  }\r\n\r\n  const tempPause = (pause) => {\r\n    onIsPlayingChanged(!pause)\r\n  }\r\n\r\n  const closeOptions = () => {\r\n    setIsOptions(false)\r\n  }\r\n\r\n  if (isMenu) {\r\n    upTrigger = () => applyMenuDirection(0, 2)\r\n    rightTrigger = () => applyMenuDirection(1, 3)\r\n    downTrigger = () => applyMenuDirection(2, 0)\r\n    leftTrigger = () => applyMenuDirection(3, 1)\r\n  } else {\r\n    if (modeIndex === 0) {\r\n      upTrigger = () => applyDynamicShades(extendColorMod())\r\n      rightTrigger = () => applyDynamicShades(nextSeq())\r\n      downTrigger = () => applyDynamicShades(shortenColorMod())\r\n      leftTrigger = () => applyDynamicShades(prevSeq())\r\n    } else if (modeIndex === 1) {\r\n      upTrigger = () => applyDynamicRule(prevBRl(), currSRl())\r\n      rightTrigger = () => applyDynamicRule(currBRl(), nextSRl())\r\n      downTrigger = () => applyDynamicRule(nextBRl(), currSRl())\r\n      leftTrigger = () => applyDynamicRule(currBRl(), prevSRl())\r\n    } else if (modeIndex === 2) {\r\n      upTrigger = () => triggerTouch(0)\r\n      rightTrigger = () => triggerTouch(1)\r\n      downTrigger = () => triggerTouch(2)\r\n      leftTrigger = () => triggerTouch(3)\r\n    } else {\r\n      upTrigger = () => {}\r\n      rightTrigger = () => {}\r\n      downTrigger = () => {}\r\n      leftTrigger = () => {}\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className='controls-base'>\r\n      <TouchQuickAccess\r\n        isMenu={isMenu}\r\n        isEraser={isEraser}\r\n        isCustomRules={isCustomRules}\r\n        modeIndex={modeIndex}\r\n        dirIndex={menuDirIndex}\r\n        touchTrigger={touchTrigger}\r\n        activeRule={activeRule}\r\n        onEraserToggle={toggleEraser}\r\n        onClear={clear}\r\n        onFillSelect={onFillSelect}\r\n        onRuleSelect={applyDynamicRule}\r\n        onTempPause={tempPause}\r\n      />\r\n\r\n      <TouchReceiver\r\n        triggerOffset={triggerOffset}\r\n        isTouchOverride={modeIndex === 3 && !isMenu}\r\n        onTap={tap}\r\n        onTapAndHold={tapAndHold}\r\n        onTouch={touch}\r\n        onTouchPointChange={touchPointChange}\r\n        onRelease={release}\r\n        onUpTrigger={upTrigger}\r\n        onRightTrigger={rightTrigger}\r\n        onDownTrigger={downTrigger}\r\n        onLeftTrigger={leftTrigger}\r\n        onSwipeUp={swipeUp}\r\n      />\r\n\r\n      <TouchOptions \r\n        isOptions={isOptions}\r\n        altRender={altRender}\r\n        onShowFpsChange={onShowFpsChange}\r\n        onWrapChange={onWrapChange}\r\n        onAltRenderChange={onAltRenderChange}\r\n        onClose={closeOptions}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default TouchControls","import React, { useState } from 'react'\r\nimport './splash.css'\r\n\r\nconst Splash = ({ isMobile, onDismiss }) => {\r\n  const [outPhase, setOutPhase] = useState(false)\r\n\r\n  const animEnded = e => {\r\n    if (e.animationName === 'start-out-p2-anim') {\r\n      onDismiss()\r\n    }\r\n  }\r\n\r\n  if (isMobile) {\r\n    return (\r\n      <MobileSplash\r\n        onDismiss={onDismiss}\r\n      />\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className='splash-root'>\r\n      <div\r\n        className={`s-start ${outPhase && 's-start-out'}`}\r\n        onClick={() => setOutPhase(true)}\r\n        onAnimationEnd={animEnded}\r\n      >\r\n        <div className={`${outPhase && 's-s-label-out'}`}>\r\n          S T A R T\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst MobileSplash = ({ onDismiss }) => {\r\n  const [outPhase, setOutPhase] = useState(false)\r\n\r\n  const animEnded = e => {\r\n    if (e.animationName === 'fade-out-anim') {\r\n      onDismiss()\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className={`splash-root ${outPhase && 'fade-out'}`}\r\n      onClick={() => setOutPhase(true)}\r\n      onAnimationEnd={animEnded}\r\n    >\r\n      <div className='sm-con'>\r\n        <div className='sm-item sm-touch'>\r\n          <div className='sm-t-con'>\r\n            <div className='sm-t-outer sm-hold-outer' />\r\n            <div className='sm-t-inner sm-hold-inner' />\r\n          </div>\r\n\r\n          Tap and Hold to bring up Mode Selection\r\n        </div>\r\n        <div className='sm-item sm-swipe'>\r\n          <div className='sm-t-con sm-swipe-con'>\r\n            <div className='sm-t-outer sm-swipe-outer' />\r\n            <div className='sm-t-inner sm-swipe-inner' />\r\n          </div>\r\n\r\n          Swipe up from the bottom of the screen to bring up Options Menu\r\n        </div>\r\n        <div className='sm-item sm-start'>\r\n          Tap to Start\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Splash","import { BrowserRouter, Routes, Route } from 'react-router-dom';\r\n\r\nimport './utils/helpers'\r\nimport { DataProvider } from './context/DataContext'\r\nimport { NotificationProvider } from './context/NotificationContext';\r\nimport Prototype from './prototypes/Prototype'\r\nimport World from './components/World'\r\n\r\n/**\r\n * TODO:\r\n * [ ] OPTIMIZE CANVAS (Google how to)\r\n * [ ] Disable key controls on input focus\r\n * [ ] Add limits to palette cells\r\n * [ ] Add Next as right click of Play/Pause\r\n * [ ] Add trailing palette (Start palette once cell dies to black)\r\n * [ ] Divide grid into different rules\r\n *     [ ] Add different colors for different rules\r\n * [ ] Add X, Y offsets to all fillers (like Cross)\r\n * [ ] Replace LMB and RMB with icons\r\n * [ ] Improve cross browser compatibility with line-height: 1 (see md-con and children in palette.css)\r\n * [ ] Add rotate on right mouse click to placable patterns\r\n * [ ] Add change shapes on mouse wheel\r\n * [ ] Age Based loop from a different index (currently from 0)\r\n * [ ] Add dynamic rules on brush off\r\n * [ ] Add recents to palette\r\n * [ ] Save age based shades (not sure where to fit this)\r\n * [ ] Add shadows to each generation of mono color on trails aplha = 0\r\n * [-] Add fullscreen\r\n *     * Done only on key press\r\n * [✓] FIX FLICKERING ON LOOPED PALETTE\r\n * [✓] Fix palette first cell delete when second cell is step cell \r\n * [✓] Implement textfields of palette cells\r\n * [✓] Add wrap to grid \r\n * [✓] Add background image / gradient and alive cells are transparent / dead cells are black (better perormance) \r\n * [✓] Option to 'Keep' earlier iterations in grid (Dont clear canvas)\r\n *     [✓] Maybe \"clear\" the rect with rgba(0, 0, 0, .1) each draw cycle? (or some smaller a;)\r\n * [✓] Add notifications on key pressess\r\n * [✓] Add Cellular Automata as starting shape\r\n * [x] Add border-radius to palette cells \r\n *     * Not possible to add border radius to border image\r\n */\r\n\r\nfunction App() {\r\n  return (\r\n    <BrowserRouter basename={process.env.PUBLIC_URL}>\r\n      <Routes>\r\n        <Route path=\"/\" element={<Main />} />\r\n        <Route path='/Prototype' element={<Prototype />} />\r\n      </Routes>\r\n    </BrowserRouter>\r\n  );\r\n}\r\n\r\nconst Main = () => (\r\n  <DataProvider>\r\n    <NotificationProvider>\r\n      <World />\r\n    </NotificationProvider>\r\n  </DataProvider>\r\n)\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}