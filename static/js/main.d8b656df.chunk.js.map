{"version":3,"sources":["components/notifications/Notifications.js","context/DataContext.js","context/NotificationContext.js","utils/helpers.js","static/color-grid.js","components/shapes.js","components/shades.js","components/grid.js","components/rules.js","components/notifications/notification-templates.js","components/quick-access/ex-comps.js","components/quick-access/qa-buttons.js","components/quick-access/QaTooltip.js","components/quick-access/QaSlider.js","components/quick-access/ExRules.js","components/quick-access/ExShapes.js","components/quick-access/palette/PrefsPalette.js","utils/color-utils.js","components/quick-access/palette/AgePalette.js","components/controls/Controls.js","components/resizer/Resizer.js","components/touch-quick-access/ShapeMenu.js","components/quick-access/palette/ExPalette.js","components/quick-access/QuickAccess.js","components/receivers/MouseReceiver.js","components/receivers/TouchReceiver.js","components/touch-quick-access/BrushToggle.js","components/touch-quick-access/RadialMenu.js","components/touch-quick-access/TouchQuickAccess.js","static/dynamic-rules.js","touch-controllers/rules-tc.js","static/dynamic-shades.js","touch-controllers/shades-tc.js","components/touch-options/touch-option-controls.js","components/World.js","components/touch-options/TouchOptions.js","components/controls/TouchControls.js","App.js","index.js"],"names":["tid","gridW","Math","floor","window","innerWidth","gridH","innerHeight","constructFillers","name","fill","config","init","range","min","fillers","contextState","rules","b","s","shapes","DataContext","createContext","DataProvider","children","useState","state","setState","Provider","value","setDimensions","_gridW","_gridH","RuleNotification","highlightS","className","Notifications","message","timeout","messageIndex","show","setShow","outPhase","setOutPhase","outQuick","setOutQuick","useEffect","clearTimeout","setTimeout","undefined","onAnimationEnd","e","animationName","NotificationContext","NotificationProvider","setMessage","setMessageIndex","showNotification","pv","hideNotification","helperNames","print2dArray","arr2d","printStr","y","length","x","console","log","clamp","a","max","lerp","inverseLerp","bX","bY","selectedShape","selectedFill","monoShade","shades","isLooped","ages","ageMax","updateAge","selectedShadesSeq","preserveAges","size","brushSize","grid","neighbours","wrapEnabled","pCells","pOutOfBounds","pX","pY","inverseBg","alphaBg","background","drawBackground","isClearCanvas","randomInit","createGrid","args","constructGrid","clear","invert","random","vstripes","hstripes","dstripes","rect","checkered","cross","mesh","wraplines","create2dArray","si","wi","w","h","hi","snapshot","start","end","astart","xoff","yoff","xstart","ystart","xi","yi","sxi","ax","sx","sy","syi","ay","func","yiter","array","checkBounds","global_S","global_B","setRule","split","map","i","parseInt","checkSurvival","alive","indexOf","checkBirth","resetAges","row","_","constructShades","shadeSeq","age","_updateLoopedAge","_updateAge","_resetAge","isAlive","_incrementAge","_incrementLoopedAge","initGrid","calculateDimensions","createRandom","generateNeighbours","updateDrawBackground","reInitGrid","updateShades","reCreateGrid","drawGrid","ctx","fillStyle","fillRect","drawInverse","canvas","width","height","clearRect","drawShaded","drawShapes","setBrushSize","bsz","drawOnGrid","applyBrush","eraseOnGrid","paint","preview","cx","cy","gX","gY","cells","outOfBounds","offX","offY","push","getShape","setupPreview","shape","setShape","setGridWrap","wrap","setFill","setShadeSeq","isLoop","setShades","setTrails","toString","hf","ox","oy","_x","_y","cX","cY","nei","generation","tl","tr","br","bl","t","r","l","n_center","n_topLtW","n_topRtW","n_botRtW","n_botLtW","n_topW","n_rightW","n_bottomW","n_leftW","n_topLt","n_topRt","n_botRt","n_botLt","n_top","n_right","n_bottom","n_left","top","topRt","right","botRt","bottom","botLt","left","topLt","topW","topRtW","rtTopW","rightW","rtBotW","botRtW","bottomW","botLtW","ltBotW","leftW","ltTopW","topLtW","NotificationWithBody","title","body","ExCon","isCurrent","join","toUpperCase","ExIndicator","props","selectedIndex","canvasRef","useRef","style","current","getContext","setAttribute","lineWidth","strokeStyle","points","moveTo","forEach","lineTo","stroke","ref","ExSubTitle","subtitle","fontSize","isScrollable","ExCheckbox","checked","onChange","onClick","ExHexButton","hovered","setHovered","pressed","setPressed","textStyle","color","onMouseEnter","onMouseLeave","onMouseDown","onMouseUp","d","strokeWidth","QaButton","unhide","animDelay","animDuration","onRightClick","onHoverChanged","hoverRef","animationDuration","animationDelay","onContextMenu","preventDefault","Play","isPlaying","Draw","isDrawing","Speed","Shapes","Rules","Colors","Close","BrushIcon","GridIcon","SpeedIcon","tips","0","1","2","3","4","5","6","QaTooltip","vis","index","midX","path","msgConStyle","tip","liveValue","QaSlider","icon","onDismiss","offsetX","trackX","setTrackX","isPressed","setIsPressed","isHovered","setIsHovered","lower","upper","updateTrackX","rounded","round","mouseDown","useCallback","button","document","addEventListener","mouseUp","once","trackStyle","thumbStyle","labelStyle","conClass","thumbClass","labelClass","closeClass","onMouseMove","clientX","isKeyModeSurvival","Presets","currentIndex","onSelect","selected","ari","Custom","activeRule","onSelectPresets","onWrapChanged","onChanged","updateRule","nb","ns","numbers","onNumbersChanged","WrapGrid","setChecked","marginTop","_checked","ActiveRule","RuleOption","Numbers","toggles","setToggles","updateNumbers","n","togs","charAt","text","checkChanged","v","DiamondBtn","btnStyle","btnClass","cbClass","RuleCell","nameCN","ruleCN","ExRules","pindex","onPindexChanged","useContext","arIndex","setArIndex","setActiveRule","pconStyle","transform","updateActiveRule","selectedRule","isCustom","keyListener","key","sarr","splice","_s","sort","barr","bi","_b","keyCode","removeEventListener","icat","ishape","Fillers","onSliding","setCurrentIndex","ex","onExpanded","exAction","FillCell","backgroundColor","borderColor","configAction","stopPropagation","iconClass","moded","onDown","onUp","FSlide","hov","setHov","setValue","slideClass","type","step","target","MidIndic","paths","visible","ExShapes","onShapeSelect","onFillSelect","onClear","isShapes","setIsShapes","Modes","states","selectColor","onMonoChanged","onGradientChanged","onImageSelect","onAgeConfigure","onTrailsChanged","mono","gradient","src","trails","uploadRef","modesClass","updateGradientStops","trailsChanged","uploadImage","click","onSrcChange","files","URL","createObjectURL","alt","renderContent","ColorSelection","hex","setHex","hasFocus","setHasFocus","_hex","test","substring","onFocus","onBlur","padding","ModeDropdown","onExpand","baseClass","lblClass","modes","mode","Trails","showInfo","setShowInfo","opacity","PrefsPalette","onBackgroundSelect","onMonoSelect","onGradientSelect","modeEx","setModeEx","modeIndex","setModeIndex","modeStates","setModeStates","nextStates","st","grad","generateShadesFromList","list","colors","steps","isTint","hex2rgb","generateGradient","Error","prev","next","dr","dg","g","db","rgb2hex","bigint","slice","animActive","scrollListenerAttached","lastApplied","outId","Footer","hasBg","onReset","onApply","onAddTint","onAddGradient","onAddLoop","isAdd","setIsAdd","loopName","isControl","isIn","FooterButton","TintCell","onDeleteQueue","onDeleteFinish","contentStyle","getAccent","event","StepCell","borderImageSource","stepper","diff","rightClick","LoopCell","isStart","ExPalette","setList","setIsLoop","scrollAtEnd","setScrollAtEnd","listRef","createGradient","g1","g2","scrollToEnd","scroll","scrollHeight","behavior","scrollListener","scrollTop","clientHeight","reset","updatedList","updateTint","deleteIndices","_list","deleteQueuedAtIndex","filter","updateSteps","COLOR_GRID","hsl2rgb","f","k","padStart","j","hideTimeoutIndex","mouseMoveIndex","timer","isSliding","ColorGrid","cgVisible","currentHex","onCustom","onCancel","isVisible","setIsVisible","isCustomChanged","setIsCustomChanged","inputRef","animEnded","qaExpanded","onBgSelect","onGradSelect","setCgVisible","cgCurrentHex","setCgCurrentHex","onColorSelectedRef","AgePalette","sliderValue","Back","animdelaysJson","sdat","na","brush","speed","QuickAccess","animId","qaHidden","qaMinimised","qaSlider","onQaHoverChanged","onQaExpanded","onQaMinimised","onQaSlider","onPlayClicked","onDrawClicked","onQaClose","onTempPause","onRuleSelect","onShadesSelect","onBrushChanged","onSizeChanged","onSpeedChanged","qaIndex","setQaIndex","slideId","setSlideId","tipIndex","setTipIndex","tipVis","setTipVis","backVis","setBackVis","exPindices","setExPindices","setPhantomUpdateIndex","qaExAction","item","exChangePage","enableBack","showSlider","id","hoverChangedAtIndex","speedLower","speedUpper","ps","animdelays","closeAnimDuration","pi","drawStartHook","drawEndHook","drawHook","MouseReceiver","isPainting","onBrushDown","onBrushUp","onDraw","onErase","onPaint","onPreview","draw","clientY","erase","qaEnabled","isTempPause","Controls","onIsPlayingChanged","onBrushDownChanged","onPreviewStart","onPreviewEnd","hide","exp","slide","qaState","setQaState","setIsPlaying","setIsDrawing","setIsPainting","updateQaHidden","inState","updateQaMinimised","outState","toggleIsPlaying","_isPlaying","toggleIsDrawing","_isDrawing","requestFullscreen","pause","Resizer","isResizing","onResizing","countdown","setCountdown","resizeHandler","clearInterval","setInterval","p","lx","ly","longPressTimeout","swipeUpStart","TouchReceiver","triggerOffset","isTouchOverride","onTap","onTapAndHold","onTouch","onTouchPointChange","onRelease","onUpTrigger","onRightTrigger","onDownTrigger","onLeftTrigger","onSwipeUp","touchEnd","clearLongPressTimeout","ady","abs","timeElapsed","Date","now","onTouchStart","touches","onTouchMove","dx","dy","adx","onTouchEnd","onTouchCancel","BrushToggle","isEraser","onToggle","RadialMenu","isMenu","dirIndex","fi","allArgValues","ShapeMenu","dir","trig","argValues","setArgValues","argIndex","setArgIndex","stateIndex","setStateIndex","showLabel","setShowLabel","showSliders","setShowSliders","slidersOutPhase","setSlidersOutPhase","applyFill","slideArg","byVal","val","newVal","resetStateIndex","TouchQuickAccess","touchTrigger","onEraserToggle","dynamicRules","dynRules_b","dynRules_s","currBRl","currSRl","dynamicShades","dsi","applySteps","Array","inpStr","inputArr","hexes","outStr","helper","ctxbg","gradientStops","animationFrameId","findex","TouchSwitch","inDelay","onCheckChange","TouchButton","extraMargin","TouchOptions","isOptions","onShowFpsChange","onWrapChange","onClose","showFps","setShowFps","wrapGrid","setWrapGrid","isFullscreen","setIsFullscreen","fullscreenChange","fullscreenElement","exitFullscreen","MODES","notification","TouchControls","upTrigger","rightTrigger","downTrigger","leftTrigger","onBrushDownChange","setIsMenu","setIsOptions","setIsEraser","menuDirIndex","setMenuDirIndex","setTriggerOffset","setTouchTrigger","triggerTouch","applyMenuDirection","di","odi","applyDynamicRule","applyDynamicShades","IS_MOBILE","clientWidth","initialised","drawSpeed","isBrushDown","isInverseDraw","isAgeShades","isInverseImage","isShapeShades","isPlayingChanged","update","_update","brushDownChanged","_isBrushDown","reconfigureDraw","shadesSelected","updateBackground","triggerDraw","speedChanged","spd","startPreview","previewConfig","endPreview","setBackground","bg","setGradient","stops","initInverseDraw","applyGradient","setupImageBackground","createLinearGradient","addColorStop","resizeBgRedraw","pop","updateGrid","_draw","_fdraw","World","fps","setFps","bgImgSrc","setBgImgSrc","setIsResizing","canvasbgRef","updateCanvasSize","canvasBg","fLogIndex","fLogTime","context","contextBg","startTime","logFps","render","requestAnimationFrame","cancelAnimationFrame","sz","_isResizing","App","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.d8b656df.chunk.js","sourcesContent":["import { useState, useEffect } from 'react'\r\nimport \"./notifications.css\"\r\n\r\nconst AUTO_HIDE_DELAY = 5000\r\n\r\nlet tid\r\n\r\n// message => string | JSX\r\n\r\nconst Notifications = ({ message, timeout, messageIndex }) => {\r\n  const [show, setShow] = useState(false)\r\n  const [outPhase, setOutPhase] = useState(false)\r\n  const [outQuick, setOutQuick] = useState(false)\r\n\r\n  const animEnded = e => {\r\n    if (e.animationName === \"fade-out-anim\") {\r\n      setShow(false)\r\n      setOutPhase(false)\r\n      setOutQuick(false)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (message) {\r\n      if (!show) {\r\n        setShow(true)\r\n      }\r\n\r\n      if (outPhase) {\r\n        setOutPhase(false)\r\n      }\r\n\r\n      if (outQuick) {\r\n        setOutQuick(false)\r\n      }\r\n      \r\n      if (tid) {\r\n        clearTimeout(tid)\r\n      }\r\n      tid = setTimeout(() => {\r\n        setOutPhase(true)\r\n        tid = undefined\r\n      }, timeout * 1000 || AUTO_HIDE_DELAY)\r\n\r\n      return () => {\r\n        if (tid) {\r\n          clearTimeout(tid)\r\n        }\r\n      }\r\n    } else {\r\n      setShow(false)\r\n      setOutPhase(false)\r\n      setOutQuick(false)\r\n    }\r\n  }, [message, messageIndex])\r\n\r\n  useEffect(() => {\r\n    if (timeout === -1) {\r\n      setOutQuick(true)\r\n      if (tid) {\r\n        clearTimeout(tid)\r\n      }\r\n    }\r\n  }, [timeout])\r\n\r\n  return (\r\n    <div>\r\n      {show && (\r\n        <div className='notification-container'>\r\n          <div \r\n            className={`notification-bubble ${outPhase && 'bubble-out'} ${outQuick && 'bubble-out-quick'}`}\r\n            onAnimationEnd={animEnded}\r\n          >\r\n            {message}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport const RuleNotification = ({ b, s, highlightS }) => (\r\n  <div>\r\n    <span className={highlightS ? \"text-dim\" : \"\"}>B{b}</span>{\" \"}\r\n    <span className={!highlightS ? \"text-dim\" : \"\"}>S{s}</span>\r\n  </div>\r\n)\r\n\r\nexport default Notifications","import { createContext, useState } from 'react'\r\n\r\nimport shapes from '../static/shapes.json'\r\n\r\nlet gridW = Math.floor(window.innerWidth / 5)\r\nlet gridH = Math.floor(window.innerHeight / 5)\r\n\r\nconst rules = [\r\n  { name: 'Conway\\'s Life', b: '3',       s: '23' },\r\n  { name: '2x2',            b: '36',      s: '125' },\r\n  { name: '34 Life',        b: '34',      s: '34' },\r\n  { name: 'Amoeba',         b: '357',     s: '1358' },\r\n  { name: 'Anneal',         b: '4678',    s: '35678' },\r\n  { name: 'Assimilation',   b: '345',     s: '4567' },\r\n  { name: 'Coagulations',   b: '378',     s: '235678' },\r\n  { name: 'Coral',          b: '3',       s: '45678' },\r\n  { name: 'Day & Night',    b: '3678',    s: '34678' },\r\n  { name: 'Diamoeba',       b: '35678',   s: '5678' },\r\n  { name: 'Gnarl',          b: '1',       s: '1' },\r\n  { name: 'High Life',      b: '36',      s: '23' },\r\n  { name: 'Inverse Life',   b: '0123478', s: '34678' },\r\n  { name: 'Life w/ Death',  b: '3',       s: '012345678' },\r\n  { name: 'Long Life',      b: '345',     s: '5' },\r\n  { name: 'Maze',           b: '3',       s: '12345' },\r\n  { name: 'Mazectric',      b: '3',       s: '1234' },\r\n  { name: 'Morley',         b: '368',     s: '245' },\r\n  { name: 'Move',           b: '368',     s: '245' },\r\n  { name: 'Pseudo Life',    b: '357',     s: '238' },\r\n  { name: 'Replicator',     b: '1357',    s: '1357' },\r\n  { name: 'Seeds',          b: '2',       s: '' },\r\n  { name: 'Serviettes',     b: '234',     s: '' },\r\n  { name: 'Stains',         b: '3678',    s: '235678' },\r\n  { name: 'Untitled',       b: '25',      s: '4' },\r\n  { name: 'Walled Cities',  b: '45678',   s: '2345' }\r\n]\r\n\r\nconst constructFillers = () => {\r\n  return [\r\n    { name: 'Chaotic Random', fill: 'random', config: [\r\n      { name: 'Density', init: 50, range: [1, 99] }\r\n    ]},\r\n    { name: 'Ordered Random', fill: 'wraplines', config: [\r\n      { name: 'Offset A', init: Math.floor(gridW / 20), range: [1, Math.floor(gridW / 2)] },\r\n      { name: 'Offset B', init: Math.floor(gridW / 15), range: [1, Math.floor(gridW / 2)] }\r\n    ]},\r\n    { name: 'Vertical Stripes', fill: 'vstripes', config: [\r\n      { name: 'Spacing', init: 1, range: [1, Math.floor(gridW / 2)] },\r\n      { name: 'Thickness', init: 1, range: [1, Math.floor(gridW / 2)] }\r\n    ]},\r\n    { name: 'Horizontal Stripes', fill: 'hstripes', config: [\r\n      { name: 'Spacing', init: 1, range: [1, Math.floor(gridH / 2)] } ,\r\n      { name: 'Thickness', init: 1, range: [1, Math.floor(gridH / 2)] }\r\n    ]},\r\n    { name: 'Diagonal Stripes', fill: 'dstripes', config: [\r\n      { name: 'Spacing', init: 5, range: [1, Math.floor(Math.min(gridW, gridH) / 2)] },\r\n      { name: 'Thickness', init: 2, range: [1, Math.floor(Math.min(gridW, gridH) / 2)] }\r\n    ]},\r\n    { name: 'Rectangle', fill: 'rect', config: [\r\n      { name: 'Width', init: gridW, range: [2, gridW] }, \r\n      { name: 'Height', init: gridH, range: [2, gridH] }\r\n    ]},\r\n    { name: 'Checkered', fill: 'checkered', config: [\r\n      { name: 'Width', init: 4, range: [1, Math.floor(gridW / 2)] },\r\n      { name: 'Height', init: 4, range: [1, Math.floor(gridH / 2)] }\r\n    ]},\r\n    { name: 'Cross', fill: 'cross', config: [\r\n      { name: 'X Offset', init: 0, range: [-gridW / 2, gridW / 2 - (1 - gridW % 2)] }, // -1 if gridW is even\r\n      { name: 'Y Offset', init: 0, range: [-gridH / 2, gridH / 2 - (1 - gridH % 2)] }, \r\n      { name: 'Width', init: 1, range: [1, gridW / 2] }, \r\n      { name: 'Height', init: 1, range: [1, gridW / 2] }, \r\n    ]},\r\n    { name: 'Mesh', fill: 'mesh', config: [\r\n      { name: 'X Spacing', init: 5, range: [1, Math.floor(gridW / 2)] },\r\n      { name: 'Y Spacing', init: 5, range: [1, Math.floor(gridH / 2)] },\r\n      { name: 'X Thickness', init: 1, range: [1, Math.floor(gridW / 2)] },\r\n      { name: 'X Thickness', init: 1, range: [1, Math.floor(gridH / 2)] }\r\n    ]},\r\n  ]\r\n}\r\n\r\nconst fillers = constructFillers()\r\n\r\nconst contextState = { gridW, gridH, rules, shapes, fillers }\r\nconst DataContext = createContext(contextState)\r\n\r\nconst DataProvider = ({ children }) => {\r\n  const [state, setState] = useState(contextState)\r\n\r\n  const setDimensions = (_gridW, _gridH) => {\r\n    gridW = _gridW; gridH = _gridH\r\n    setState({ ...state, fillers: constructFillers() })\r\n  }\r\n\r\n  return (\r\n    <DataContext.Provider value={{ ...state, setDimensions }}>\r\n      {children}\r\n    </DataContext.Provider>\r\n  )\r\n}\r\n\r\nexport { DataContext, DataProvider }","import { createContext, useState } from \"react\"\r\nimport Notifications from \"../components/notifications/Notifications\"\r\n\r\nconst NotificationContext = createContext({})\r\n\r\nconst NotificationProvider = ({ children }) => {\r\n  const [message, setMessage] = useState(\"\")\r\n  const [timeout, setTimeout] = useState(0)\r\n  const [messageIndex, setMessageIndex] = useState(0)\r\n\r\n  const showNotification = (message, timeout = 0) => {\r\n    setMessage(message)\r\n    setTimeout(timeout)\r\n    setMessageIndex(pv => pv + 1)\r\n  }\r\n\r\n  const hideNotification = () => {\r\n    if (timeout > -1) {\r\n      setTimeout(-1)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <NotificationContext.Provider \r\n      value={{ \r\n        showNotification,\r\n        hideNotification \r\n      }}\r\n    >\r\n      {children}\r\n      <Notifications \r\n        message={message} \r\n        timeout={timeout}\r\n        messageIndex={messageIndex} \r\n      />\r\n    </NotificationContext.Provider>\r\n  )\r\n}\r\n\r\nexport { NotificationContext, NotificationProvider }","window.helperNames = []\r\n\r\nconst createHelpers = (helpers) => {\r\n  helpers.forEach(helper => {\r\n    let name = helper.name\r\n    if (window[name]) name = `f${name.charAt(0).toUpperCase()}${name.substring(1)}`\r\n    window[name] = helper\r\n    window.helperNames.push(name)\r\n  })\r\n}\r\n\r\nwindow.print2dArray = (arr2d) => {\r\n  let printStr = \"\"\r\n  for (let y = 0; y < arr2d.length; y++) {\r\n    for (let x = 0; x < arr2d[y].length; x++) {\r\n      printStr += `${arr2d[y][x]} `\r\n    }\r\n    printStr += '\\n'\r\n  }\r\n  console.log(printStr)\r\n}\r\n\r\nMath.clamp = (x, a, b) => Math.min(Math.max(x, a), b)\r\nMath.lerp = (a, b, x) => a + (b - a) * Math.clamp(x, 0, 1)\r\nMath.inverseLerp = (a, b, x) => Math.clamp((x - a) / (b - a), 0, 1)\r\n\r\nexport { createHelpers }","const COLOR_GRID = []\r\n\r\nconst hsl2rgb = (h, s, l) => {\r\n  l /= 100;\r\n  const a = s * Math.min(l, 1 - l) / 100;\r\n  const f = n => {\r\n    const k = (n + h / 30) % 12;\r\n    const color = l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);\r\n    return Math.round(255 * color).toString(16).padStart(2, '0');   // convert to Hex and prefix \"0\" if needed\r\n  };\r\n  return `#${f(0)}${f(8)}${f(4)}`;\r\n}\r\n\r\nconst kStep = 100 / 17\r\nfor (let k = 0; k < 17; k++) {\r\n  COLOR_GRID.push(hsl2rgb(0, 0, k * kStep))\r\n}\r\nCOLOR_GRID.push(\"#ffffff\")\r\n\r\nconst iStep = 360 / 16\r\nconst jStep = 80 / 18\r\nfor (let i = 0; i < 16; i++) {\r\n  for (let j = 0; j < 18; j++) {\r\n    COLOR_GRID.push(hsl2rgb(i * iStep, 100, 10 + j * jStep))\r\n  }\r\n}\r\n\r\nexport default COLOR_GRID","let bX, bY, selectedShape, selectedFill\r\n\r\nconst randomInit = [\r\n  'random', 'vstripes', 'hstripes', 'dstripes', \r\n  'rect','checkered', 'cross', 'mesh', 'wraplines'\r\n]\r\n\r\nconst setBounds = (x, y) => {\r\n  bX = x\r\n  bY = y\r\n}\r\n\r\nconst setShape = shape => {\r\n  selectedShape = shape\r\n}\r\n\r\nconst getShape = (gX, gY) => {\r\n  const cells = []\r\n  let outOfBounds = false\r\n  for (let [offX, offY] of selectedShape) {\r\n    const x = gX + offX\r\n    const y = gY + offY\r\n    if (checkBounds(x, y)) {\r\n      cells.push([x, y])\r\n    } else {\r\n      if (!outOfBounds) {\r\n        outOfBounds = true\r\n      }\r\n    }\r\n  }\r\n\r\n  return { cells, outOfBounds }\r\n}\r\n\r\nconst createGrid = ({ fill, grid, args }) => {\r\n  selectedFill = fill\r\n  return constructGrid(fill, grid, args)\r\n}\r\n\r\nconst createRandom = ({ grid }) => {\r\n  const fill = randomInit[Math.floor(Math.random() * randomInit.length)]\r\n  console.log(`Created random fill: ${fill}`)\r\n  return createGrid({ fill, grid })\r\n}\r\n\r\nconst reCreateGrid = ({ grid }) => {\r\n  return constructGrid(selectedFill, grid)\r\n}\r\n\r\nconst constructGrid = (fill, grid, args) => {\r\n  switch (fill) {\r\n    case 'clear': return clear()\r\n    case 'invert': return invert(grid)\r\n    case 'random': return random(args)\r\n    case 'vstripes': return vstripes(args)\r\n    case 'hstripes': return hstripes(args)\r\n    case 'dstripes': return dstripes(args)\r\n    case 'rect': return rect(args)\r\n    case 'checkered': return checkered(args)\r\n    case 'cross': return cross(args)\r\n    case 'mesh': return mesh(args)\r\n    case 'wraplines': return wraplines(args)\r\n    default: break\r\n  }\r\n}\r\n\r\nconst clear = () => create2dArray(() => 0)\r\nconst invert = (grid) => create2dArray(({ x, y }) => 1 - grid[y][x])\r\n\r\nconst random = (args = [50]) => create2dArray(() => {\r\n  return Math.random() < args[0] / 100 ? 1 : 0\r\n})\r\n\r\nconst vstripes = (args = [1, 1]) => {\r\n  const [s, w] = args\r\n  let si, wi, a\r\n  return create2dArray(() => {\r\n    if (a) {\r\n      if (wi < w) { wi += 1; a = 1 } \r\n      else { si = 1; a = 0 }\r\n    } else {\r\n      if (si < s) { si += 1; a = 0 } \r\n      else { a = 1; wi = 1 }\r\n    }\r\n    return a\r\n  }, () => {\r\n    a = 0; wi = 0; si = 0\r\n  })\r\n}\r\n\r\nconst hstripes = (args = [1, 1]) => {\r\n  const [s, h] = args\r\n  let si = 0, hi = 0, a = 0\r\n  return create2dArray(() => {\r\n    return a\r\n  }, () => {\r\n    if (a) {\r\n      if (hi < h) { hi += 1; a = 1 }\r\n      else { si = 1; a = 0 }\r\n    } else {\r\n      if (si < s) { si += 1; a = 0 }\r\n      else { a = 1; hi = 1 }\r\n    }\r\n  })\r\n}\r\n\r\nconst dstripes = (args = [1, 1]) => {\r\n  const [s, w] = args\r\n  let snapshot = {}\r\n  let wi = 0, si = 0, a = 0\r\n  return create2dArray(({ x }) => {\r\n    if (x === 1) snapshot = { wi, si, a }\r\n    if (a) {\r\n      if (wi < w) { wi += 1; a = 1 } \r\n      else { si = 1; a = 0 }\r\n    } else {\r\n      if (si < s) { si += 1; a = 0 } \r\n      else { a = 1; wi = 1 }\r\n    }\r\n    return a\r\n  }, ({ y }) => {\r\n    if (y > 0) {\r\n      ({ wi, si, a } = snapshot)\r\n    }\r\n  })\r\n}\r\n\r\nconst rect = (args = [bX, bY]) => {\r\n  const [w, h] = args\r\n  const start = { \r\n    x: Math.floor((bX - w) / 2), \r\n    y: Math.floor((bY - h) / 2)\r\n  }\r\n  const end = { x: start.x + w - 1, y: start.y + h - 1 }\r\n  const grid = create2dArray(() => 0)\r\n  for (let wi = start.x; wi <= end.x; wi++) {\r\n    grid[start.y][wi] = 1\r\n    grid[end.y][wi] = 1\r\n  }\r\n  for (let hi = start.y; hi <= end.y; hi++) {\r\n    grid[hi][start.x] = 1\r\n    grid[hi][end.x] = 1\r\n  }\r\n  return grid\r\n}\r\n\r\nconst checkered = (args = [4, 4]) => {\r\n  const [w, h] = args\r\n  let wi = 0, hi = 0, astart = 0, a = astart\r\n  return create2dArray(() => {\r\n    if (wi < w) { wi += 1 }\r\n    else { wi = 1; a = 1 - a }\r\n    return a\r\n  }, () => {\r\n    if (hi < h) { hi += 1 }\r\n    else { hi = 1; astart = 1 - astart }\r\n    a = astart; wi = 0\r\n  })\r\n}\r\n\r\nconst cross = (args = [0, 0, bX, bY]) => {\r\n  const [xoff, yoff, w, h] = args\r\n  const xstart = Math.floor(bX / 2) + xoff - Math.floor(w / 2)\r\n  const ystart = Math.floor(bY / 2) + yoff - Math.floor(h / 2)\r\n  const grid = create2dArray(() => 0)\r\n  for (let xi = 0; xi < bX; xi++) {\r\n    for (let hi = 0; hi < h; hi++) {\r\n      if (ystart + hi < bY) {\r\n        grid[ystart + hi][xi] = 1\r\n      }\r\n    }\r\n  }\r\n  for (let yi = 0; yi < bY; yi++) {\r\n    for (let wi = 0; wi < w; wi++) {\r\n      if (xstart + wi < bX) {\r\n        grid[yi][xstart + wi] = 1\r\n      }\r\n    }\r\n  }\r\n  return grid\r\n}\r\n\r\nconst mesh = (args = [1, 1, 1, 1]) => {\r\n  const [sx, sy, w, h] = args\r\n  let sxi, wi, ax\r\n  let syi = 0, hi = 0, ay = 0\r\n  return create2dArray(() => {\r\n    if (ay) {\r\n      return 1\r\n    } else if (ax) {\r\n      if (wi < w) { wi += 1; ax = 1 }\r\n      else { sxi = 1; ax = 0 }\r\n    } else {\r\n      if (sxi < sx) { sxi += 1; ax = 0 }\r\n      else { ax = 1; wi = 1 }\r\n    }\r\n    return ax\r\n  }, () => {\r\n    ax = 0; wi = 0; sxi = 0\r\n    if (ay) {\r\n      if (hi < h) { hi += 1; ay = 1 }\r\n      else { syi = 1; ay = 0 }\r\n    } else {\r\n      if (syi < sy) { syi += 1; ay = 0 }\r\n      else { ay = 1; hi = 1 }\r\n    }\r\n  })\r\n}\r\n\r\nconst wraplines = (args = [1, 1]) => {\r\n  const [w, s] = args\r\n  let si = 0, wi = 0, a = 0\r\n  return create2dArray(() => {\r\n    if (a) {\r\n      if (wi < w) { wi += 1; a = 1 } \r\n      else { si = 1; a = 0 }\r\n    } else {\r\n      if (si < s) { si += 1; a = 0 } \r\n      else { a = 1; wi = 1 }\r\n    }\r\n    return a\r\n  })\r\n}\r\n\r\nconst create2dArray = (func, yiter = () => {}) => {\r\n  const array = []\r\n  for (let y = 0; y < bY; y++) {\r\n    array[y] = []\r\n    yiter({ y })\r\n    for (let x = 0; x < bX; x++) {\r\n      array[y][x] = func({ x, y })\r\n    }\r\n  }\r\n  return array\r\n}\r\n\r\n/* Yes this is a duplicate of grid.js checkBounds */\r\nconst checkBounds = (x, y) => x > -1 && y > -1 && x < bX && y < bY\r\n\r\nexport { setBounds, setShape, getShape, createGrid, reCreateGrid, createRandom }","let monoShade, shades, isLooped, ages, ageMax, updateAge, selectedShadesSeq, preserveAges\r\n\r\nconst getShade = (x, y) => shades[ages[y][x]]\r\n\r\nconst initShades = (grid) => {\r\n  selectedShadesSeq = [\"#ffffff\"]\r\n  isLooped = false\r\n  resetAges(grid)\r\n  constructShades(selectedShadesSeq)\r\n}\r\n\r\nconst setShades = ({ shadeSeq, isLoop, grid }) => {\r\n  preserveAges = isLoop && isLooped && selectedShadesSeq.length === shadeSeq\r\n  selectedShadesSeq = shadeSeq\r\n  isLooped = isLoop\r\n  constructShades(shadeSeq, grid)\r\n}\r\n\r\nconst updateShades = ({ grid }) => {\r\n  resetAges(grid)\r\n  constructShades(selectedShadesSeq)\r\n}\r\n\r\nconst resetAges = (grid) => ages = grid.map(row => row.map(_ => 0))\r\n\r\nconst constructShades = (shadeSeq) => {\r\n  if (shadeSeq.length > 1) {\r\n    shades = ['age starts from index 1', ...shadeSeq]\r\n    ageMax = shades.length - 1\r\n    if (!preserveAges) { // if this true than _updateLoopedAge is already selected\r\n      ages = ages.map(row => row.map(age => Math.min(age, ageMax)))\r\n      updateAge = isLooped ? _updateLoopedAge : _updateAge\r\n    }\r\n  } else {\r\n    monoShade = shadeSeq[0]\r\n    updateAge = () => {}\r\n  }\r\n}\r\n\r\nconst _incrementAge = (x, y) => {\r\n  if (ages[y][x] < ageMax) {\r\n    ages[y][x] += 1\r\n  }\r\n}\r\n\r\nconst _incrementLoopedAge = (x, y) => {\r\n  if (ages[y][x] < ageMax) {\r\n    ages[y][x] += 1\r\n  } else {\r\n    ages[y][x] = 0\r\n  }\r\n}\r\n\r\nconst _resetAge = (x, y) => {\r\n  if (ages[y][x] > 0) {\r\n    ages[y][x] = 0\r\n  }\r\n}\r\n\r\nconst _updateAge = (isAlive, x, y) => {\r\n  if (isAlive) _incrementAge(x, y)\r\n  else _resetAge(x, y)\r\n}\r\n\r\nconst _updateLoopedAge = (isAlive, x, y) => {\r\n  if (isAlive) _incrementLoopedAge(x, y)\r\n  else _resetAge(x, y)\r\n}\r\n\r\nexport { monoShade, getShade, initShades, setShades, updateShades, resetAges, updateAge }","import { createHelpers } from '../utils/helpers'\r\nimport { setBounds, setShape, getShape, createGrid, reCreateGrid, createRandom } from './shapes'\r\nimport { setRule, checkSurvival, checkBirth } from './rules'\r\nimport { monoShade, getShade, initShades, setShades, updateShades, resetAges, updateAge } from './shades'\r\n\r\nlet gridW, gridH, size, brushSize\r\nlet grid, neighbours, wrapEnabled\r\nlet pCells, pOutOfBounds, pX, pY // pX, pY = Current preview cell coordinates\r\nlet inverseBg, alphaBg, background, drawBackground, isClearCanvas // background = inverseBg + alphaBg\r\n\r\n\r\n/* --- Exports --- */\r\n\r\nconst initGrid = () => {\r\n  size = 5\r\n  brushSize = 25\r\n  calculateDimensions()\r\n\r\n  wrapEnabled = false\r\n\r\n  grid = createRandom({ grid })\r\n  generateNeighbours(gridW, gridH)\r\n\r\n  alphaBg = '00'\r\n  background = inverseBg + alphaBg // inverseBg initialised in World init\r\n  initShades(grid)\r\n\r\n  isClearCanvas = true\r\n  updateDrawBackground()\r\n}\r\n\r\nconst reInitGrid = () => {\r\n  calculateDimensions()\r\n  grid = reCreateGrid({ grid })\r\n  updateShades({ grid })\r\n  generateNeighbours(gridW, gridH)\r\n\r\n  return { gridW, gridH }\r\n}\r\n\r\nconst updateGrid = () => {\r\n  let isAlive\r\n  const pop = []\r\n  for (let yi = 0; yi < grid.length; yi++) {\r\n    const row = []\r\n    for (let xi = 0; xi < grid[yi].length; xi++) {\r\n      const alive = neighbours[yi][xi](xi, yi)\r\n      if (grid[yi][xi]) {\r\n        isAlive = checkSurvival(alive, xi, yi)\r\n      } else {\r\n        isAlive = checkBirth(alive, xi, yi)\r\n      }\r\n      row.push(isAlive)\r\n      updateAge(isAlive, xi, yi)\r\n    }\r\n    pop.push(row)\r\n  }\r\n  grid = pop\r\n}\r\n\r\nconst drawGrid = (ctx) => {\r\n  drawBackground(ctx)\r\n  ctx.fillStyle = monoShade\r\n  for (let yi = 0; yi < grid.length; yi++) {\r\n    for (let xi = 0; xi < grid[yi].length; xi++) {\r\n      if (grid[yi][xi]) {\r\n        ctx.fillRect(xi * size, yi * size, size, size)\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nconst drawInverse = (ctx) => {\r\n  ctx.fillStyle = inverseBg\r\n  ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height)\r\n  for (let yi = 0; yi < grid.length; yi++) {\r\n    for (let xi = 0; xi < grid[yi].length; xi++) {\r\n      if (grid[yi][xi]) {\r\n        ctx.clearRect(xi * size, yi * size, size, size)\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nconst drawShaded = (ctx) => {\r\n  drawBackground(ctx)\r\n  for (let yi = 0; yi < grid.length; yi++) {\r\n    for (let xi = 0; xi < grid[yi].length; xi++) {\r\n      if (grid[yi][xi]) {\r\n        ctx.fillStyle = getShade(xi, yi)\r\n        ctx.fillRect(xi * size, yi * size, size, size)\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nconst drawShapes = (ctx) => {\r\n  ctx.fillStyle = '#000000'\r\n  ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height)\r\n  ctx.fillStyle = '#a2a2a2'\r\n  for (let yi = 0; yi < grid.length; yi++) {\r\n    for (let xi = 0; xi < grid[yi].length; xi++) {\r\n      if (grid[yi][xi]) {\r\n        ctx.fillRect(xi * size, yi * size, size, size)\r\n      }\r\n    }\r\n  }\r\n  ctx.fillStyle = pOutOfBounds ? '#ff3434' : '#ffffff'\r\n  for (let i = 0; i < pCells.length; i++) {\r\n    const [x, y] = pCells[i]\r\n    ctx.fillRect(x * size, y * size, size, size)\r\n  }\r\n}\r\n\r\nconst setBrushSize = bsz => brushSize = bsz\r\n\r\nconst drawOnGrid = (x, y) => applyBrush(x, y, 1)\r\nconst eraseOnGrid = (x, y) => applyBrush(x, y, 0)\r\n\r\nconst paint = () => {\r\n  if (!pOutOfBounds) {\r\n    for (let i = 0; i < pCells.length; i++) {\r\n      const [x, y] = pCells[i]\r\n      grid[y][x] = 1\r\n    }\r\n  }\r\n}\r\n\r\nconst preview = (x, y) => { \r\n  const cx = Math.min(Math.floor(x / size), gridW - 1)\r\n  const cy = Math.min(Math.floor(y / size), gridH - 1)\r\n  if (cx !== pX || cy !== pY) {\r\n    pX = cx; pY = cy\r\n    const { cells, outOfBounds } = getShape(cx, cy)\r\n    pCells = cells; pOutOfBounds = outOfBounds\r\n  }\r\n}\r\n\r\nconst setSize = (sz) => {\r\n  if (sz !== size) {\r\n    size = sz\r\n    reInitGrid()\r\n  }\r\n\r\n  return { gridW, gridH }\r\n}\r\n\r\nconst setupPreview = shape => {\r\n  setShape(shape)\r\n  pX = -1; pY = -1\r\n  pCells = []; pOutOfBounds = false\r\n}\r\n\r\nconst setGridWrap = wrap => {\r\n  wrapEnabled = wrap\r\n  generateNeighbours(gridW, gridH)\r\n}\r\n\r\nconst setFill = (fill, args) => {\r\n  grid = createGrid({ fill, grid, args })\r\n  resetAges(grid)\r\n}\r\n\r\nconst setInverseBg = invbg => {\r\n  inverseBg = invbg\r\n  background = inverseBg + alphaBg\r\n}\r\n\r\nconst setShadeSeq = ({ shades, isLoop }) => {\r\n  setShades({ shadeSeq: shades, isLoop, grid })\r\n}\r\n\r\nconst setTrails = i => {\r\n  i = 255 - i\r\n  alphaBg = `${i < 16 ? '0' : ''}${i.toString(16)}`\r\n  background = inverseBg + alphaBg\r\n\r\n  if (i < 255) {\r\n    if (isClearCanvas) {\r\n      isClearCanvas = false\r\n      updateDrawBackground()\r\n    }\r\n  } else {\r\n    /* Cause you can hit 255 only once */\r\n    isClearCanvas = true\r\n    updateDrawBackground()\r\n  }\r\n}\r\n\r\n/* --- End Exports --- */\r\n\r\nconst setDimensions = (_gridW, _gridH) => {\r\n  gridW = _gridW\r\n  gridH = _gridH\r\n\r\n  setBounds(gridW, gridH)\r\n}\r\n\r\nconst calculateDimensions = () => {\r\n  setDimensions(\r\n    Math.floor(window.innerWidth / size),\r\n    Math.floor(window.innerHeight / size)\r\n  )\r\n\r\n  console.log(`Calculated gridW: ${gridW}, gridH: ${gridH}`)\r\n}\r\n\r\nconst updateDrawBackground = () => {\r\n  drawBackground = isClearCanvas ? ctx => {\r\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height)\r\n  } : ctx => {\r\n    ctx.fillStyle = background\r\n    ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height)\r\n  }\r\n}\r\n\r\nconst applyBrush = (x, y, b) => {\r\n  const bsz = Math.max(1, Math.floor(brushSize / size))\r\n  const cx = Math.min(Math.floor(x / size), gridW - 1)\r\n  const cy = Math.min(Math.floor(y / size), gridH - 1)\r\n  if (bsz > 1) {\r\n    const hf = Math.floor(bsz / 2)\r\n    const ox = cx - hf\r\n    const oy = cy - hf\r\n    for (let xi = 0; xi < bsz; xi++) {\r\n      for (let yi = 0; yi < bsz; yi++) {\r\n        const _x = ox + xi\r\n        const _y = oy + yi\r\n        if (checkBounds(_x, _y)) {\r\n          grid[_y][_x] = b\r\n        }\r\n      }\r\n    }\r\n  } else {\r\n    grid[cy][cx] = b\r\n  }\r\n}\r\n\r\nconst generateNeighbours = (bX, bY) => {\r\n  const cX = bX - 1\r\n  const cY = bY - 1\r\n  const nei = []\r\n  const generation = (tl, tr, br, bl, t, r, b, l) => {\r\n    for (let y = 0; y < bY; y++) {\r\n      nei[y] = []\r\n      for (let x = 0; x < bX; x++) {\r\n        if (x === 0 && y === 0) nei[y][x] = tl\r\n        else if (x === cX && y === 0) nei[y][x] = tr\r\n        else if (x === cX && y === cY) nei[y][x] = br\r\n        else if (x === 0 && y === cY) nei[y][x] = bl\r\n        else if (y === 0) nei[y][x] = t\r\n        else if (x === cX) nei[y][x] = r\r\n        else if (y === cY) nei[y][x] = b\r\n        else if (x === 0) nei[y][x] = l\r\n        else nei[y][x] = n_center\r\n      }\r\n    }\r\n  }\r\n  if (!wrapEnabled) generation(n_topLt, n_topRt, n_botRt, n_botLt, n_top, n_right, n_bottom, n_left)\r\n  else generation(n_topLtW, n_topRtW, n_botRtW, n_botLtW, n_topW, n_rightW, n_bottomW, n_leftW) \r\n  neighbours = nei\r\n}\r\n\r\n/* --- NAMING ---\r\n * topRt    - Top Right\r\n * topRtW   - Top Right Wraped\r\n * topRtWC  - Top Right Wraped Corner \r\n * rtTopW   - Right Top Wraped\r\n * 'Corners' and 'topRtW/rtTopW separations' are extra checks that arise because of wraping\r\n */\r\n\r\nconst top = (x, y) => grid[y - 1][x]\r\nconst topRt = (x, y) => grid[y - 1][x + 1]\r\nconst right = (x, y) => grid[y][x + 1]\r\nconst botRt = (x, y) => grid[y + 1][x + 1]\r\nconst bottom = (x, y) => grid[y + 1][x]\r\nconst botLt = (x, y) => grid[y + 1][x - 1]\r\nconst left = (x, y) => grid[y][x - 1]\r\nconst topLt = (x, y) => grid[y - 1][x - 1]\r\n\r\nconst topW = (x) => grid[gridH - 1][x]\r\nconst topRtW = (x) => grid[gridH - 1][x + 1]\r\nconst topRtWC = () => grid[gridH - 1][0]\r\nconst rtTopW = (_, y) => grid[y - 1][0]\r\nconst rightW = (_, y) => grid[y][0]\r\nconst rtBotW = (_, y) => grid[y + 1][0]\r\nconst botRtWC = () => grid[0][0]\r\nconst botRtW = (x) => grid[0][x + 1]\r\nconst bottomW = (x) => grid[0][x]\r\nconst botLtW = (x) => grid[0][x - 1]\r\nconst botLtWC = () => grid[0][gridW - 1]\r\nconst ltBotW = (_, y) => grid[y + 1][gridW - 1]\r\nconst leftW = (_, y) => grid[y][gridW - 1]\r\nconst ltTopW = (_, y) => grid[y - 1][gridW - 1]\r\nconst topLtWC = () => grid[gridH - 1][gridW - 1]\r\nconst topLtW = (x) => grid[gridH - 1][x - 1]\r\n\r\nconst n_top = (x, y) => right(x, y) + botRt(x, y) + bottom(x, y) + botLt(x, y) + left(x, y)\r\nconst n_topRt = (x, y) => bottom(x, y) + botLt(x, y) + left(x, y)\r\nconst n_right = (x, y) => top(x, y) + bottom(x, y) + botLt(x, y) + left(x, y) + topLt(x, y)\r\nconst n_botRt = (x, y) => top(x, y) + left(x, y) + topLt(x, y)\r\nconst n_bottom = (x, y) => top(x, y) + topRt(x, y) + right(x, y) + left(x, y) + topLt(x, y)\r\nconst n_botLt = (x, y) => top(x, y) + topRt(x, y) + right(x, y)\r\nconst n_left = (x, y) => top(x, y) + topRt(x, y) + right(x, y) + botRt(x, y) + bottom(x, y)\r\nconst n_topLt = (x, y) => right(x, y) + botRt(x, y) + bottom(x, y)\r\nconst n_center = (x, y) => top(x, y) + topRt(x, y) + right(x, y) + botRt(x, y) + bottom(x, y) + botLt(x, y) + left(x, y) + topLt(x, y)\r\n\r\nconst n_topW = (x, y) => topW(x, y) + topRtW(x, y) + right(x, y) + botRt(x, y) + bottom(x, y) + botLt(x, y) + left(x, y) + topLtW(x, y)\r\nconst n_topRtW = (x, y) => topW(x, y) + topRtWC(x, y) + rightW(x, y) + rtBotW(x, y) + bottom(x, y) + botLt(x, y) + left(x, y) + topLtW(x, y)\r\nconst n_rightW = (x, y) => top(x, y) + rtTopW(x, y) + rightW(x, y) + rtBotW(x, y) + bottom(x, y) + botLt(x, y) + left(x, y) + topLt(x, y)\r\nconst n_botRtW = (x, y) => top(x, y) + rtTopW(x, y) + rightW(x, y) + botRtWC(x, y) + bottomW(x, y) + botLtW(x, y) + left(x, y) + topLt(x, y)\r\nconst n_bottomW = (x, y) => top(x, y) + topRt(x, y) + right(x, y) + botRtW(x, y) + bottomW(x, y) + botLtW(x, y) + left(x, y) + topLt(x, y)\r\nconst n_botLtW = (x, y) => top(x, y) + topRt(x, y) + right(x, y) + botRtW(x, y) + bottomW(x, y) + botLtWC(x, y) + leftW(x, y) + ltTopW(x, y)\r\nconst n_leftW = (x, y) => top(x, y) + topRt(x, y) + right(x, y) + botRt(x, y) + bottom(x, y) + ltBotW(x, y) + leftW(x, y) + ltTopW(x, y)\r\nconst n_topLtW = (x, y) => topW(x, y) + topRtW(x, y) + right(x, y) + botRt(x, y) + bottom(x, y) + ltBotW(x, y) + leftW(x, y) + topLtWC(x, y)\r\n\r\nconst checkBounds = (x, y) => x > -1 && y > -1 && x < gridW && y < gridH\r\n\r\n// createHelpers([])\r\n\r\nexport { \r\n  initGrid, reInitGrid, updateGrid, drawGrid, drawInverse, drawShaded, drawShapes, drawOnGrid, eraseOnGrid, paint, preview,\r\n  setBrushSize, setSize, setupPreview, setFill, setGridWrap, setRule, setShadeSeq, setInverseBg, setTrails\r\n}","let global_S = [2, 3]\r\nlet global_B = [3]\r\n\r\nconst setRule = ({ b, s }) => {\r\n  global_B = b.split('').map(i => parseInt(i))\r\n  global_S = s.split('').map(i => parseInt(i))\r\n}\r\n\r\nconst globalSurvivalTrigger = (alive, x, y) => {\r\n  return global_S.indexOf(alive) > -1 ? 1 : 0\r\n}\r\n\r\nconst globalBirthTrigger = (alive, x, y) => {\r\n  return global_B.indexOf(alive) > -1 ? 1 : 0\r\n}\r\n\r\nconst localSurvivalTrigger = (alive, x, y) => {\r\n\r\n}\r\n\r\nconst localBirthTrigger = (alive, x, y) => {\r\n\r\n}\r\n\r\nlet checkSurvival = globalSurvivalTrigger\r\nlet checkBirth = globalBirthTrigger\r\n\r\nexport { setRule, checkSurvival, checkBirth }","import React from 'react'\r\nimport \"./notifications.css\"\r\n\r\nexport const NotificationWithBody = ({ title, body }) => (\r\n  <span>\r\n    {title}<br/>\r\n    <span className='text-light'>{body}</span>\r\n  </span>\r\n)","import { useState, useRef, useEffect } from 'react'\r\nimport { IoMdCheckboxOutline, IoMdSquareOutline } from 'react-icons/io'\r\n\r\n/* Need to adjust width if any changes to qa */\r\nconst width = 324 * 2\r\n\r\nconst ExCon = ({ title, isCurrent, children }) => {\r\n  return (\r\n    <div className={`ex-con ex-con-${isCurrent ? 'in' : 'out'}`}>\r\n      <div className='ex-title'>\r\n        <div className='ex-title-lbl center'>\r\n          {title.split('').join(' ').toUpperCase()}\r\n        </div>\r\n      </div>\r\n      <div className='ex-cont'>\r\n        {children}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst ExIndicator = (props) => {\r\n  const { selectedIndex } = props\r\n  const canvasRef = useRef(null)\r\n\r\n  const style = {\r\n    width, left: (8 - width / 2 + 22) + (44 * selectedIndex)\r\n  }\r\n\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current\r\n    const ctx = canvas.getContext('2d')\r\n\r\n    canvas.setAttribute('width', width)\r\n    canvas.setAttribute('height', 444)\r\n\r\n    ctx.lineWidth = 2\r\n    ctx.strokeStyle = '#a2a2a2'\r\n\r\n    const points = [[width / 2 - 10, 400], [width / 2, 406], [width / 2 + 10, 400], [width, 400]]\r\n\r\n    ctx.moveTo(0, 400)\r\n    points.forEach(([x, y]) => ctx.lineTo(x, y))\r\n    ctx.stroke()\r\n\r\n  }, [])\r\n\r\n  return (\r\n    <canvas className='ex-indic' ref={canvasRef} style={style} />\r\n  )\r\n}\r\n\r\nconst ExSubTitle = ({ \r\n  children,\r\n  subtitle, fontSize = 10,\r\n  width, isScrollable = false, \r\n  left = 0, right = 0 \r\n}) => {\r\n  const className = `ex-st-con ex-item-${isScrollable ? 'scrl' : 'con'}`\r\n\r\n  return (\r\n    <div className={className} style={{height: fontSize + 3}}>\r\n      <div className='ex-st-hr' style={{ width, left }} />\r\n      <div className='ex-st-lbl' style={{ fontSize }}>\r\n        {subtitle ? subtitle.toUpperCase() : children}\r\n      </div>\r\n      <div className='ex-st-hr' style={{ width, right }} />\r\n    </div>\r\n  )\r\n}\r\n\r\nconst ExCheckbox = ({ name, checked, style = {}, onChange }) => {\r\n  return (\r\n    <div \r\n      className='ex-cb-con' style={style} \r\n      onClick={() => onChange(!checked)}\r\n    >\r\n      {name}\r\n      {checked ? \r\n      <IoMdCheckboxOutline className='ex-cb-ico' /> : \r\n      <IoMdSquareOutline className='ex-cb-ico' />}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst ExHexButton = ({ name, x, y, onClick }) => {\r\n  const [hovered, setHovered] = useState(false)\r\n  const [pressed, setPressed] = useState(false)\r\n\r\n  const mouseLeave = _ => {\r\n    setHovered(false)\r\n    setPressed(false)\r\n  }\r\n\r\n  const fill = pressed ? '#fff' : '#00000000'\r\n  const stroke = hovered ? '#fff' : '#a2a2a2'\r\n  const textStyle = { color: pressed ? '#000' : stroke }\r\n\r\n  return (\r\n    <div\r\n      className='ex-hb-con'\r\n      style={{left: x, top: y}}\r\n      onMouseEnter={_ => setHovered(true)}\r\n      onMouseLeave={mouseLeave}\r\n      onMouseDown={_ => setPressed(true)}\r\n      onMouseUp={_ => setPressed(false)}\r\n      onClick={onClick}\r\n    >\r\n      <svg className='ex-hb-svg'>\r\n        <path d='M 0 13 L 10 0 L 134 0 L 144 13 L 134 26 L 10 26 Z' fill={fill} />\r\n        <path d='M 1 13 L 10 0 M 133 0 L 142 13 L 133 26 M 10 26 L 0 13' strokeWidth={1.5} stroke={stroke} fill='#00000000' />\r\n        <path d='M 10 0 L 134 0 M 133 26 L 10 26' strokeWidth={2.5} stroke={stroke} />\r\n      </svg>\r\n      <div className='ex-hb-lbl center' style={textStyle}>{name}</div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport { ExCon, ExIndicator, ExSubTitle, ExCheckbox, ExHexButton }","import { useRef } from 'react'\r\nimport { FaPlay, FaPause } from 'react-icons/fa'\r\nimport { IoSpeedometer } from 'react-icons/io5'\r\nimport { CgExtension } from 'react-icons/cg'\r\nimport { RiHeartPulseFill } from 'react-icons/ri'\r\nimport { RiBrushFill, RiBrushLine } from 'react-icons/ri'\r\nimport { IoIosColorPalette, IoMdCloseCircle } from 'react-icons/io'\r\n\r\nconst QaButton = ({ \r\n  children, unhide, animDelay, animDuration = 240, \r\n  onClick, onRightClick = () => {}, onHoverChanged \r\n}) => {\r\n  const hoverRef = useRef(false)\r\n\r\n  const rightClick = (e) => {\r\n    e.preventDefault()\r\n    onRightClick()\r\n  }\r\n\r\n  const mouseEnter = () => {\r\n    hoverRef.current = true\r\n    setTimeout(() => {\r\n      if (hoverRef.current) {\r\n        onHoverChanged(true)\r\n      }\r\n    }, 1000)\r\n  }\r\n\r\n  const mouseLeave = () => {\r\n    hoverRef.current = false\r\n    onHoverChanged(false)\r\n  }\r\n\r\n  const className = `qa-btn-con ${unhide ? 'qa-btn-in' : 'qa-btn-out'}`\r\n\r\n  const style = {\r\n    animationDuration: `${animDuration}ms`,\r\n    animationDelay: unhide ? `${animDelay}ms` : '0ms'\r\n  }\r\n\r\n  return (\r\n    <div \r\n      className={className} style={style}\r\n      onClick={onClick} onContextMenu={rightClick}\r\n      onMouseEnter={mouseEnter} onMouseLeave={mouseLeave}\r\n    >{children}</div>\r\n  )\r\n}\r\n\r\nconst Play = ({ isPlaying, unhide, animDelay, onClick, onHoverChanged }) => {\r\n  return (\r\n    <QaButton \r\n      onClick={onClick} \r\n      unhide={unhide} \r\n      animDelay={animDelay} \r\n      onHoverChanged={onHoverChanged}\r\n    >\r\n      {isPlaying ?\r\n      <FaPause className='center' /> :\r\n      <FaPlay className='center' />}\r\n    </QaButton>\r\n  )\r\n}\r\n\r\nconst Draw = ({ isDrawing, unhide, animDelay, onClick, onRightClick, onHoverChanged }) => {\r\n  return (\r\n    <QaButton \r\n      onClick={onClick} \r\n      onRightClick={onRightClick} \r\n      unhide={unhide} \r\n      animDelay={animDelay} \r\n      onHoverChanged={onHoverChanged}\r\n    >\r\n      {isDrawing ? <RiBrushFill className='center qa-draw' /> : <BrushIcon />}\r\n    </QaButton>\r\n  )\r\n}\r\n\r\nconst Speed = ({ unhide, animDelay, onClick, onHoverChanged }) => {\r\n  return (\r\n    <QaButton \r\n      onClick={onClick} \r\n      unhide={unhide} \r\n      animDelay={animDelay} \r\n      onHoverChanged={onHoverChanged}\r\n    >\r\n      <SpeedIcon />\r\n    </QaButton>\r\n  )\r\n}\r\n\r\nconst Shapes = ({ unhide, animDelay, onClick, onRightClick, onHoverChanged }) => {\r\n  return (\r\n    <QaButton \r\n      onClick={onClick} \r\n      onRightClick={onRightClick} \r\n      unhide={unhide} \r\n      animDelay={animDelay} \r\n      onHoverChanged={onHoverChanged}\r\n    >\r\n      <GridIcon />\r\n    </QaButton>\r\n  )\r\n}\r\n\r\nconst Rules = ({ unhide, animDelay, onClick, onRightClick, onHoverChanged }) => {\r\n  return (\r\n    <QaButton \r\n      onClick={onClick} \r\n      onRightClick={onRightClick}\r\n      unhide={unhide} \r\n      animDelay={animDelay} \r\n      onHoverChanged={onHoverChanged}\r\n    >\r\n      <RiHeartPulseFill className='center qa-rules' />\r\n    </QaButton>\r\n  )\r\n}\r\n\r\nconst Colors = ({ unhide, animDelay, onClick, onRightClick, onHoverChanged }) => {\r\n  return (\r\n    <QaButton \r\n      onClick={onClick} \r\n      onRightClick={onRightClick}\r\n      unhide={unhide} \r\n      animDelay={animDelay} \r\n      onHoverChanged={onHoverChanged}\r\n    >\r\n      <IoIosColorPalette className='center qa-colors' />\r\n    </QaButton>\r\n  )\r\n}\r\n\r\nconst Close = ({ unhide, animDelay, animDuration, onClick, onRightClick, onHoverChanged }) => {\r\n  return (\r\n    <QaButton \r\n      onClick={onClick} \r\n      onRightClick={onRightClick}\r\n      unhide={unhide} \r\n      animDelay={animDelay} \r\n      animDuration={animDuration}\r\n      onHoverChanged={onHoverChanged}\r\n    >\r\n      <IoMdCloseCircle className='center qa-close' />\r\n    </QaButton>\r\n  )\r\n}\r\n\r\nconst BrushIcon = () => <RiBrushLine className='center qa-draw' />\r\nconst GridIcon = () => <CgExtension className='center qa-shapes' />\r\nconst SpeedIcon = () => <IoSpeedometer className='center qa-speed' />\r\n\r\nexport { \r\n  Play, Draw, Speed, Shapes, Rules, Colors, Close,\r\n  BrushIcon, GridIcon, SpeedIcon\r\n}","const QaTooltip = ({ vis, index }) => {\r\n  const startX = (window.innerWidth - 324) / 2\r\n  const midX = startX + 8 + (44 * index) + 22\r\n  const path = `M ${midX - 12} 8 L ${midX} 0 L ${midX + 12} 8`\r\n  const msgConStyle = { left: midX }\r\n\r\n  const className = `qa-tt-con ${vis ? 'qa-tt-con-in' : ''}`\r\n  const tip = tips[index]\r\n\r\n  return (\r\n    <div className={className}>\r\n      <svg className='qa-tt-svg'>\r\n        <path d={path} fill='#dfdfdf' />\r\n      </svg>\r\n      <div className='qa-tt-msg-con' style={msgConStyle}>\r\n        <div className='qa-tt-msg'>{tip}</div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst tips = {\r\n  0: ['Play | Pause'],\r\n  1: ['LMB: Toggle Brush | RMB: Brush Size'],\r\n  2: ['LMB: Pattern List | RMB: Grid Cell Size'],\r\n  3: ['LMB: Configure Rules | RMB: Rule Presets'],\r\n  4: ['LMB: Color Palette | RMB: Age Based Palette'],\r\n  5: ['Sim Speed'],\r\n  6: ['LMB: Close | RMB: Minimise']\r\n}\r\n\r\nexport default QaTooltip\r\n","import { useState, useEffect, useCallback } from 'react'\r\nimport { IoMdCloseCircle } from 'react-icons/io'\r\n\r\nlet liveValue = 0\r\n\r\nconst QaSlider = ({ unhide, icon, value, range, onChange, onDismiss }) => {\r\n  const offsetX = window.innerWidth / 2 - 162\r\n  \r\n  const [trackX, setTrackX] = useState(150)\r\n  const [isPressed, setIsPressed] = useState(false)\r\n  const [isHovered, setIsHovered] = useState(false)\r\n\r\n  useEffect(() => {\r\n    const [lower, upper] = range\r\n    updateTrackX(Math.lerp(20, 300, Math.inverseLerp(lower, upper, value)))\r\n  }, [value])\r\n\r\n  const updateTrackX = (trackX) => {\r\n    setTrackX(trackX)\r\n    const [lower, upper] = range\r\n    const rounded = Math.round(Math.lerp(lower, upper, Math.inverseLerp(20, 300, trackX)))\r\n    \r\n    if (rounded !== liveValue) {\r\n      liveValue = rounded\r\n      onChange(rounded)\r\n    }\r\n  }\r\n\r\n  const mouseMove = (e) => {\r\n    if (isPressed && e.button === 0) {\r\n      updateTrackX(Math.clamp(e.clientX - offsetX, 20, 300))\r\n    }\r\n  }\r\n\r\n  const mouseClick = (e) => {\r\n    updateTrackX(Math.clamp(e.clientX - offsetX, 20, 300))\r\n  }\r\n\r\n  const rightClick = (e) => {\r\n    e.preventDefault()\r\n    onDismiss()\r\n  }\r\n\r\n  const mouseDown = useCallback((e) => {\r\n    if (e.button === 0) {\r\n      setIsPressed(true)\r\n      document.addEventListener('mouseup', mouseUp, { once: true })\r\n    }\r\n  }, [])\r\n\r\n  const mouseUp = () => {\r\n    setIsPressed(false)\r\n  }\r\n\r\n  const trackStyle = { width: trackX }\r\n  const thumbStyle = { left: trackX - 20 }\r\n  const labelStyle = { left: trackX + offsetX - 18 }\r\n  const conClass = `qa-sl-con ${unhide ? 'qa-sl-in' : ''}`\r\n  const thumbClass = `qa-sl-thumb ${isHovered ? 'qa-sl-thumb-hov' : ''}`\r\n  const labelClass = `qa-sl-lbl ${isPressed ? 'qa-sl-lbl-pressed' : ''}`\r\n  const closeClass = `qa-sl-x ${unhide ? 'qa-sl-x-in' : 'qa-sl-x-out'}`\r\n\r\n  return (\r\n    <div className={conClass}>\r\n      <div className='qa-sl-track-con'>\r\n        <div className='qa-sl-track' style={trackStyle} />\r\n      </div>\r\n\r\n      <div className={thumbClass} style={thumbStyle}>\r\n        {icon}\r\n      </div>\r\n\r\n      <div \r\n        className='qa-sl-receiver' \r\n        onMouseMove={mouseMove} \r\n        onMouseDown={mouseDown}\r\n        onMouseEnter={_ => setIsHovered(true)}\r\n        onMouseLeave={_ => setIsHovered(false)}\r\n        onContextMenu={rightClick}\r\n        onClick={mouseClick}\r\n      >\r\n        <div className={labelClass} style={labelStyle}>{liveValue}</div>\r\n      </div>\r\n\r\n      <div className={closeClass} onClick={onDismiss}>\r\n        <IoMdCloseCircle className='qa-sl-x-ico' />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default QaSlider\r\n","import { useState, useEffect, useContext, useCallback } from 'react'\r\nimport { FiChevronRight } from 'react-icons/fi'\r\n\r\nimport { DataContext } from '../../context/DataContext'\r\nimport { NotificationContext } from '../../context/NotificationContext'\r\nimport { RuleNotification } from '../notifications/Notifications'\r\nimport { ExCon, ExSubTitle, ExCheckbox } from './ex-comps'\r\n\r\nlet isKeyModeSurvival = false\r\n\r\nconst ExRules = ({ isCurrent, pindex, onSelect, onWrapChanged, onPindexChanged }) => {\r\n  const { rules } = useContext(DataContext)\r\n  const { showNotification } = useContext(NotificationContext)\r\n\r\n  const [arIndex, setArIndex] = useState(0)\r\n  const [activeRule, setActiveRule] = useState(rules[arIndex]) // Conway's Life\r\n\r\n  const pconStyle = {\r\n    transform: `translateX(${pindex * -324}px)`\r\n  }\r\n\r\n  const updateActiveRule = useCallback(({ b, s, ari }) => {\r\n    let selectedRule = {...activeRule}\r\n    if (ari > -1) {\r\n      if (ari !== arIndex) {\r\n        setArIndex(ari)\r\n        selectedRule = rules[ari]\r\n      }\r\n    } else {\r\n      let isCustom = true\r\n      for (let i = 0; i < rules.length; i++) {\r\n        if (rules[i].b === b && rules[i].s === s) {\r\n          if (arIndex !== i) {\r\n            isCustom = false\r\n            setArIndex(i)\r\n            selectedRule = rules[i]\r\n          }\r\n          break\r\n        }\r\n      }\r\n      if (isCustom) {\r\n        selectedRule = { name: 'Custom', b, s }\r\n        setArIndex(-1)\r\n      }\r\n    }\r\n    setActiveRule(selectedRule)\r\n    onSelect(selectedRule)\r\n  }, [activeRule, arIndex, onSelect, rules])\r\n\r\n  useEffect(() => {\r\n    const keyListener = e => {\r\n      const { b, s } = activeRule\r\n      switch (e.key) {\r\n        case \"b\": \r\n          isKeyModeSurvival = 0\r\n          showNotification(<RuleNotification b={b} s={s} highlightS={false} />)\r\n          break\r\n        case \"s\":\r\n          isKeyModeSurvival = 1\r\n          showNotification(<RuleNotification b={b} s={s} highlightS={true} />)\r\n          break\r\n        case \"0\":\r\n        case \"1\":\r\n        case \"2\":\r\n        case \"3\":\r\n        case \"4\":\r\n        case \"5\":\r\n        case \"6\":\r\n        case \"7\":\r\n        case \"8\": \r\n          if (isKeyModeSurvival) {\r\n            const sarr = s.split(\"\")\r\n            const si = sarr.indexOf(e.key)\r\n            if (si > -1) {\r\n              sarr.splice(si, 1)\r\n            } else {\r\n              sarr.push(e.key)\r\n            }\r\n            const _s = sarr.sort().join(\"\")\r\n            updateActiveRule({ b, s: _s, ari: -1 })\r\n            showNotification(<RuleNotification b={b} s={_s} highlightS={true} />)\r\n          } else {\r\n            const barr = b.split(\"\")\r\n            const bi = barr.indexOf(e.key)\r\n            if (bi > -1) {\r\n              barr.splice(bi, 1)\r\n            } else {\r\n              barr.push(e.key)\r\n            }\r\n            const _b = barr.sort().join(\"\")\r\n            updateActiveRule({ b: _b, s, ari: -1 })\r\n            showNotification(<RuleNotification b={_b} s={s} highlightS={false} />)\r\n          }\r\n          break\r\n        default:\r\n          if (e.keyCode === 38) {\r\n            if (arIndex > 0) {\r\n              updateActiveRule({ ari: arIndex - 1 })\r\n              showNotification(rules[arIndex - 1].name)\r\n            }\r\n          } else if (e.keyCode === 40) {\r\n            if (arIndex < rules.length - 1) {\r\n              updateActiveRule({ ari: arIndex + 1 })\r\n              showNotification(rules[arIndex + 1].name)\r\n            }\r\n          }\r\n          break\r\n      }\r\n    }\r\n\r\n    document.body.addEventListener(\"keydown\", keyListener)\r\n\r\n    return () => {\r\n      document.body.removeEventListener(\"keydown\", keyListener)\r\n    }\r\n  }, [updateActiveRule])\r\n\r\n  return (\r\n    <ExCon title='Rules' isCurrent={isCurrent}>\r\n      <div className='ex-pcon' style={pconStyle}>\r\n        <Presets \r\n          rules={rules} \r\n          currentIndex={arIndex} \r\n          onSelect={updateActiveRule} \r\n        />\r\n\r\n        <Custom \r\n          activeRule={activeRule}\r\n          onChanged={updateActiveRule} \r\n          onWrapChanged={onWrapChanged}\r\n          onSelectPresets={() => onPindexChanged(1)} \r\n        />\r\n      </div>\r\n    </ExCon>\r\n  )\r\n}\r\n\r\nconst Presets = ({ rules, currentIndex, onSelect }) => {\r\n  return (\r\n    <div className='ex-pg ex-pg2'>\r\n      <div className='ex-flick'>\r\n        {rules.map(({name, b, s}, index) => \r\n        <RuleCell \r\n          key={index}  \r\n          name={name} b={b} s={s} \r\n          selected={currentIndex === index}\r\n          onClick={() => onSelect({ ari: index })} \r\n        />)}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst Custom = ({ activeRule, onSelectPresets, onWrapChanged, onChanged }) => {\r\n  const { name, b, s } = activeRule\r\n\r\n  const updateRule = ({ nb, ns }) => {\r\n    onChanged({\r\n      ari: -1,\r\n      b: nb !== undefined ? nb : b,\r\n      s: ns !== undefined ? ns : s\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div className='ex-pg'>\r\n      <div style={{height: 5}} />\r\n\r\n      <WrapGrid onChanged={onWrapChanged} />\r\n      <ActiveRule name={name} onClick={onSelectPresets} />\r\n\r\n      <div style={{height: 8}} />\r\n      <div className='rule-info'>\r\n        NUMBER OF NEIGHBOUR CELLS REQUIRED FOR\r\n      </div>\r\n\r\n      <div style={{height: 4}} />\r\n      <ExSubTitle fontSize={13} width={68}>A NEW CELL TO BE <b>B</b>ORN</ExSubTitle>\r\n      <Numbers numbers={b} onNumbersChanged={nb => updateRule({ nb })} />\r\n\r\n      <div style={{height: 8}} />\r\n      <ExSubTitle fontSize={13} width={50}>AN EXISTING CELL TO <b>S</b>URVIVE</ExSubTitle>\r\n      <Numbers numbers={s} onNumbersChanged={ns => updateRule({ ns })} />\r\n    </div>\r\n  )\r\n}\r\n\r\nconst WrapGrid = ({ onChanged }) => {\r\n  const [checked, setChecked] = useState(false)\r\n\r\n  const updateChecked = () => {\r\n    const _checked = !checked\r\n    setChecked(_checked)\r\n    onChanged(_checked)\r\n  }\r\n\r\n  return <ExCheckbox \r\n    name='Wrap Grid' \r\n    checked={checked}\r\n    style={{marginTop: 10}}\r\n    onChange={updateChecked} \r\n  />\r\n}\r\n\r\nconst ActiveRule = ({ name, onClick }) => {\r\n  return (\r\n    <RuleOption title='Active Rule' onClick={onClick}>\r\n      <div className='roc-lbl'>{name}</div>\r\n      <FiChevronRight className='roc-ico roc-chev' />\r\n    </RuleOption>\r\n  )\r\n}\r\n\r\nconst RuleOption = ({ children, title, onClick }) => {\r\n  return (\r\n    <div className='rule-opt-con' onClick={onClick}>\r\n      {title}\r\n      <div className='ro-ctrl'>{children}</div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst Numbers = ({ numbers, onNumbersChanged }) => {\r\n  const [toggles, setToggles] = useState([0, 0, 0, 0, 0, 0, 0, 0, 0])\r\n\r\n  const updateNumbers = (index, value) => {\r\n    let numbers = ''\r\n    toggles.map(\r\n      (n, i) => i === index ? value : n\r\n    ).forEach(\r\n      (t, i) => numbers += `${t ? i : ''}`\r\n    )\r\n    onNumbersChanged(numbers)\r\n  }\r\n\r\n  useEffect(() => {\r\n    const togs = [0, 0, 0, 0, 0, 0, 0, 0, 0]\r\n    for (let i = 0; i < numbers.length; i++) {\r\n      togs[parseInt(numbers.charAt(i))] = 1\r\n    }\r\n    setToggles(togs)\r\n\r\n  }, [numbers])\r\n\r\n  return (\r\n    <div className='dia-lt'>\r\n      <DiamondBtn text={0} x={10} y={10} checked={toggles[0]} checkChanged={v => updateNumbers(0, v)} />\r\n      <DiamondBtn text={1} x={40} y={40} checked={toggles[1]} checkChanged={v => updateNumbers(1, v)} />\r\n      <DiamondBtn text={2} x={70} y={10} checked={toggles[2]} checkChanged={v => updateNumbers(2, v)} />\r\n      <DiamondBtn text={3} x={100} y={40} checked={toggles[3]} checkChanged={v => updateNumbers(3, v)} />\r\n      <DiamondBtn text={4} x={130} y={10} checked={toggles[4]} checkChanged={v => updateNumbers(4, v)} />\r\n      <DiamondBtn text={5} x={160} y={40} checked={toggles[5]} checkChanged={v => updateNumbers(5, v)} />\r\n      <DiamondBtn text={6} x={190} y={10} checked={toggles[6]} checkChanged={v => updateNumbers(6, v)} />\r\n      <DiamondBtn text={7} x={220} y={40} checked={toggles[7]} checkChanged={v => updateNumbers(7, v)} />\r\n      <DiamondBtn text={8} x={250} y={10} checked={toggles[8]} checkChanged={v => updateNumbers(8, v)} />\r\n    </div>\r\n  )\r\n}\r\n\r\nconst DiamondBtn = ({ text, x, y, checked, checkChanged }) => {\r\n  const toggleCheck = () => checkChanged(1 - checked)\r\n\r\n  const btnStyle = { left: x , top: y }\r\n  const btnClass = `dia-btn ${checked ? 'dia-btn-c' : ''}`\r\n  const cbClass = `dia-cb ${checked ? 'dia-cb-c' : ''}`\r\n\r\n  return (\r\n    <div className={btnClass} style={btnStyle} onClick={toggleCheck} >\r\n      <div className={cbClass} />\r\n      <div className='dia-lbl-con'>\r\n        <div className='dia-lbl center'>{text}</div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst RuleCell = ({ selected, name, b, s, onClick }) => {\r\n  const nameCN = `rule-item-name ${selected ? 'rule-item-name-sel' : ''}`\r\n  const ruleCN = `rule-item-rule ${selected ? 'rule-item-rule-sel' : ''}`\r\n\r\n  return (\r\n    <div \r\n      className='rule-item-con'\r\n      onClick={onClick}\r\n    >\r\n      <div className={nameCN}>{name}</div>\r\n      <div className={ruleCN}><b>B</b>{b} <b>S</b>{s}</div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ExRules\r\n","import { HiOutlineAdjustments } from 'react-icons/hi'\r\nimport { IoChevronUp } from 'react-icons/io5'\r\n\r\nimport { useState, useEffect, useRef, useContext } from 'react'\r\nimport { DataContext } from '../../context/DataContext'\r\n\r\nimport { ExCon, ExHexButton, ExSubTitle } from './ex-comps'\r\n\r\nconst ExShapes = ({ isCurrent, onShapeSelect, onFillSelect, onClear, onSliding }) => {\r\n  const [isShapes, setIsShapes] = useState(true)\r\n  const { shapes, fillers } = useContext(DataContext)\r\n\r\n  const className = `shape-con ${isShapes ? '' : 'shape-up'}`\r\n\r\n  return (\r\n    <ExCon title='Patterns' isCurrent={isCurrent}>\r\n      <div className={className}>\r\n        <Fillers fillers={fillers} onSelect={onFillSelect} onSliding={onSliding} />\r\n\r\n        <div className='shape-mid'>\r\n          <ExHexButton name='Clear'   x={1}   y={6} onClick={onClear} />\r\n          <ExHexButton name='Invert'  x={159} y={6} onClick={() => onFillSelect('invert')} />\r\n\r\n          <MidIndic y={4} visible={!isShapes} onClick={_ => setIsShapes(true)} paths={[\r\n            'M 1 1 L 10 12 L 19 1', 'M 0 0 L 20 0'\r\n          ]} />\r\n\r\n          <MidIndic y={17} visible={isShapes} onClick={_ => setIsShapes(false)} paths={[\r\n            'M 1 12 L 10 1 L 19 12', 'M 0 13 L 20 13'\r\n          ]} />\r\n        </div>\r\n\r\n        <Shapes shapes={shapes} onSelect={onShapeSelect} />\r\n      </div>\r\n    </ExCon>\r\n  )\r\n}\r\n\r\nconst Shapes = ({ shapes, onSelect }) => {\r\n  return (\r\n    <div className='shape-list'>\r\n      <div className='shape-info'>\r\n        The patterns listed below are meant to be used in<br/>\r\n        conjuction with <b>Conway's Life (B3-S23)</b> rule.\r\n      </div>\r\n      {shapes.map(({ name, shapes }, icat) => (\r\n        <div key={icat}>\r\n          <div className='shape-item-pad' />\r\n          <ExSubTitle subtitle={name} width={132 - name.length * 2} isScrollable={true} />\r\n\r\n          {shapes.map(({ name, shape }, ishape) => (\r\n            <div className='sc-con' key={ishape} onClick={() => onSelect(shape)} >\r\n              <div className='sc-lbl center'>{name}</div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ))}\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nconst Fillers = ({ fillers, onSelect, onSliding }) => {\r\n  const [currentIndex, setCurrentIndex] = useState(-1)\r\n\r\n  const exAction = (index) => setCurrentIndex(index === currentIndex ? -1 : index)\r\n\r\n  return (\r\n    <div className='shape-list'>\r\n      <div className='shape-item-pad' />\r\n\r\n      {fillers.map(({ name, fill, config }, index) =>\r\n        <FillCell \r\n          key={index}\r\n          name={name} \r\n          config={config} \r\n          ex={currentIndex === index} \r\n          onSelect={args => onSelect(fill, args)} \r\n          onSliding={onSliding}\r\n          onExpanded={() => exAction(index)}\r\n        />)}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst FillCell = ({ name, config, ex, onSelect, onSliding, onExpanded }) => {\r\n  const [hovered, setHovered] = useState(false)\r\n  const [pressed, setPressed] = useState(false)\r\n  const args = useRef(config.map(({init}) => init))\r\n\r\n  const style = {\r\n    height: ex ? 32 + 24 * config.length : 30,\r\n    backgroundColor: pressed && !ex ? '#ffffff' : '#00000000',\r\n    color: ex || pressed ? '#000000' : (hovered ? '#ffffff' : '#a2a2a2'),\r\n    borderColor: ex ? '#a2a2a2' : (hovered ? '#ffffff' : '#00000000')\r\n  }\r\n\r\n  const configAction = e => {\r\n    e.stopPropagation()\r\n    onExpanded()\r\n  }\r\n\r\n  const moded = (value, index) => {\r\n    args.current[index] = value\r\n    onSelect(args.current)\r\n  }\r\n\r\n  const select = () => onSelect(args.current)\r\n  \r\n  const labelClass = `fc-lbl-con ${ex ? 'fc-lbl-con-ex' : ''}`\r\n  const iconClass = `fc-icon ${ex ? 'fc-icon-ex' : `${hovered ? '' : 'fc-icon-hid'}`}`\r\n\r\n  return (\r\n    <div \r\n      className='fc-con' \r\n      style={style} \r\n      onMouseEnter={() => setHovered(true)}\r\n      onMouseLeave={() => setHovered(false)}\r\n      onMouseDown={() => setPressed(true)}\r\n      onMouseUp={() => setPressed(false)}\r\n    >\r\n      <div className={labelClass} onClick={select}>\r\n        <div className='fc-lbl center'>{name}</div>\r\n      </div>\r\n      \r\n      {ex ? \r\n      <IoChevronUp className={iconClass} onClick={configAction} /> :\r\n      <HiOutlineAdjustments className={iconClass} onClick={configAction} onMouseDown={e => e.stopPropagation()} />}\r\n\r\n      <div className='fc-ex'>\r\n        {config.map(({ name, init, range }, index) => <FSlide \r\n          key={index}\r\n          name={name} init={init} range={range} \r\n          onChange={(value) => moded(value, index)}\r\n          onDown={() => onSliding(true)}\r\n          onUp={() => onSliding(false)} \r\n        />)}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst FSlide = ({ name, init, range, onChange, onDown, onUp }) => {\r\n  const [hov, setHov] = useState(false)\r\n  const [value, setValue] = useState(1)\r\n\r\n  const slideAction = e => {\r\n    const v = parseInt(e.target.value)\r\n    setValue(v)\r\n    onChange(v)\r\n  }\r\n\r\n  useEffect(() => {\r\n    setValue(init)\r\n  }, [])\r\n\r\n  const slideClass = `fslide ${hov ? 'fslide-hov' : ''}`\r\n\r\n  return (\r\n    <div className='fslide-con'>\r\n      <div className='fslide-lbl'>{name} (<b>{value}</b>)</div>\r\n      <input \r\n        className={slideClass} \r\n        type='range'\r\n        value={value}\r\n        step={1}\r\n        min={range[0]} max={range[1]}\r\n        onMouseEnter={() => setHov(true)}\r\n        onMouseLeave={() => setHov(false)}\r\n        onMouseDown={onDown}\r\n        onMouseUp={onUp}\r\n        onChange={slideAction}\r\n      ></input>\r\n      {/* <div className='fslide-val'>{value}</div> */}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst MidIndic = ({ paths, visible, y, onClick }) => {\r\n  const [hovered, setHovered] = useState(false)\r\n  const [pressed, setPressed] = useState(false)\r\n\r\n  const mouseLeave = _ => {\r\n    setHovered(false)\r\n    setPressed(false)\r\n  }\r\n\r\n  const fill = pressed ? '#fff' : '#00000000'\r\n  const stroke = hovered ? '#fff' : '#a2a2a2'\r\n  const className = `mi-con ${visible ? '' : 'mi-not'}`\r\n\r\n  return (\r\n    <div\r\n      className={className}\r\n      style={{top: y}}\r\n      onClick={onClick}\r\n      onMouseEnter={_ => setHovered(true)}\r\n      onMouseLeave={mouseLeave}\r\n      onMouseDown={_ => setPressed(true)}\r\n      onMouseUp={_ => setPressed(false)}\r\n    >\r\n      <svg className='mi-svg'>\r\n        <path d={paths[0]} strokeWidth={1.5} stroke={stroke} fill={fill} />\r\n        <path d={paths[1]} strokeWidth={2.5} stroke={stroke} />\r\n      </svg>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ExShapes","import { useState, useEffect, useRef, useCallback } from 'react'\r\nimport { BsChevronRight, BsCloudUpload } from 'react-icons/bs'\r\n\r\nimport { ExSubTitle } from '../ex-comps'\r\n\r\nconst offsetX = window.innerWidth / 2 - 152\r\n\r\nconst PrefsPalette = ({ \r\n  shades, onBackgroundSelect, onMonoSelect, onGradientSelect, \r\n  onImageSelect, onAgeConfigure, onTrailsChanged, selectColor\r\n}) => {\r\n  /* trails state in Modes */\r\n  const [modeEx, setModeEx] = useState(false)\r\n  const [modeIndex, setModeIndex] = useState(0)\r\n  const [modeStates, setModeStates] = useState([\r\n    '#ffffff', ['#ff2600', '#0096ff'], '', shades\r\n  ])\r\n\r\n  const select = i => {\r\n    if (i !== modeIndex) {\r\n      const events = [onMonoSelect, onGradientSelect, onImageSelect, onAgeConfigure]\r\n      events[i](modeStates[i])\r\n      setModeIndex(i)\r\n    }\r\n\r\n    setModeEx(false)\r\n  }\r\n\r\n  const monoSelect = mono => {\r\n    setModeStates(modeStates.map((st, i) => i === 0 ? mono : st))\r\n    onMonoSelect(mono)\r\n  }\r\n\r\n  const gradientSelect = grad => {\r\n    setModeStates(modeStates.map((st, i) => i === 1 ? grad : st))\r\n    onGradientSelect(grad)\r\n  }\r\n\r\n  const imageSelect = src => {\r\n    setModeStates(modeStates.map((st, i) => i === 2 ? src : st))\r\n    onImageSelect(src)\r\n  }\r\n\r\n  useEffect(() => {\r\n    const nextStates = [...modeStates]\r\n    if (shades.shades.length === 1) {\r\n      setModeIndex(0)\r\n      nextStates[0] = shades.shades[0]\r\n    } else {\r\n      setModeIndex(3)\r\n    }\r\n    nextStates[3] = shades\r\n    setModeStates(nextStates)\r\n  }, [shades])\r\n\r\n  return (\r\n    <div className='ex-pg'>\r\n      <ExSubTitle fontSize={13} width={78} subtitle='BACKGROUND COLOR' />\r\n      <ColorSelection color='#000000' selectColor={selectColor} onChange={onBackgroundSelect} />\r\n\r\n      <div style={{height: 12}} />\r\n\r\n      <ExSubTitle fontSize={13} width={103} subtitle='COLOR MODE' />\r\n      <ModeDropdown \r\n        ex={modeEx} onExpand={ex => setModeEx(ex)}\r\n        currentIndex={modeIndex} onSelect={select} \r\n      />\r\n\r\n      <Modes \r\n        vis={!modeEx} \r\n        currentIndex={modeIndex} \r\n        states={modeStates}\r\n        selectColor={selectColor}\r\n        onMonoChanged={monoSelect}\r\n        onGradientChanged={gradientSelect}\r\n        onImageSelect={imageSelect}\r\n        onAgeConfigure={onAgeConfigure}\r\n        onTrailsChanged={onTrailsChanged}\r\n      />\r\n    </div>\r\n  )\r\n} \r\n\r\nconst Modes = ({ \r\n  vis, currentIndex, states, selectColor,\r\n  onMonoChanged, onGradientChanged, onImageSelect, onAgeConfigure, onTrailsChanged\r\n}) => {\r\n  const [mono, gradient, src, shades] = states\r\n\r\n  const [trails, setTrails] = useState(0)\r\n  const uploadRef = useRef(null)\r\n  const canvasRef = useRef(null)\r\n\r\n  const modesClass = `mds-con ${vis ? '' : 'mds-inv'}`\r\n\r\n  const updateGradientStops = (v, index) => {\r\n    onGradientChanged(gradient.map((s, i) => i === index ? v : s))\r\n  }\r\n\r\n  const trailsChanged = trails => {\r\n    setTrails(trails)\r\n    onTrailsChanged(trails)\r\n  }\r\n\r\n  const uploadImage = () => uploadRef.current.click()\r\n\r\n  const onSrcChange = e => {\r\n    if (e.target.files && e.target.files[0]) {\r\n      onImageSelect(URL.createObjectURL(e.target.files[0]))\r\n    }\r\n  }\r\n\r\n  const renderContent = () => {\r\n    switch (currentIndex) {\r\n      // Mono\r\n      case 0: return (\r\n        <div>\r\n          <ExSubTitle fontSize={13} width={102} subtitle='MONO COLOR' />\r\n          <ColorSelection color={mono} selectColor={selectColor} onChange={onMonoChanged} />\r\n          <Trails value={trails} onChange={trailsChanged} />\r\n        </div>\r\n      )\r\n\r\n      // Gradient\r\n      case 1: return (\r\n        <div>\r\n          <ExSubTitle fontSize={13} width={91} subtitle='GRADIENT STOPS' />\r\n          <ColorSelection color={gradient[0]} selectColor={selectColor} onChange={v => updateGradientStops(v, 0)} />\r\n          <div style={{ height: 4 }} />\r\n          <ColorSelection color={gradient[1]} selectColor={selectColor} onChange={v => updateGradientStops(v, 1)} />\r\n        </div>\r\n      )\r\n\r\n      // Image\r\n      case 2: return (\r\n        <div>\r\n          {src ? <img className='upl-preview' src={src} alt=\"\" /> : <div />}\r\n          <div className='pp-con ppb-con' onClick={uploadImage}>\r\n            <div className='ppb-lbl'>Upload Image</div>\r\n            <div className='ppb-ri-con' style={{right: 4}}>\r\n              <BsCloudUpload className='ppb-ri center' />\r\n            </div>\r\n            <input type='file' ref={uploadRef} onChange={onSrcChange} />\r\n          </div>\r\n        </div>\r\n      )\r\n\r\n      // AgeBased\r\n      case 3: return (\r\n        <div>\r\n          <ExSubTitle fontSize={11} width={22}>Cells change color from left to right as they age</ExSubTitle>\r\n          <div className='pp-con'>\r\n            <canvas className='age-preview' ref={canvasRef} />\r\n          </div>\r\n          <div style={{ height: 12 }} />\r\n          <div className='pp-con ppb-con' onClick={onAgeConfigure}>\r\n            <div className='ppb-lbl'>Configure Age Based</div>\r\n            <div className='ppb-ri-con'>\r\n              <BsChevronRight className='ppb-ri center' />\r\n            </div>\r\n          </div>\r\n          <Trails value={trails} onChange={trailsChanged} />\r\n        </div>\r\n      )\r\n\r\n      default: return <div />\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (currentIndex === 3) {\r\n      const canvas = canvasRef.current\r\n      canvas.setAttribute('width', 304)\r\n      canvas.setAttribute('height', 26)\r\n\r\n      const ctx = canvas.getContext('2d')\r\n      const width = 304 / shades.shades.length\r\n\r\n      ctx.clearRect(0, 0, 304, 26)\r\n      for (let i = 0; i < shades.shades.length; i++) {\r\n        ctx.fillStyle = shades.shades[i]\r\n        ctx.fillRect(i * width, 0, width, 26)\r\n      }\r\n    }\r\n  }, [currentIndex, shades])\r\n\r\n  return (\r\n    <div className={modesClass}>\r\n      <div style={{ height: 12 }} />\r\n      {renderContent()}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst ColorSelection = ({ color, selectColor, onChange }) => {\r\n  const [hex, setHex] = useState('#000000')\r\n  const [hasFocus, setHasFocus] = useState(false)\r\n\r\n  const showColorGrid = () => {\r\n    selectColor(_hex => {\r\n      setHex(_hex)\r\n      onChange(_hex)\r\n    }, hex)\r\n  }\r\n\r\n  const updateHex = e => {\r\n    const text = e.target.value\r\n    if (text.indexOf('#') < 0) {\r\n      setHex(`#${text}`)\r\n    } else if (text.length > hex.length && text.length < 8) {\r\n      if (/^[0-9A-Fa-f]+$/.test(text.substring(1))) setHex(text)\r\n      if (text.length === 7) onChange(text)\r\n    } else if (text.length < hex.length && text.length > 0) {\r\n      setHex(text)\r\n    }\r\n  }\r\n\r\n  const editingComplete = () => {\r\n    let _hex = hex\r\n    const padding = 7 - _hex.length\r\n    for (let i = 0; i < padding; i++) {\r\n      _hex += \"0\"\r\n    }\r\n    setHex(_hex)\r\n    setHasFocus(false)\r\n    onChange(_hex)\r\n  }\r\n\r\n  useEffect(() => setHex(color), [color])\r\n\r\n  return (\r\n    <div className='pp-con' style={{borderColor: hasFocus ? '#ffffff' : '#a2a2a2'}}>\r\n      <div className='cs-cp' style={{backgroundColor: hex}} onClick={showColorGrid} />\r\n      <input \r\n        type='text' className='cs-tf tint-tf' value={hex.toUpperCase()} \r\n        onChange={updateHex} onFocus={() => setHasFocus(true)} onBlur={editingComplete}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nconst ModeDropdown = ({ ex, currentIndex, onExpand, onSelect }) => {\r\n  const baseClick = () => {\r\n    if (!ex) onExpand(true)\r\n  }\r\n\r\n  const baseClass = `pp-con md-con ${ex ? 'md-ex' : ''}`\r\n  const lblClass = `md-lbl ${ex ? 'md-lbl-ex' : ''}`\r\n\r\n  return (\r\n    <div className={baseClass} onClick={baseClick}>\r\n      <div className={lblClass}>{modes[currentIndex]}</div>\r\n        \r\n      <div className='mex-con'>\r\n        {modes.map((mode, i) => (\r\n          <div className='mex-item' key={i}\r\n            onClick={() => onSelect(i)}>{mode}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst Trails = ({ value, onChange }) => {\r\n  const [trackX, setTrackX] = useState(13)\r\n  const [isPressed, setIsPressed] = useState(false)\r\n  const [showInfo, setShowInfo] = useState(false)\r\n\r\n  const updateTrackX = trackX => {\r\n    setTrackX(trackX)\r\n    const rounded = Math.round(Math.lerp(0, 255, Math.inverseLerp(13, 289, trackX)))\r\n    setShowInfo(rounded > 200)\r\n    onChange(rounded)\r\n  }\r\n\r\n  const mouseMove = e => {\r\n    if (isPressed && e.button === 0) {\r\n      /* min/max should have been 14 and 300 but is -1 each instead (because topMargin: -1) */\r\n      updateTrackX(Math.clamp(e.clientX - offsetX, 13, 289))\r\n    }\r\n  }\r\n\r\n  const mouseDown = useCallback((e) => {\r\n    if (e.button === 0) {\r\n      setIsPressed(true)\r\n      document.addEventListener('mouseup', mouseUp, { once: true })\r\n    }\r\n  }, [])\r\n\r\n  const mouseClick = e => {\r\n    updateTrackX(Math.clamp(e.clientX - offsetX, 13, 289))\r\n  }\r\n\r\n  useEffect(() => {\r\n    updateTrackX(Math.lerp(13, 289, Math.inverseLerp(0, 255, value)))\r\n  }, [])\r\n\r\n  const mouseUp = () => setIsPressed(false)\r\n\r\n  const trackStyle = { width: Math.max(trackX - 14, 0) }\r\n  const thumbStyle = { transform: `translateX(${trackX - 14}px)` }\r\n\r\n  return (\r\n    <div>\r\n      <div style={{height: 12}} />\r\n      <ExSubTitle fontSize={13} width={124} subtitle='TRAILS' />\r\n\r\n      <div \r\n        className='pp-con pps-con' \r\n        onMouseMove={mouseMove}\r\n        onMouseDown={mouseDown}\r\n        onClick={mouseClick}\r\n      >\r\n        <div className='pps-trk' style={trackStyle} />\r\n          <div className='pps-th' style={thumbStyle}>\r\n        </div>\r\n      </div>\r\n\r\n      <div className='clr-info' style={{opacity: showInfo ? 1 : 0}}><i>Higher values will \r\n        cause the canvas to not clear when applying patterns or changing rules and palette. \r\n        Use </i><b>Clear</b><i> button in </i><b>PATTERNS</b><i> to force clear the grid.</i></div> : <div />\r\n    </div>\r\n  )\r\n}\r\n\r\nconst modes = [\"Mono\", \"Gradient\", \"Image\", \"Age Based\"]\r\n\r\nexport default PrefsPalette\r\n","/**\r\n * list = [{ isTint, value }]\r\n * value = hex if isTint else gradient-step\r\n * isTint needs to alternate between true/false\r\n */\r\n\r\nexport const generateShadesFromList = list => {\r\n  const colors = [], steps = []\r\n\r\n  let index = 0\r\n  while (index < list.length) {\r\n    const { isTint, value } = list[index]\r\n\r\n    if (isTint) {\r\n      colors.push(hex2rgb(value))\r\n    } else {\r\n      steps.push(value)\r\n    }\r\n    \r\n    index += 1\r\n  }\r\n\r\n  return generateGradient({ colors, steps })\r\n}\r\n\r\n/* colors = [{ r, g, b }] */\r\nexport const generateGradient = ({ colors, steps }) => {\r\n  const gradient = []\r\n\r\n  if (colors.length - steps.length !== 1) {\r\n    throw new Error('Length of colors must be one more than steps')\r\n  } else {\r\n    let index = 1\r\n    while (index < colors.length) {\r\n      const prev = colors[index - 1]\r\n      const next = colors[index]\r\n      const step = steps[index - 1] - 1\r\n\r\n      const dr = (next.r - prev.r) / step\r\n      const dg = (next.g - prev.g) / step\r\n      const db = (next.b - prev.b) / step\r\n\r\n      gradient.push(rgb2hex(prev))\r\n\r\n      for (let i = 1; i < step; i++) {\r\n        gradient.push(rgb2hex({ r: prev.r + dr * i, g: prev.g + dg * i, b: prev.b + db * i }))\r\n      }\r\n\r\n      gradient.push(rgb2hex(next))\r\n      index += 1\r\n    }\r\n  }\r\n\r\n  return gradient\r\n}\r\n\r\nexport const hex2rgb = (hex) => {\r\n  const bigint = parseInt(hex.substring(1), 16)\r\n  return {\r\n    r: (bigint >> 16) & 255,\r\n    g: (bigint >> 8) & 255,\r\n    b: bigint & 255\r\n  }\r\n}\r\n\r\nexport const rgb2hex = ({ r, g, b }) => {\r\n  return \"#\" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1, 7)\r\n}","import { VscChevronLeft, VscChevronRight, VscTrash } from 'react-icons/vsc'\r\nimport { IoColorPaletteOutline } from 'react-icons/io5'\r\nimport { useState, useRef, useEffect } from 'react'\r\nimport { ExSubTitle } from '../ex-comps'\r\nimport { generateShadesFromList, hex2rgb } from '../../../utils/color-utils'\r\n\r\nlet animActive = false, scrollListenerAttached = false\r\nlet lastApplied = { isLoop: false, list: [{ isTint: true, value: '#ffffff', outId: '' }] }\r\n\r\nconst ExPalette = ({ isCurrent, selectColor, onSelect }) => {\r\n  const [list, setList] = useState([\r\n    { isTint: true, value: '#ffffff', outId: '' }\r\n  ])\r\n\r\n  const [isLoop, setIsLoop] = useState(false)\r\n  const [scrollAtEnd, setScrollAtEnd] = useState(false)\r\n\r\n  const listRef = useRef(null)\r\n\r\n  const updateTint = ({ index, value }) => {\r\n    const updatedList = [...list]\r\n    updatedList[index]['value'] = value\r\n    setList(updatedList)\r\n  }\r\n\r\n  const updateSteps = ({ index, value }) => {\r\n    if (/^\\d*\\.?\\d*$/.test(value) && value.length < 5) {\r\n      const updatedList = [...list]\r\n      updatedList[index]['value'] = value === '' ? 0 : parseInt(value)\r\n      setList(updatedList)\r\n    }\r\n  }\r\n\r\n  const createGradient = (index) => {\r\n    const g1 = list[index - 1] ? list[index - 1].value : '#ffffff'\r\n    const g2 = list[index + 1] ? list[index + 1].value : '#ffffff'\r\n    return `linear-gradient(${g1}, ${g2})`\r\n  }\r\n\r\n  const scrollToEnd = _ => {\r\n    setTimeout(_ => {\r\n      listRef.current.scroll({ top: listRef.current.scrollHeight, behavior: 'smooth' })\r\n    }, 60)\r\n  }\r\n\r\n  const scrollListener = () => {\r\n    setScrollAtEnd(listRef.current.scrollTop < listRef.current.scrollHeight - listRef.current.clientHeight)\r\n  }\r\n\r\n  /* --- Footer Actions --- */\r\n\r\n  const clear = () => {\r\n    listRef.current.scrollTop = listRef.current.scrollHeight\r\n    setList([{ isTint: true, value: '#ffffff', outId: '' }])\r\n    setIsLoop(false)\r\n  }\r\n\r\n  const reset = () => {\r\n    listRef.current.scrollTop = listRef.current.scrollHeight\r\n    setIsLoop(lastApplied.isLoop)\r\n\r\n    /* \r\n     * --- Some Bizarre react bug (Or prolly me being ignorant of how react works) ---\r\n     * \r\n     * The following lines seem to set a reference of lastApplied.list to list instead of setting a copy of the lastApplied.list:\r\n     * setList(lastApplied.list) -> This seems obvious\r\n     * setList([...lastApplied.list]) -> Isnt this supposed to create a new array with elements of lastApplied.list?\r\n     * setList(lastApplied.list.slice()) -> Isnt this supposed to create a copy of lastApplied.list?\r\n     * setList(lastApplied.list.map(item => item)) -> Again isnt this supposed to be a completely new array?\r\n     * Seriously WTF is going on?\r\n     * - Could be cause Im not using useRef to store lastApplied. NEED TO TEST.\r\n     * \r\n     * Only the line below seems to create a copy. I could really use some explaination on this.\r\n     */\r\n    setList(lastApplied.list.map(({ isTint, value, outId }) => ({ isTint, value, outId })))\r\n  }\r\n\r\n  const addTint = () => {\r\n    if (!animActive) {\r\n      setList([...list, { isTint: true, value: '#ffffff', outId: '' }])\r\n      scrollToEnd()\r\n    }\r\n  }\r\n\r\n  const addGradient = () => {\r\n    if (!animActive) {\r\n      animActive = true\r\n\r\n      const _list = [...list, { isTint: false, value: 20, outId: '' }]\r\n      setList(_list)\r\n\r\n      setTimeout(_ => {\r\n        setList([..._list, { isTint: true, value: '#ffffff', outId: '' }])\r\n        scrollToEnd()\r\n        animActive = false\r\n      }, 60)\r\n    }\r\n  }\r\n\r\n  const addLoop = () => setIsLoop(!isLoop)\r\n\r\n  const deleteQueuedAtIndex = index => {\r\n    if (list.length > 1 && !animActive) {\r\n      const deleteIndices = [index]\r\n      if (index > 0 && !list[index - 1].isTint) {\r\n        deleteIndices.push(index - 1)\r\n      } else if (index == 0 && !list[index + 1].isTint) {\r\n        deleteIndices.push(index + 1)\r\n      }\r\n\r\n      const _list = [...list]\r\n      _list[deleteIndices[0]].outId = 'pc-out'\r\n      if (deleteIndices.length > 1) {\r\n        _list[deleteIndices[1]].outId = 'pc-out'\r\n      }\r\n      setList(_list)\r\n    }\r\n  }\r\n\r\n  const deleteAtIndex = () => {\r\n    setList(list.filter(({ outId }) => outId != 'pc-out'))\r\n  }\r\n\r\n  const apply = () => {\r\n    lastApplied = { isLoop, list }\r\n    onSelect({ isLoop, shades: generateShadesFromList(list)})\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (isCurrent) {\r\n      reset()\r\n    \r\n      if (!scrollListenerAttached) {\r\n        listRef.current.addEventListener('scroll', scrollListener)\r\n        scrollListenerAttached = true\r\n      }\r\n    }\r\n    return () => {\r\n      if (scrollListenerAttached && listRef.current) {\r\n        listRef.current.removeEventListener('scroll', scrollListener)\r\n        scrollListenerAttached = false\r\n      }\r\n    }\r\n  }, [isCurrent])\r\n\r\n  const isScrollable = list.length > 8\r\n\r\n  return (\r\n    <div className='ex-pg ex-pg2'>\r\n      <div className='palette-list' ref={listRef}>\r\n        {isLoop ? <LoopCell isStart={true} isScrollable={isScrollable} /> : <div />}\r\n\r\n        {list.map(({ isTint, outId, value }, index) => (\r\n          isTint ? \r\n          <TintCell \r\n            key={index}\r\n            color={value} outId={outId}\r\n            isScrollable={isScrollable}\r\n            selectColor={selectColor}\r\n            onChange={v => updateTint({ index, value: v })} \r\n            onDeleteQueue={_ => deleteQueuedAtIndex(index)}\r\n            onDeleteFinish={_ => deleteAtIndex(index)}\r\n          /> : \r\n          <StepCell \r\n            key={index}\r\n            steps={value} outId={outId}\r\n            isScrollable={isScrollable}\r\n            gradient={createGradient(index)} \r\n            onChange={value => updateSteps({ index, value })} \r\n          />\r\n        ))}\r\n\r\n        {isLoop ? <LoopCell isStart={false} isScrollable={isScrollable} /> : <div />}\r\n\r\n        {list.length > 1 ? <div />:\r\n        <div className='palette-info'><i>Color mode will be converted to Mono on </i><b>Apply</b>.<br/>\r\n        <i>To use Age Based color mode add at least one </i><b>Color</b> <i>or</i> <b>Gradient</b> <i>from the</i> <b>Add</b> <i>menu</i></div>}\r\n\r\n        <div style={{ height: isScrollable ? 65 : 0 }} />\r\n      </div>\r\n\r\n      <Footer \r\n        hasBg={isScrollable && scrollAtEnd}\r\n        isLoop={isLoop}\r\n        onClear={clear} onReset={reset} onApply={apply}\r\n        onAddGradient={addGradient} onAddTint={addTint} onAddLoop={addLoop}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nconst Footer = ({ \r\n  hasBg, isLoop,\r\n  onClear, onReset, onApply,\r\n  onAddTint, onAddGradient, onAddLoop \r\n}) => {\r\n  const [isAdd, setIsAdd] = useState(false)\r\n\r\n  const className = `palette-footer ${hasBg ? 'pf-bg' : ''}`\r\n  const loopName = `${isLoop ? '-' : '+'} Loop`\r\n\r\n  return (\r\n    <div className={className}>\r\n      <FooterButton name={isAdd ? '< Back' : '+ Add'} isControl={true} isIn={true} x={100} onClick={_ => setIsAdd(!isAdd)} />\r\n      <FooterButton name='Clear' isControl={true} isIn={!isAdd} x={1} y={22} onClick={onClear} />\r\n      <FooterButton name='Reset' isControl={true} isIn={!isAdd} x={199} y={21} onClick={onReset} />\r\n      <FooterButton name='Apply' isControl={true} isIn={!isAdd} x={100} y={37} onClick={onApply} />\r\n\r\n      {/* <FooterButton name='< Controls' isControl={false} isIn={isAdd} x={100} onClick={_ => setIsAdd(false)} /> */}\r\n      <FooterButton name='+ Color'    isControl={false} isIn={isAdd} x={1} y={22} onClick={onAddTint} />\r\n      <FooterButton name='+ Gradient' isControl={false} isIn={isAdd} x={199} y={21} onClick={onAddGradient} />\r\n      <FooterButton name={loopName}   isControl={false} isIn={isAdd} x={100} y={37} onClick={onAddLoop} />\r\n    </div>\r\n  )\r\n}\r\n\r\nconst FooterButton = ({ name, isControl, isIn, x, y, onClick }) => {\r\n  const [hovered, setHovered] = useState(false)\r\n  const [pressed, setPressed] = useState(false)\r\n\r\n  const fill = pressed ? '#fff' : '#00000000'\r\n  const stroke = hovered ? '#fff' : '#a2a2a2'\r\n  const textStyle = { color: pressed ? '#000' : stroke }\r\n\r\n  const id = isControl ? 1 : 2\r\n  const className = `fb-con fb-${id}-${isIn ? 'in' : 'out'}`\r\n\r\n  const mouseLeave = _ => {\r\n    setHovered(false)\r\n    setPressed(false)\r\n  }\r\n\r\n  return (\r\n    <div \r\n      className={className}\r\n      style={{left: x, top: y}}\r\n      onClick={onClick}\r\n      onMouseEnter={_ => setHovered(true)}\r\n      onMouseLeave={mouseLeave}\r\n      onMouseDown={_ => setPressed(true)}\r\n      onMouseUp={_ => setPressed(false)}\r\n    >\r\n      <svg className='fb-svg'>\r\n        <path d='M 0 13 L 10 0 L 94 0 L 104 13 L 94 26 L 10 26 Z' fill={fill} />\r\n        <path d='M 1 13 L 10 0 M 93 0 L 103 13 L 93 26 M 10 26 L 0 13' strokeWidth={1.5} stroke={stroke} fill='#00000000' />\r\n        <path d='M 10 0 L 94 0 M 93 26 L 10 26' strokeWidth={2.5} stroke={stroke} />\r\n      </svg>\r\n      <div className='fb-lbl center' style={textStyle}>{name}</div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst TintCell = ({ color, isScrollable, outId, selectColor, onChange, onDeleteQueue, onDeleteFinish }) => {\r\n  const [hex, setHex] = useState('#FFFFFF')\r\n\r\n  const getAccent = () => {\r\n    const { r, g, b } = hex2rgb(color)\r\n    const bright = (r * 299 + g * 587 + b * 114) / 1000\r\n    return bright < 140 ? '#ffffff' : '#000000'\r\n  }\r\n\r\n  const animEnded = event => {\r\n    if (event.animationName === 'pc-out-anim') {\r\n      onDeleteFinish()\r\n    }\r\n  }\r\n\r\n  const updateHex = e => {\r\n    const text = e.target.value\r\n    if (text.indexOf('#') < 0) {\r\n      setHex(`#${text}`)\r\n    } else if (text.length > hex.length && text.length < 8) {\r\n      if (/^[0-9A-Fa-f]+$/.test(text.substring(1))) setHex(text)\r\n      if (text.length === 7) onChange(text)\r\n    } else if (text.length < hex.length && text.length > 0) {\r\n      setHex(text)\r\n    }\r\n  }\r\n\r\n  const editingComplete = () => {\r\n    let _hex = hex\r\n    const padding = 7 - _hex.length\r\n    for (let i = 0; i < padding; i++) {\r\n      _hex += \"0\"\r\n    }\r\n    setHex(_hex)\r\n    onChange(_hex)\r\n  }\r\n\r\n  const showColorGrid = () => {\r\n    selectColor(_hex => {\r\n      onChange(_hex)\r\n    }, hex)\r\n  }\r\n\r\n  useEffect(() => setHex(color), [color])\r\n\r\n  const style = { backgroundColor: color }\r\n  const contentStyle = { color: getAccent() }\r\n  const className = `tint-con pc-${isScrollable ? 'scrl' : 'con'} ${outId}`\r\n\r\n  return (\r\n    <div className={className} style={style} onAnimationEnd={animEnded}>\r\n      <div className='tint-icon-con'>\r\n        <IoColorPaletteOutline className='tint-icon center' style={contentStyle} onClick={showColorGrid} />\r\n      </div>\r\n      <div className='tint-icon-con tint-trash-con' onClick={onDeleteQueue}>\r\n        <VscTrash className='tint-icon center' style={contentStyle} />\r\n      </div>\r\n\r\n      <input \r\n        className='palette-tf tint-tf' type='input' \r\n        value={hex.toUpperCase()} style={contentStyle} \r\n        onChange={updateHex} onBlur={editingComplete}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nconst StepCell = ({ steps, isScrollable, outId, gradient, onChange }) => {\r\n  const style = { borderImageSource: gradient }\r\n  \r\n  const stepper = (diff) => {\r\n    onChange(`${steps + diff}`)\r\n  }\r\n\r\n  const rightClick = (e, diff) => {\r\n    stepper(diff)\r\n    e.preventDefault()\r\n  }\r\n\r\n  const className = `step-con pc-${isScrollable ? 'scrl' : 'con'} ${outId}`\r\n\r\n  return (\r\n    <div className={className}>\r\n      <VscChevronLeft className='step-arrow' onClick={_ => stepper(-1)} onContextMenu={e => rightClick(e, -10)} />\r\n      <VscChevronRight className='step-arrow step-right' onClick={_ => stepper(1)} onContextMenu={e => rightClick(e, 10)} />\r\n\r\n      <input \r\n        className='palette-tf step-tf' type='input' \r\n        value={steps} style={style} \r\n        onChange={e => onChange(e.target.value)}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nconst LoopCell = ({ isStart, isScrollable }) => <ExSubTitle \r\n  subtitle={`LOOP ${isStart ? 'START' : 'END'}`} \r\n  width={isStart ? 118 : 122} isScrollable={isScrollable}\r\n/>\r\n\r\nexport default ExPalette","import { useState, useEffect, useCallback, useContext } from 'react'\r\n\r\nimport { NotificationContext } from '../../context/NotificationContext'\r\nimport { NotificationWithBody } from '../notifications/notification-templates'\r\nimport QuickAccess from '../quick-access/QuickAccess'\r\nimport MouseReceiver from '../receivers/MouseReceiver'\r\n\r\nimport './controls.css'\r\n\r\nlet qaEnabled = true, isTempPause = false\r\nlet hideTimeoutIndex, mouseMoveIndex\r\n\r\nconst Controls = ({\r\n  onIsPlayingChanged, onBrushDownChanged, onDraw, onErase, onPaint, onPreview,\r\n\r\n  onPreviewStart, onPreviewEnd, onFillSelect, onClear, onRuleSelect, onWrapChanged,\r\n  onBgSelect, onShadesSelect, onGradSelect, onImageSelect, onTrailsChanged,\r\n\r\n  onBrushChanged, onSizeChanged, onSpeedChanged\r\n}) => {\r\n  const { showNotification } = useContext(NotificationContext)\r\n\r\n  const [qaState, setQaState] = useState({\r\n    prev: 'out', next: 'in', hide: false, exp: false, slide: false, min: false\r\n  })\r\n\r\n  const [isPlaying, setIsPlaying] = useState(true)\r\n  const [isDrawing, setIsDrawing] = useState(false)\r\n  const [isPainting, setIsPainting] = useState(false)\r\n\r\n  const updateQaHidden = (qaHidden) => {\r\n    const inState = qaState.min ? 'min' : 'in'\r\n    if (qaHidden) {\r\n      setQaState({ ...qaState, prev: inState, next: 'out', hide: true })\r\n    } else {\r\n      setQaState({ ...qaState, prev: 'out', next: inState, hide: false })\r\n    }\r\n  }\r\n\r\n  const updateQaExpanded = (qaExpanded) => {\r\n    if (qaExpanded) {\r\n      setQaState({ ...qaState, prev: 'in', next: 'ex', exp: true })\r\n    } else {\r\n      setQaState({ ...qaState, prev: 'ex', next: 'in', exp: false })\r\n    }\r\n  }\r\n\r\n  const updateQaSlider = (qaSlider) => {\r\n    if (qaSlider) {\r\n      if (qaState.exp) {\r\n        setQaState({ ...qaState, prev: 'ex', next: 'sl', exp: false, slide: true })\r\n      } else {\r\n        setQaState({ ...qaState, prev: 'in', next: 'sl', slide: true })\r\n      }\r\n    } else {\r\n      setQaState({ ...qaState, prev: 'sl', next: 'in', slide: false })\r\n    }\r\n  }\r\n\r\n  const updateQaMinimised = useCallback((qaMinimised) => {\r\n    if (qaMinimised) {\r\n      const inState = qaState.exp ? 'ex' : 'in'\r\n      setQaState({ ...qaState, prev: inState, next: 'min', min: true, exp: false })\r\n    } else {\r\n      const outState = isPainting ? 'ex' : 'in'\r\n      setQaState({ ...qaState, prev: 'min', next: outState, min: false, exp: isPainting })\r\n\r\n      // End preview if Painting\r\n      if (isPainting) {\r\n        setIsPainting(false)\r\n        onPreviewEnd()\r\n      }\r\n    }\r\n  }, [isPainting, onPreviewEnd, qaState])\r\n\r\n  const toggleIsPlaying = useCallback(() => {\r\n    const _isPlaying = !isPlaying\r\n    setIsPlaying(_isPlaying)\r\n    onIsPlayingChanged(_isPlaying)\r\n  }, [isPlaying, onIsPlayingChanged]);\r\n\r\n  const toggleIsDrawing = () => {\r\n    const _isDrawing = !isDrawing\r\n    if (_isDrawing) {\r\n      showNotification(\r\n        <NotificationWithBody\r\n          title='Brush Enabled'\r\n          body='Press left mouse button to draw and right mouse button to erase on the grid.'\r\n        />\r\n      )\r\n    } else {\r\n      showNotification(\"Brush Disabled\")\r\n    }\r\n    setIsDrawing(_isDrawing)\r\n  }\r\n\r\n  const mouseMove = () => {\r\n    /* \r\n     * Maybe do it a different way. This just seems like cheating \r\n     * qaState.min is always true when isPainting is true so no need to add it as a condition\r\n     */\r\n    if (!(qaState.exp || qaState.slide || isPainting)) {\r\n      if (qaState.hide) {\r\n        if (qaEnabled) {\r\n          updateQaHidden(false)\r\n          hideTimeoutIndex = setTimeout(() => updateQaHidden(true), 5000)\r\n        }\r\n      } else {\r\n        if (mouseMoveIndex % 20 === 0) {\r\n          clearTimeout(hideTimeoutIndex)\r\n          hideTimeoutIndex = setTimeout(() => updateQaHidden(true), 5000)\r\n        }\r\n        mouseMoveIndex += 1\r\n      }\r\n    }\r\n  }\r\n\r\n  const qaHoverChanged = (hovered) => {\r\n    if (hovered) clearTimeout(hideTimeoutIndex)\r\n    else if (!(qaState.exp || qaState.slide || isPainting)) {\r\n      if (qaEnabled) {\r\n        hideTimeoutIndex = setTimeout(() => updateQaHidden(true), 5000)\r\n      }\r\n    }\r\n  }\r\n\r\n  const hideQa = () => {\r\n    updateQaHidden(true)\r\n    qaEnabled = false\r\n    setTimeout(() => qaEnabled = true, 1000)\r\n  }\r\n\r\n  const tempPause = (pause) => {\r\n    if (isPlaying) {\r\n      toggleIsPlaying()\r\n      isTempPause = true\r\n    } else {\r\n      if (isTempPause) {\r\n        toggleIsPlaying()\r\n        isTempPause = false\r\n      }\r\n    }\r\n  }\r\n\r\n  const shapeSelected = shape => {\r\n    setIsPainting(true)\r\n    updateQaMinimised(true)\r\n    onPreviewStart(shape)\r\n    showNotification(\r\n      (<span>\r\n        Left click to place pattern on grid. For best results clear the grid (shortcut: C)<br/>\r\n        Click on the small circle at the bottom or press Esc to go back to pattern list\r\n      </span>), 10\r\n    )\r\n  }\r\n\r\n  useEffect(() => {\r\n    mouseMoveIndex = 0\r\n\r\n    const keyListener = e => {\r\n      console.log(`keydown with code ${e.keyCode}`)\r\n      switch (e.keyCode) {\r\n        case 27:\r\n          if (qaState.min) {\r\n            updateQaMinimised()\r\n          }\r\n          break\r\n        case 32: toggleIsPlaying(); break\r\n        case 67:\r\n          onClear()\r\n          showNotification('Grid cleared')\r\n          break\r\n        case 70: document.body.requestFullscreen(); break\r\n        case 73:\r\n          onFillSelect('invert')\r\n          showNotification('Grid inverted')\r\n          break\r\n        case 80: toggleIsDrawing(); break\r\n        default: break\r\n      }\r\n    }\r\n\r\n    document.body.addEventListener(\"keydown\", keyListener)\r\n\r\n    return () => {\r\n      document.body.removeEventListener(\"keydown\", keyListener)\r\n    }\r\n  }, [onClear, qaState.min, showNotification, toggleIsPlaying, toggleIsDrawing, updateQaMinimised])\r\n\r\n  return (\r\n    <div className='controls-base'>\r\n      <MouseReceiver\r\n        isDrawing={isDrawing}\r\n        isPainting={isPainting}\r\n        onBrushDown={() => onBrushDownChanged(true)}\r\n        onBrushUp={() => onBrushDownChanged(false)}\r\n        onDraw={onDraw}\r\n        onErase={onErase}\r\n        onPaint={onPaint}\r\n        onPreview={onPreview}\r\n        onMouseMove={mouseMove}\r\n      />\r\n\r\n      <QuickAccess\r\n        animId={`${qaState.prev}2${qaState.next}`}\r\n        qaHidden={qaState.hide}\r\n        qaExpanded={qaState.exp}\r\n        qaMinimised={qaState.min}\r\n        qaSlider={qaState.slide}\r\n        isPlaying={isPlaying}\r\n        isDrawing={isDrawing}\r\n        onQaHoverChanged={qaHoverChanged}\r\n        onQaExpanded={updateQaExpanded}\r\n        onQaMinimised={updateQaMinimised}\r\n        onQaSlider={updateQaSlider}\r\n        onPlayClicked={toggleIsPlaying}\r\n        onDrawClicked={toggleIsDrawing}\r\n        onQaClose={hideQa}\r\n        onTempPause={tempPause}\r\n        onShapeSelect={shapeSelected}\r\n        onFillSelect={onFillSelect}\r\n        onClear={onClear}\r\n        onRuleSelect={onRuleSelect}\r\n        onWrapChanged={onWrapChanged}\r\n        onBgSelect={onBgSelect}\r\n        onShadesSelect={onShadesSelect}\r\n        onGradSelect={onGradSelect}\r\n        onImageSelect={onImageSelect}\r\n        onTrailsChanged={onTrailsChanged}\r\n        onBrushChanged={onBrushChanged}\r\n        onSizeChanged={onSizeChanged}\r\n        onSpeedChanged={onSpeedChanged}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Controls","import React, { useEffect, useState } from 'react'\r\nimport { GiResize } from \"react-icons/gi\"\r\nimport './Resizer.css'\r\n\r\nconst COUNTDOWN_MAX = 1\r\nlet timer\r\n\r\nconst Resizer = ({ isResizing, onResizing }) => {\r\n  const [countdown, setCountdown] = useState(COUNTDOWN_MAX)\r\n\r\n  useEffect(() => {\r\n    const resizeHandler = () => {\r\n      onResizing(true)\r\n      setCountdown(COUNTDOWN_MAX)\r\n\r\n      if (timer) {\r\n        clearInterval(timer)\r\n      }\r\n\r\n      timer = setInterval(() => {\r\n        setCountdown(p => p - 1)\r\n      }, 1000)\r\n    }\r\n\r\n    window.addEventListener(\"resize\", resizeHandler)\r\n    return () => window.removeEventListener(\"resize\", resizeHandler)\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (countdown === 0) {\r\n      clearInterval(timer)\r\n      timer = null\r\n      onResizing(false)\r\n    }\r\n  }, [countdown])\r\n\r\n  if (isResizing) {\r\n    return (\r\n      <div className='resizer-base fill'>\r\n        <GiResize className='resizer-icon center' />\r\n      </div>\r\n    )\r\n  } else {\r\n    return null\r\n  }\r\n}\r\n\r\nexport default Resizer\r\n","import React, { useContext, useEffect, useState } from 'react'\r\nimport { TiChevronRight } from 'react-icons/ti'\r\n\r\nimport { DataContext } from '../../context/DataContext'\r\nimport { NotificationContext } from '../../context/NotificationContext'\r\n\r\nlet fi = 0, allArgValues = [], isSliding\r\n\r\nconst ShapeMenu = ({ modeIndex, dir, trig, onFillSelect, onSliding }) => {\r\n  const { fillers } = useContext(DataContext)\r\n  const { hideNotification } = useContext(NotificationContext)\r\n\r\n  const [fill, setFill] = useState(fillers[fi])\r\n  const [argValues, setArgValues] = useState([])\r\n  const [argIndex, setArgIndex] = useState(0)\r\n  const [stateIndex, setStateIndex] = useState(0)\r\n\r\n  const [showLabel, setShowLabel] = useState(false)\r\n  const [showSliders, setShowSliders] = useState(false)\r\n  const [slidersOutPhase, setSlidersOutPhase] = useState(false)\r\n\r\n  const applyFill = () => {\r\n    onFillSelect(\r\n      fillers[fi].fill,\r\n      allArgValues[fi]\r\n    )\r\n    setFill(fillers[fi])\r\n    setArgValues(allArgValues[fi])\r\n  }\r\n\r\n  const slideArg = (byVal) => {\r\n    const val = argValues[argIndex]\r\n    const newVal = Math.clamp(\r\n      val + byVal,\r\n      fill.config[argIndex].range[0],\r\n      fill.config[argIndex].range[1]\r\n    )\r\n    if (newVal !== val) {\r\n      setArgValues(argValues.map((v, i) => i === argIndex ? newVal : v))\r\n      allArgValues[fi][argIndex] = newVal\r\n      onFillSelect(fill.fill, allArgValues[fi])\r\n    }\r\n\r\n    if (!isSliding) {\r\n      isSliding = true\r\n      onSliding(true)\r\n    }\r\n  }\r\n\r\n  const animEnded = e => {\r\n    if (e.animationName === 'fade-out-anim') {\r\n      setShowSliders(false)\r\n      setSlidersOutPhase(false)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    const upTrigger = () => {\r\n      if (stateIndex < 2) {\r\n        if (fi > 0) {\r\n          fi -= 1\r\n        } else {\r\n          fi = fillers.length - 1\r\n        }\r\n        applyFill()\r\n        resetStateIndex()\r\n        if (!showLabel) {\r\n          setShowLabel(true)\r\n        }\r\n        hideNotification()\r\n      } else {\r\n        if (argIndex > 0) {\r\n          setArgIndex(pv => pv - 1)\r\n        }\r\n      }\r\n    }\r\n\r\n    const rightTrigger = () => {\r\n      if (stateIndex === 0) {\r\n        setStateIndex(1)\r\n        if (!showLabel) {\r\n          setShowLabel(true)\r\n        }\r\n        hideNotification()\r\n      } else if (stateIndex === 2) {\r\n        slideArg(1)\r\n      }\r\n    }\r\n\r\n    const downTrigger = () => {\r\n      if (stateIndex < 2) {\r\n        if (fi < fillers.length - 1) {\r\n          fi += 1\r\n        } else {\r\n          fi = 0\r\n        }\r\n        applyFill()\r\n        resetStateIndex()\r\n        if (!showLabel) {\r\n          setShowLabel(true)\r\n        }\r\n        hideNotification()\r\n      } else {\r\n        if (argIndex < argValues.length - 1) {\r\n          setArgIndex(pv => pv + 1)\r\n        }\r\n      }\r\n    }\r\n\r\n    const leftTrigger = () => {\r\n      if (stateIndex === 1) {\r\n        setStateIndex(0)\r\n      } else if (stateIndex === 2) {\r\n        slideArg(-1)\r\n      }\r\n    }\r\n\r\n    const tapTrigger = () => {\r\n      if (stateIndex === 0) {\r\n        applyFill()\r\n      } else if (stateIndex === 2) {\r\n        setStateIndex(0)\r\n        setShowLabel(false)\r\n        setSlidersOutPhase(true)\r\n      }\r\n    }\r\n\r\n    const releaseTrigger = () => {\r\n      if (stateIndex === 0) {\r\n        if (showLabel) {\r\n          setShowLabel(false)\r\n        }\r\n      } else if (stateIndex === 1) {\r\n        setStateIndex(2)\r\n        setShowSliders(true)\r\n      } else {\r\n        if (isSliding) {\r\n          isSliding = false\r\n          onSliding(false)\r\n        }\r\n      }\r\n    }\r\n\r\n    const resetStateIndex = () => {\r\n      if (stateIndex === 1) {\r\n        setStateIndex(0)\r\n      }\r\n    }\r\n\r\n    switch (dir) {\r\n      case 0: upTrigger(); break\r\n      case 1: rightTrigger(); break\r\n      case 2: downTrigger(); break\r\n      case 3: leftTrigger(); break\r\n      case 4: tapTrigger(); break\r\n      case 5: releaseTrigger(); break\r\n      default: break\r\n    }\r\n  }, [trig])\r\n\r\n  useEffect(() => {\r\n    allArgValues = []\r\n    fillers.forEach(({ config }) => {\r\n      const args = []\r\n      config.forEach(({ init }) => {\r\n        args.push(init)\r\n      })\r\n      allArgValues.push(args)\r\n    })\r\n    setArgValues(allArgValues[0])\r\n  }, [fillers])\r\n\r\n  if (modeIndex !== 2) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div className='sm-root'>\r\n      <div className={`sm-label-con ${showLabel && 'sm-lc-show'} ${showSliders && 'sm-lc-ex'}`}>\r\n        <div className='sm-arrow' />\r\n        <div className='sm-label'>\r\n          {fill.name}\r\n        </div>\r\n        <TiChevronRight \r\n          className={`sm-arrow ${stateIndex === 1 && 'sm-arrow-vis'}`} \r\n        />\r\n      </div>\r\n      {showSliders && (\r\n        <div \r\n          className={`sm-sliders-con ${slidersOutPhase && 'fade-out'}`}\r\n          onAnimationEnd={animEnded}\r\n        >\r\n          <div className='sm-ss-bg' />\r\n\r\n          <div className='sm-sliders'>\r\n            {fill.config.map(({ name }, i) => (\r\n              <div \r\n                key={i}\r\n                style={{ animationDelay: `${i * 40}ms` }}\r\n                className={`sm-slider-con ${i === argIndex && 'sm-sc-highlight'}`}\r\n              >\r\n                <div>{name} ({argValues[i]})</div>\r\n                <div className='sm-slider'>\r\n                  <div \r\n                    className='sm-s-track'\r\n                    style={{\r\n                      width: `${Math.inverseLerp(\r\n                        fill.config[i].range[0], \r\n                        fill.config[i].range[1], \r\n                        argValues[i]) * 100}%`\r\n                    }} \r\n                  />\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ShapeMenu","import { useState, useRef, useEffect } from 'react'\r\nimport { ExCon, ExHexButton } from '../ex-comps'\r\n\r\nimport PrefsPalette from './PrefsPalette'\r\nimport AgePalette from './AgePalette.js'\r\nimport COLOR_GRID from '../../../static/color-grid'\r\n\r\nimport './palette.css'\r\n\r\nconst ExPalette = ({ \r\n  isCurrent, pindex, qaExpanded, onBgSelect, onSelect, \r\n  onGradSelect, onImageSelect, onTrailsChanged, onPindexChanged \r\n}) => {\r\n  const [shades, setShades] = useState({ isLoop: false, shades: ['#ffffff'] })\r\n  const [cgVisible, setCgVisible] = useState(false)\r\n  const [cgCurrentHex, setCgCurrentHex] = useState('#fff')\r\n\r\n  const onColorSelectedRef = useRef(null)\r\n  \r\n  const monoSelect = mono => onSelect({ isLoop: false, shades: [mono] })\r\n  const ageSelect = shades => { setShades(shades); onSelect(shades) }\r\n\r\n  const selectColor = (onSelect, current = '#000') => {\r\n    setCgVisible(true)\r\n    setCgCurrentHex(current)\r\n    onColorSelectedRef.current = onSelect\r\n  }\r\n\r\n  const onColorSelected = hex => {\r\n    setCgVisible(false)\r\n    onColorSelectedRef.current(hex)\r\n  }\r\n\r\n  const onCustomSelected = hex => {\r\n    onColorSelectedRef.current(hex)\r\n  }\r\n\r\n  const pconStyle = {\r\n    transform: `translateX(${pindex * -324}px)`\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!isCurrent || !qaExpanded) {\r\n      setCgVisible(false)\r\n    }\r\n  }, [isCurrent, qaExpanded])\r\n\r\n  return (\r\n    <ExCon title='Palette' isCurrent={isCurrent}>\r\n      <div className='ex-pcon' style={pconStyle}>\r\n        <PrefsPalette \r\n          shades={shades}\r\n          selectColor={selectColor}\r\n          onBackgroundSelect={onBgSelect} \r\n          onMonoSelect={monoSelect}\r\n          onGradientSelect={onGradSelect}\r\n          onImageSelect={onImageSelect}\r\n          onTrailsChanged={onTrailsChanged}\r\n          onAgeConfigure={() => onPindexChanged(1)} \r\n        />\r\n\r\n        <AgePalette \r\n          isCurrent={isCurrent} \r\n          selectColor={selectColor}\r\n          onSelect={ageSelect} \r\n        />\r\n      </div>\r\n\r\n      <ColorGrid \r\n        cgVisible={cgVisible} \r\n        currentHex={cgCurrentHex}\r\n        onSelect={onColorSelected}\r\n        onCustom={onCustomSelected}\r\n        onCancel={() => setCgVisible(false)} \r\n      />\r\n    </ExCon>\r\n  )\r\n}\r\n\r\nconst ColorGrid = ({ cgVisible, currentHex, onSelect, onCustom, onCancel }) => {\r\n  const [isVisible, setIsVisible] = useState(false)\r\n  const [isCustomChanged, setIsCustomChanged] = useState(false)\r\n  const inputRef = useRef(null)\r\n\r\n  const animEnded = (e, i) => {\r\n    if (i === COLOR_GRID.length - 1 && e.animationName === 'cgc-out-anim') {\r\n      setIsVisible(false)\r\n    }\r\n  }\r\n\r\n  const customChange = e => {\r\n    if (!isCustomChanged) {\r\n      setIsCustomChanged(true)\r\n    }\r\n    onCustom(e.target.value)\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (cgVisible) {\r\n      setIsVisible(true)\r\n      setIsCustomChanged(false)\r\n    }\r\n  }, [cgVisible])\r\n\r\n  return (\r\n    <>\r\n      {isVisible && (\r\n        <div className='color-grid'>\r\n          <div className={`cg-bg ${!cgVisible && 'cg-bg-out'}`}>\r\n            <div className='cg-footer'>\r\n              <ExHexButton name={isCustomChanged ? 'Apply' : 'Cancel'} x={13} y={4} onClick={onCancel} />\r\n              <ExHexButton name='Custom' x={171} y={4} onClick={() => inputRef.current.click()} />\r\n              <input \r\n                className='cg-dummy-input' \r\n                type='color' \r\n                value={currentHex}\r\n                ref={inputRef}\r\n                onChange={customChange} \r\n              />\r\n            </div>\r\n          </div>\r\n          <div className='cg-container'>\r\n            {COLOR_GRID.map((hex, i) => (\r\n              <div \r\n                key={hex}\r\n                className={`cg-cell ${!cgVisible && 'cg-cell-out'}`} \r\n                style={{ background: hex }} \r\n                onAnimationEnd={e => animEnded(e, i)}\r\n                onClick={() => onSelect(hex)}\r\n              />\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ExPalette\r\n","import { BsChevronLeft } from 'react-icons/bs'\r\n\r\nimport { ExIndicator } from './ex-comps'\r\nimport { useState, useEffect, useContext } from 'react'\r\nimport { \r\n  Play, Draw, Speed, Shapes, Rules, Colors, Close,\r\n  BrushIcon, GridIcon, SpeedIcon \r\n} from './qa-buttons'\r\n\r\nimport QaTooltip from './QaTooltip'\r\nimport QaSlider from './QaSlider'\r\nimport ExRules from './ExRules'\r\nimport ExShapes from './ExShapes'\r\nimport ExPalette from './palette/ExPalette'\r\n\r\nimport './quick-access.css'\r\nimport { NotificationContext } from '../../context/NotificationContext'\r\n\r\nlet sliderValue = 0\r\n\r\nconst QuickAccess = ({ \r\n  animId, qaHidden, qaExpanded, qaMinimised, \r\n  qaSlider, isPlaying, isDrawing, \r\n\r\n  onQaHoverChanged, onQaExpanded, onQaMinimised, onQaSlider, \r\n  onPlayClicked, onDrawClicked, onQaClose, onTempPause,\r\n\r\n  onShapeSelect, onFillSelect, onClear, onRuleSelect, onWrapChanged, onBgSelect, onShadesSelect, \r\n  onGradSelect, onImageSelect, onTrailsChanged, onBrushChanged, onSizeChanged, onSpeedChanged, \r\n}) => {\r\n  const { showNotification } = useContext(NotificationContext)\r\n\r\n  const [qaIndex, setQaIndex] = useState(0)\r\n  const [slideId, setSlideId] = useState('na')\r\n  const [tipIndex, setTipIndex] = useState(0)\r\n  const [tipVis, setTipVis] = useState(false)\r\n  const [backVis, setBackVis] = useState(false)\r\n  const [exPindices, setExPindices] = useState([0, 0, 0, 0, 0, 0])\r\n  const [, setPhantomUpdateIndex] = useState(0)\r\n\r\n  const qaExAction = (index, pindex = 0) => {\r\n    if (!qaExpanded) {\r\n      onQaExpanded(true)\r\n    } else {\r\n      if (qaIndex === index && exPindices[index] === pindex) {\r\n        onQaExpanded(false)\r\n        return\r\n      }\r\n    }\r\n\r\n    setExPindices(exPindices.map((item, i) => i === index ? pindex : item))\r\n    if (backVis) setBackVis(false)\r\n    setQaIndex(index)\r\n  }\r\n\r\n  const exChangePage = (index, pindex, enableBack = false) => {\r\n    setExPindices(exPindices.map((item, i) => i === index ? pindex : item))\r\n    setBackVis(enableBack)\r\n  }\r\n\r\n  const closeAction = () => {\r\n    if (qaExpanded) onQaExpanded(false)\r\n    else onQaClose()\r\n  }\r\n\r\n  const minimise = () => onQaMinimised(true)\r\n\r\n  const maximise = () => {\r\n    if (qaMinimised) onQaMinimised(false)\r\n  }\r\n\r\n  const showSlider = (id) => {\r\n    setSlideId(id)\r\n    onQaSlider(true)\r\n  }\r\n\r\n  const dismissSlider = () => {\r\n    onQaSlider(false)\r\n    if (slideId === 'grid') {\r\n      onSizeChanged(sliderValue)\r\n    }\r\n  }\r\n\r\n  const sliderValueChanged = (value) => {\r\n    sdat[slideId].value = value\r\n    sliderValue = value\r\n    \r\n    switch (slideId) {\r\n      case 'speed': onSpeedChanged(value); break\r\n      case 'brush': onBrushChanged(value); break\r\n      default: break\r\n    }\r\n  }\r\n\r\n  const hoverChangedAtIndex = (hovered, index) => {\r\n    setTipVis(hovered)\r\n    if (hovered) setTipIndex(index)\r\n  }\r\n\r\n  const phantomUpdate = _ => {\r\n    setPhantomUpdateIndex(ps => ps + 1)\r\n  }\r\n\r\n  useEffect(() => {\r\n    const keyListener = e => {\r\n      if (e.keyCode === 37 || e.keyCode === 39) {\r\n        let speed = sdat['speed'].value\r\n        const [speedLower, speedUpper] = sdat['speed'].range\r\n        if (e.keyCode === 37 && speed > speedLower) {\r\n          speed -= 1\r\n        } else if (e.keyCode === 39 && speed < speedUpper) {\r\n          speed += 1\r\n        }\r\n        sdat['speed'].value = speed\r\n        onSpeedChanged(speed)\r\n        showNotification(`Sim Speed ${speed}`)\r\n\r\n        if (slideId === \"speed\") {\r\n          phantomUpdate()\r\n        }\r\n      }\r\n    }\r\n\r\n    document.body.addEventListener(\"keydown\", keyListener)\r\n\r\n    return () => {\r\n      document.body.removeEventListener(\"keydown\", keyListener) \r\n    }\r\n  }, [onSpeedChanged, slideId])\r\n\r\n  const animdelays = animdelaysJson[animId]\r\n  const unhide = !qaHidden && !qaSlider && !qaMinimised\r\n  const closeAnimDuration = animId === 'sl2in' || animId === 'in2sl' || animId === 'ex2sl' ? 0 : 240\r\n\r\n  return (\r\n    <div className='qa-root'>\r\n      <div \r\n        className={`base base-${animId}`}\r\n        onClick={maximise}\r\n        onMouseEnter={() => onQaHoverChanged(true)}\r\n        onMouseLeave={() => onQaHoverChanged(false)}\r\n      >\r\n        <div className={`ex-base ex-base-${animId}`}>\r\n          <ExIndicator selectedIndex={qaIndex} />\r\n\r\n          <ExShapes \r\n            isCurrent={qaIndex === 2} \r\n            onShapeSelect={onShapeSelect} \r\n            onFillSelect={onFillSelect}\r\n            onClear={onClear}\r\n            onSliding={onTempPause} \r\n          />\r\n\r\n          <ExRules \r\n            isCurrent={qaIndex === 3} \r\n            pindex={exPindices[3]}\r\n            onSelect={onRuleSelect} \r\n            onWrapChanged={onWrapChanged}\r\n            onPindexChanged={pi => exChangePage(3, 1, true)}\r\n          />\r\n\r\n          <ExPalette \r\n            isCurrent={qaIndex === 4} \r\n            pindex={exPindices[4]}\r\n            qaExpanded={qaExpanded}\r\n            onBgSelect={onBgSelect}\r\n            onSelect={onShadesSelect} \r\n            onGradSelect={onGradSelect}\r\n            onImageSelect={onImageSelect}\r\n            onTrailsChanged={onTrailsChanged}\r\n            onPindexChanged={pi => exChangePage(4, 1, true)}\r\n          />\r\n\r\n          <Back vis={backVis} onClick={() => exChangePage(qaIndex, 0)} />\r\n        </div>\r\n\r\n        <div className='con'>\r\n          <QaSlider \r\n            unhide={qaSlider} \r\n            icon={sdat[slideId].icon} \r\n            value={sdat[slideId].value}\r\n            range={sdat[slideId].range}\r\n            onChange={sliderValueChanged}\r\n            onDismiss={dismissSlider} \r\n          />\r\n\r\n          <div className='qa-padding' />\r\n\r\n          <Play \r\n            isPlaying={isPlaying} unhide={unhide} animDelay={animdelays[0]} \r\n            onClick={onPlayClicked} \r\n            onHoverChanged={h => hoverChangedAtIndex(h, 0)}\r\n          />\r\n\r\n          <Draw \r\n            isDrawing={isDrawing} unhide={unhide} animDelay={animdelays[1]} \r\n            onClick={onDrawClicked} onRightClick={_ => showSlider('brush')} \r\n            onHoverChanged={h => hoverChangedAtIndex(h, 1)}\r\n          />\r\n          \r\n          <Shapes \r\n            unhide={unhide} animDelay={animdelays[2]} \r\n            onClick={_ => qaExAction(2)} onRightClick={_ => showSlider('grid')} \r\n            onHoverChanged={h => hoverChangedAtIndex(h, 2)}\r\n          />\r\n\r\n          <Rules \r\n            unhide={unhide} animDelay={animdelays[3]} \r\n            onClick={_ => qaExAction(3, 0)} onRightClick={_ => qaExAction(3, 1)} \r\n            onHoverChanged={h => hoverChangedAtIndex(h, 3)}\r\n          />\r\n\r\n          <Colors \r\n            unhide={unhide} animDelay={animdelays[4]} \r\n            onClick={_ => qaExAction(4)} onRightClick={_ => qaExAction(4, 1)}\r\n            onHoverChanged={h => hoverChangedAtIndex(h, 4)}\r\n          />\r\n\r\n          <Speed \r\n            unhide={unhide} animDelay={animdelays[5]} \r\n            onClick={_ => showSlider('speed')} \r\n            onHoverChanged={h => hoverChangedAtIndex(h, 5)}\r\n          />\r\n\r\n          <Close \r\n            unhide={unhide} animDelay={animdelays[6]} animDuration={closeAnimDuration}\r\n            onClick={closeAction} onRightClick={minimise}\r\n            onHoverChanged={h => hoverChangedAtIndex(h, 6)}\r\n          />\r\n\r\n          <div className='qa-padding' />\r\n        </div>\r\n      </div>\r\n\r\n      <QaTooltip vis={tipVis} index={tipIndex} />\r\n    </div>\r\n  )\r\n}\r\n\r\nconst Back = ({ vis, onClick }) => {\r\n  return (\r\n    <div \r\n      className={`ex-back ${vis ? 'ex-back-vis' : ''}`}\r\n      onClick={onClick}\r\n    >\r\n      <BsChevronLeft className='ex-back-ico center' />\r\n      {/* <div className='ex-back-lbl center'>{'<'}</div> */}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst animdelaysJson = {\r\n  'out2in': [280, 320, 360, 400, 440, 480, 520],\r\n  'in2out': [0, 0, 0, 0, 0, 0, 0],\r\n  'min2out': [0, 0, 0, 0, 0, 0, 0],\r\n  'out2min': [0, 0, 0, 0, 0, 0, 0],\r\n  'in2min': [0, 0, 0, 0, 0, 0, 0],\r\n  'min2in': [280, 320, 360, 400, 440, 480, 520],\r\n  'in2ex': [0, 0, 0, 0, 0, 0, 0],\r\n  'ex2in': [0, 0, 0, 0, 0, 0, 0],\r\n  'ex2sl': [0, 0, 0, 0, 0, 0, 0],\r\n  'ex2min': [0, 0, 0, 0, 0, 0, 0],\r\n  'min2ex': [280, 320, 360, 400, 440, 480, 520],\r\n  'sl2in': [240, 200, 160, 120, 80, 40, 240],\r\n  'in2sl': [0, 0, 0, 0, 0, 0, 0]\r\n}\r\n\r\nconst sdat = {\r\n  na: { value: -1, range: [0, 1], icon: <div /> },\r\n  brush: { value: 25, range: [1, 100], icon: <BrushIcon /> },\r\n  grid: { value: 5, range: [1, 50], icon: <GridIcon /> },\r\n  speed: { value: 97, range: [1, 100], icon: <SpeedIcon /> }\r\n}\r\n\r\nexport default QuickAccess\r\n","const MouseReceiver = ({ \r\n  isDrawing, isPainting, \r\n  onBrushDown, onBrushUp,\r\n  onDraw, onErase, onPaint, onMouseMove, onPreview \r\n}) => {\r\n\r\n  /* Hooked onPreview to drawHook */\r\n  \r\n  const draw = (e) => onDraw(e.clientX, e.clientY)\r\n  const erase = (e) => onErase(e.clientX, e.clientY)\r\n  const preview = e => onPreview(e.clientX, e.clientY)\r\n  \r\n  const drawStart = (e) => {\r\n    if (e.button === 0) drawHook = draw\r\n    else if (e.button === 2) drawHook = erase\r\n    onBrushDown()\r\n  }\r\n  \r\n  const drawEnd = (e) => {\r\n    drawHook(e)\r\n    drawHook = () => {}\r\n    onBrushUp()\r\n  }\r\n  \r\n  const mouseMove = (e) => {\r\n    drawHook(e)\r\n    onMouseMove()\r\n  }\r\n\r\n  const clickAction = () => {\r\n    if (isPainting) onPaint()\r\n  }\r\n\r\n  const contextAction = e => {\r\n    e.preventDefault()\r\n  }\r\n\r\n  /* --- Init --- */\r\n  if (isPainting) {\r\n    drawStartHook = () => {}\r\n    drawEndHook = () => {}\r\n    drawHook = preview\r\n  } else if (isDrawing) {\r\n    drawStartHook = drawStart\r\n    drawEndHook = drawEnd\r\n    drawHook = () => {}\r\n  } else {\r\n    drawStartHook = () => {}\r\n    drawEndHook = () => {}\r\n    drawHook = () => {}\r\n  }\r\n\r\n  return (\r\n    <div \r\n      className={`receiver${isDrawing || isPainting ? ' receiver-active' : ''}`}\r\n      \r\n      onClick={clickAction}\r\n      onContextMenu={contextAction}\r\n      onMouseDown={drawStartHook}\r\n      onMouseUp={drawEndHook}\r\n      onMouseLeave={drawEndHook}\r\n      onMouseMove={mouseMove}\r\n    />\r\n  )\r\n}\r\n  \r\nlet drawStartHook = () => {}\r\nlet drawEndHook = () => {}\r\nlet drawHook = () => {}\r\n\r\nexport default MouseReceiver\r\n","import React from 'react'\r\n\r\nconst TAP_AND_HOLD_INTERVAL = 480\r\n\r\nlet sx = 0, sy = 0, lx = 0, ly = 0, xi = 0, yi = 0\r\nlet longPressTimeout = null, swipeUpStart = 0\r\n\r\nconst TouchReceiver = ({ \r\n  triggerOffset, isTouchOverride,\r\n  onTap, onTapAndHold, onTouch, onTouchPointChange, onRelease,\r\n  onUpTrigger, onRightTrigger, onDownTrigger, onLeftTrigger,\r\n  onSwipeUp \r\n}) => {\r\n  const touchStart = e => {\r\n    sx = e.touches[0].clientX\r\n    sy = e.touches[0].clientY\r\n    lx = sx\r\n    ly = sy\r\n    longPressTimeout = setTimeout(() => {\r\n      if (Math.abs(sx - lx) < 5 && Math.abs(sy - ly) < 5) {\r\n        onTapAndHold()\r\n        longPressTimeout = null\r\n      }\r\n    }, TAP_AND_HOLD_INTERVAL)\r\n    \r\n    onTouch(lx, ly)\r\n\r\n    if (!isTouchOverride && ly > window.innerHeight * .85) {\r\n      swipeUpStart = Date.now()\r\n    }\r\n  }\r\n\r\n  const touchMove = e => {\r\n    if (isTouchOverride) {\r\n      lx = e.touches[0].clientX\r\n      ly = e.touches[0].clientY\r\n      \r\n      onTouchPointChange(e.touches[0].clientX, e.touches[0].clientY)\r\n      return\r\n    }\r\n\r\n    const dx = e.touches[0].clientX - lx\r\n    const dy = e.touches[0].clientY - ly\r\n    const adx = Math.abs(dx)\r\n    const ady = Math.abs(dy)\r\n    lx = e.touches[0].clientX\r\n    ly = e.touches[0].clientY\r\n\r\n    if (adx > ady) {\r\n      xi += adx\r\n      if (yi) {\r\n        yi = 0\r\n      }\r\n    } else {\r\n      yi += ady\r\n      if (xi) {\r\n        xi = 0\r\n      }\r\n    }\r\n    if (xi > triggerOffset) {\r\n      if (dx > 0) {\r\n        onRightTrigger(dx)\r\n      } else {\r\n        onLeftTrigger(dx)\r\n      }\r\n      xi = 0\r\n    }\r\n    if (yi > triggerOffset) {\r\n      if (dy > 0) {\r\n        onDownTrigger(dy)\r\n      } else {\r\n        onUpTrigger(dy)\r\n      }\r\n      yi = 0\r\n    }\r\n  }\r\n\r\n  const touchEnd = e => {\r\n    xi = 0\r\n    yi = 0\r\n    clearLongPressTimeout()\r\n    onRelease()\r\n\r\n    if (!isTouchOverride && swipeUpStart) {\r\n      const ady = Math.abs(sy - ly)\r\n      const timeElapsed = Date.now() - swipeUpStart\r\n\r\n      if (ady > 120 && timeElapsed < 240) {\r\n        onSwipeUp()\r\n      }\r\n\r\n      swipeUpStart = 0\r\n    }\r\n  }\r\n\r\n  const clearLongPressTimeout = () => {\r\n    if (longPressTimeout) {\r\n      clearInterval(longPressTimeout)\r\n      longPressTimeout = null\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div \r\n      className='receiver'\r\n      onTouchStart={touchStart}\r\n      onTouchMove={touchMove}\r\n      onTouchEnd={touchEnd}\r\n      onTouchCancel={touchEnd}\r\n      onClick={onTap}\r\n      onContextMenu={e => e.preventDefault()}\r\n    />\r\n  )\r\n}\r\n\r\nexport default TouchReceiver","import React from 'react'\r\nimport { RiBrushFill, RiEraserFill } from 'react-icons/ri'\r\n\r\nlet longPressTimeout = null\r\n\r\nconst BrushToggle = ({ isEraser, onToggle, onClear }) => {\r\n  const click = e => {\r\n    onToggle()\r\n    e.stopPropagation()\r\n  }\r\n\r\n  const touchStart = () => {\r\n    longPressTimeout = setTimeout(() => {\r\n      onClear()\r\n    }, 480);\r\n  }\r\n\r\n  const touchEnd = () => {\r\n    if (longPressTimeout) {\r\n      clearInterval(longPressTimeout)\r\n      longPressTimeout = null\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div \r\n      className='bt-root' \r\n      onClick={click}\r\n      onTouchStart={touchStart}\r\n      onTouchEnd={touchEnd}\r\n      onTouchCancel={touchEnd}\r\n      onContextMenu={e => e.preventDefault()}\r\n    >\r\n      <div className='bt-con'>\r\n        {isEraser ? (\r\n          <RiEraserFill className='bt-icon center' />\r\n        ) : (\r\n          <RiBrushFill className='bt-icon center' />\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default BrushToggle","import React, { useState, useEffect } from 'react'\r\n\r\nimport { RiBrushFill, RiBrushLine, RiHeartPulseFill, RiHeartPulseLine } from 'react-icons/ri'\r\nimport { IoColorPalette, IoColorPaletteOutline, IoGrid, IoGridOutline } from 'react-icons/io5'\r\nimport { VscChevronUp, VscChevronRight, VscChevronDown, VscChevronLeft } from 'react-icons/vsc'\r\n\r\nconst RadialMenu = ({ isMenu, modeIndex, dirIndex }) => {\r\n  const [show, setShow] = useState(false)\r\n  const [outPhase, setOutPhase] = useState(false)\r\n\r\n  const animEnded = e => {\r\n    if (e.animationName === 'scale-out-anim') {\r\n      setShow(false)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (isMenu) {\r\n      setShow(true)\r\n\r\n      if (outPhase) {\r\n        setOutPhase(false)\r\n      }\r\n    } else {\r\n      setOutPhase(true)\r\n    }\r\n  }, [isMenu])\r\n\r\n  if (!show) return null\r\n\r\n  return (\r\n    <div\r\n      className={`rm-root ${outPhase && 'scale-out'}`}\r\n      onAnimationEnd={animEnded}\r\n    >\r\n      {/* BG ALSO CONTAINS ARROWS */}\r\n      <div className='rm-bg' >\r\n\r\n        {/* ARROWS */}\r\n        <div className='rm-arrow-con arrow-up'>\r\n          <VscChevronUp\r\n            className={\r\n              `rm-arrow ${dirIndex === -1 && 'collapsed'} ${dirIndex === 0 && 'highlight'}`\r\n            }\r\n          />\r\n        </div>\r\n\r\n        <div className='rm-arrow-con arrow-right'>\r\n          <VscChevronRight\r\n            className={\r\n              `rm-arrow ${dirIndex === -1 && 'collapsed'} ${dirIndex === 1 && 'highlight'}`\r\n            }\r\n          />\r\n        </div>\r\n\r\n        <div className='rm-arrow-con arrow-down'>\r\n          <VscChevronDown\r\n            className={\r\n              `rm-arrow ${dirIndex === -1 && 'collapsed'} ${dirIndex === 2 && 'highlight'}`\r\n            }\r\n          />\r\n        </div>\r\n\r\n        <div className='rm-arrow-con arrow-left'>\r\n          <VscChevronLeft\r\n            className={\r\n              `rm-arrow ${dirIndex === -1 && 'collapsed'} ${dirIndex === 3 && 'highlight'}`\r\n            }\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* ICONS */}\r\n      <div className='rm-item-con item-up'>\r\n        {modeIndex === 0 ? (\r\n          <IoColorPalette\r\n            className={\r\n              `rm-item rm-colors rm-rules center ${dirIndex === 0 && 'highlight'}`\r\n            }\r\n          />\r\n        ) : (\r\n          <IoColorPaletteOutline\r\n            className={\r\n              `rm-item rm-colors rm-rules center ${dirIndex === 0 && 'highlight'}`\r\n            }\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      <div className='rm-item-con item-right'>\r\n        {modeIndex === 1 ? (\r\n          <RiHeartPulseFill\r\n            className={\r\n              `rm-item rm-rules center ${dirIndex === 1 && 'highlight'}`\r\n            }\r\n          />\r\n        ) : (\r\n          <RiHeartPulseLine\r\n            className={\r\n              `rm-item rm-rules center ${dirIndex === 1 && 'highlight'}`\r\n            }\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      <div className='rm-item-con item-down'>\r\n        {modeIndex === 2 ? (\r\n          <IoGrid\r\n            className={\r\n              `rm-item rm-shapes center ${dirIndex === 2 && 'highlight'}`\r\n            }\r\n          />\r\n        ) : (\r\n          <IoGridOutline\r\n            className={\r\n              `rm-item rm-shapes center ${dirIndex === 2 && 'highlight'}`\r\n            }\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      <div className='rm-item-con item-left'>\r\n        {modeIndex === 3 ? (\r\n          <RiBrushFill\r\n            className={\r\n              `rm-item rm-draw center ${dirIndex === 3 && 'highlight'}`\r\n            }\r\n          />\r\n        ) : (\r\n          <RiBrushLine\r\n            className={\r\n              `rm-item rm-draw center ${dirIndex === 3 && 'highlight'}`\r\n            }\r\n          />\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default RadialMenu","import React from 'react'\r\nimport BrushToggle from './BrushToggle'\r\nimport RadialMenu from './RadialMenu'\r\nimport ShapeMenu from './ShapeMenu'\r\n\r\nimport './touch-quick-access.css'\r\n\r\nconst TouchQuickAccess = ({ \r\n  isMenu, isEraser, modeIndex, dirIndex, touchTrigger,\r\n  onEraserToggle, onClear, onFillSelect, onTempPause \r\n}) => {\r\n  return (\r\n    <div className='tqa-root'>\r\n      <RadialMenu \r\n        isMenu={isMenu} \r\n        modeIndex={modeIndex}\r\n        dirIndex={dirIndex}\r\n      />\r\n\r\n      {modeIndex === 3 && (\r\n        <BrushToggle \r\n          isEraser={isEraser}\r\n          onToggle={onEraserToggle}\r\n          onClear={onClear}\r\n        />\r\n      )}\r\n\r\n      <ShapeMenu \r\n        modeIndex={modeIndex}\r\n        dir={touchTrigger.dir}\r\n        trig={touchTrigger.trig}\r\n        onFillSelect={onFillSelect}\r\n        onSliding={onTempPause}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default TouchQuickAccess","export const dynamicRules = [\r\n  '0',\r\n  '1',\r\n  '2',\r\n  '3',\r\n  '4',\r\n  '5',\r\n  '6',\r\n  '7',\r\n  '8',\r\n  '',\r\n  '0',\r\n  '01',\r\n  '012',\r\n  '0123',\r\n  '01234',\r\n  '012345',\r\n  '0123456',\r\n  '01234567',\r\n  '012345678',\r\n  '12345678',\r\n  '2345678',\r\n  '345678',\r\n  '45678',\r\n  '5678',\r\n  '678',\r\n  '78',\r\n  '8',\r\n  '1',\r\n  '12',\r\n  '123',\r\n  '1234',\r\n  '12345',\r\n  '123456',\r\n  '1234567',\r\n  '12345678',\r\n  '',\r\n  '01',\r\n  '12',\r\n  '23',\r\n  '34',\r\n  '45',\r\n  '56',\r\n  '67',\r\n  '78',\r\n  '80',\r\n  '',\r\n  '02',\r\n  '13',\r\n  '24',\r\n  '35',\r\n  '46',\r\n  '57',\r\n  '68',\r\n  '70',\r\n  '',\r\n  '012',\r\n  '123',\r\n  '234',\r\n  '345',\r\n  '456',\r\n  '567',\r\n  '678',\r\n  '780',\r\n  '801',\r\n  '',\r\n  '0123',\r\n  '1234',\r\n  '2345',\r\n  '3456',\r\n  '4567',\r\n  '5678',\r\n  '6780',\r\n  '7801',\r\n  '8012',\r\n  '',\r\n  '01234',\r\n  '12345',\r\n  '23456',\r\n  '34567',\r\n  '45678',\r\n  '56780',\r\n  '67801',\r\n  '78012',\r\n  '80123',\r\n  ''\r\n]","import { dynamicRules } from \"../static/dynamic-rules\"\r\n\r\nlet dynRules_b = [], dynRules_s = [], bi = 0, si = 0\r\n\r\nconst init = () => {\r\n  dynRules_b = [...dynamicRules]\r\n  dynRules_s = dynamicRules.filter(r => r !== \"\")\r\n  bi = dynRules_b.indexOf(\"3\")\r\n  si = dynRules_s.indexOf(\"23\")\r\n}\r\n\r\nconst currBRl = () => dynRules_b[bi]\r\nconst currSRl = () => dynRules_s[si]\r\n\r\nconst nextBRl = () => {\r\n  if (bi < dynRules_b.length - 1) {\r\n    bi += 1\r\n  } else {\r\n    bi = 0\r\n  }\r\n  return dynRules_b[bi]\r\n}\r\n\r\nconst prevBRl = () => {\r\n  if (bi > 0) {\r\n    bi -= 1\r\n  } else {\r\n    bi = dynRules_b.length - 1\r\n  }\r\n  return dynRules_b[bi]\r\n}\r\n\r\nconst nextSRl = () => {\r\n  if (si < dynRules_s.length - 1) {\r\n    si += 1\r\n  } else {\r\n    si = 0\r\n  }\r\n  return dynRules_s[si]\r\n}\r\n\r\nconst prevSRl = () => {\r\n  if (si > 0) {\r\n    si -= 1\r\n  } else {\r\n    si = dynRules_s.length - 1\r\n  }\r\n  return dynRules_s[si]\r\n}\r\n\r\ninit()\r\n\r\nexport { currBRl, currSRl, nextBRl, prevBRl, nextSRl, prevSRl }","export const dynamicShades = [\r\n  // 1\r\n  {\r\n    name: 'Mono White',\r\n    colors: [\r\n      { r: 255, g: 255, b: 255 }\r\n    ]\r\n  },\r\n  // 3\r\n  {\r\n    name: 'RGB',\r\n    colors: [\r\n      { r: 0, g: 0, b: 0 },\r\n      { r: 255, g: 0, b: 0 },\r\n      { r: 0, g: 255, b: 0 },\r\n      { r: 0, g: 0, b: 255 },\r\n      { r: 0, g: 0, b: 0 }\r\n    ]\r\n  },\r\n  {\r\n    name: 'Pasture of Dreams',\r\n    colors: [\r\n      { r: 0, g: 0, b: 0 },\r\n      { r: 211, g: 177, b: 194 },\r\n      { r: 193, g: 151, b: 210 },\r\n      { r:97, g:54, b:89 },\r\n      { r: 0, g: 0, b: 0 }\r\n    ]\r\n  },\r\n  {\r\n    name: \"Mellow Barnyard\",\r\n    colors: [\r\n      { r: 0, g: 0, b: 0 },\r\n      { r: 230, g: 194, b: 191 },\r\n      { r: 248, g: 239, b: 228 },\r\n      { r: 250, g: 208, b: 44 },\r\n      { r: 0, g: 0, b: 0 }\r\n    ]\r\n  },\r\n  {\r\n    name: \"Warm Sunset\",\r\n    colors: [\r\n      { r: 0, g: 0, b: 0 },\r\n      { r: 253, g: 127, b: 32 },\r\n      { r: 252, g: 46, b: 32 },\r\n      { r: 253, g: 183, b: 80 },\r\n      { r: 0, g: 0, b: 0 }\r\n    ]\r\n  },\r\n  // 4\r\n  {\r\n    name: 'Deep Blue',\r\n    isLooped: false,\r\n    colors: [\r\n      { r: 0, g: 0, b: 0 },\r\n      { r: 5, g: 10, b: 48 },\r\n      { r: 0, g: 12, b: 102 },\r\n      { r: 0, g: 0, b: 255 },\r\n      { r: 126, g: 200, b: 227 },\r\n      { r: 0, g: 0, b: 0 }\r\n    ]\r\n  },\r\n  {\r\n    name: \"Crack of Dawn\",\r\n    colors: [\r\n      { r: 0, g: 0, b: 0 },\r\n      { r: 232, g: 122, b: 0 },\r\n      { r: 216, g: 156, b: 96 },\r\n      { r: 4, g: 81, b: 116 },\r\n      { r: 0, g: 31, b: 61 },\r\n      { r: 0, g: 0, b: 0 }\r\n    ]\r\n  },\r\n  {\r\n    name: \"Ice Infinity\",\r\n    colors: [\r\n      { r: 0, g: 0, b: 0 },\r\n      { r: 217, g: 228, b: 236 },\r\n      { r: 183, g: 207, b: 220 },\r\n      { r: 106, g: 171, b: 210 },\r\n      { r: 56, g: 94, b: 114 },\r\n      { r: 0, g: 0, b: 0 }\r\n    ]\r\n  },\r\n  {\r\n    name: 'Facing Forward',\r\n    colors: [\r\n      { r: 0, g: 0, b: 0 },\r\n      { r: 229, g: 221, b: 200 },\r\n      { r: 1, g: 148, b: 154 },\r\n      { r: 0, g: 67, b: 105 },\r\n      { r: 219, g: 31, b: 72 },\r\n      { r: 0, g: 0, b: 0 }\r\n    ]\r\n  },\r\n  {\r\n    name: 'Rosy Dew',\r\n    colors: [\r\n      { r: 0, g: 0, b: 0 },\r\n      { r: 249, g: 241, b: 240 },\r\n      { r: 250, g: 220, b: 217 },\r\n      { r: 248, g: 175, b: 166 },\r\n      { r: 247, g: 148, b: 137 },\r\n      { r: 0, g: 0, b: 0 }\r\n    ]\r\n  },\r\n  {\r\n    name: 'Rose Petals',\r\n    colors: [\r\n      { r: 0, g: 0, b: 0 },\r\n      { r: 59, g: 4, b: 4 },\r\n      { r: 222, g: 179, b: 173 },\r\n      { r: 222, g: 132, b: 123 },\r\n      { r: 185, g: 92, b: 80 },\r\n      { r: 0, g: 0, b: 0 }\r\n    ]\r\n  },\r\n  {\r\n    name: \"Rose Water\",\r\n    colors: [\r\n      { r: 0, g: 0, b: 0 },\r\n      { r: 232, g: 180, b: 184 },\r\n      { r: 238, g: 214, b: 211 },\r\n      { r: 164, g: 147, b: 147 },\r\n      { r: 103, g: 89, b: 94 },\r\n      { r: 0, g: 0, b: 0 }\r\n    ]\r\n  },\r\n  {\r\n    name: \"Backdoor Casual\",\r\n    colors: [\r\n      { r: 0, g: 0, b: 0 },\r\n      { r: 233, g: 137, b: 115 },\r\n      { r: 231, g: 212, b: 192 },\r\n      { r: 136, g: 178, b: 204 },\r\n      { r: 101, g: 142, b: 169 },\r\n      { r: 0, g: 0, b: 0 }\r\n    ]\r\n  },\r\n  {\r\n    name: 'Healthy Leaves',\r\n    colors: [\r\n      { r: 0, g: 0, b: 0 },\r\n      { r: 61, g: 85, b: 12 },\r\n      { r: 129, g: 184, b: 34 },\r\n      { r: 236, g: 248, b: 127 },\r\n      { r: 89, g: 152, b: 26 },\r\n      { r: 0, g: 0, b: 0 }\r\n    ]\r\n  },\r\n  {\r\n    name: \"Cotton Dandelions\",\r\n    colors: [\r\n      { r: 0, g: 0, b: 0 },\r\n      { r: 1, g: 58, b: 32 },\r\n      { r: 212, g: 214, b: 207 },\r\n      { r: 83, g: 111, b: 22 },\r\n      { r: 63, g: 65, b: 34 },\r\n      { r: 0, g: 0, b: 0 }\r\n    ]\r\n  },\r\n  {\r\n    name: 'Trees During Fall',\r\n    colors: [\r\n      { r: 0, g: 0, b: 0 },\r\n      { r: 219, g: 164, b: 14 },\r\n      { r: 75, g: 90, b: 32 },\r\n      { r: 120, g: 125, b: 18 },\r\n      { r: 126, g: 110, b: 19 },\r\n      { r: 0, g: 0, b: 0 }\r\n    ]\r\n  },\r\n  {\r\n    name: \"Rustic Project\",\r\n    colors: [\r\n      { r: 0, g: 0, b: 0 },\r\n      { r: 116, g: 93, b: 32 },\r\n      { r: 206, g: 166, b: 96 },\r\n      { r: 243, g: 237, b: 224 },\r\n      { r: 107, g: 122, b: 64 },\r\n      { r: 0, g: 0, b: 0 }\r\n    ]\r\n  },\r\n  // 5\r\n  {\r\n    name: 'Flame of Fire',\r\n    colors: [\r\n      { r: 0, g: 0, b: 0 },\r\n      { r: 255, g: 232, b: 8 },\r\n      { r: 255, g: 206, b: 0 },\r\n      { r: 255, g: 154, b: 0 },\r\n      { r: 255, g: 90, b: 0 },\r\n      { r: 255, g: 0, b: 0 },\r\n      { r: 0, g: 0, b: 0 }\r\n    ]\r\n  },\r\n]","import { dynamicShades } from \"../static/dynamic-shades\"\r\nimport { generateGradient, hex2rgb, rgb2hex } from \"../utils/color-utils\"\r\nimport { createHelpers } from \"../utils/helpers\"\r\n\r\nlet step = 10\r\nlet dsi = 0 // dynamic shade index\r\n\r\nconst init = () => {\r\n  \r\n}\r\n\r\nconst applySteps = () => {\r\n  const { name, colors } = dynamicShades[dsi]\r\n  if (colors.length === 1) {\r\n    return {\r\n      name, step, shades: [rgb2hex(colors[0])]\r\n    }\r\n  }\r\n  if (step === 0) {\r\n    return {\r\n      name, step, shades: colors.map(color => rgb2hex(color))\r\n    }\r\n  }\r\n  return {\r\n    name, step,\r\n    shades: generateGradient({\r\n      colors, steps: new Array(colors.length - 1).fill(step)\r\n    })\r\n  }\r\n}\r\n\r\nconst extendSeq = () => {\r\n  if (step < 100) {\r\n    step += 1\r\n  }\r\n  return applySteps()\r\n}\r\n\r\nconst shortenSeq = () => {\r\n  if (step > 0) {\r\n    step -= 1\r\n  }\r\n  return applySteps()\r\n}\r\n\r\nconst nextSeq = () => {\r\n  if (dsi < dynamicShades.length - 1) {\r\n    dsi += 1\r\n  }\r\n  return applySteps()\r\n}\r\n\r\nconst prevSeq = () => {\r\n  if (dsi > 0) {\r\n    dsi -= 1\r\n  }\r\n  return applySteps()\r\n}\r\n\r\ninit()\r\n\r\nexport { extendSeq, shortenSeq, nextSeq, prevSeq }\r\n\r\n\r\n// HELPERS\r\n\r\nconst converti = (inpStr) => {\r\n  const inputArr = inpStr.split(\"-\")\r\n  const name = inputArr[0]\r\n  const hexes = inputArr[1].split(\" \")\r\n  let outStr = `\\n{\\n  name: \"${name}\",\\n  colors: [\\n    { r: 0, g: 0, b: 0 },\\n`\r\n  hexes.forEach((hex, i) => {\r\n    const { r, g, b } = hex2rgb(hex)\r\n    outStr += `    { r: ${r}, g: ${g}, b: ${b} },\\n`\r\n    if (i === hexes.length - 1) {\r\n      outStr += '    { r: 0, g: 0, b: 0 }\\n  ]\\n},\\n\\n'\r\n    }\r\n  })\r\n  console.log(outStr)\r\n  return 0\r\n}\r\n\r\ncreateHelpers([converti])\r\n","export const TouchSwitch = ({ name, checked, inDelay = 0, onCheckChange }) => (\r\n  <div \r\n    className='to-control-con'\r\n    style={{ animationDelay: `${inDelay}ms` }}\r\n  >\r\n    <div className='to-c-label'>\r\n      {name}\r\n    </div>\r\n    <div \r\n      className='to-c-switch' \r\n      onClick={() => onCheckChange(!checked)}\r\n    >\r\n      <div className='to-c-s-track center'>\r\n        <div className={`to-c-s-handle ${checked && 'to-c-s-h-checked'}`} />\r\n      </div>\r\n    </div>\r\n  </div>\r\n)\r\n\r\nexport const TouchButton = ({ name, onClick, extraMargin = false, inDelay = 0 }) => (\r\n  <div \r\n    className={`to-control-con to-c-button ${extraMargin && 'to-c-b-extra-margin'}`}\r\n    style={{ animationDelay: `${inDelay}ms` }}\r\n    onClick={onClick}\r\n  >\r\n    <div>{name}</div>\r\n  </div>\r\n)","import { useRef, useState, useEffect, useContext } from 'react'\r\nimport { \r\n  initGrid, updateGrid, drawGrid, drawInverse, drawShaded, drawShapes, drawOnGrid, eraseOnGrid, paint, preview,\r\n  setBrushSize, setSize, setupPreview, setFill, setRule, setGridWrap, setShadeSeq, setInverseBg, setTrails, reInitGrid\r\n} from './grid.js'\r\n\r\nimport Controls from './controls/Controls'\r\nimport { DataContext } from '../context/DataContext'\r\nimport Resizer from './resizer/Resizer.js'\r\nimport TouchControls from './controls/TouchControls.js'\r\n\r\nconst IS_MOBILE = document.body.clientWidth <= 768\r\n\r\nlet ctx\r\nlet ctxbg, background, gradientStops\r\nlet animationFrameId, findex, initialised = false\r\n\r\nlet speed = 4, drawSpeed = speed\r\nlet isBrushDown = false, isInverseDraw = false, isAgeShades = false, isInverseImage = false, isShapeShades = false\r\n\r\nconst World = (props) => {\r\n  const [fps, setFps] = useState(0)\r\n  const [showFps, setShowFps] = useState(false)\r\n  const [bgImgSrc, setBgImgSrc] = useState('')\r\n  const [isResizing, setIsResizing] = useState(false)\r\n\r\n  const canvasRef = useRef(null)\r\n  const canvasbgRef = useRef(null)\r\n  \r\n  const { setDimensions } = useContext(DataContext)\r\n\r\n  const sizeChanged = size => {\r\n    const { gridW, gridH } = setSize(size)\r\n    setDimensions(gridW, gridH)\r\n  }\r\n\r\n  const setBgImage = src => {\r\n    if (src) {\r\n      isInverseImage = true\r\n      setBgImgSrc(src)\r\n      setupImageBackground()\r\n    }\r\n  }\r\n\r\n  const windowResized = (_isResizing) => {\r\n    if (_isResizing !== isResizing) {\r\n      setIsResizing(_isResizing)\r\n      isPlayingChanged(!_isResizing)\r\n\r\n      if (!_isResizing) {\r\n        /* Resizing finished */\r\n        \r\n        updateCanvasSize()\r\n        resizeBgRedraw()\r\n        \r\n        const { gridW, gridH } = reInitGrid()\r\n        setDimensions(gridW, gridH)\r\n      }\r\n    }\r\n  }\r\n\r\n  const updateCanvasSize = () => {\r\n    const canvas = canvasRef.current\r\n    const canvasBg = canvasbgRef.current\r\n\r\n    canvas.setAttribute('width', window.innerWidth)\r\n    canvas.setAttribute('height', window.innerHeight)\r\n    canvasBg.setAttribute('width', window.innerWidth)\r\n    canvasBg.setAttribute('height', window.innerHeight)\r\n  }\r\n\r\n  const toggleFps = v => {\r\n    setShowFps(v)\r\n    if (!v) {\r\n      setFps(0)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    const context = canvasRef.current.getContext('2d')\r\n    const contextBg = canvasbgRef.current.getContext('2d')\r\n\r\n    const startTime = Date.now()\r\n    let fLogIndex, fLogTime\r\n\r\n    const init = () => {\r\n      findex = 0\r\n\r\n      ctx = context\r\n      ctxbg = contextBg\r\n\r\n      updateCanvasSize()\r\n      setBackground('#000000')\r\n\r\n      initialised = true\r\n    }\r\n    \r\n    const initFps = () => {\r\n      fLogIndex = 0\r\n      fLogTime = startTime\r\n    }\r\n\r\n    const render = () => {\r\n      findex += 1\r\n\r\n      update(findex)\r\n      draw(context, findex)\r\n\r\n      logFps()\r\n      animationFrameId = window.requestAnimationFrame(render)\r\n    }\r\n\r\n    const logFps = () => {\r\n      if (showFps) {\r\n        const now = Date.now()\r\n        if (now - fLogTime < 1000) {\r\n          fLogIndex += 1\r\n        } else {\r\n          setFps(Math.floor(fLogIndex / (now - fLogTime) * 1000))\r\n          fLogTime = now\r\n          fLogIndex = 0\r\n        }\r\n      }\r\n    }\r\n\r\n    if (!initialised) {\r\n      init()\r\n    }\r\n    if (showFps) {\r\n      initFps()\r\n    }\r\n\r\n    render()\r\n\r\n    return () => {\r\n      window.cancelAnimationFrame(animationFrameId)\r\n    }\r\n  }, [showFps])\r\n\r\n  return (\r\n    <div className='world'>\r\n      <img className='bg-img' src={bgImgSrc} alt=\"Background\" />\r\n\r\n      <canvas ref={canvasbgRef} {...props} />\r\n      <canvas ref={canvasRef} {...props} />\r\n\r\n      {showFps && (\r\n        <div className='fpsCounter'>\r\n          {fps ? fps : 'Calculating...'}\r\n        </div>\r\n      )}\r\n\r\n      {IS_MOBILE ? (\r\n        <TouchControls \r\n          onIsPlayingChanged={isPlayingChanged}\r\n          onDraw={drawOnGrid}\r\n          onErase={eraseOnGrid}\r\n          onClear={clear}\r\n          onBrushDownChange={brushDownChanged}\r\n          onRuleSelect={setRule}\r\n          onShadesSelect={shadesSelected}\r\n          onFillSelect={setFill}\r\n\r\n          onShowFpsChange={toggleFps}\r\n          onWrapChange={setGridWrap}\r\n        />\r\n      ) : (\r\n        <Controls\r\n          onIsPlayingChanged={isPlayingChanged} \r\n          onBrushDownChanged={brushDownChanged}\r\n          onDraw={drawOnGrid}\r\n          onErase={eraseOnGrid}\r\n          onPaint={paint}\r\n          onPreview={preview}\r\n\r\n          onPreviewStart={startPreview}\r\n          onPreviewEnd={endPreview}\r\n          onFillSelect={setFill}\r\n          onClear={clear}\r\n          onRuleSelect={setRule}\r\n          onWrapChanged={setGridWrap}\r\n          onBgSelect={setBackground}\r\n          onShadesSelect={shadesSelected}\r\n          onGradSelect={setGradient}\r\n          onImageSelect={setBgImage}\r\n          onTrailsChanged={setTrails}\r\n\r\n          onSizeChanged={sizeChanged}\r\n          onSpeedChanged={speedChanged}\r\n          onBrushChanged={setBrushSize}\r\n        />\r\n      )}\r\n\r\n      <Resizer isResizing={isResizing} onResizing={windowResized} />\r\n    </div>\r\n  )\r\n}\r\n\r\n/* --- CONTROLS --- */\r\n\r\nconst isPlayingChanged = (isPlaying) => {\r\n  update = isPlaying ? _update : () => {}\r\n}\r\n\r\nconst brushDownChanged = (_isBrushDown) => {\r\n  isBrushDown = _isBrushDown\r\n  reconfigureDraw()\r\n}\r\n\r\nconst shadesSelected = ({ shades, isLoop }) => {\r\n  if (isInverseDraw) {\r\n    isInverseDraw = false\r\n    updateBackground()\r\n  }\r\n\r\n  isAgeShades = shades.length > 1\r\n  setShadeSeq({ shades, isLoop })\r\n  reconfigureDraw()\r\n  triggerDraw()\r\n}\r\n\r\nconst speedChanged = (spd) => {\r\n  speed = 101 - spd\r\n  drawSpeed = speed\r\n  reconfigureDraw()\r\n}\r\n\r\nconst startPreview = shape => {\r\n  setupPreview(shape)\r\n  previewConfig({ isStart: true })\r\n}\r\n\r\nconst endPreview = () => {\r\n  previewConfig({ isStart: false })\r\n}\r\n\r\nconst previewConfig = ({ isStart }) => {\r\n  isBrushDown = isStart\r\n  isShapeShades = isStart\r\n  reconfigureDraw()\r\n}\r\n\r\nconst clear = () => {\r\n  /* Will clear both canvas and grid */\r\n  ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height)\r\n  setFill('clear')\r\n}\r\n\r\n/* --- BACKGROUND LAYER --- */\r\n\r\nconst setBackground = bg => {\r\n  background = bg\r\n  setInverseBg(bg)\r\n  \r\n  if (!isInverseDraw) {\r\n    updateBackground()\r\n  }\r\n}\r\n\r\nconst setGradient = stops => {\r\n  isInverseImage = false\r\n  gradientStops = stops\r\n  initInverseDraw()\r\n  applyGradient()\r\n}\r\n\r\nconst setupImageBackground = () => {\r\n  initInverseDraw()\r\n  ctxbg.clearRect(0, 0, ctxbg.canvas.width, ctxbg.canvas.height)\r\n}\r\n\r\nconst updateBackground = () => {\r\n  ctxbg.fillStyle = background\r\n  ctxbg.fillRect(0, 0, ctxbg.canvas.width, ctxbg.canvas.height)\r\n}\r\n\r\nconst applyGradient = () => {\r\n  const grad = ctxbg.createLinearGradient(0, 0, ctxbg.canvas.width, 0)\r\n  grad.addColorStop(0, gradientStops[0])\r\n  grad.addColorStop(1, gradientStops[1])\r\n\r\n  ctxbg.fillStyle = grad\r\n  ctxbg.fillRect(0, 0, ctxbg.canvas.width, ctxbg.canvas.height)\r\n}\r\n\r\nconst initInverseDraw = () => {\r\n  if (!isInverseDraw) {\r\n    isInverseDraw = true\r\n    isAgeShades = false\r\n    reconfigureDraw()\r\n    triggerDraw()\r\n  }\r\n}\r\n\r\nconst resizeBgRedraw = () => {\r\n  if (isInverseDraw) {\r\n    if (isInverseImage) {\r\n      setupImageBackground()\r\n    } else applyGradient()\r\n  } else {\r\n    updateBackground()\r\n  }\r\n}\r\n\r\n\r\n/* --- EXT FUNCTIONS --- */\r\n\r\nconst initExt = () => {\r\n  initGrid()\r\n}\r\n\r\nconst triggerDraw = () => draw(ctx, drawSpeed)\r\n\r\n/* - UPDATE - */\r\n\r\nconst _update = (findex) => {\r\n  if (findex % speed === 0) {\r\n    /* All updates go here */\r\n\r\n    updateGrid(findex)\r\n  }\r\n}\r\n\r\nlet update = _update\r\n\r\nconst reconfigureDraw = () => {\r\n  if (isShapeShades) _draw = drawShapes\r\n  else if (isInverseDraw) _draw = drawInverse\r\n  else if (isAgeShades) _draw = drawShaded\r\n  else _draw = drawGrid\r\n\r\n  draw = isBrushDown || drawSpeed === 1 ? _draw : _fdraw\r\n}\r\n\r\n/* - DRAW - */\r\n/*\r\n * Changed draw implemention to only use draw-on-each-render (not fast) for:\r\n * 1. When in brush mode and mouse is held down\r\n * 2. When previewing a shape for placement\r\n * 3. When previewing the filler modifiers\r\n */\r\n\r\nlet _draw = drawGrid\r\n\r\nconst _fdraw = (ctx, findex) => {\r\n  if (findex % drawSpeed === 0) {\r\n    _draw(ctx)\r\n  }\r\n}\r\n\r\nlet draw = _fdraw\r\n\r\ninitExt()\r\n\r\nexport default World\r\n","import React, { useState, useEffect } from 'react'\r\nimport { TouchSwitch, TouchButton } from './touch-option-controls'\r\n\r\nimport './touch-options.css'\r\n\r\nconst TouchOptions = ({ isOptions, onShowFpsChange, onWrapChange, onClose }) => {\r\n  const [show, setShow] = useState(false)\r\n  const [outPhase, setOutPhase] = useState(false)\r\n\r\n  const [showFps, setShowFps] = useState(false)\r\n  const [wrapGrid, setWrapGrid] = useState(false)\r\n  const [isFullscreen, setIsFullscreen] = useState(false)\r\n\r\n  const animEnded = e => {\r\n    if (e.animationName === 'slide-out-anim') {\r\n      setShow(false)\r\n      setOutPhase(false)\r\n    }\r\n  }\r\n\r\n  const toggleFps = checked => {\r\n    setShowFps(checked)\r\n    onShowFpsChange(checked)\r\n  }\r\n\r\n  const toggleGridWrap = checked => {\r\n    setWrapGrid(checked)\r\n    onWrapChange(checked)\r\n  }\r\n\r\n  const fullscreen = () => {\r\n    if (!document.fullscreenElement) {\r\n      document.body.requestFullscreen()\r\n      setIsFullscreen(true)\r\n    } else {\r\n      document.exitFullscreen()\r\n      setIsFullscreen(false)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    const fullscreenChange = () => {\r\n      if (!document.fullscreenElement) {\r\n        setIsFullscreen(false)\r\n      }\r\n    }  \r\n\r\n    document.addEventListener('fullscreenchange', fullscreenChange)\r\n\r\n    return () => {\r\n      document.removeEventListener('fullscreenchange', fullscreenChange)\r\n    }\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (isOptions) {\r\n      setShow(true)\r\n    } else if (show) {\r\n      setOutPhase(true)\r\n    }\r\n  }, [isOptions])\r\n\r\n  if (!show) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div className='touch-options-root'>\r\n      <div \r\n        className={`to-con ${outPhase && 'slide-out'}`}\r\n        onAnimationEnd={animEnded}\r\n      >\r\n        <div className='to-title'>\r\n          OPTIONS\r\n        </div>\r\n        <div className='to-items'>\r\n          <TouchSwitch \r\n            name='Show FPS' \r\n            checked={showFps} \r\n            inDelay={80} \r\n            onCheckChange={toggleFps} \r\n          />\r\n\r\n          <TouchSwitch \r\n            name='Wrap Grid' \r\n            checked={wrapGrid} \r\n            inDelay={120} \r\n            onCheckChange={toggleGridWrap} \r\n          />\r\n\r\n          <TouchButton \r\n            name={isFullscreen ? 'Exit Fullscreen' : 'Fullscreen'} \r\n            inDelay={160} \r\n            onClick={fullscreen} \r\n          />\r\n\r\n          <TouchButton \r\n            name='Close OPTIONS' \r\n            extraMargin={true} \r\n            inDelay={200} \r\n            onClick={onClose} \r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default TouchOptions","import React, { useState, useContext } from 'react'\r\nimport TouchReceiver from '../receivers/TouchReceiver'\r\nimport TouchQuickAccess from '../touch-quick-access/TouchQuickAccess'\r\nimport { NotificationContext } from '../../context/NotificationContext'\r\nimport { currBRl, currSRl, nextBRl, nextSRl, prevBRl, prevSRl } from '../../touch-controllers/rules-tc'\r\nimport { extendSeq, shortenSeq, nextSeq, prevSeq } from '../../touch-controllers/shades-tc'\r\n\r\nimport './controls.css'\r\nimport { NotificationWithBody } from '../notifications/notification-templates'\r\nimport TouchOptions from '../touch-options/TouchOptions'\r\n\r\n/**\r\n * Hold and Drag (upper 80% of screen) => QUICK OPTIONS \r\n * 1. Customisable up right down left options activate on release\r\n * 2. Dynamic Rules, Brush, Fills, Dynamic colors\r\n * 3. On tap bring thier respective menus => Custom Rules, Brush/Eraser, Customise fill, Age Based Palette\r\n * \r\n * Swipe up from bottom 20% of screen (other than brush mode)\r\n * MENU OPTIONS => grid size, wrap grid, full screen\r\n * \r\n * Tap on lower 20% of screen - Play/Pause\r\n * Swipe left/right on lower 20% of screen for sim speed\r\n */\r\n\r\n/* \r\n * menuDirIndex:\r\n *    0\r\n * 3 -1  1\r\n *    2\r\n */\r\n\r\nconst MODES = [\r\n  { notification: 'Switched to Color Mode', triggerOffset: 5 },\r\n  { notification: 'Switched to Rule Mode', triggerOffset: 5 },\r\n  { notification: 'Switched to Fill Mode', triggerOffset: 5 },\r\n  {\r\n    notification: (\r\n      <NotificationWithBody\r\n        title='Switched to Brush Mode'\r\n        body='Swipe up menu disabled. Please select another mode to re-enable swipe up menu.'\r\n      />\r\n    ),\r\n    triggerOffset: -1\r\n  },\r\n]\r\n\r\nconst TouchControls = ({ \r\n  onIsPlayingChanged,\r\n  onDraw, onErase, onClear, onBrushDownChange, \r\n  onRuleSelect, onShadesSelect, onFillSelect,\r\n  onShowFpsChange, onWrapChange\r\n }) => {\r\n  const { showNotification } = useContext(NotificationContext)\r\n\r\n  const [isMenu, setIsMenu] = useState(false)\r\n  const [isOptions, setIsOptions] = useState(false)\r\n  const [isEraser, setIsEraser] = useState(false)\r\n  const [modeIndex, setModeIndex] = useState(0)\r\n  const [menuDirIndex, setMenuDirIndex] = useState(-2)\r\n  const [triggerOffset, setTriggerOffset] = useState(5)\r\n  const [touchTrigger, setTouchTrigger] = useState({ dir: -1, trig: 0 }) // dir same as menuDirIndex + 4 as tap & 5 as release\r\n\r\n  let upTrigger, rightTrigger, downTrigger, leftTrigger\r\n\r\n  const tap = () => {\r\n    if (modeIndex === 2) {\r\n      triggerTouch(4)\r\n    }\r\n  }\r\n\r\n  const tapAndHold = () => {\r\n    if (!isMenu) {\r\n      setIsMenu(true)\r\n      setTriggerOffset(25)\r\n\r\n      // if menu opened onBrushDownChange(false) does not trigger\r\n      if (modeIndex === 3) {\r\n        onBrushDownChange(false)\r\n      }\r\n    }\r\n  }\r\n\r\n  const touch = (x, y) => {\r\n    if (modeIndex === 3) {\r\n      applyBrush(x, y)\r\n      onBrushDownChange(true)\r\n    }\r\n  }\r\n\r\n  const touchPointChange = (x, y) => {\r\n    // only called on modeIndex === 3 atm\r\n    applyBrush(x, y)\r\n  }\r\n\r\n  const release = () => {\r\n    if (isMenu) {\r\n      if (menuDirIndex > -1 && menuDirIndex !== modeIndex) {\r\n        const { notification, triggerOffset } = MODES[menuDirIndex]\r\n        if (menuDirIndex === 3 && isEraser) {\r\n          setIsEraser(false)\r\n        }\r\n\r\n        setModeIndex(menuDirIndex)\r\n        setTriggerOffset(triggerOffset)\r\n        if (modeIndex === 3) {\r\n          showNotification(\r\n            <NotificationWithBody\r\n              title={notification}\r\n              body='Swipe up menu re-enabled'\r\n            />\r\n          )\r\n        } else {\r\n          showNotification(notification)\r\n        }\r\n      } else {\r\n        setTriggerOffset(MODES[modeIndex].triggerOffset)\r\n      }\r\n\r\n      setIsMenu(false)\r\n      setMenuDirIndex(-2)\r\n    } else {\r\n      if (modeIndex === 2) {\r\n        triggerTouch(5)\r\n      } else if (modeIndex === 3) {\r\n        onBrushDownChange(false)\r\n      }\r\n    }\r\n  }\r\n\r\n  const triggerTouch = (dir) => {\r\n    setTouchTrigger({ dir, trig: 1 - touchTrigger.trig })\r\n  }\r\n\r\n  const swipeUp = () => {\r\n    setIsOptions(true)\r\n  }\r\n\r\n  const applyMenuDirection = (di, odi) => {\r\n    if (menuDirIndex === odi) {\r\n      setMenuDirIndex(-1)\r\n    } else if (menuDirIndex !== di) {\r\n      setMenuDirIndex(di)\r\n    }\r\n  }\r\n\r\n  const applyDynamicRule = (b, s) => {\r\n    onRuleSelect({ b, s })\r\n    showNotification(`B${b} S${s}`)\r\n  }\r\n\r\n  const applyDynamicShades = ({ name, step, shades }) => {\r\n    onShadesSelect({ shades, isLoop: true })\r\n    showNotification(`${name} ${step}`)\r\n  }\r\n\r\n  const applyBrush = (x, y) => {\r\n    if (isEraser) {\r\n      onErase(x, y)\r\n    } else {\r\n      onDraw(x, y)\r\n    }\r\n  }\r\n\r\n  const toggleEraser = () => {\r\n    setIsEraser(!isEraser)\r\n    showNotification(`Switched to ${isEraser ? 'Brush' : 'Eraser'}`) // bc isEraser still prev value at this point\r\n  }\r\n\r\n  const clear = () => {\r\n    showNotification('Grid cleared')\r\n    onClear()\r\n  }\r\n\r\n  const tempPause = (pause) => {\r\n    onIsPlayingChanged(!pause)\r\n  }\r\n\r\n  const closeOptions = () => {\r\n    setIsOptions(false)\r\n  }\r\n\r\n  if (isMenu) {\r\n    upTrigger = () => applyMenuDirection(0, 2)\r\n    rightTrigger = () => applyMenuDirection(1, 3)\r\n    downTrigger = () => applyMenuDirection(2, 0)\r\n    leftTrigger = () => applyMenuDirection(3, 1)\r\n  } else {\r\n    if (modeIndex === 0) {\r\n      upTrigger = () => applyDynamicShades(extendSeq())\r\n      rightTrigger = () => applyDynamicShades(nextSeq())\r\n      downTrigger = () => applyDynamicShades(shortenSeq())\r\n      leftTrigger = () => applyDynamicShades(prevSeq())\r\n    } else if (modeIndex === 1) {\r\n      upTrigger = () => applyDynamicRule(prevBRl(), currSRl())\r\n      rightTrigger = () => applyDynamicRule(currBRl(), nextSRl())\r\n      downTrigger = () => applyDynamicRule(nextBRl(), currSRl())\r\n      leftTrigger = () => applyDynamicRule(currBRl(), prevSRl())\r\n    } else if (modeIndex === 2) {\r\n      upTrigger = () => triggerTouch(0)\r\n      rightTrigger = () => triggerTouch(1)\r\n      downTrigger = () => triggerTouch(2)\r\n      leftTrigger = () => triggerTouch(3)\r\n    } else {\r\n      upTrigger = () => {}\r\n      rightTrigger = () => {}\r\n      downTrigger = () => {}\r\n      leftTrigger = () => {}\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className='controls-base'>\r\n      <TouchQuickAccess\r\n        isMenu={isMenu}\r\n        isEraser={isEraser}\r\n        modeIndex={modeIndex}\r\n        dirIndex={menuDirIndex}\r\n        touchTrigger={touchTrigger}\r\n        onEraserToggle={toggleEraser}\r\n        onClear={clear}\r\n        onFillSelect={onFillSelect}\r\n        onTempPause={tempPause}\r\n      />\r\n\r\n      <TouchReceiver\r\n        triggerOffset={triggerOffset}\r\n        isTouchOverride={modeIndex === 3 && !isMenu}\r\n        onTap={tap}\r\n        onTapAndHold={tapAndHold}\r\n        onTouch={touch}\r\n        onTouchPointChange={touchPointChange}\r\n        onRelease={release}\r\n        onUpTrigger={upTrigger}\r\n        onRightTrigger={rightTrigger}\r\n        onDownTrigger={downTrigger}\r\n        onLeftTrigger={leftTrigger}\r\n        onSwipeUp={swipeUp}\r\n      />\r\n\r\n      <TouchOptions \r\n        isOptions={isOptions}\r\n        onShowFpsChange={onShowFpsChange}\r\n        onWrapChange={onWrapChange}\r\n        onClose={closeOptions}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default TouchControls","import { DataProvider } from './context/DataContext'\r\nimport { NotificationProvider } from './context/NotificationContext';\r\n\r\n// import Prototype from './prototypes/Prototype'\r\nimport World from './components/World'\r\n\r\n/**\r\n * TODO:\r\n * [ ] FIX FLICKERING ON LOOPED PALETTE\r\n * [ ] OPTIMIZE CANVAS (Google how to)\r\n * [ ] Disable key controls on input focus\r\n * [ ] Add Cellular Automata as starting shape\r\n * [ ] Add limits to palette cells\r\n * [ ] Add Next as right click of Play/Pause\r\n * [ ] Add trailing palette (Start palette once cell dies to black)\r\n * [ ] Divide grid into different rules\r\n *     [ ] Add different colors for different rules\r\n * [ ] Add X, Y offsets to all fillers (like Cross)\r\n * [ ] Replace LMB and RMB with icons\r\n * [ ] Improve cross browser compatibility with line-height: 1 (see md-con and children in palette.css)\r\n * [ ] Add rotate on right mouse click to placable patterns\r\n * [ ] Add change shapes on mouse wheel\r\n * [ ] Age Based loop from a different index (currently from 0)\r\n * [ ] Add dynamic rules on brush off\r\n * [ ] Add recents to palette\r\n * [ ] Save age based shades (not sure where to fit this)\r\n * [ ] Add shadows to each generation of mono color on trails aplha = 0\r\n * [-] Add fullscreen\r\n *     * Done only on key press\r\n * [✓] Fix palette first cell delete when second cell is step cell \r\n * [✓] Implement textfields of palette cells\r\n * [✓] Add wrap to grid \r\n * [✓] Add background image / gradient and alive cells are transparent / dead cells are black (better perormance) \r\n * [✓] Option to 'Keep' earlier iterations in grid (Dont clear canvas)\r\n *     [✓] Maybe \"clear\" the rect with rgba(0, 0, 0, .1) each draw cycle? (or some smaller a;)\r\n * [✓] Add notifications on key pressess\r\n * [x] Add border-radius to palette cells \r\n *     * Not possible to add border radius to border image\r\n */\r\n\r\nfunction App() {\r\n  return (\r\n    // <Prototype />\r\n    <DataProvider>\r\n      <NotificationProvider>\r\n        <World />\r\n      </NotificationProvider>\r\n    </DataProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}