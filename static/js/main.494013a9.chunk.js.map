{"version":3,"sources":["context/Context.js","components/helpers.js","components/shapes.js","components/shades.js","components/grid.js","components/controls/Controls.js","components/resizer/Resizer.js","components/World.js","components/rules.js","components/quick-access/ex-comps.js","components/quick-access/qa-buttons.js","components/quick-access/QaTooltip.js","components/quick-access/QaSlider.js","components/quick-access/ExRules.js","components/quick-access/ExShapes.js","components/quick-access/palette/PrefsPalette.js","components/quick-access/palette/AgePalette.js","components/quick-access/palette/ExPalette.js","components/quick-access/QuickAccess.js","components/receivers/MouseReceiver.js","App.js","reportWebVitals.js","index.js"],"names":["gridW","Math","floor","window","innerWidth","gridH","innerHeight","constructFillers","name","fill","config","init","range","min","fillers","contextState","rules","b","s","shapes","Context","createContext","Provider","children","useState","state","setState","value","setDimensions","_gridW","_gridH","helperNames","print2dArray","arr2d","printStr","y","length","x","console","log","clamp","a","max","lerp","inverseLerp","bX","bY","selectedShape","selectedFill","monoShade","shades","isLooped","ages","ageMax","updateAge","selectedShadesSeq","size","brushSize","grid","neighbours","wrapEnabled","pCells","pOutOfBounds","pX","pY","inverseBg","alphaBg","background","drawBackground","isClearCanvas","hideTimeoutIndex","mouseMoveIndex","timer","ctx","ctxbg","gradientStops","randomInit","createGrid","args","constructGrid","clear","invert","random","vstripes","hstripes","dstripes","rect","checkered","cross","mesh","wraplines","create2dArray","si","wi","w","h","hi","snapshot","push","start","end","astart","xoff","yoff","xstart","ystart","xi","yi","sxi","ax","sx","sy","syi","ay","func","yiter","array","checkBounds","global_S","global_B","setRule","split","map","i","parseInt","checkSurvival","alive","indexOf","checkBirth","setShades","shadeSeq","isLoop","constructShades","row","_updateLoopedAge","_updateAge","_resetAge","isAlive","_incrementAge","_incrementLoopedAge","initGrid","calculateDimensions","createRandom","generateNeighbours","updateDrawBackground","reInitGrid","updateShades","reCreateGrid","drawGrid","fillStyle","fillRect","drawInverse","canvas","width","height","clearRect","drawShaded","drawShapes","setBrushSize","bsz","drawOnGrid","applyBrush","eraseOnGrid","paint","preview","cx","cy","gX","gY","cells","outOfBounds","offX","offY","getShape","setupPreview","shape","setShape","setGridWrap","wrap","setFill","_","setTrails","toString","hf","ox","oy","_x","_y","cX","cY","nei","generation","tl","tr","br","bl","t","r","l","n_center","n_topLtW","n_topRtW","n_botRtW","n_botLtW","n_topW","n_rightW","n_bottomW","n_leftW","n_topLt","n_topRt","n_botRt","n_botLt","n_top","n_right","n_bottom","n_left","top","topRt","right","botRt","bottom","botLt","left","topLt","topW","topRtW","rtTopW","rightW","rtBotW","botRtW","bottomW","botLtW","ltBotW","leftW","ltTopW","topLtW","ExCon","title","isCurrent","className","join","toUpperCase","ExIndicator","props","selectedIndex","canvasRef","useRef","style","useEffect","current","getContext","setAttribute","lineWidth","strokeStyle","points","moveTo","forEach","lineTo","stroke","ref","ExSubTitle","subtitle","fontSize","isScrollable","ExCheckbox","checked","onChange","onClick","QaButton","unhide","animDelay","animDuration","onRightClick","onHoverChanged","hoverRef","animationDuration","animationDelay","onContextMenu","e","preventDefault","onMouseEnter","setTimeout","onMouseLeave","Play","isPlaying","Draw","isDrawing","Speed","Shapes","Rules","Colors","Close","BrushIcon","GridIcon","SpeedIcon","tips","0","1","2","3","4","5","6","QaTooltip","vis","index","midX","path","msgConStyle","tip","d","liveValue","offsetX","QaSlider","icon","onDismiss","trackX","setTrackX","isPressed","setIsPressed","isHovered","setIsHovered","lower","upper","updateTrackX","rounded","round","mouseDown","useCallback","button","document","addEventListener","mouseUp","once","trackStyle","thumbStyle","labelStyle","conClass","thumbClass","labelClass","closeClass","onMouseMove","clientX","onMouseDown","Presets","currentIndex","onSelect","selected","ari","Custom","activeRule","onSelectPresets","onWrapChanged","onChanged","updateRule","nb","ns","undefined","numbers","onNumbersChanged","WrapGrid","setChecked","marginTop","_checked","ActiveRule","RuleOption","Numbers","toggles","setToggles","updateNumbers","n","togs","charAt","text","checkChanged","v","DiamondBtn","btnStyle","btnClass","cbClass","RuleCell","nameCN","ruleCN","ExRules","pindex","onPindexChanged","useContext","arIndex","setArIndex","setActiveRule","pconStyle","transform","updateActiveRule","selectedRule","isCustom","icat","ishape","Fillers","onSliding","setCurrentIndex","ex","onExpanded","exAction","FillCell","hovered","setHovered","pressed","setPressed","backgroundColor","color","borderColor","configAction","stopPropagation","iconClass","onMouseUp","moded","onDown","onUp","FSlide","hov","setHov","setValue","slideClass","type","step","target","MidButton","textStyle","strokeWidth","MidIndic","paths","visible","ExShapes","onShapeSelect","onFillSelect","onClear","isShapes","setIsShapes","Modes","states","onMonoChanged","onGradientChanged","onImageSelect","onAgeConfigure","onTrailsChanged","trails","modesClass","trailsChanged","gradient","src","uploaded","render","Mono","Gradient","updateStops","Image","uploadRef","click","files","URL","createObjectURL","AgeBased","ColorSelection","hex","setHex","hasFocus","setHasFocus","test","substring","onFocus","onBlur","_hex","padding","ModeDropdown","onExpand","baseClass","lblClass","modes","mode","Trails","showInfo","setShowInfo","opacity","PrefsPalette","onBackgroundSelect","onMonoSelect","onGradientSelect","modeEx","setModeEx","modeIndex","setModeIndex","modeStates","setModeStates","nextStates","mono","st","grad","animActive","scrollListenerAttached","lastApplied","list","isTint","outId","Footer","hasBg","onReset","onApply","onAddTint","onAddGradient","onAddLoop","isAdd","setIsAdd","loopName","isControl","isIn","FooterButton","TintCell","onDeleteQueue","onDeleteFinish","contentStyle","hex2rgb","g","getAccent","onAnimationEnd","event","animationName","StepCell","steps","borderImageSource","stepper","diff","LoopCell","isStart","generateShades","prev","next","dr","dg","db","rgb2hex","bigint","slice","ExPalette","setList","setIsLoop","scrollAtEnd","setScrollAtEnd","listRef","createGradient","g1","g2","scrollToEnd","scroll","scrollHeight","behavior","scrollListener","scrollTop","clientHeight","reset","removeEventListener","updatedList","updateTint","deleteIndices","_list","deleteQueuedAtIndex","filter","updateSteps","onBgSelect","onGradSelect","AgePalette","sliderValue","Back","animdelaysJson","sdat","na","brush","speed","QuickAccess","animId","qaHidden","qaExpanded","qaMinimised","qaSlider","onQaHoverChanged","onQaExpanded","onQaMinimised","onQaSlider","onPlayClicked","onDrawClicked","onQaClose","onTempPause","onRuleSelect","onShadesSelect","onBrushChanged","onSizeChanged","onSpeedChanged","qaIndex","setQaIndex","slideId","setSlideId","tipIndex","setTipIndex","tipVis","setTipVis","backVis","setBackVis","exPindices","setExPindices","qaExAction","item","exChangePage","enableBack","showSlider","id","hoverChangedAtIndex","animdelays","closeAnimDuration","pi","drawStartHook","drawEndHook","drawHook","MouseReceiver","isPainting","onBrushDown","onBrushUp","onDraw","onErase","onPaint","onPreview","draw","clientY","erase","qaEnabled","isTempPause","Controls","onIsPlayingChanged","onBrushDownChanged","onPreviewStart","onPreviewEnd","hide","exp","slide","qaState","setQaState","setIsPlaying","setIsDrawing","setIsPainting","updateQaHidden","inState","updateQaMinimised","endPreviewIfIsPainting","updateToggleState","setter","updateIsPlaying","clearTimeout","pause","Resizer","isResizing","onResizing","countdown","setCountdown","resizeHandler","clearInterval","setInterval","p","drawSpeed","isBrushDown","isInverseDraw","isAgeShades","isInverseImage","isShapeShades","isPlayingChanged","update","_update","brushDownChanged","_isBrushDown","reconfigureDraw","shadesSelected","updateBackground","setShadeSeq","triggerDraw","speedChanged","spd","startPreview","previewConfig","endPreview","setBackground","bg","setGradient","stops","initInverseDraw","applyGradient","setupImageBackground","createLinearGradient","addColorStop","resizeBgRedraw","findex","pop","updateGrid","_draw","_fdraw","World","fps","setFps","showFps","bgImgSrc","setBgImgSrc","setIsResizing","canvasbgRef","updateCanvasSize","canvasBg","animationFrameId","fLogIndex","fLogTime","context","contextBg","startTime","Date","now","logFps","requestAnimationFrame","cancelAnimationFrame","sz","_isResizing","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.494013a9.chunk.js","sourcesContent":["import { createContext, useState } from 'react'\n\nimport shapes from './shapes.json'\n\nlet gridW = Math.floor(window.innerWidth / 5)\nlet gridH = Math.floor(window.innerHeight / 5)\n\nconst rules = [\n  { name: 'Conway\\'s Life', b: '3',       s: '23' },\n  { name: '2x2',            b: '36',      s: '125' },\n  { name: '34 Life',        b: '34',      s: '34' },\n  { name: 'Amoeba',         b: '357',     s: '1358' },\n  { name: 'Anneal',         b: '4678',    s: '35678' },\n  { name: 'Assimilation',   b: '345',     s: '4567' },\n  { name: 'Coagulations',   b: '378',     s: '235678' },\n  { name: 'Coral',          b: '3',       s: '45678' },\n  { name: 'Day & Night',    b: '3678',    s: '34678' },\n  { name: 'Diamoeba',       b: '35678',   s: '5678' },\n  { name: 'Gnarl',          b: '1',       s: '1' },\n  { name: 'High Life',      b: '36',      s: '23' },\n  { name: 'Inverse Life',   b: '0123478', s: '34678' },\n  { name: 'Life w/ Death',  b: '3',       s: '012345678' },\n  { name: 'Long Life',      b: '345',     s: '5' },\n  { name: 'Maze',           b: '3',       s: '12345' },\n  { name: 'Mazectric',      b: '3',       s: '1234' },\n  { name: 'Morley',         b: '368',     s: '245' },\n  { name: 'Move',           b: '368',     s: '245' },\n  { name: 'Pseudo Life',    b: '357',     s: '238' },\n  { name: 'Replicator',     b: '1357',    s: '1357' },\n  { name: 'Seeds',          b: '2',       s: '' },\n  { name: 'Serviettes',     b: '234',     s: '' },\n  { name: 'Stains',         b: '3678',    s: '235678' },\n  { name: 'Untitled',       b: '25',      s: '4' },\n  { name: 'Walled Cities',  b: '45678',   s: '2345' }\n]\n\nconst constructFillers = () => {\n  return [\n    { name: 'Chaotic Random', fill: 'random', config: [\n      { name: 'Density', init: 50, range: [1, 99] }\n    ]},\n    { name: 'Ordered Random', fill: 'wraplines', config: [\n      { name: 'Offset A', init: Math.floor(gridW / 20), range: [1, Math.floor(gridW / 2)] },\n      { name: 'Offset B', init: Math.floor(gridW / 15), range: [1, Math.floor(gridW / 2)] }\n    ]},\n    { name: 'Vertical Stripes', fill: 'vstripes', config: [\n      { name: 'Spacing', init: 1, range: [1, Math.floor(gridW / 2)] },\n      { name: 'Thickness', init: 1, range: [1, Math.floor(gridW / 2)] }\n    ]},\n    { name: 'Horizontal Stripes', fill: 'hstripes', config: [\n      { name: 'Spacing', init: 1, range: [1, Math.floor(gridH / 2)] } ,\n      { name: 'Thickness', init: 1, range: [1, Math.floor(gridH / 2)] }\n    ]},\n    { name: 'Diagonal Stripes', fill: 'dstripes', config: [\n      { name: 'Spacing', init: 5, range: [1, Math.floor(Math.min(gridW, gridH) / 2)] },\n      { name: 'Thickness', init: 2, range: [1, Math.floor(Math.min(gridW, gridH) / 2)] }\n    ]},\n    { name: 'Rectangle', fill: 'rect', config: [\n      { name: 'Width', init: gridW, range: [2, gridW] }, \n      { name: 'Height', init: gridH, range: [2, gridH] }\n    ]},\n    { name: 'Checkered', fill: 'checkered', config: [\n      { name: 'Width', init: 4, range: [1, Math.floor(gridW / 2)] },\n      { name: 'Height', init: 4, range: [1, Math.floor(gridH / 2)] }\n    ]},\n    { name: 'Cross', fill: 'cross', config: [\n      { name: 'X Offset', init: 0, range: [-gridW / 2, gridW / 2 - (1 - gridW % 2)] }, // -1 if gridW is even\n      { name: 'Y Offset', init: 0, range: [-gridH / 2, gridH / 2 - (1 - gridH % 2)] }, \n      { name: 'Width', init: 1, range: [1, gridW / 2] }, \n      { name: 'Height', init: 1, range: [1, gridW / 2] }, \n    ]},\n    { name: 'Mesh', fill: 'mesh', config: [\n      { name: 'X Spacing', init: 5, range: [1, Math.floor(gridW / 2)] },\n      { name: 'Y Spacing', init: 5, range: [1, Math.floor(gridH / 2)] },\n      { name: 'X Thickness', init: 1, range: [1, Math.floor(gridW / 2)] },\n      { name: 'X Thickness', init: 1, range: [1, Math.floor(gridH / 2)] }\n    ]},\n  ]\n}\n\nconst fillers = constructFillers()\n\nconst contextState = { gridW, gridH, rules, shapes, fillers }\nconst Context = createContext(contextState)\n\nconst Provider = ({ children }) => {\n  const [state, setState] = useState(contextState)\n\n  const setDimensions = (_gridW, _gridH) => {\n    gridW = _gridW; gridH = _gridH\n    setState({ ...state, fillers: constructFillers() })\n  }\n\n  return (\n    <Context.Provider value={{ ...state, setDimensions }}>\n      {children}\n    </Context.Provider>\n  )\n}\n\nexport { Context, Provider }","const helperNames = []\nwindow.helperNames = helperNames\n\nconst createHelpers = (helpers) => {\n  helpers.forEach(helper => {\n    let name = helper.name\n    if (window[name]) name = `f${name.charAt(0).toUpperCase()}${name.substring(1)}`\n    window[name] = helper\n    helperNames.push(name)\n  })\n}\n\nwindow.print2dArray = (arr2d) => {\n  let printStr = \"\"\n  for (let y = 0; y < arr2d.length; y++) {\n    for (let x = 0; x < arr2d[y].length; x++) {\n      printStr += `${arr2d[y][x]} `\n    }\n    printStr += '\\n'\n  }\n  console.log(printStr)\n}\n\nMath.clamp = (x, a, b) => Math.min(Math.max(x, a), b)\nMath.lerp = (a, b, x) => a + (b - a) * Math.clamp(x, 0, 1)\nMath.inverseLerp = (a, b, x) => Math.clamp((x - a) / (b - a), 0, 1)\n\nexport { createHelpers }","let bX, bY, selectedShape, selectedFill\n\nconst randomInit = [\n  'random', 'vstripes', 'hstripes', 'dstripes', \n  'rect','checkered', 'cross', 'mesh', 'wraplines'\n]\n\nconst setBounds = (x, y) => {\n  bX = x\n  bY = y\n}\n\nconst setShape = shape => {\n  selectedShape = shape\n}\n\nconst getShape = (gX, gY) => {\n  const cells = []\n  let outOfBounds = false\n  for (let [offX, offY] of selectedShape) {\n    const x = gX + offX\n    const y = gY + offY\n    if (checkBounds(x, y)) {\n      cells.push([x, y])\n    } else {\n      if (!outOfBounds) {\n        outOfBounds = true\n      }\n    }\n  }\n\n  return { cells, outOfBounds }\n}\n\nconst createGrid = ({ fill, grid, args }) => {\n  selectedFill = fill\n  return constructGrid(fill, grid, args)\n}\n\nconst createRandom = ({ grid }) => {\n  const fill = randomInit[Math.floor(Math.random() * randomInit.length)]\n  console.log(`Created random fill: ${fill}`)\n  return createGrid({ fill, grid })\n}\n\nconst reCreateGrid = ({ grid }) => {\n  return constructGrid(selectedFill, grid)\n}\n\nconst constructGrid = (fill, grid, args) => {\n  switch (fill) {\n    case 'clear': return clear()\n    case 'invert': return invert(grid)\n    case 'random': return random(args)\n    case 'vstripes': return vstripes(args)\n    case 'hstripes': return hstripes(args)\n    case 'dstripes': return dstripes(args)\n    case 'rect': return rect(args)\n    case 'checkered': return checkered(args)\n    case 'cross': return cross(args)\n    case 'mesh': return mesh(args)\n    case 'wraplines': return wraplines(args)\n  }\n}\n\nconst clear = () => create2dArray(() => 0)\nconst invert = (grid) => create2dArray(({ x, y }) => 1 - grid[y][x])\n\nconst random = (args = [50]) => create2dArray(() => {\n  return Math.random() < args[0] / 100 ? 1 : 0\n})\n\nconst vstripes = (args = [1, 1]) => {\n  const [s, w] = args\n  let si, wi, a\n  return create2dArray(() => {\n    if (a) {\n      if (wi < w) { wi += 1; a = 1 } \n      else { si = 1; a = 0 }\n    } else {\n      if (si < s) { si += 1; a = 0 } \n      else { a = 1; wi = 1 }\n    }\n    return a\n  }, () => {\n    a = 0; wi = 0; si = 0\n  })\n}\n\nconst hstripes = (args = [1, 1]) => {\n  const [s, h] = args\n  let si = 0, hi = 0, a = 0\n  return create2dArray(() => {\n    return a\n  }, () => {\n    if (a) {\n      if (hi < h) { hi += 1; a = 1 }\n      else { si = 1; a = 0 }\n    } else {\n      if (si < s) { si += 1; a = 0 }\n      else { a = 1; hi = 1 }\n    }\n  })\n}\n\nconst dstripes = (args = [1, 1]) => {\n  /* Lazy code. Need to find better alternative */\n  const [s, w] = args\n  const snapshot = []\n  let wi = 0, si = 0, di = 0, a = 0\n  return create2dArray(({ y }) => {\n    if (y === 0) snapshot.push({ wi, si, a })\n    if (a) {\n      if (wi < w) { wi += 1; a = 1 } \n      else { si = 1; a = 0 }\n    } else {\n      if (si < s) { si += 1; a = 0 } \n      else { a = 1; wi = 1 }\n    }\n    return a\n  }, ({ y }) => {\n    if (y > 0) {\n      wi = snapshot[y].wi\n      si = snapshot[y].si\n      a = snapshot[y].a\n    }\n  })\n}\n\nconst rect = (args = [bX, bY]) => {\n  const [w, h] = args\n  const start = { \n    x: Math.floor((bX - w) / 2), \n    y: Math.floor((bY - h) / 2)\n  }\n  const end = { x: start.x + w - 1, y: start.y + h - 1 }\n  const grid = create2dArray(() => 0)\n  for (let wi = start.x; wi <= end.x; wi++) {\n    grid[start.y][wi] = 1\n    grid[end.y][wi] = 1\n  }\n  for (let hi = start.y; hi <= end.y; hi++) {\n    grid[hi][start.x] = 1\n    grid[hi][end.x] = 1\n  }\n  return grid\n}\n\nconst checkered = (args = [4, 4]) => {\n  const [w, h] = args\n  let wi = 0, hi = 0, astart = 0, a = astart\n  return create2dArray(() => {\n    if (wi < w) { wi += 1 }\n    else { wi = 1; a = 1 - a }\n    return a\n  }, () => {\n    if (hi < h) { hi += 1 }\n    else { hi = 1; astart = 1 - astart }\n    a = astart; wi = 0\n  })\n}\n\nconst cross = (args = [0, 0, bX, bY]) => {\n  const [xoff, yoff, w, h] = args\n  const xstart = Math.floor(bX / 2) + xoff - Math.floor(w / 2)\n  const ystart = Math.floor(bY / 2) + yoff - Math.floor(h / 2)\n  const grid = create2dArray(() => 0)\n  for (let xi = 0; xi < bX; xi++) {\n    for (let hi = 0; hi < h; hi++) {\n      if (ystart + hi < bY) {\n        grid[ystart + hi][xi] = 1\n      }\n    }\n  }\n  for (let yi = 0; yi < bY; yi++) {\n    for (let wi = 0; wi < w; wi++) {\n      if (xstart + wi < bX) {\n        grid[yi][xstart + wi] = 1\n      }\n    }\n  }\n  return grid\n}\n\nconst mesh = (args = [1, 1, 1, 1]) => {\n  const [sx, sy, w, h] = args\n  let sxi, wi, ax\n  let syi = 0, hi = 0, ay = 0\n  return create2dArray(() => {\n    if (ay) {\n      return 1\n    } else if (ax) {\n      if (wi < w) { wi += 1; ax = 1 }\n      else { sxi = 1; ax = 0 }\n    } else {\n      if (sxi < sx) { sxi += 1; ax = 0 }\n      else { ax = 1; wi = 1 }\n    }\n    return ax\n  }, () => {\n    ax = 0; wi = 0; sxi = 0\n    if (ay) {\n      if (hi < h) { hi += 1; ay = 1 }\n      else { syi = 1; ay = 0 }\n    } else {\n      if (syi < sy) { syi += 1; ay = 0 }\n      else { ay = 1; hi = 1 }\n    }\n  })\n}\n\nconst wraplines = (args = [1, 1]) => {\n  const [w, s] = args\n  let si = 0, wi = 0, a = 0\n  return create2dArray(() => {\n    if (a) {\n      if (wi < w) { wi += 1; a = 1 } \n      else { si = 1; a = 0 }\n    } else {\n      if (si < s) { si += 1; a = 0 } \n      else { a = 1; wi = 1 }\n    }\n    return a\n  })\n}\n\nconst create2dArray = (func, yiter = () => {}) => {\n  const array = []\n  for (let y = 0; y < bY; y++) {\n    array[y] = []\n    yiter({ y })\n    for (let x = 0; x < bX; x++) {\n      array[y][x] = func({ x, y })\n    }\n  }\n  return array\n}\n\n/* Yes this is a duplicate of grid.js checkBounds */\nconst checkBounds = (x, y) => x > -1 && y > -1 && x < bX && y < bY\n\nexport { setBounds, setShape, getShape, createGrid, reCreateGrid, createRandom }","let monoShade, shades, isLooped, ages, ageMax, updateAge, selectedShadesSeq\n\nconst getShade = (x, y) => shades[ages[y][x]]\n\nconst setShades = ({ shadeSeq, isLoop, grid }) => {\n  selectedShadesSeq = shadeSeq\n  isLooped = isLoop\n  constructShades(shadeSeq, grid)\n}\n\nconst updateShades = ({ grid }) => {\n  constructShades(selectedShadesSeq, grid)\n}\n\nconst resetAges = () => ages = ages ? ages.map(row => row.map(_ => 0)) : []\n\nconst constructShades = (shadeSeq, grid) => {\n  if (shadeSeq.length > 1) {\n    shades = ['age starts from index 1', ...shadeSeq]\n    ageMax = shades.length - 1\n    ages = grid.map(row => row.map(i => 0))\n    updateAge = isLooped ? _updateLoopedAge : _updateAge\n  } else {\n    monoShade = shadeSeq[0]\n    updateAge = () => {}\n  }\n}\n\nconst _incrementAge = (x, y) => {\n  if (ages[y][x] < ageMax) {\n    ages[y][x] += 1\n  }\n}\n\nconst _incrementLoopedAge = (x, y) => {\n  if (ages[y][x] < ageMax) {\n    ages[y][x] += 1\n  } else {\n    ages[y][x] = 0\n  }\n}\n\nconst _resetAge = (x, y) => {\n  if (ages[y][x] > 0) {\n    ages[y][x] = 0\n  }\n}\n\nconst _updateAge = (isAlive, x, y) => {\n  if (isAlive) _incrementAge(x, y)\n  else _resetAge(x, y)\n}\n\nconst _updateLoopedAge = (isAlive, x, y) => {\n  if (isAlive) _incrementLoopedAge(x, y)\n  else _resetAge(x, y)\n}\n\nexport { monoShade, getShade, setShades, updateShades, resetAges, updateAge }","import { createHelpers } from './helpers'\nimport { setBounds, setShape, getShape, createGrid, reCreateGrid, createRandom } from './shapes'\nimport { setRule, checkSurvival, checkBirth } from './rules'\nimport { monoShade, getShade, setShades, updateShades, resetAges, updateAge } from './shades'\n\nlet gridW, gridH, size, brushSize\nlet grid, neighbours, wrapEnabled\nlet pCells, pOutOfBounds, pX, pY // pX, pY = Current preview cell coordinates\nlet inverseBg, alphaBg, background, drawBackground, isClearCanvas // background = inverseBg + alphaBg\n\n\n/* --- Exports --- */\n\nconst initGrid = () => {\n  size = 5\n  brushSize = 25\n  calculateDimensions()\n\n  wrapEnabled = false\n\n  grid = createRandom({ grid })\n  generateNeighbours(gridW, gridH)\n\n  alphaBg = '00'\n  background = inverseBg + alphaBg // inverseBg initialised in World init\n  setShades({ shadeSeq: ['#ffffff'], grid })\n\n  isClearCanvas = true\n  updateDrawBackground()\n}\n\nconst reInitGrid = () => {\n  calculateDimensions()\n  grid = reCreateGrid({ grid })\n  updateShades({ grid })\n  generateNeighbours(gridW, gridH)\n\n  return { gridW, gridH }\n}\n\nconst updateGrid = () => {\n  let isAlive\n  const pop = []\n  for (let yi = 0; yi < grid.length; yi++) {\n    const row = []\n    for (let xi = 0; xi < grid[yi].length; xi++) {\n      const alive = neighbours[yi][xi](xi, yi)\n      if (grid[yi][xi]) {\n        isAlive = checkSurvival(alive, xi, yi)\n      } else {\n        isAlive = checkBirth(alive, xi, yi)\n      }\n      row.push(isAlive)\n      updateAge(isAlive, xi, yi)\n    }\n    pop.push(row)\n  }\n  grid = pop\n}\n\nconst drawGrid = (ctx) => {\n  drawBackground(ctx)\n  ctx.fillStyle = monoShade\n  for (let yi = 0; yi < grid.length; yi++) {\n    for (let xi = 0; xi < grid[yi].length; xi++) {\n      if (grid[yi][xi]) {\n        ctx.fillRect(xi * size, yi * size, size, size)\n      }\n    }\n  }\n}\n\nconst drawInverse = (ctx) => {\n  ctx.fillStyle = inverseBg\n  ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height)\n  for (let yi = 0; yi < grid.length; yi++) {\n    for (let xi = 0; xi < grid[yi].length; xi++) {\n      if (grid[yi][xi]) {\n        ctx.clearRect(xi * size, yi * size, size, size)\n      }\n    }\n  }\n}\n\nconst drawShaded = (ctx) => {\n  drawBackground(ctx)\n  for (let yi = 0; yi < grid.length; yi++) {\n    for (let xi = 0; xi < grid[yi].length; xi++) {\n      if (grid[yi][xi]) {\n        ctx.fillStyle = getShade(xi, yi)\n        ctx.fillRect(xi * size, yi * size, size, size)\n      }\n    }\n  }\n}\n\nconst drawShapes = (ctx) => {\n  ctx.fillStyle = '#000000'\n  ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height)\n  ctx.fillStyle = '#a2a2a2'\n  for (let yi = 0; yi < grid.length; yi++) {\n    for (let xi = 0; xi < grid[yi].length; xi++) {\n      if (grid[yi][xi]) {\n        ctx.fillRect(xi * size, yi * size, size, size)\n      }\n    }\n  }\n  ctx.fillStyle = pOutOfBounds ? '#ff3434' : '#ffffff'\n  for (let i = 0; i < pCells.length; i++) {\n    const [x, y] = pCells[i]\n    ctx.fillRect(x * size, y * size, size, size)\n  }\n}\n\nconst setBrushSize = bsz => brushSize = bsz\n\nconst drawOnGrid = (x, y) => applyBrush(x, y, 1)\nconst eraseOnGrid = (x, y) => applyBrush(x, y, 0)\n\nconst paint = () => {\n  if (!pOutOfBounds) {\n    for (let i = 0; i < pCells.length; i++) {\n      const [x, y] = pCells[i]\n      grid[y][x] = 1\n    }\n  }\n}\n\nconst preview = (x, y) => { \n  const cx = Math.min(Math.floor(x / size), gridW - 1)\n  const cy = Math.min(Math.floor(y / size), gridH - 1)\n  if (cx !== pX || cy !== pY) {\n    pX = cx; pY = cy\n    const { cells, outOfBounds } = getShape(cx, cy)\n    pCells = cells; pOutOfBounds = outOfBounds\n  }\n}\n\nconst setSize = (sz) => {\n  if (sz !== size) {\n    size = sz\n    reInitGrid()\n  }\n\n  return { gridW, gridH }\n}\n\nconst setupPreview = shape => {\n  setShape(shape)\n  pX = -1; pY = -1\n  pCells = []; pOutOfBounds = false\n}\n\nconst setGridWrap = wrap => {\n  wrapEnabled = wrap\n  generateNeighbours(gridW, gridH)\n}\n\nconst setFill = (fill, args) => {\n  grid = createGrid({ fill, grid, args })\n  resetAges()\n}\n\nconst setInverseBg = invbg => {\n  inverseBg = invbg\n  background = inverseBg + alphaBg\n}\n\nconst setShadeSeq = ({ shades, isLoop }) => {\n  setShades({ shadeSeq: shades, isLoop, grid })\n}\n\nconst setTrails = i => {\n  i = 255 - i\n  alphaBg = `${i < 16 ? '0' : ''}${i.toString(16)}`\n  background = inverseBg + alphaBg\n\n  if (i < 255) {\n    if (isClearCanvas) {\n      isClearCanvas = false\n      updateDrawBackground()\n    }\n  } else {\n    /* Cause you can hit 255 only once */\n    isClearCanvas = true\n    updateDrawBackground()\n  }\n}\n\n/* --- End Exports --- */\n\nconst setDimensions = (_gridW, _gridH) => {\n  gridW = _gridW\n  gridH = _gridH\n\n  setBounds(gridW, gridH)\n}\n\nconst calculateDimensions = () => {\n  setDimensions(\n    Math.floor(window.innerWidth / size),\n    Math.floor(window.innerHeight / size)\n  )\n\n  console.log(`Calculated gridW: ${gridW}, gridH: ${gridH}`)\n}\n\nconst updateDrawBackground = () => {\n  drawBackground = isClearCanvas ? ctx => {\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height)\n  } : ctx => {\n    ctx.fillStyle = background\n    ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height)\n  }\n}\n\nconst applyBrush = (x, y, b) => {\n  const bsz = Math.max(1, Math.floor(brushSize / size))\n  const cx = Math.min(Math.floor(x / size), gridW - 1)\n  const cy = Math.min(Math.floor(y / size), gridH - 1)\n  if (bsz > 1) {\n    const hf = Math.floor(bsz / 2)\n    const ox = cx - hf\n    const oy = cy - hf\n    for (let xi = 0; xi < bsz; xi++) {\n      for (let yi = 0; yi < bsz; yi++) {\n        const _x = ox + xi\n        const _y = oy + yi\n        if (checkBounds(_x, _y)) {\n          grid[_y][_x] = b\n        }\n      }\n    }\n  } else {\n    grid[cy][cx] = b\n  }\n}\n\nconst generateNeighbours = (bX, bY) => {\n  const cX = bX - 1\n  const cY = bY - 1\n  const nei = []\n  const generation = (tl, tr, br, bl, t, r, b, l) => {\n    for (let y = 0; y < bY; y++) {\n      nei[y] = []\n      for (let x = 0; x < bX; x++) {\n        if (x === 0 && y === 0) nei[y][x] = tl\n        else if (x === cX && y === 0) nei[y][x] = tr\n        else if (x === cX && y === cY) nei[y][x] = br\n        else if (x === 0 && y === cY) nei[y][x] = bl\n        else if (y === 0) nei[y][x] = t\n        else if (x === cX) nei[y][x] = r\n        else if (y === cY) nei[y][x] = b\n        else if (x === 0) nei[y][x] = l\n        else nei[y][x] = n_center\n      }\n    }\n  }\n  if (!wrapEnabled) generation(n_topLt, n_topRt, n_botRt, n_botLt, n_top, n_right, n_bottom, n_left)\n  else generation(n_topLtW, n_topRtW, n_botRtW, n_botLtW, n_topW, n_rightW, n_bottomW, n_leftW) \n  neighbours = nei\n}\n\n/* --- NAMING ---\n * topRt    - Top Right\n * topRtW   - Top Right Wraped\n * topRtWC  - Top Right Wraped Corner \n * rtTopW   - Right Top Wraped\n * 'Corners' and 'topRtW/rtTopW separations' are extra checks that arise because of wraping\n */\n\nconst top = (x, y) => grid[y - 1][x]\nconst topRt = (x, y) => grid[y - 1][x + 1]\nconst right = (x, y) => grid[y][x + 1]\nconst botRt = (x, y) => grid[y + 1][x + 1]\nconst bottom = (x, y) => grid[y + 1][x]\nconst botLt = (x, y) => grid[y + 1][x - 1]\nconst left = (x, y) => grid[y][x - 1]\nconst topLt = (x, y) => grid[y - 1][x - 1]\n\nconst topW = (x) => grid[gridH - 1][x]\nconst topRtW = (x) => grid[gridH - 1][x + 1]\nconst topRtWC = () => grid[gridH - 1][0]\nconst rtTopW = (_, y) => grid[y - 1][0]\nconst rightW = (_, y) => grid[y][0]\nconst rtBotW = (_, y) => grid[y + 1][0]\nconst botRtWC = () => grid[0][0]\nconst botRtW = (x) => grid[0][x + 1]\nconst bottomW = (x) => grid[0][x]\nconst botLtW = (x) => grid[0][x - 1]\nconst botLtWC = () => grid[0][gridW - 1]\nconst ltBotW = (_, y) => grid[y + 1][gridW - 1]\nconst leftW = (_, y) => grid[y][gridW - 1]\nconst ltTopW = (_, y) => grid[y - 1][gridW - 1]\nconst topLtWC = () => grid[gridH - 1][gridW - 1]\nconst topLtW = (x) => grid[gridH - 1][x - 1]\n\nconst n_top = (x, y) => right(x, y) + botRt(x, y) + bottom(x, y) + botLt(x, y) + left(x, y)\nconst n_topRt = (x, y) => bottom(x, y) + botLt(x, y) + left(x, y)\nconst n_right = (x, y) => top(x, y) + bottom(x, y) + botLt(x, y) + left(x, y) + topLt(x, y)\nconst n_botRt = (x, y) => top(x, y) + left(x, y) + topLt(x, y)\nconst n_bottom = (x, y) => top(x, y) + topRt(x, y) + right(x, y) + left(x, y) + topLt(x, y)\nconst n_botLt = (x, y) => top(x, y) + topRt(x, y) + right(x, y)\nconst n_left = (x, y) => top(x, y) + topRt(x, y) + right(x, y) + botRt(x, y) + bottom(x, y)\nconst n_topLt = (x, y) => right(x, y) + botRt(x, y) + bottom(x, y)\nconst n_center = (x, y) => top(x, y) + topRt(x, y) + right(x, y) + botRt(x, y) + bottom(x, y) + botLt(x, y) + left(x, y) + topLt(x, y)\n\nconst n_topW = (x, y) => topW(x, y) + topRtW(x, y) + right(x, y) + botRt(x, y) + bottom(x, y) + botLt(x, y) + left(x, y) + topLtW(x, y)\nconst n_topRtW = (x, y) => topW(x, y) + topRtWC(x, y) + rightW(x, y) + rtBotW(x, y) + bottom(x, y) + botLt(x, y) + left(x, y) + topLtW(x, y)\nconst n_rightW = (x, y) => top(x, y) + rtTopW(x, y) + rightW(x, y) + rtBotW(x, y) + bottom(x, y) + botLt(x, y) + left(x, y) + topLt(x, y)\nconst n_botRtW = (x, y) => top(x, y) + rtTopW(x, y) + rightW(x, y) + botRtWC(x, y) + bottomW(x, y) + botLtW(x, y) + left(x, y) + topLt(x, y)\nconst n_bottomW = (x, y) => top(x, y) + topRt(x, y) + right(x, y) + botRtW(x, y) + bottomW(x, y) + botLtW(x, y) + left(x, y) + topLt(x, y)\nconst n_botLtW = (x, y) => top(x, y) + topRt(x, y) + right(x, y) + botRtW(x, y) + bottomW(x, y) + botLtWC(x, y) + leftW(x, y) + ltTopW(x, y)\nconst n_leftW = (x, y) => top(x, y) + topRt(x, y) + right(x, y) + botRt(x, y) + bottom(x, y) + ltBotW(x, y) + leftW(x, y) + ltTopW(x, y)\nconst n_topLtW = (x, y) => topW(x, y) + topRtW(x, y) + right(x, y) + botRt(x, y) + bottom(x, y) + ltBotW(x, y) + leftW(x, y) + topLtWC(x, y)\n\nconst checkBounds = (x, y) => x > -1 && y > -1 && x < gridW && y < gridH\n\n// createHelpers([])\n\nexport { \n  initGrid, reInitGrid, updateGrid, drawGrid, drawInverse, drawShaded, drawShapes, drawOnGrid, eraseOnGrid, paint, preview,\n  setBrushSize, setSize, setupPreview, setFill, setGridWrap, setRule, setShadeSeq, setInverseBg, setTrails\n}","import { useState, useEffect } from 'react'\n\nimport QuickAccess from '../quick-access/QuickAccess'\nimport MouseReceiver from '../receivers/MouseReceiver'\n\nimport './controls.css'\n\nlet qaEnabled = true, isTempPause = false\nlet hideTimeoutIndex, mouseMoveIndex\n\nconst Controls = ({ \n  onIsPlayingChanged, onBrushDownChanged, onDraw, onErase, onPaint, onPreview,\n\n  onPreviewStart, onPreviewEnd, onFillSelect, onClear, onRuleSelect, onWrapChanged, \n  onBgSelect, onShadesSelect, onGradSelect, onImageSelect, onTrailsChanged,\n\n  onBrushChanged, onSizeChanged, onSpeedChanged\n}) => {\n  const [qaState, setQaState] = useState({\n    prev: 'out', next: 'in', hide: false, exp: false, slide: false, min: false\n  })\n\n  const [isPlaying, setIsPlaying] = useState(true)\n  const [isDrawing, setIsDrawing] = useState(false)\n  const [isPainting, setIsPainting] = useState(false)\n\n  const updateQaHidden = (qaHidden) => {\n    const inState = qaState.min ? 'min' : 'in'\n    if (qaHidden) {\n      setQaState({ ...qaState, prev: inState, next: 'out', hide: true })\n    } else {\n      setQaState({ ...qaState, prev: 'out', next: inState, hide: false })\n    }\n  }\n\n  const updateQaExpanded = (qaExpanded) => {\n    if (qaExpanded) {\n      setQaState({ ...qaState, prev: 'in', next: 'ex', exp: true })\n    } else {\n      setQaState({ ...qaState, prev: 'ex', next: 'in', exp: false })\n    }\n  }\n\n  const updateQaSlider = (qaSlider) => {\n    if (qaSlider) {\n      if (qaState.exp) {\n        setQaState({ ...qaState, prev: 'ex', next: 'sl', exp: false, slide: true })\n      } else {\n        setQaState({ ...qaState, prev: 'in', next: 'sl', slide: true })\n      }\n    } else {\n      setQaState({ ...qaState, prev: 'sl', next: 'in', slide: false })\n    }\n  }\n\n  const updateQaMinimised = (qaMinimised) => {\n    if (qaMinimised) {\n      const inState = qaState.exp ? 'ex' : 'in'\n      setQaState({ ...qaState, prev: inState, next: 'min', min: true, exp: false })\n    } else {\n      setQaState({ ...qaState, prev: 'min', next: 'in', min: false })\n      endPreviewIfIsPainting()\n    }\n  }\n\n  const updateToggleState = (value, setter, event) => {\n    setter(value)\n    event(value)\n  }\n\n  const updateIsPlaying = () => updateToggleState(!isPlaying, setIsPlaying, onIsPlayingChanged)\n  const updateIsDrawing = () => updateToggleState(!isDrawing, setIsDrawing, () => {})\n\n  const mouseMove = () => {\n    /* Maybe do it a different way. This just seems like cheating */\n    if (!(qaState.exp || qaState.slide)) {\n      if (qaState.hide) {\n        if (qaEnabled) {\n          updateQaHidden(false)\n          hideTimeoutIndex = setTimeout(() => updateQaHidden(true), 5000)\n        }\n      } else {\n        if (mouseMoveIndex % 20 === 0) {\n          clearTimeout(hideTimeoutIndex)\n          hideTimeoutIndex = setTimeout(() => updateQaHidden(true), 5000)\n        }\n        mouseMoveIndex += 1\n      }\n    }\n  }\n\n  const qaHoverChanged = (hovered) => {\n    if (hovered) clearTimeout(hideTimeoutIndex)\n    else if (!(qaState.exp || qaState.slide)) {\n      if (qaEnabled) {\n        hideTimeoutIndex = setTimeout(() => updateQaHidden(true), 5000)\n      }\n    }\n  }\n\n  const hideQa = () => {\n    updateQaHidden(true)\n    qaEnabled = false\n    setTimeout(() => qaEnabled = true, 1000)\n  }\n\n  /* Hooking brushDownChanged to trigger draw-on-every-update when sliding filler modifiers */\n  const tempPause = (pause) => {\n    if (isPlaying) {\n      updateIsPlaying()\n      onBrushDownChanged(true)\n      isTempPause = true \n    } else {\n      if (isTempPause) {\n        updateIsPlaying()\n        onBrushDownChanged(false)\n        isTempPause = false\n      }\n    }\n  }\n\n  const shapeSelected = shape => {\n    setIsPainting(true)\n    updateQaMinimised(true)\n    onPreviewStart(shape)\n  }\n\n  const endPreviewIfIsPainting = () => {\n    if (isPainting) {\n      setIsPainting(false)\n      onPreviewEnd()\n    }\n  }\n\n  useEffect(() => {\n    mouseMoveIndex = 0\n  }, [])\n\n  const { prev, next, hide, exp, slide, min } = qaState\n\n  return (\n    <div className='controls-base'>\n      <MouseReceiver \n        isDrawing={isDrawing} \n        isPainting={isPainting}\n        onBrushDown={() => onBrushDownChanged(true)}\n        onBrushUp={() => onBrushDownChanged(false)}\n        onDraw={onDraw}\n        onErase={onErase}\n        onPaint={onPaint}\n        onPreview={onPreview}\n        onMouseMove={mouseMove}\n      />\n\n      <QuickAccess\n        animId={`${prev}2${next}`}\n        qaHidden={hide}\n        qaExpanded={exp}\n        qaMinimised={min}\n        qaSlider={slide}\n        isPlaying={isPlaying}\n        isDrawing={isDrawing}\n        onQaHoverChanged={qaHoverChanged}\n        onQaExpanded={updateQaExpanded}\n        onQaMinimised={updateQaMinimised}\n        onQaSlider={updateQaSlider}\n        onPlayClicked={updateIsPlaying} \n        onDrawClicked={updateIsDrawing}\n        onQaClose={hideQa}\n        onTempPause={tempPause}\n        onShapeSelect={shapeSelected}\n        onFillSelect={onFillSelect}\n        onClear={onClear}\n        onRuleSelect={onRuleSelect}\n        onWrapChanged={onWrapChanged}\n        onBgSelect={onBgSelect}\n        onShadesSelect={onShadesSelect}\n        onGradSelect={onGradSelect}\n        onImageSelect={onImageSelect}\n        onTrailsChanged={onTrailsChanged}\n        onBrushChanged={onBrushChanged}\n        onSizeChanged={onSizeChanged}\n        onSpeedChanged={onSpeedChanged}\n      />\n    </div>\n  )\n}\n\nexport default Controls","import React, { useEffect, useState } from 'react'\nimport { GiResize } from \"react-icons/gi\"\nimport './Resizer.css'\n\nconst COUNTDOWN_MAX = 1\nlet timer\n\nconst Resizer = ({ isResizing, onResizing }) => {\n  const [countdown, setCountdown] = useState(COUNTDOWN_MAX)\n\n  useEffect(() => {\n    const resizeHandler = () => {\n      onResizing(true)\n      setCountdown(COUNTDOWN_MAX)\n\n      if (timer) {\n        clearInterval(timer)\n      }\n\n      timer = setInterval(() => {\n        setCountdown(p => p - 1)\n      }, 1000)\n    }\n\n    window.addEventListener(\"resize\", resizeHandler)\n    return () => window.removeEventListener(\"resize\", resizeHandler)\n  }, [])\n\n  useEffect(() => {\n    if (countdown === 0) {\n      clearInterval(timer)\n      timer = null\n      onResizing(false)\n    }\n  }, [countdown])\n\n  if (isResizing) {\n    return (\n      <div className='resizer-base fill'>\n        <GiResize className='resizer-icon center' />\n      </div>\n    )\n  } else {\n    return null\n  }\n}\n\nexport default Resizer\n","import { useRef, useState, useEffect, useContext } from 'react'\nimport { \n  initGrid, updateGrid, drawGrid, drawInverse, drawShaded, drawShapes, drawOnGrid, eraseOnGrid, paint, preview,\n  setBrushSize, setSize, setupPreview, setFill, setRule, setGridWrap, setShadeSeq, setInverseBg, setTrails, reInitGrid\n} from './grid.js'\n\nimport Controls from './controls/Controls'\nimport { Context } from '../context/Context'\nimport Resizer from './resizer/Resizer.js'\n\nlet ctx\nlet ctxbg, background, gradientStops\n\nlet speed = 4, drawSpeed = speed\nlet isBrushDown = false, isInverseDraw = false, isAgeShades = false, isInverseImage = false, isShapeShades = false\n\nconst World = (props) => {\n  const [fps, setFps] = useState(0)\n  const [showFps, setShowFps] = useState(false)\n  const [bgImgSrc, setBgImgSrc] = useState('')\n  const [isResizing, setIsResizing] = useState(false)\n\n  const canvasRef = useRef(null)\n  const canvasbgRef = useRef(null)\n  \n  const { setDimensions } = useContext(Context)\n\n  const sizeChanged = size => {\n    const { gridW, gridH } = setSize(size)\n    setDimensions(gridW, gridH)\n  }\n\n  const setBgImage = src => {\n    if (src) {\n      isInverseImage = true\n      setBgImgSrc(src)\n      setupImageBackground()\n    }\n  }\n\n  const windowResized = (_isResizing) => {\n    if (_isResizing !== isResizing) {\n      setIsResizing(_isResizing)\n      isPlayingChanged(!_isResizing)\n\n      if (!_isResizing) {\n        /* Resizing finished */\n        \n        updateCanvasSize()\n        resizeBgRedraw()\n        \n        const { gridW, gridH } = reInitGrid()\n        setDimensions(gridW, gridH)\n      }\n    }\n  }\n\n  const updateCanvasSize = () => {\n    const canvas = canvasRef.current\n    const canvasBg = canvasbgRef.current\n\n    canvas.setAttribute('width', window.innerWidth)\n    canvas.setAttribute('height', window.innerHeight)\n    canvasBg.setAttribute('width', window.innerWidth)\n    canvasBg.setAttribute('height', window.innerHeight)\n  }\n\n  useEffect(() => {\n    const context = canvasRef.current.getContext('2d')\n    const contextBg = canvasbgRef.current.getContext('2d')\n\n    const startTime = Date.now()\n    let findex, animationFrameId, fLogIndex, fLogTime\n\n    const init = () => {\n      findex = 0\n      fLogIndex = 0\n      fLogTime = startTime\n\n      ctx = context\n      ctxbg = contextBg\n\n      updateCanvasSize()\n      setBackground('#000000')\n    }\n\n    const render = () => {\n      findex += 1\n\n      update(findex)\n      draw(context, findex)\n\n      logFps()\n      animationFrameId = window.requestAnimationFrame(render)\n    }\n\n    const logFps = () => {\n      if (showFps) {\n        const now = Date.now()\n        if (now - fLogTime < 1000) {\n          fLogIndex += 1\n        } else {\n          setFps(Math.floor(fLogIndex / (now - fLogTime) * 1000))\n          fLogTime = now\n          fLogIndex = 0\n        }\n      }\n    }\n\n    init()\n    render()\n\n    return () => {\n      window.cancelAnimationFrame(animationFrameId)\n    }\n  }, [])\n\n  return (\n    <div className='world'>\n      <img className='bg-img' src={bgImgSrc} />\n\n      <canvas ref={canvasbgRef} {...props} />\n      <canvas ref={canvasRef} {...props} />\n\n      {showFps ? <div className='fpsCounter'>{fps}</div> : <div />}\n\n      <Controls\n        onIsPlayingChanged={isPlayingChanged} \n        onBrushDownChanged={brushDownChanged}\n        onDraw={drawOnGrid}\n        onErase={eraseOnGrid}\n        onPaint={paint}\n        onPreview={preview}\n\n        onPreviewStart={startPreview}\n        onPreviewEnd={endPreview}\n        onFillSelect={setFill}\n        onClear={clear}\n        onRuleSelect={setRule}\n        onWrapChanged={setGridWrap}\n        onBgSelect={setBackground}\n        onShadesSelect={shadesSelected}\n        onGradSelect={setGradient}\n        onImageSelect={setBgImage}\n        onTrailsChanged={setTrails}\n\n        onSizeChanged={sizeChanged}\n        onSpeedChanged={speedChanged}\n        onBrushChanged={setBrushSize}\n      />\n\n      <Resizer isResizing={isResizing} onResizing={windowResized} />\n    </div>\n  )\n}\n\n/* --- CONTROLS --- */\n\nconst isPlayingChanged = (isPlaying) => {\n  update = isPlaying ? _update : () => {}\n}\n\nconst brushDownChanged = (_isBrushDown) => {\n  isBrushDown = _isBrushDown\n  reconfigureDraw()\n}\n\nconst shadesSelected = ({ shades, isLoop }) => {\n  if (isInverseDraw) {\n    isInverseDraw = false\n    updateBackground()\n  }\n\n  isAgeShades = shades.length > 1\n  setShadeSeq({ shades, isLoop })\n  reconfigureDraw()\n  triggerDraw()\n}\n\nconst speedChanged = (spd) => {\n  speed = 101 - spd\n  drawSpeed = speed\n  reconfigureDraw()\n}\n\nconst startPreview = shape => {\n  setupPreview(shape)\n  previewConfig({ isStart: true })\n}\n\nconst endPreview = () => {\n  previewConfig({ isStart: false })\n}\n\nconst previewConfig = ({ isStart }) => {\n  isBrushDown = isStart\n  isShapeShades = isStart\n  reconfigureDraw()\n}\n\nconst clear = () => {\n  /* Will clear both canvas and grid */\n  ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height)\n  setFill('clear')\n}\n\n/* --- BACKGROUND LAYER --- */\n\nconst setBackground = bg => {\n  background = bg\n  setInverseBg(bg)\n  \n  if (!isInverseDraw) {\n    updateBackground()\n  }\n}\n\nconst setGradient = stops => {\n  isInverseImage = false\n  gradientStops = stops\n  initInverseDraw()\n  applyGradient()\n}\n\nconst setupImageBackground = () => {\n  initInverseDraw()\n  ctxbg.clearRect(0, 0, ctxbg.canvas.width, ctxbg.canvas.height)\n}\n\nconst updateBackground = () => {\n  ctxbg.fillStyle = background\n  ctxbg.fillRect(0, 0, ctxbg.canvas.width, ctxbg.canvas.height)\n}\n\nconst applyGradient = () => {\n  const grad = ctxbg.createLinearGradient(0, 0, ctxbg.canvas.width, 0)\n  grad.addColorStop(0, gradientStops[0])\n  grad.addColorStop(1, gradientStops[1])\n\n  ctxbg.fillStyle = grad\n  ctxbg.fillRect(0, 0, ctxbg.canvas.width, ctxbg.canvas.height)\n}\n\nconst initInverseDraw = () => {\n  if (!isInverseDraw) {\n    isInverseDraw = true\n    isAgeShades = false\n    reconfigureDraw()\n    triggerDraw()\n  }\n}\n\nconst resizeBgRedraw = () => {\n  if (isInverseDraw) {\n    if (isInverseImage) {\n      setupImageBackground()\n    } else applyGradient()\n  } else {\n    updateBackground()\n  }\n}\n\n\n/* --- EXT FUNCTIONS --- */\n\nconst initExt = () => {\n  initGrid()\n}\n\nconst triggerDraw = () => draw(ctx, drawSpeed)\n\n/* - UPDATE - */\n\nconst _update = (findex) => {\n  if (findex % speed === 0) {\n    /* All updates go here */\n\n    updateGrid(findex)\n  }\n}\n\nlet update = _update\n\nconst reconfigureDraw = () => {\n  if (isShapeShades) _draw = drawShapes\n  else if (isInverseDraw) _draw = drawInverse\n  else if (isAgeShades) _draw = drawShaded\n  else _draw = drawGrid\n\n  draw = isBrushDown || drawSpeed === 1 ? _draw : _fdraw\n}\n\n/* - DRAW - */\n/*\n * Changed draw implemention to only use draw-on-each-render (not fast) for:\n * 1. When in brush mode and mouse is held down\n * 2. When previewing a shape for placement\n * 3. When previewing the filler modifiers\n */\n\nlet _draw = drawGrid\n\nconst _fdraw = (ctx, findex) => {\n  if (findex % drawSpeed === 0) {\n    _draw(ctx)\n  }\n}\n\nlet draw = _fdraw\n\ninitExt()\n\nexport default World\n","let global_S = [2, 3]\nlet global_B = [3]\n\nconst setRule = ({ b, s }) => {\n  global_B = b.split('').map(i => parseInt(i))\n  global_S = s.split('').map(i => parseInt(i))\n}\n\nconst globalSurvivalTrigger = (alive, x, y) => {\n  return global_S.indexOf(alive) > -1 ? 1 : 0\n}\n\nconst globalBirthTrigger = (alive, x, y) => {\n  return global_B.indexOf(alive) > -1 ? 1 : 0\n}\n\nconst localSurvivalTrigger = (alive, x, y) => {\n\n}\n\nconst localBirthTrigger = (alive, x, y) => {\n\n}\n\nlet checkSurvival = globalSurvivalTrigger\nlet checkBirth = globalBirthTrigger\n\nexport { setRule, checkSurvival, checkBirth }","import { useRef, useEffect } from 'react'\nimport { IoMdCheckboxOutline, IoMdSquareOutline } from 'react-icons/io'\n\nconst ExCon = ({ title, isCurrent, children }) => {\n  return (\n    <div className={`ex-con ex-con-${isCurrent ? 'in' : 'out'}`}>\n      <div className='ex-title'>\n        <div className='ex-title-lbl center'>\n          {title.split('').join(' ').toUpperCase()}\n        </div>\n      </div>\n      <div className='ex-cont'>\n        {children}\n      </div>\n    </div>\n  )\n}\n\nconst ExIndicator = (props) => {\n  const { selectedIndex } = props\n  const canvasRef = useRef(null)\n\n  /* Need to adjust width if any changes to qa */\n  const width = 324 * 2\n\n  const style = {\n    width, left: (8 - width / 2 + 22) + (44 * selectedIndex)\n  }\n\n  useEffect(() => {\n    const canvas = canvasRef.current\n    const ctx = canvas.getContext('2d')\n\n    canvas.setAttribute('width', width)\n    canvas.setAttribute('height', 444)\n\n    ctx.lineWidth = 2\n    ctx.strokeStyle = '#a2a2a2'\n\n    const points = [[width / 2 - 10, 400], [width / 2, 406], [width / 2 + 10, 400], [width, 400]]\n\n    ctx.moveTo(0, 400)\n    points.forEach(([x, y]) => ctx.lineTo(x, y))\n    ctx.stroke()\n\n  }, [null])\n\n  return (\n    <canvas className='ex-indic' ref={canvasRef} style={style} className='ex-indic' />\n  )\n}\n\nconst ExSubTitle = ({ \n  children,\n  subtitle, fontSize = 10,\n  width, isScrollable = false, \n  left = 0, right = 0 \n}) => {\n  const className = `ex-st-con ex-item-${isScrollable ? 'scrl' : 'con'}`\n\n  return (\n    <div className={className} style={{height: fontSize + 3}}>\n      <div className='ex-st-hr' style={{ width, left }} />\n      <div className='ex-st-lbl' style={{ fontSize }}>\n        {subtitle ? subtitle.toUpperCase() : children}\n      </div>\n      <div className='ex-st-hr' style={{ width, right }} />\n    </div>\n  )\n}\n\nconst ExCheckbox = ({ name, checked, style = {}, onChange }) => {\n  return (\n    <div \n      className='ex-cb-con' style={style} \n      onClick={() => onChange(!checked)}\n    >\n      {name}\n      {checked ? \n      <IoMdCheckboxOutline className='ex-cb-ico' /> : \n      <IoMdSquareOutline className='ex-cb-ico' />}\n    </div>\n  )\n}\n\nexport { ExCon, ExIndicator, ExSubTitle, ExCheckbox }","import { useRef } from 'react'\nimport { FaPlay, FaPause } from 'react-icons/fa'\nimport { IoSpeedometer } from 'react-icons/io5'\nimport { CgExtension } from 'react-icons/cg'\nimport { RiHeartPulseFill } from 'react-icons/ri'\nimport { RiBrushFill, RiBrushLine } from 'react-icons/ri'\nimport { IoIosColorPalette, IoMdCloseCircle } from 'react-icons/io'\n\nconst QaButton = ({ \n  children, unhide, animDelay, animDuration = 240, \n  onClick, onRightClick = () => {}, onHoverChanged \n}) => {\n  const hoverRef = useRef(false)\n\n  const rightClick = (e) => {\n    e.preventDefault()\n    onRightClick()\n  }\n\n  const mouseEnter = () => {\n    hoverRef.current = true\n    setTimeout(() => {\n      if (hoverRef.current) {\n        onHoverChanged(true)\n      }\n    }, 1000)\n  }\n\n  const mouseLeave = () => {\n    hoverRef.current = false\n    onHoverChanged(false)\n  }\n\n  const className = `qa-btn-con ${unhide ? 'qa-btn-in' : 'qa-btn-out'}`\n\n  const style = {\n    animationDuration: `${animDuration}ms`,\n    animationDelay: unhide ? `${animDelay}ms` : '0ms'\n  }\n\n  return (\n    <div \n      className={className} style={style}\n      onClick={onClick} onContextMenu={rightClick}\n      onMouseEnter={mouseEnter} onMouseLeave={mouseLeave}\n    >{children}</div>\n  )\n}\n\nconst Play = ({ isPlaying, unhide, animDelay, onClick, onHoverChanged }) => {\n  return (\n    <QaButton \n      onClick={onClick} \n      unhide={unhide} \n      animDelay={animDelay} \n      onHoverChanged={onHoverChanged}\n    >\n      {isPlaying ?\n      <FaPause className='center' /> :\n      <FaPlay className='center' />}\n    </QaButton>\n  )\n}\n\nconst Draw = ({ isDrawing, unhide, animDelay, onClick, onRightClick, onHoverChanged }) => {\n  return (\n    <QaButton \n      onClick={onClick} \n      onRightClick={onRightClick} \n      unhide={unhide} \n      animDelay={animDelay} \n      onHoverChanged={onHoverChanged}\n    >\n      {isDrawing ? <RiBrushFill className='center qa-draw' /> : <BrushIcon />}\n    </QaButton>\n  )\n}\n\nconst Speed = ({ unhide, animDelay, onClick, onHoverChanged }) => {\n  return (\n    <QaButton \n      onClick={onClick} \n      unhide={unhide} \n      animDelay={animDelay} \n      onHoverChanged={onHoverChanged}\n    >\n      <SpeedIcon />\n    </QaButton>\n  )\n}\n\nconst Shapes = ({ unhide, animDelay, onClick, onRightClick, onHoverChanged }) => {\n  return (\n    <QaButton \n      onClick={onClick} \n      onRightClick={onRightClick} \n      unhide={unhide} \n      animDelay={animDelay} \n      onHoverChanged={onHoverChanged}\n    >\n      <GridIcon />\n    </QaButton>\n  )\n}\n\nconst Rules = ({ unhide, animDelay, onClick, onRightClick, onHoverChanged }) => {\n  return (\n    <QaButton \n      onClick={onClick} \n      onRightClick={onRightClick}\n      unhide={unhide} \n      animDelay={animDelay} \n      onHoverChanged={onHoverChanged}\n    >\n      <RiHeartPulseFill className='center qa-rules' />\n    </QaButton>\n  )\n}\n\nconst Colors = ({ unhide, animDelay, onClick, onRightClick, onHoverChanged }) => {\n  return (\n    <QaButton \n      onClick={onClick} \n      onRightClick={onRightClick}\n      unhide={unhide} \n      animDelay={animDelay} \n      onHoverChanged={onHoverChanged}\n    >\n      <IoIosColorPalette className='center qa-colors' />\n    </QaButton>\n  )\n}\n\nconst Close = ({ unhide, animDelay, animDuration, onClick, onRightClick, onHoverChanged }) => {\n  return (\n    <QaButton \n      onClick={onClick} \n      onRightClick={onRightClick}\n      unhide={unhide} \n      animDelay={animDelay} \n      animDuration={animDuration}\n      onHoverChanged={onHoverChanged}\n    >\n      <IoMdCloseCircle className='center qa-close' />\n    </QaButton>\n  )\n}\n\nconst BrushIcon = () => <RiBrushLine className='center qa-draw' />\nconst GridIcon = () => <CgExtension className='center qa-shapes' />\nconst SpeedIcon = () => <IoSpeedometer className='center qa-speed' />\n\nexport { \n  Play, Draw, Speed, Shapes, Rules, Colors, Close,\n  BrushIcon, GridIcon, SpeedIcon\n}","const QaTooltip = ({ vis, index }) => {\n  const startX = (window.innerWidth - 324) / 2\n  const midX = startX + 8 + (44 * index) + 22\n  const path = `M ${midX - 12} 8 L ${midX} 0 L ${midX + 12} 8`\n  const msgConStyle = { left: midX }\n\n  const className = `qa-tt-con ${vis ? 'qa-tt-con-in' : ''}`\n  const tip = tips[index]\n\n  return (\n    <div className={className}>\n      <svg className='qa-tt-svg'>\n        <path d={path} fill='#dfdfdf' />\n      </svg>\n      <div className='qa-tt-msg-con' style={msgConStyle}>\n        <div className='qa-tt-msg'>{tip}</div>\n      </div>\n    </div>\n  )\n}\n\nconst tips = {\n  0: ['Play | Pause'],\n  1: ['LMB: Toggle Brush | RMB: Brush Size'],\n  2: ['LMB: Pattern List | RMB: Grid Cell Size'],\n  3: ['LMB: Configure Rules | RMB: Rule Presets'],\n  4: ['LMB: Color Palette | RMB: Age Based Palette'],\n  5: ['Sim Speed'],\n  6: ['LMB: Close | RMB: Minimise']\n}\n\nexport default QaTooltip\n","import { useState, useEffect, useCallback } from 'react'\nimport { IoMdCloseCircle } from 'react-icons/io'\n\nlet liveValue = 0\nconst offsetX = window.innerWidth / 2 - 162\n\nconst QaSlider = ({ unhide, icon, value, range, onChange, onDismiss }) => {\n  const [trackX, setTrackX] = useState(150)\n  const [isPressed, setIsPressed] = useState(false)\n  const [isHovered, setIsHovered] = useState(false)\n\n  useEffect(() => {\n    const [lower, upper] = range\n    updateTrackX(Math.lerp(20, 300, Math.inverseLerp(lower, upper, value)))\n  }, [value])\n\n  const updateTrackX = (trackX) => {\n    setTrackX(trackX)\n    const [lower, upper] = range\n    const rounded = Math.round(Math.lerp(lower, upper, Math.inverseLerp(20, 300, trackX)))\n    \n    if (rounded !== liveValue) {\n      liveValue = rounded\n      onChange(rounded)\n    }\n  }\n\n  const mouseMove = (e) => {\n    if (isPressed && e.button === 0) {\n      updateTrackX(Math.clamp(e.clientX - offsetX, 20, 300))\n    }\n  }\n\n  const mouseClick = (e) => {\n    updateTrackX(Math.clamp(e.clientX - offsetX, 20, 300))\n  }\n\n  const rightClick = (e) => {\n    e.preventDefault()\n    onDismiss()\n  }\n\n  const mouseDown = useCallback((e) => {\n    if (e.button === 0) {\n      setIsPressed(true)\n      document.addEventListener('mouseup', mouseUp, { once: true })\n    }\n  }, [])\n\n  const mouseUp = () => {\n    setIsPressed(false)\n  }\n\n  const trackStyle = { width: trackX }\n  const thumbStyle = { left: trackX - 20 }\n  const labelStyle = { left: trackX + offsetX - 18 }\n  const conClass = `qa-sl-con ${unhide ? 'qa-sl-in' : ''}`\n  const thumbClass = `qa-sl-thumb ${isHovered ? 'qa-sl-thumb-hov' : ''}`\n  const labelClass = `qa-sl-lbl ${isPressed ? 'qa-sl-lbl-pressed' : ''}`\n  const closeClass = `qa-sl-x ${unhide ? 'qa-sl-x-in' : 'qa-sl-x-out'}`\n\n  return (\n    <div className={conClass}>\n      <div className='qa-sl-track-con'>\n        <div className='qa-sl-track' style={trackStyle} />\n      </div>\n\n      <div className={thumbClass} style={thumbStyle}>\n        {icon}\n      </div>\n\n      <div \n        className='qa-sl-receiver' \n        onMouseMove={mouseMove} \n        onMouseDown={mouseDown}\n        onMouseEnter={_ => setIsHovered(true)}\n        onMouseLeave={_ => setIsHovered(false)}\n        onContextMenu={rightClick}\n        onClick={mouseClick}\n      >\n        <div className={labelClass} style={labelStyle}>{liveValue}</div>\n      </div>\n\n      <div className={closeClass} onClick={onDismiss}>\n        <IoMdCloseCircle className='qa-sl-x-ico' />\n      </div>\n    </div>\n  )\n}\n\nexport default QaSlider\n","import { useState, useEffect, useContext } from 'react'\nimport { FiChevronRight } from 'react-icons/fi'\n\nimport { Context } from '../../context/Context'\nimport { ExCon, ExSubTitle, ExCheckbox } from './ex-comps'\n\nconst ExRules = ({ isCurrent, pindex, onSelect, onWrapChanged, onPindexChanged }) => {\n  const { rules } = useContext(Context)\n\n  const [arIndex, setArIndex] = useState(0)\n  const [activeRule, setActiveRule] = useState(rules[arIndex]) // Conway's Life\n\n  const pconStyle = {\n    transform: `translateX(${pindex * -324}px)`\n  }\n\n  const updateActiveRule = ({ b, s, ari }) => {\n    let selectedRule = {...activeRule}\n    if (ari > -1) {\n      if (ari !== arIndex) {\n        setArIndex(ari)\n        selectedRule = rules[ari]\n      }\n    } else {\n      let isCustom = true\n      for (let i = 0; i < rules.length; i++) {\n        if (rules[i].b === b && rules[i].s === s) {\n          if (arIndex !== i) {\n            isCustom = false\n            setArIndex(i)\n            selectedRule = rules[i]\n          }\n          break\n        }\n      }\n      if (isCustom) {\n        selectedRule = { name: 'Custom', b, s }\n        setArIndex(-1)\n      }\n    }\n    setActiveRule(selectedRule)\n    onSelect(selectedRule)\n  }\n\n  return (\n    <ExCon title='Rules' isCurrent={isCurrent}>\n      <div className='ex-pcon' style={pconStyle}>\n        <Presets \n          rules={rules} \n          currentIndex={arIndex} \n          onSelect={updateActiveRule} \n        />\n\n        <Custom \n          activeRule={activeRule}\n          onChanged={updateActiveRule} \n          onWrapChanged={onWrapChanged}\n          onSelectPresets={() => onPindexChanged(1)} \n        />\n      </div>\n    </ExCon>\n  )\n}\n\nconst Presets = ({ rules, currentIndex, onSelect }) => {\n  return (\n    <div className='ex-pg ex-pg2'>\n      <div className='ex-flick'>\n        {rules.map(({name, b, s}, index) => \n        <RuleCell \n          key={index}  \n          name={name} b={b} s={s} \n          selected={currentIndex === index}\n          onClick={() => onSelect({ ari: index })} \n        />)}\n      </div>\n    </div>\n  )\n}\n\nconst Custom = ({ activeRule, onSelectPresets, onWrapChanged, onChanged }) => {\n  const { name, b, s } = activeRule\n\n  const updateRule = ({ nb, ns }) => {\n    onChanged({\n      ari: -1,\n      b: nb !== undefined ? nb : b,\n      s: ns !== undefined ? ns : s\n    })\n  }\n\n  return (\n    <div className='ex-pg'>\n      <div style={{height: 5}} />\n\n      <WrapGrid onChanged={onWrapChanged} />\n      <ActiveRule name={name} onClick={onSelectPresets} />\n\n      <div style={{height: 8}} />\n      <div className='rule-info'>\n        NUMBER OF NEIGHBOUR CELLS REQUIRED FOR\n      </div>\n\n      <div style={{height: 4}} />\n      <ExSubTitle fontSize={13} width={68}>A NEW CELL TO BE <b>B</b>ORN</ExSubTitle>\n      <Numbers numbers={b} onNumbersChanged={nb => updateRule({ nb })} />\n\n      <div style={{height: 8}} />\n      <ExSubTitle fontSize={13} width={50}>AN EXISTING CELL TO <b>S</b>URVIVE</ExSubTitle>\n      <Numbers numbers={s} onNumbersChanged={ns => updateRule({ ns })} />\n    </div>\n  )\n}\n\nconst WrapGrid = ({ onChanged }) => {\n  const [checked, setChecked] = useState(false)\n\n  const updateChecked = () => {\n    const _checked = !checked\n    setChecked(_checked)\n    onChanged(_checked)\n  }\n\n  return <ExCheckbox \n    name='Wrap Grid' \n    checked={checked}\n    style={{marginTop: 10}}\n    onChange={updateChecked} \n  />\n}\n\nconst ActiveRule = ({ name, onClick }) => {\n  return (\n    <RuleOption title='Active Rule' onClick={onClick}>\n      <div className='roc-lbl'>{name}</div>\n      <FiChevronRight className='roc-ico roc-chev' />\n    </RuleOption>\n  )\n}\n\nconst RuleOption = ({ children, title, onClick }) => {\n  return (\n    <div className='rule-opt-con' onClick={onClick}>\n      {title}\n      <div className='ro-ctrl'>{children}</div>\n    </div>\n  )\n}\n\nconst Numbers = ({ numbers, onNumbersChanged }) => {\n  const [toggles, setToggles] = useState([0, 0, 0, 0, 0, 0, 0, 0, 0])\n\n  const updateNumbers = (index, value) => {\n    let numbers = ''\n    toggles.map(\n      (n, i) => i === index ? value : n\n    ).forEach(\n      (t, i) => numbers += `${t ? i : ''}`\n    )\n    onNumbersChanged(numbers)\n  }\n\n  useEffect(() => {\n    const togs = [0, 0, 0, 0, 0, 0, 0, 0, 0]\n    for (let i = 0; i < numbers.length; i++) {\n      togs[parseInt(numbers.charAt(i))] = 1\n    }\n    setToggles(togs)\n\n  }, [numbers])\n\n  return (\n    <div className='dia-lt'>\n      <DiamondBtn text={0} x={10} y={10} checked={toggles[0]} checkChanged={v => updateNumbers(0, v)} />\n      <DiamondBtn text={1} x={40} y={40} checked={toggles[1]} checkChanged={v => updateNumbers(1, v)} />\n      <DiamondBtn text={2} x={70} y={10} checked={toggles[2]} checkChanged={v => updateNumbers(2, v)} />\n      <DiamondBtn text={3} x={100} y={40} checked={toggles[3]} checkChanged={v => updateNumbers(3, v)} />\n      <DiamondBtn text={4} x={130} y={10} checked={toggles[4]} checkChanged={v => updateNumbers(4, v)} />\n      <DiamondBtn text={5} x={160} y={40} checked={toggles[5]} checkChanged={v => updateNumbers(5, v)} />\n      <DiamondBtn text={6} x={190} y={10} checked={toggles[6]} checkChanged={v => updateNumbers(6, v)} />\n      <DiamondBtn text={7} x={220} y={40} checked={toggles[7]} checkChanged={v => updateNumbers(7, v)} />\n      <DiamondBtn text={8} x={250} y={10} checked={toggles[8]} checkChanged={v => updateNumbers(8, v)} />\n    </div>\n  )\n}\n\nconst DiamondBtn = ({ text, x, y, checked, checkChanged }) => {\n  const toggleCheck = () => checkChanged(1 - checked)\n\n  const btnStyle = { left: x , top: y }\n  const btnClass = `dia-btn ${checked ? 'dia-btn-c' : ''}`\n  const cbClass = `dia-cb ${checked ? 'dia-cb-c' : ''}`\n\n  return (\n    <div className={btnClass} style={btnStyle} onClick={toggleCheck} >\n      <div className={cbClass} />\n      <div className='dia-lbl-con'>\n        <div className='dia-lbl center'>{text}</div>\n      </div>\n    </div>\n  )\n}\n\nconst RuleCell = ({ selected, name, b, s, onClick }) => {\n  const nameCN = `rule-item-name ${selected ? 'rule-item-name-sel' : ''}`\n  const ruleCN = `rule-item-rule ${selected ? 'rule-item-rule-sel' : ''}`\n\n  return (\n    <div \n      className='rule-item-con'\n      onClick={onClick}\n    >\n      <div className={nameCN}>{name}</div>\n      <div className={ruleCN}><b>B</b>{b} <b>S</b>{s}</div>\n    </div>\n  )\n}\n\nexport default ExRules\n","import { HiOutlineAdjustments } from 'react-icons/hi'\nimport { IoChevronUp } from 'react-icons/io5'\n\nimport { useState, useEffect, useRef, useContext } from 'react'\nimport { Context } from '../../context/Context'\n\nimport { ExCon, ExSubTitle } from './ex-comps'\n\nconst ExShapes = ({ isCurrent, onShapeSelect, onFillSelect, onClear, onSliding }) => {\n  const [isShapes, setIsShapes] = useState(true)\n  const { shapes, fillers } = useContext(Context)\n\n  const className = `shape-con ${isShapes ? '' : 'shape-up'}`\n\n  return (\n    <ExCon title='Patterns' isCurrent={isCurrent}>\n      <div className={className}>\n        <Fillers fillers={fillers} onSelect={onFillSelect} onSliding={onSliding} />\n\n        <div className='shape-mid'>\n          <MidButton name='Clear'   x={1}   y={6} onClick={onClear} />\n          <MidButton name='Invert'  x={159} y={6} onClick={() => onFillSelect('invert')} />\n\n          <MidIndic y={4} visible={!isShapes} onClick={_ => setIsShapes(true)} paths={[\n            'M 1 1 L 10 12 L 19 1', 'M 0 0 L 20 0'\n          ]} />\n\n          <MidIndic y={17} visible={isShapes} onClick={_ => setIsShapes(false)} paths={[\n            'M 1 12 L 10 1 L 19 12', 'M 0 13 L 20 13'\n          ]} />\n        </div>\n\n        <Shapes shapes={shapes} onSelect={onShapeSelect} />\n      </div>\n    </ExCon>\n  )\n}\n\nconst Shapes = ({ shapes, onSelect }) => {\n  return (\n    <div className='shape-list'>\n      <div className='shape-info'>\n        The patterns listed below are meant to be used in<br/>\n        conjuction with <b>Conway's Life (B3-S23)</b> rule.\n      </div>\n      {shapes.map(({ name, shapes }, icat) => (\n        <div key={icat}>\n          <div className='shape-item-pad' />\n          <ExSubTitle subtitle={name} width={132 - name.length * 2} isScrollable={true} />\n\n          {shapes.map(({ name, shape }, ishape) => (\n            <div className='sc-con' key={ishape} onClick={() => onSelect(shape)} >\n              <div className='sc-lbl center'>{name}</div>\n            </div>\n          ))}\n        </div>\n      ))}\n\n    </div>\n  )\n}\n\nconst Fillers = ({ fillers, onSelect, onSliding }) => {\n  const [currentIndex, setCurrentIndex] = useState(-1)\n\n  const exAction = (index) => setCurrentIndex(index === currentIndex ? -1 : index)\n\n  return (\n    <div className='shape-list'>\n      <div className='shape-item-pad' />\n\n      {fillers.map(({ name, fill, config }, index) =>\n        <FillCell \n          key={index}\n          name={name} \n          config={config} \n          ex={currentIndex === index} \n          onSelect={args => onSelect(fill, args)} \n          onSliding={onSliding}\n          onExpanded={() => exAction(index)}\n        />)}\n    </div>\n  )\n}\n\nconst FillCell = ({ name, config, ex, onSelect, onSliding, onExpanded }) => {\n  const [hovered, setHovered] = useState(false)\n  const [pressed, setPressed] = useState(false)\n  const args = useRef(config.map(({init}) => init))\n\n  const style = {\n    height: ex ? 32 + 24 * config.length : 30,\n    backgroundColor: pressed && !ex ? '#ffffff' : '#00000000',\n    color: ex || pressed ? '#000000' : (hovered ? '#ffffff' : '#a2a2a2'),\n    borderColor: ex ? '#a2a2a2' : (hovered ? '#ffffff' : '#00000000')\n  }\n\n  const configAction = e => {\n    e.stopPropagation()\n    onExpanded()\n  }\n\n  const moded = (value, index) => {\n    args.current[index] = value\n    onSelect(args.current)\n  }\n\n  const select = () => onSelect(args.current)\n  \n  const labelClass = `fc-lbl-con ${ex ? 'fc-lbl-con-ex' : ''}`\n  const iconClass = `fc-icon ${ex ? 'fc-icon-ex' : `${hovered ? '' : 'fc-icon-hid'}`}`\n\n  return (\n    <div \n      className='fc-con' \n      style={style} \n      onMouseEnter={() => setHovered(true)}\n      onMouseLeave={() => setHovered(false)}\n      onMouseDown={() => setPressed(true)}\n      onMouseUp={() => setPressed(false)}\n    >\n      <div className={labelClass} onClick={select}>\n        <div className='fc-lbl center'>{name}</div>\n      </div>\n      \n      {ex ? \n      <IoChevronUp className={iconClass} onClick={configAction} /> :\n      <HiOutlineAdjustments className={iconClass} onClick={configAction} onMouseDown={e => e.stopPropagation()} />}\n\n      <div className='fc-ex'>\n        {config.map(({ name, init, range }, index) => <FSlide \n          key={index}\n          name={name} init={init} range={range} \n          onChange={(value) => moded(value, index)}\n          onDown={() => onSliding(true)}\n          onUp={() => onSliding(false)} \n        />)}\n      </div>\n    </div>\n  )\n}\n\nconst FSlide = ({ name, init, range, onChange, onDown, onUp }) => {\n  const [hov, setHov] = useState(false)\n  const [value, setValue] = useState(1)\n\n  const slideAction = e => {\n    const v = parseInt(e.target.value)\n    setValue(v)\n    onChange(v)\n  }\n\n  useEffect(() => {\n    setValue(init)\n  }, [])\n\n  const slideClass = `fslide ${hov ? 'fslide-hov' : ''}`\n\n  return (\n    <div className='fslide-con'>\n      <div className='fslide-lbl'>{name} (<b>{value}</b>)</div>\n      <input \n        className={slideClass} \n        type='range'\n        value={value}\n        step={1}\n        min={range[0]} max={range[1]}\n        onMouseEnter={() => setHov(true)}\n        onMouseLeave={() => setHov(false)}\n        onMouseDown={onDown}\n        onMouseUp={onUp}\n        onChange={slideAction}\n      ></input>\n      {/* <div className='fslide-val'>{value}</div> */}\n    </div>\n  )\n}\n\nconst MidButton = ({ name, x, y, onClick }) => {\n  const [hovered, setHovered] = useState(false)\n  const [pressed, setPressed] = useState(false)\n\n  const mouseLeave = _ => {\n    setHovered(false)\n    setPressed(false)\n  }\n\n  const fill = pressed ? '#fff' : '#00000000'\n  const stroke = hovered ? '#fff' : '#a2a2a2'\n  const textStyle = { color: pressed ? '#000' : stroke }\n\n  return (\n    <div\n      className='mb-con'\n      style={{left: x, top: y}}\n      onMouseEnter={_ => setHovered(true)}\n      onMouseLeave={mouseLeave}\n      onMouseDown={_ => setPressed(true)}\n      onMouseUp={_ => setPressed(false)}\n      onClick={onClick}\n    >\n      <svg className='mb-svg'>\n        <path d='M 0 13 L 10 0 L 134 0 L 144 13 L 134 26 L 10 26 Z' fill={fill} />\n        <path d='M 1 13 L 10 0 M 133 0 L 142 13 L 133 26 M 10 26 L 0 13' strokeWidth={1.5} stroke={stroke} fill='#00000000' />\n        <path d='M 10 0 L 134 0 M 133 26 L 10 26' strokeWidth={2.5} stroke={stroke} />\n      </svg>\n      <div className='fb-lbl center' style={textStyle}>{name}</div>\n    </div>\n  )\n}\n\nconst MidIndic = ({ paths, visible, y, onClick }) => {\n  const [hovered, setHovered] = useState(false)\n  const [pressed, setPressed] = useState(false)\n\n  const mouseLeave = _ => {\n    setHovered(false)\n    setPressed(false)\n  }\n\n  const fill = pressed ? '#fff' : '#00000000'\n  const stroke = hovered ? '#fff' : '#a2a2a2'\n  const className = `mi-con ${visible ? '' : 'mi-not'}`\n\n  return (\n    <div\n      className={className}\n      style={{top: y}}\n      onClick={onClick}\n      onMouseEnter={_ => setHovered(true)}\n      onMouseLeave={mouseLeave}\n      onMouseDown={_ => setPressed(true)}\n      onMouseUp={_ => setPressed(false)}\n    >\n      <svg className='mi-svg'>\n        <path d={paths[0]} strokeWidth={1.5} stroke={stroke} fill={fill} />\n        <path d={paths[1]} strokeWidth={2.5} stroke={stroke} />\n      </svg>\n    </div>\n  )\n}\n\nexport default ExShapes","import { useState, useEffect, useRef, useCallback } from 'react'\nimport { BsChevronRight, BsCloudUpload } from 'react-icons/bs'\n\nimport { ExSubTitle } from '../ex-comps'\n\nconst offsetX = window.innerWidth / 2 - 152\n\nconst PrefsPalette = ({ \n  shades, onBackgroundSelect, onMonoSelect, onGradientSelect, \n  onImageSelect, onAgeConfigure, onTrailsChanged,\n}) => {\n  /* trails state in Modes */\n  const [modeEx, setModeEx] = useState(false)\n  const [modeIndex, setModeIndex] = useState(0)\n  const [modeStates, setModeStates] = useState([\n    '#ffffff', ['#ff2600', '#0096ff'], '', shades\n  ])\n\n  const select = i => {\n    if (i !== modeIndex) {\n      const events = [onMonoSelect, onGradientSelect, onImageSelect, onAgeConfigure]\n      events[i](modeStates[i])\n      setModeIndex(i)\n    }\n\n    setModeEx(false)\n  }\n\n  const monoSelect = mono => {\n    setModeStates(modeStates.map((st, i) => i === 0 ? mono : st))\n    onMonoSelect(mono)\n  }\n\n  const gradientSelect = grad => {\n    setModeStates(modeStates.map((st, i) => i === 1 ? grad : st))\n    onGradientSelect(grad)\n  }\n\n  const imageSelect = src => {\n    setModeStates(modeStates.map((st, i) => i === 2 ? src : st))\n    onImageSelect(src)\n  }\n\n  useEffect(() => {\n    const nextStates = [...modeStates]\n    if (shades.shades.length === 1) {\n      setModeIndex(0)\n      nextStates[0] = shades.shades[0]\n    } else {\n      setModeIndex(3)\n    }\n    nextStates[3] = shades\n    setModeStates(nextStates)\n  }, [shades])\n\n  return (\n    <div className='ex-pg'>\n      <ExSubTitle fontSize={13} width={78} subtitle='BACKGROUND COLOR' />\n      <ColorSelection color='#000000' onChange={onBackgroundSelect} />\n\n      <div style={{height: 12}} />\n\n      <ExSubTitle fontSize={13} width={103} subtitle='COLOR MODE' />\n      <ModeDropdown \n        ex={modeEx} onExpand={ex => setModeEx(ex)}\n        currentIndex={modeIndex} onSelect={select} \n      />\n\n      <Modes \n        vis={!modeEx} \n        currentIndex={modeIndex} \n        states={modeStates}\n        onMonoChanged={monoSelect}\n        onGradientChanged={gradientSelect}\n        onImageSelect={imageSelect}\n        onAgeConfigure={onAgeConfigure}\n        onTrailsChanged={onTrailsChanged}\n      />\n    </div>\n  )\n} \n\nconst Modes = ({ \n  vis, currentIndex, states, \n  onMonoChanged, onGradientChanged, onImageSelect, onAgeConfigure, onTrailsChanged\n}) => {\n  const [trails, setTrails] = useState(0)\n  const modesClass = `mds-con ${vis ? '' : 'mds-inv'}`\n\n  const trailsChanged = trails => {\n    setTrails(trails)\n    onTrailsChanged(trails)\n  }\n\n  const render = () => {\n    switch (currentIndex) {\n      case 0: return <Mono color={states[0]} trails={trails} onChange={onMonoChanged} onTrailsChanged={trailsChanged} />\n      case 1: return <Gradient gradient={states[1]} onChange={onGradientChanged} />\n      case 2: return <Image src={states[2]} uploaded={onImageSelect} />\n      case 3: return <AgeBased shades={states[3]} trails={trails} onClick={onAgeConfigure} onTrailsChanged={trailsChanged} />\n      default: return <div />\n    }\n  }\n\n  return (\n    <div className={modesClass}>\n      <div style={{ height: 12 }} />\n      {render()}\n    </div>\n  )\n}\n\nconst Mono = ({ color, trails, onChange, onTrailsChanged }) => {\n  return (\n    <div>\n      <ExSubTitle fontSize={13} width={102} subtitle='MONO COLOR' />\n      <ColorSelection color={color} onChange={onChange} />\n      <Trails value={trails} onChange={onTrailsChanged} />\n    </div>\n  )\n}\n\nconst Gradient = ({ gradient, onChange }) => {\n  const updateStops = (v, index) => {\n    onChange(gradient.map((s, i) => i === index ? v : s))\n  }\n\n  return (\n    <div>\n      <ExSubTitle fontSize={13} width={91} subtitle='GRADIENT STOPS' />\n      <ColorSelection color={gradient[0]} onChange={v => updateStops(v, 0)} />\n      <div style={{ height: 4 }} />\n      <ColorSelection color={gradient[1]} onChange={v => updateStops(v, 1)} />\n    </div>\n  )\n}\n\nconst Image = ({ src, uploaded }) => {\n  const uploadRef = useRef(null)\n\n  const upload = () => uploadRef.current.click()\n\n  const onChange = e => {\n    if (e.target.files && e.target.files[0]) {\n      uploaded(URL.createObjectURL(e.target.files[0]))\n    }\n  }\n\n  return (\n    <div>\n      {src ? <img className='upl-preview' src={src} /> : <div />}\n      <div className='pp-con ppb-con' onClick={upload}>\n        <div className='ppb-lbl'>Upload Image</div>\n        <div className='ppb-ri-con' style={{right: 4}}>\n          <BsCloudUpload className='ppb-ri center' />\n        </div>\n        <input type='file' ref={uploadRef} onChange={onChange} />\n      </div>\n    </div>\n  )\n}\n\nconst AgeBased = ({ shades, trails, onClick, onTrailsChanged }) => {\n  const canvasRef = useRef(null)\n\n  useEffect(() => {\n    const canvas = canvasRef.current\n    canvas.setAttribute('width', 304)\n    canvas.setAttribute('height', 26)\n\n    const ctx = canvas.getContext('2d')\n    const width = 304 / shades.shades.length\n\n    ctx.clearRect(0, 0, 304, 26)\n    for (let i = 0; i < shades.shades.length; i++) {\n      ctx.fillStyle = shades.shades[i]\n      ctx.fillRect(i * width, 0, width, 26)\n    }\n  }, [shades])\n\n  return (\n    <div>\n      <ExSubTitle fontSize={11} width={22}>Cells change color from left to right as they age</ExSubTitle>\n      <div className='pp-con'>\n        <canvas className='age-preview' ref={canvasRef} />\n      </div>\n      <div style={{ height: 12 }} />\n      <div className='pp-con ppb-con' onClick={onClick}>\n        <div className='ppb-lbl'>Configure Age Based</div>\n        <div className='ppb-ri-con'>\n          <BsChevronRight className='ppb-ri center' />\n        </div>\n      </div>\n      <Trails value={trails} onChange={onTrailsChanged} />\n    </div>\n  )\n}\n\nconst ColorSelection = ({ color, onChange }) => {\n  const [hex, setHex] = useState('#000000')\n  const [hasFocus, setHasFocus] = useState(false)\n\n  const inputSelection = e => {\n    const hex = e.target.value\n    setHex(hex)\n    onChange(hex)\n  }\n\n  const updateHex = e => {\n    const text = e.target.value\n    if (text.indexOf('#') < 0) {\n      setHex(`#${text}`)\n    } else if (text.length > hex.length && text.length < 8) {\n      if (/^[0-9A-Fa-f]+$/.test(text.substring(1))) setHex(text)\n      if (text.length === 7) onChange(text)\n    } else if (text.length < hex.length && text.length > 0) {\n      setHex(text)\n    }\n  }\n\n  const editingComplete = () => {\n    let _hex = hex\n    const padding = 7 - _hex.length\n    for (let i = 0; i < padding; i++) {\n      _hex += \"0\"\n    }\n    setHex(_hex)\n    setHasFocus(false)\n    onChange(_hex)\n  }\n\n  useEffect(() => setHex(color), [color])\n\n  return (\n    <div className='pp-con' style={{borderColor: hasFocus ? '#ffffff' : '#a2a2a2'}}>\n      <div className='cs-cp' style={{backgroundColor: hex}}>\n        <input type='color' className='tint-input' onChange={inputSelection} />\n      </div>\n      <input \n        type='text' className='cs-tf tint-tf' value={hex.toUpperCase()} \n        onChange={updateHex} onFocus={() => setHasFocus(true)} onBlur={editingComplete}\n      />\n    </div>\n  )\n}\n\nconst ModeDropdown = ({ ex, currentIndex, onExpand, onSelect }) => {\n  const baseClick = () => {\n    if (!ex) onExpand(true)\n  }\n\n  const baseClass = `pp-con md-con ${ex ? 'md-ex' : ''}`\n  const lblClass = `md-lbl ${ex ? 'md-lbl-ex' : ''}`\n\n  return (\n    <div className={baseClass} onClick={baseClick}>\n      <div className={lblClass}>{modes[currentIndex]}</div>\n        \n      <div className='mex-con'>\n        {modes.map((mode, i) => (\n          <div className='mex-item' key={i}\n            onClick={() => onSelect(i)}>{mode}\n          </div>\n        ))}\n      </div>\n    </div>\n  )\n}\n\nconst Trails = ({ value, onChange }) => {\n  const [trackX, setTrackX] = useState(13)\n  const [isPressed, setIsPressed] = useState(false)\n  const [showInfo, setShowInfo] = useState(false)\n\n  const updateTrackX = trackX => {\n    setTrackX(trackX)\n    const rounded = Math.round(Math.lerp(0, 255, Math.inverseLerp(13, 289, trackX)))\n    setShowInfo(rounded > 200)\n    onChange(rounded)\n  }\n\n  const mouseMove = e => {\n    if (isPressed && e.button === 0) {\n      /* min/max should have been 14 and 300 but is -1 each instead (because topMargin: -1) */\n      updateTrackX(Math.clamp(e.clientX - offsetX, 13, 289))\n    }\n  }\n\n  const mouseDown = useCallback((e) => {\n    if (e.button === 0) {\n      setIsPressed(true)\n      document.addEventListener('mouseup', mouseUp, { once: true })\n    }\n  }, [])\n\n  const mouseClick = e => {\n    updateTrackX(Math.clamp(e.clientX - offsetX, 13, 289))\n  }\n\n  useEffect(() => {\n    updateTrackX(Math.lerp(13, 289, Math.inverseLerp(0, 255, value)))\n  }, [])\n\n  const mouseUp = () => setIsPressed(false)\n\n  const trackStyle = { width: Math.max(trackX - 14, 0) }\n  const thumbStyle = { transform: `translateX(${trackX - 14}px)` }\n\n  return (\n    <div>\n      <div style={{height: 12}} />\n      <ExSubTitle fontSize={13} width={124} subtitle='TRAILS' />\n\n      <div \n        className='pp-con pps-con' \n        onMouseMove={mouseMove}\n        onMouseDown={mouseDown}\n        onClick={mouseClick}\n      >\n        <div className='pps-trk' style={trackStyle} />\n          <div className='pps-th' style={thumbStyle}>\n        </div>\n      </div>\n\n      <div className='clr-info' style={{opacity: showInfo ? 1 : 0}}><i>Higher values will \n        cause the canvas to not clear when applying patterns or changing rules and palette. \n        Use </i><b>Clear</b><i> button in </i><b>PATTERNS</b><i> to force clear the grid.</i></div> : <div />\n    </div>\n  )\n}\n\nconst modes = [\"Mono\", \"Gradient\", \"Image\", \"Age Based\"]\n\nexport default PrefsPalette\n","import { VscChevronLeft, VscChevronRight, VscTrash } from 'react-icons/vsc'\nimport { IoColorPaletteOutline } from 'react-icons/io5'\nimport { useState, useRef, useEffect } from 'react'\nimport { ExSubTitle } from '../ex-comps'\n\nlet animActive = false, scrollListenerAttached = false\nlet lastApplied = { isLoop: false, list: [{ isTint: true, value: '#ffffff', outId: '' }] }\n\nconst ExPalette = ({ isCurrent, onSelect }) => {\n  const [list, setList] = useState([\n    { isTint: true, value: '#ffffff', outId: '' }\n  ])\n\n  const [isLoop, setIsLoop] = useState(false)\n  const [scrollAtEnd, setScrollAtEnd] = useState(false)\n\n  const listRef = useRef(null)\n\n  const updateTint = ({ index, value }) => {\n    const updatedList = [...list]\n    updatedList[index]['value'] = value\n    setList(updatedList)\n  }\n\n  const updateSteps = ({ index, value }) => {\n    if (/^\\d*\\.?\\d*$/.test(value) && value.length < 5) {\n      const updatedList = [...list]\n      updatedList[index]['value'] = value === '' ? 0 : parseInt(value)\n      setList(updatedList)\n    }\n  }\n\n  const createGradient = (index) => {\n    const g1 = list[index - 1] ? list[index - 1].value : '#ffffff'\n    const g2 = list[index + 1] ? list[index + 1].value : '#ffffff'\n    return `linear-gradient(${g1}, ${g2})`\n  }\n\n  const scrollToEnd = _ => {\n    setTimeout(_ => {\n      listRef.current.scroll({ top: listRef.current.scrollHeight, behavior: 'smooth' })\n    }, 60)\n  }\n\n  const scrollListener = () => {\n    setScrollAtEnd(listRef.current.scrollTop < listRef.current.scrollHeight - listRef.current.clientHeight)\n  }\n\n  /* --- Footer Actions --- */\n\n  const clear = () => {\n    listRef.current.scrollTop = listRef.current.scrollHeight\n    setList([{ isTint: true, value: '#ffffff', outId: '' }])\n    setIsLoop(false)\n  }\n\n  const reset = () => {\n    listRef.current.scrollTop = listRef.current.scrollHeight\n    setIsLoop(lastApplied.isLoop)\n\n    /* \n     * --- Some Bizarre react bug (Or prolly me being ignorant of how react works) ---\n     * \n     * The following lines seem to set a reference of lastApplied.list to list instead of setting a copy of the lastApplied.list:\n     * setList(lastApplied.list) -> This seems obvious\n     * setList([...lastApplied.list]) -> Isnt this supposed to create a new array with elements of lastApplied.list?\n     * setList(lastApplied.list.slice()) -> Isnt this supposed to create a copy of lastApplied.list?\n     * setList(lastApplied.list.map(item => item)) -> Again isnt this supposed to be a completely new array?\n     * Seriously WTF is going on?\n     * - Could be cause Im not using useRef to store lastApplied. NEED TO TEST.\n     * \n     * Only the line below seems to create a copy. I could really use some explaination on this.\n     */\n    setList(lastApplied.list.map(({ isTint, value, outId }) => ({ isTint, value, outId })))\n  }\n\n  const addTint = () => {\n    if (!animActive) {\n      setList([...list, { isTint: true, value: '#ffffff', outId: '' }])\n      scrollToEnd()\n    }\n  }\n\n  const addGradient = () => {\n    if (!animActive) {\n      animActive = true\n\n      const _list = [...list, { isTint: false, value: 20, outId: '' }]\n      setList(_list)\n\n      setTimeout(_ => {\n        setList([..._list, { isTint: true, value: '#ffffff', outId: '' }])\n        scrollToEnd()\n        animActive = false\n      }, 60)\n    }\n  }\n\n  const addLoop = () => setIsLoop(!isLoop)\n\n  const deleteQueuedAtIndex = index => {\n    if (list.length > 1 && !animActive) {\n      const deleteIndices = [index]\n      if (index > 0 && !list[index - 1].isTint) {\n        deleteIndices.push(index - 1)\n      } else if (index == 0 && !list[index + 1].isTint) {\n        deleteIndices.push(index + 1)\n      }\n\n      const _list = [...list]\n      _list[deleteIndices[0]].outId = 'pc-out'\n      if (deleteIndices.length > 1) {\n        _list[deleteIndices[1]].outId = 'pc-out'\n      }\n      setList(_list)\n    }\n  }\n\n  const deleteAtIndex = () => {\n    setList(list.filter(({ outId }) => outId != 'pc-out'))\n  }\n\n  const apply = () => {\n    lastApplied = { isLoop, list }\n    onSelect({ isLoop, shades: generateShades(list)})\n  }\n\n  useEffect(() => {\n    if (isCurrent) {\n      reset()\n    \n      if (!scrollListenerAttached) {\n        listRef.current.addEventListener('scroll', scrollListener)\n        scrollListenerAttached = true\n      }\n    }\n    return () => {\n      if (scrollListenerAttached) {\n        listRef.current.removeEventListener('scroll', scrollListener)\n        scrollListenerAttached = false\n      }\n    }\n  }, [isCurrent])\n\n  const isScrollable = list.length > 8\n\n  return (\n    <div className='ex-pg ex-pg2'>\n      <div className='palette-list' ref={listRef}>\n        {isLoop ? <LoopCell isStart={true} isScrollable={isScrollable} /> : <div />}\n\n        {list.map(({ isTint, outId, value }, index) => (\n          isTint ? \n          <TintCell \n            key={index}\n            color={value} outId={outId}\n            isScrollable={isScrollable}\n            onChange={v => updateTint({ index, value: v })} \n            onDeleteQueue={_ => deleteQueuedAtIndex(index)}\n            onDeleteFinish={_ => deleteAtIndex(index)}\n          /> : \n          <StepCell \n            key={index}\n            steps={value} outId={outId}\n            isScrollable={isScrollable}\n            gradient={createGradient(index)} \n            onChange={value => updateSteps({ index, value })} \n          />\n        ))}\n\n        {isLoop ? <LoopCell isStart={false} isScrollable={isScrollable} /> : <div />}\n\n        {list.length > 1 ? <div />:\n        <div className='palette-info'><i>Color mode will be converted to Mono on </i><b>Apply</b>.<br/>\n        <i>To use Age Based color mode add at least one </i><b>Color</b> <i>or</i> <b>Gradient</b> <i>from the</i> <b>Add</b> <i>menu</i></div>}\n\n        <div style={{ height: isScrollable ? 65 : 0 }} />\n      </div>\n\n      <Footer \n        hasBg={isScrollable && scrollAtEnd}\n        isLoop={isLoop}\n        onClear={clear} onReset={reset} onApply={apply}\n        onAddGradient={addGradient} onAddTint={addTint} onAddLoop={addLoop}\n      />\n    </div>\n  )\n}\n\nconst Footer = ({ \n  hasBg, isLoop,\n  onClear, onReset, onApply,\n  onAddTint, onAddGradient, onAddLoop \n}) => {\n  const [isAdd, setIsAdd] = useState(false)\n\n  const className = `palette-footer ${hasBg ? 'pf-bg' : ''}`\n  const loopName = `${isLoop ? '-' : '+'} Loop`\n\n  return (\n    <div className={className}>\n      <FooterButton name='+ Add' isControl={true} isIn={!isAdd} x={100} onClick={_ => setIsAdd(true)} />\n      <FooterButton name='Clear' isControl={true} isIn={!isAdd} x={1} y={22} onClick={onClear} />\n      <FooterButton name='Reset' isControl={true} isIn={!isAdd} x={199} y={21} onClick={onReset} />\n      <FooterButton name='Apply' isControl={true} isIn={!isAdd} x={100} y={37} onClick={onApply} />\n\n      <FooterButton name='< Controls' isControl={false} isIn={isAdd} x={100} onClick={_ => setIsAdd(false)} />\n      <FooterButton name='+ Color'    isControl={false} isIn={isAdd} x={1} y={22} onClick={onAddTint} />\n      <FooterButton name='+ Gradient' isControl={false} isIn={isAdd} x={199} y={21} onClick={onAddGradient} />\n      <FooterButton name={loopName}   isControl={false} isIn={isAdd} x={100} y={37} onClick={onAddLoop} />\n    </div>\n  )\n}\n\nconst FooterButton = ({ name, isControl, isIn, x, y, onClick }) => {\n  const [hovered, setHovered] = useState(false)\n  const [pressed, setPressed] = useState(false)\n\n  const fill = pressed ? '#fff' : '#00000000'\n  const stroke = hovered ? '#fff' : '#a2a2a2'\n  const textStyle = { color: pressed ? '#000' : stroke }\n\n  const id = isControl ? 1 : 2\n  const className = `fb-con fb-${id}-${isIn ? 'in' : 'out'}`\n\n  const mouseLeave = _ => {\n    setHovered(false)\n    setPressed(false)\n  }\n\n  return (\n    <div \n      className={className}\n      style={{left: x, top: y}}\n      onClick={onClick}\n      onMouseEnter={_ => setHovered(true)}\n      onMouseLeave={mouseLeave}\n      onMouseDown={_ => setPressed(true)}\n      onMouseUp={_ => setPressed(false)}\n    >\n      <svg className='fb-svg'>\n        <path d='M 0 13 L 10 0 L 94 0 L 104 13 L 94 26 L 10 26 Z' fill={fill} />\n        <path d='M 1 13 L 10 0 M 93 0 L 103 13 L 93 26 M 10 26 L 0 13' strokeWidth={1.5} stroke={stroke} fill='#00000000' />\n        <path d='M 10 0 L 94 0 M 93 26 L 10 26' strokeWidth={2.5} stroke={stroke} />\n      </svg>\n      <div className='fb-lbl center' style={textStyle}>{name}</div>\n    </div>\n  )\n}\n\nconst TintCell = ({ color, isScrollable, outId, onChange, onDeleteQueue, onDeleteFinish }) => {\n  const [hex, setHex] = useState('#FFFFFF')\n\n  const getAccent = () => {\n    const { r, g, b } = hex2rgb(color)\n    const bright = (r * 299 + g * 587 + b * 114) / 1000\n    return bright < 140 ? '#ffffff' : '#000000'\n  }\n\n  const animEnded = event => {\n    if (event.animationName == 'pc-out-anim') {\n      onDeleteFinish()\n    }\n  }\n\n  const updateHex = e => {\n    const text = e.target.value\n    if (text.indexOf('#') < 0) {\n      setHex(`#${text}`)\n    } else if (text.length > hex.length && text.length < 8) {\n      if (/^[0-9A-Fa-f]+$/.test(text.substring(1))) setHex(text)\n      if (text.length === 7) onChange(text)\n    } else if (text.length < hex.length && text.length > 0) {\n      setHex(text)\n    }\n  }\n\n  const editingComplete = () => {\n    let _hex = hex\n    const padding = 7 - _hex.length\n    for (let i = 0; i < padding; i++) {\n      _hex += \"0\"\n    }\n    setHex(_hex)\n    onChange(_hex)\n  }\n\n  useEffect(() => setHex(color), [color])\n\n  const style = { backgroundColor: color }\n  const contentStyle = { color: getAccent() }\n  const className = `tint-con pc-${isScrollable ? 'scrl' : 'con'} ${outId}`\n\n  return (\n    <div className={className} style={style} onAnimationEnd={animEnded}>\n      <div className='tint-icon-con'>\n        <IoColorPaletteOutline className='tint-icon center' style={contentStyle} />\n        <input className='tint-input' type='color' value={color} onChange={e => onChange(e.target.value)} />\n      </div>\n      <div className='tint-icon-con tint-trash-con' onClick={onDeleteQueue}>\n        <VscTrash className='tint-icon center' style={contentStyle} />\n      </div>\n\n      <input \n        className='palette-tf tint-tf' type='input' \n        value={hex.toUpperCase()} style={contentStyle} \n        onChange={updateHex} onBlur={editingComplete}\n      />\n    </div>\n  )\n}\n\nconst StepCell = ({ steps, isScrollable, outId, gradient, onChange }) => {\n  const style = { borderImageSource: gradient }\n  \n  const stepper = (diff) => {\n    onChange(`${steps + diff}`)\n  }\n\n  const className = `step-con pc-${isScrollable ? 'scrl' : 'con'} ${outId}`\n\n  return (\n    <div className={className}>\n      <VscChevronLeft className='step-arrow' onClick={_ => stepper(-1)} />\n      <VscChevronRight className='step-arrow step-right' onClick={_ => stepper(1)} />\n\n      <input \n        className='palette-tf step-tf' type='input' \n        value={steps} style={style} \n        onChange={e => onChange(e.target.value)}\n      />\n    </div>\n  )\n}\n\nconst LoopCell = ({ isStart, isScrollable }) => <ExSubTitle \n  subtitle={`LOOP ${isStart ? 'START' : 'END'}`} \n  width={isStart ? 118 : 122} isScrollable={isScrollable}\n/>\n\nconst generateShades = (list) => {\n  const shades = []\n\n  let index = 0\n  while (index < list.length) {\n    const { isTint, value } = list[index]\n\n    if (isTint) {\n      shades.push(value)\n      index += 1\n    } else {\n      const prev = hex2rgb(list[index - 1].value)\n      const next = hex2rgb(list[index + 1].value)\n      const steps = value + 1\n\n      const dr = (next.r - prev.r) / steps\n      const dg = (next.g - prev.g) / steps\n      const db = (next.b - prev.b) / steps\n\n      for (let i = 1; i < steps; i++) {\n        shades.push(rgb2hex({ r: prev.r + dr * i, g: prev.g + dg * i, b: prev.b + db * i }))\n      }\n\n      shades.push(rgb2hex({ r: next.r, g: next.g, b: next.b }))\n      index += 2\n    }\n  }\n\n  return shades\n}\n\nconst hex2rgb = (hex) => {\n  const bigint = parseInt(hex.substring(1), 16)\n  return {\n    r: (bigint >> 16) & 255,\n    g: (bigint >> 8) & 255,\n    b: bigint & 255\n  }\n}\n\nconst rgb2hex = ({ r, g, b }) => {\n  return \"#\" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1, 7)\n}\n\nexport default ExPalette","import { useState } from 'react'\nimport { ExCon } from '../ex-comps'\n\nimport PrefsPalette from './PrefsPalette'\nimport AgePalette from './AgePalette.js'\n\nimport './palette.css'\n\nconst ExPalette = ({ \n  isCurrent, pindex, onBgSelect, onSelect, \n  onGradSelect, onImageSelect, onTrailsChanged, onPindexChanged \n}) => {\n  const [shades, setShades] = useState({ isLoop: false, shades: ['#ffffff'] })\n  \n  const monoSelect = mono => onSelect({ isLoop: false, shades: [mono] })\n  const ageSelect = shades => { setShades(shades); onSelect(shades) }\n\n  const pconStyle = {\n    transform: `translateX(${pindex * -324}px)`\n  }\n\n  return (\n    <ExCon title='Palette' isCurrent={isCurrent}>\n      <div className='ex-pcon' style={pconStyle}>\n        <PrefsPalette \n          shades={shades}\n          onBackgroundSelect={onBgSelect} \n          onMonoSelect={monoSelect}\n          onGradientSelect={onGradSelect}\n          onImageSelect={onImageSelect}\n          onTrailsChanged={onTrailsChanged}\n          onAgeConfigure={() => onPindexChanged(1)} \n        />\n\n        <AgePalette \n          isCurrent={isCurrent} \n          onSelect={ageSelect} \n        />\n      </div>\n    </ExCon>\n  )\n}\n\nexport default ExPalette\n","import { BsChevronLeft } from 'react-icons/bs'\n\nimport { ExIndicator } from './ex-comps'\nimport { useState } from 'react'\nimport { \n  Play, Draw, Speed, Shapes, Rules, Colors, Close,\n  BrushIcon, GridIcon, SpeedIcon \n} from './qa-buttons'\n\nimport QaTooltip from './QaTooltip'\nimport QaSlider from './QaSlider'\nimport ExRules from './ExRules'\nimport ExShapes from './ExShapes'\nimport ExPalette from './palette/ExPalette'\n\nimport './quick-access.css'\n\n/* \nTODO: \n0. OPTIMIZE CANVAS (Google how to)\n1. Fix palette first cell delete when second cell is step cell (*)\n2. Add border-radius to palette cells. (**) tried but not possible to add border radius to border image\n3. Implement textfields of palette cells (*)\n4. Add limits to palette cells\n5. Add Next as right click of Play/Pause\n6. Add wrap to grid (*)\n7. Add trailing palette (Start palette once cell dies to black)\n6. Divide grid into different rules\n  a. Add different colors for different rules\n7. Add background image / gradient and alive cells are transparent / dead cells are black (better perormance) (*)\n8. Option to 'Keep' earlier iterations in grid (Dont clear canvas) (*)\n  a. Maybe \"clear\" the rect with rgba(0, 0, 0, .1) each draw cycle? (or some smaller a;) (*)\n9. Add X, Y offsets to all fillers (like Cross)\n10. Replace LMB and RMB with icons\n11. Improve cross browser compatibility with line-height: 1 (see md-con and children in palette.css)\n*/\n\nlet sliderValue = 0\n\nconst QuickAccess = ({ \n  animId, qaHidden, qaExpanded, qaMinimised, \n  qaSlider, isPlaying, isDrawing, \n\n  onQaHoverChanged, onQaExpanded, onQaMinimised, onQaSlider, \n  onPlayClicked, onDrawClicked, onQaClose, onTempPause,\n\n  onShapeSelect, onFillSelect, onClear, onRuleSelect, onWrapChanged, onBgSelect, onShadesSelect, \n  onGradSelect, onImageSelect, onTrailsChanged, onBrushChanged, onSizeChanged, onSpeedChanged, \n}) => {\n  const [qaIndex, setQaIndex] = useState(0)\n  const [slideId, setSlideId] = useState('na')\n  const [tipIndex, setTipIndex] = useState(0)\n  const [tipVis, setTipVis] = useState(false)\n  const [backVis, setBackVis] = useState(false)\n  const [exPindices, setExPindices] = useState([0, 0, 0, 0, 0, 0])\n\n  const qaExAction = (index, pindex = 0) => {\n    if (!qaExpanded) {\n      onQaExpanded(true)\n    } else {\n      if (qaIndex === index && exPindices[index] === pindex) {\n        onQaExpanded(false)\n        return\n      }\n    }\n\n    setExPindices(exPindices.map((item, i) => i === index ? pindex : item))\n    if (backVis) setBackVis(false)\n    setQaIndex(index)\n  }\n\n  const exChangePage = (index, pindex, enableBack = false) => {\n    setExPindices(exPindices.map((item, i) => i === index ? pindex : item))\n    setBackVis(enableBack)\n  }\n\n  const closeAction = () => {\n    if (qaExpanded) onQaExpanded(false)\n    else onQaClose()\n  }\n\n  const minimise = () => onQaMinimised(true)\n\n  const maximise = () => {\n    if (qaMinimised) onQaMinimised(false)\n  }\n\n  const showSlider = (id) => {\n    setSlideId(id)\n    onQaSlider(true)\n  }\n\n  const dismissSlider = () => {\n    onQaSlider(false)\n    if (slideId === 'grid') {\n      onSizeChanged(sliderValue)\n    }\n  }\n\n  const sliderValueChanged = (value) => {\n    sdat[slideId].value = value\n    sliderValue = value\n    \n    switch (slideId) {\n      case 'speed': onSpeedChanged(value); break\n      case 'brush': onBrushChanged(value); break\n    }\n  }\n\n  const hoverChangedAtIndex = (hovered, index) => {\n    setTipVis(hovered)\n    if (hovered) setTipIndex(index)\n  }\n\n  const animdelays = animdelaysJson[animId]\n  const unhide = !qaHidden && !qaSlider && !qaMinimised\n  const closeAnimDuration = animId === 'sl2in' || animId === 'in2sl' || animId === 'ex2sl' ? 0 : 240\n\n  return (\n    <div className='qa-root'>\n      <div \n        className={`base base-${animId}`}\n        onClick={maximise}\n        onMouseEnter={() => onQaHoverChanged(true)}\n        onMouseLeave={() => onQaHoverChanged(false)}\n      >\n        <div className={`ex-base ex-base-${animId}`}>\n          <ExIndicator selectedIndex={qaIndex} />\n\n          <ExShapes \n            isCurrent={qaIndex === 2} \n            onShapeSelect={onShapeSelect} \n            onFillSelect={onFillSelect}\n            onClear={onClear}\n            onSliding={onTempPause} \n          />\n\n          <ExRules \n            isCurrent={qaIndex === 3} \n            pindex={exPindices[3]}\n            onSelect={onRuleSelect} \n            onWrapChanged={onWrapChanged}\n            onPindexChanged={pi => exChangePage(3, 1, true)}\n          />\n\n          <ExPalette \n            isCurrent={qaIndex === 4} \n            pindex={exPindices[4]}\n            onBgSelect={onBgSelect}\n            onSelect={onShadesSelect} \n            onGradSelect={onGradSelect}\n            onImageSelect={onImageSelect}\n            onTrailsChanged={onTrailsChanged}\n            onPindexChanged={pi => exChangePage(4, 1, true)}\n          />\n\n          <Back vis={backVis} onClick={() => exChangePage(qaIndex, 0)} />\n        </div>\n\n        <div className='con'>\n          <QaSlider \n            unhide={qaSlider} \n            icon={sdat[slideId].icon} \n            value={sdat[slideId].value}\n            range={sdat[slideId].range}\n            onChange={sliderValueChanged}\n            onDismiss={dismissSlider} \n          />\n\n          <div className='qa-padding' />\n\n          <Play \n            isPlaying={isPlaying} unhide={unhide} animDelay={animdelays[0]} \n            onClick={onPlayClicked} \n            onHoverChanged={h => hoverChangedAtIndex(h, 0)}\n          />\n\n          <Draw \n            isDrawing={isDrawing} unhide={unhide} animDelay={animdelays[1]} \n            onClick={onDrawClicked} onRightClick={_ => showSlider('brush')} \n            onHoverChanged={h => hoverChangedAtIndex(h, 1)}\n          />\n          \n          <Shapes \n            unhide={unhide} animDelay={animdelays[2]} \n            onClick={_ => qaExAction(2)} onRightClick={_ => showSlider('grid')} \n            onHoverChanged={h => hoverChangedAtIndex(h, 2)}\n          />\n\n          <Rules \n            unhide={unhide} animDelay={animdelays[3]} \n            onClick={_ => qaExAction(3, 0)} onRightClick={_ => qaExAction(3, 1)} \n            onHoverChanged={h => hoverChangedAtIndex(h, 3)}\n          />\n\n          <Colors \n            unhide={unhide} animDelay={animdelays[4]} \n            onClick={_ => qaExAction(4)} onRightClick={_ => qaExAction(4, 1)}\n            onHoverChanged={h => hoverChangedAtIndex(h, 4)}\n          />\n\n          <Speed \n            unhide={unhide} animDelay={animdelays[5]} \n            onClick={_ => showSlider('speed')} \n            onHoverChanged={h => hoverChangedAtIndex(h, 5)}\n          />\n\n          <Close \n            unhide={unhide} animDelay={animdelays[6]} animDuration={closeAnimDuration}\n            onClick={closeAction} onRightClick={minimise}\n            onHoverChanged={h => hoverChangedAtIndex(h, 6)}\n          />\n\n          <div className='qa-padding' />\n        </div>\n      </div>\n\n      <QaTooltip vis={tipVis} index={tipIndex} />\n    </div>\n  )\n}\n\nconst Back = ({ vis, onClick }) => {\n  return (\n    <div \n      className={`ex-back ${vis ? 'ex-back-vis' : ''}`}\n      onClick={onClick}\n    >\n      <BsChevronLeft className='ex-back-ico center' />\n      {/* <div className='ex-back-lbl center'>{'<'}</div> */}\n    </div>\n  )\n}\n\nconst animdelaysJson = {\n  'out2in': [280, 320, 360, 400, 440, 480, 520],\n  'in2out': [0, 0, 0, 0, 0, 0, 0],\n  'min2out': [0, 0, 0, 0, 0, 0, 0],\n  'out2min': [0, 0, 0, 0, 0, 0, 0],\n  'in2min': [0, 0, 0, 0, 0, 0, 0],\n  'min2in': [280, 320, 360, 400, 440, 480, 520],\n  'in2ex': [0, 0, 0, 0, 0, 0, 0],\n  'ex2in': [0, 0, 0, 0, 0, 0, 0],\n  'ex2sl': [0, 0, 0, 0, 0, 0, 0],\n  'ex2min': [0, 0, 0, 0, 0, 0, 0],\n  'sl2in': [240, 200, 160, 120, 80, 40, 240],\n  'in2sl': [0, 0, 0, 0, 0, 0, 0]\n}\n\nconst sdat = {\n  na: { value: -1, range: [0, 1], icon: <div /> },\n  brush: { value: 25, range: [1, 100], icon: <BrushIcon /> },\n  grid: { value: 5, range: [1, 50], icon: <GridIcon /> },\n  speed: { value: 97, range: [1, 100], icon: <SpeedIcon /> }\n}\n\nexport default QuickAccess\n","const MouseReceiver = ({ \n  isDrawing, isPainting, \n  onBrushDown, onBrushUp,\n  onDraw, onErase, onPaint, onMouseMove, onPreview \n}) => {\n\n  /* Hooked onPreview to drawHook */\n  \n  const draw = (e) => onDraw(e.clientX, e.clientY)\n  const erase = (e) => onErase(e.clientX, e.clientY)\n  const preview = e => onPreview(e.clientX, e.clientY)\n  \n  const drawStart = (e) => {\n    if (e.button === 0) drawHook = draw\n    else if (e.button === 2) drawHook = erase\n    onBrushDown()\n  }\n  \n  const drawEnd = (e) => {\n    drawHook(e)\n    drawHook = () => {}\n    onBrushUp()\n  }\n  \n  const mouseMove = (e) => {\n    drawHook(e)\n    onMouseMove()\n  }\n\n  const clickAction = () => {\n    if (isPainting) onPaint()\n  }\n\n  const contextAction = e => {\n    e.preventDefault()\n  }\n\n  /* --- Init --- */\n  if (isPainting) {\n    drawStartHook = () => {}\n    drawEndHook = () => {}\n    drawHook = preview\n  } else if (isDrawing) {\n    drawStartHook = drawStart\n    drawEndHook = drawEnd\n    drawHook = () => {}\n  } else {\n    drawStartHook = () => {}\n    drawEndHook = () => {}\n    drawHook = () => {}\n  }\n\n  return (\n    <div \n      className={`receiver${isDrawing || isPainting ? ' receiver-active' : ''}`}\n      \n      onClick={clickAction}\n      onContextMenu={contextAction}\n      onMouseDown={drawStartHook}\n      onMouseUp={drawEndHook}\n      onMouseLeave={drawEndHook}\n      onMouseMove={mouseMove}\n    />\n  )\n}\n  \nlet drawStartHook = () => {}\nlet drawEndHook = () => {}\nlet drawHook = () => {}\n\nexport default MouseReceiver\n","import { Provider } from './context/Context'\n\n// import Prototype from './prototypes/Prototype'\nimport World from './components/World'\n\nfunction App() {\n  return (\n    // <Prototype />\n    <Provider>\n      <World />\n    </Provider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}