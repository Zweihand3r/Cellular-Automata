{"version":3,"sources":["components/notifications/Notifications.js","context/DataContext.js","context/NotificationContext.js","components/helpers.js","static/color-grid.js","components/shapes.js","components/shades.js","components/grid.js","components/rules.js","components/quick-access/ex-comps.js","components/quick-access/qa-buttons.js","components/quick-access/QaTooltip.js","components/quick-access/QaSlider.js","components/quick-access/ExRules.js","components/quick-access/ExShapes.js","components/quick-access/palette/PrefsPalette.js","components/quick-access/palette/AgePalette.js","components/controls/Controls.js","components/resizer/Resizer.js","components/World.js","components/quick-access/palette/ExPalette.js","components/quick-access/QuickAccess.js","components/receivers/MouseReceiver.js","App.js","index.js"],"names":["tid","gridW","Math","floor","window","innerWidth","gridH","innerHeight","constructFillers","name","fill","config","init","range","min","fillers","contextState","rules","b","s","shapes","DataContext","createContext","DataProvider","children","useState","state","setState","Provider","value","setDimensions","_gridW","_gridH","RuleNotification","highlightS","className","Notifications","message","timeout","messageIndex","show","setShow","outPhase","setOutPhase","useEffect","clearTimeout","setTimeout","undefined","onAnimationEnd","e","animationName","NotificationContext","NotificationProvider","setMessage","setMessageIndex","showNotification","pv","helperNames","print2dArray","arr2d","printStr","y","length","x","console","log","clamp","a","max","lerp","inverseLerp","bX","bY","selectedShape","selectedFill","monoShade","shades","isLooped","ages","ageMax","updateAge","selectedShadesSeq","size","brushSize","grid","neighbours","wrapEnabled","pCells","pOutOfBounds","pX","pY","inverseBg","alphaBg","background","drawBackground","isClearCanvas","randomInit","createGrid","args","constructGrid","clear","invert","random","vstripes","hstripes","dstripes","rect","checkered","cross","mesh","wraplines","create2dArray","si","wi","w","h","hi","snapshot","push","start","end","astart","xoff","yoff","xstart","ystart","xi","yi","sxi","ax","sx","sy","syi","ay","func","yiter","array","checkBounds","global_S","global_B","setRule","split","map","i","parseInt","checkSurvival","alive","indexOf","checkBirth","setShades","shadeSeq","isLoop","constructShades","row","_updateLoopedAge","_updateAge","_resetAge","isAlive","_incrementAge","_incrementLoopedAge","initGrid","calculateDimensions","createRandom","generateNeighbours","updateDrawBackground","reInitGrid","updateShades","reCreateGrid","drawGrid","ctx","fillStyle","fillRect","drawInverse","canvas","width","height","clearRect","drawShaded","drawShapes","setBrushSize","bsz","drawOnGrid","applyBrush","eraseOnGrid","paint","preview","cx","cy","gX","gY","cells","outOfBounds","offX","offY","getShape","setupPreview","shape","setShape","setGridWrap","wrap","setFill","_","setTrails","toString","hf","ox","oy","_x","_y","cX","cY","nei","generation","tl","tr","br","bl","t","r","l","n_center","n_topLtW","n_topRtW","n_botRtW","n_botLtW","n_topW","n_rightW","n_bottomW","n_leftW","n_topLt","n_topRt","n_botRt","n_botLt","n_top","n_right","n_bottom","n_left","top","topRt","right","botRt","bottom","botLt","left","topLt","topW","topRtW","rtTopW","rightW","rtBotW","botRtW","bottomW","botLtW","ltBotW","leftW","ltTopW","topLtW","ExCon","title","isCurrent","join","toUpperCase","ExIndicator","props","selectedIndex","canvasRef","useRef","style","current","getContext","setAttribute","lineWidth","strokeStyle","points","moveTo","forEach","lineTo","stroke","ref","ExSubTitle","subtitle","fontSize","isScrollable","ExCheckbox","checked","onChange","onClick","ExHexButton","hovered","setHovered","pressed","setPressed","textStyle","color","onMouseEnter","onMouseLeave","onMouseDown","onMouseUp","d","strokeWidth","QaButton","unhide","animDelay","animDuration","onRightClick","onHoverChanged","hoverRef","animationDuration","animationDelay","onContextMenu","preventDefault","Play","isPlaying","Draw","isDrawing","Speed","Shapes","Rules","Colors","Close","BrushIcon","GridIcon","SpeedIcon","tips","0","1","2","3","4","5","6","QaTooltip","vis","index","midX","path","msgConStyle","tip","liveValue","QaSlider","icon","onDismiss","offsetX","trackX","setTrackX","isPressed","setIsPressed","isHovered","setIsHovered","lower","upper","updateTrackX","rounded","round","mouseDown","useCallback","button","document","addEventListener","mouseUp","once","trackStyle","thumbStyle","labelStyle","conClass","thumbClass","labelClass","closeClass","onMouseMove","clientX","isKeyModeSurvival","Presets","currentIndex","onSelect","selected","ari","Custom","activeRule","onSelectPresets","onWrapChanged","onChanged","updateRule","nb","ns","numbers","onNumbersChanged","WrapGrid","setChecked","marginTop","_checked","ActiveRule","RuleOption","Numbers","toggles","setToggles","updateNumbers","n","togs","charAt","text","checkChanged","v","DiamondBtn","btnStyle","btnClass","cbClass","RuleCell","nameCN","ruleCN","ExRules","pindex","onPindexChanged","useContext","arIndex","setArIndex","setActiveRule","pconStyle","transform","updateActiveRule","selectedRule","isCustom","keyListener","key","sarr","splice","_s","sort","barr","bi","_b","keyCode","body","removeEventListener","icat","ishape","Fillers","onSliding","setCurrentIndex","ex","onExpanded","exAction","FillCell","backgroundColor","borderColor","configAction","stopPropagation","iconClass","moded","onDown","onUp","FSlide","hov","setHov","setValue","slideClass","type","step","target","MidIndic","paths","visible","ExShapes","onShapeSelect","onFillSelect","onClear","isShapes","setIsShapes","Modes","states","selectColor","onMonoChanged","onGradientChanged","onImageSelect","onAgeConfigure","onTrailsChanged","mono","gradient","src","trails","uploadRef","modesClass","updateGradientStops","trailsChanged","uploadImage","click","onSrcChange","files","URL","createObjectURL","alt","renderContent","ColorSelection","hex","setHex","hasFocus","setHasFocus","_hex","test","substring","onFocus","onBlur","padding","ModeDropdown","onExpand","baseClass","lblClass","modes","mode","Trails","showInfo","setShowInfo","opacity","PrefsPalette","onBackgroundSelect","onMonoSelect","onGradientSelect","modeEx","setModeEx","modeIndex","setModeIndex","modeStates","setModeStates","nextStates","st","grad","animActive","scrollListenerAttached","lastApplied","list","isTint","outId","Footer","hasBg","onReset","onApply","onAddTint","onAddGradient","onAddLoop","isAdd","setIsAdd","loopName","isControl","isIn","FooterButton","TintCell","onDeleteQueue","onDeleteFinish","contentStyle","hex2rgb","g","getAccent","event","StepCell","steps","borderImageSource","stepper","diff","rightClick","LoopCell","isStart","generateShades","prev","next","dr","dg","db","rgb2hex","bigint","slice","ExPalette","setList","setIsLoop","scrollAtEnd","setScrollAtEnd","listRef","createGradient","g1","g2","scrollToEnd","scroll","scrollHeight","behavior","scrollListener","scrollTop","clientHeight","reset","updatedList","updateTint","deleteIndices","_list","deleteQueuedAtIndex","filter","updateSteps","COLOR_GRID","hsl2rgb","f","k","padStart","j","hideTimeoutIndex","mouseMoveIndex","timer","ctxbg","gradientStops","ColorGrid","cgVisible","currentHex","onCustom","onCancel","isVisible","setIsVisible","isCustomChanged","setIsCustomChanged","inputRef","animEnded","qaExpanded","onBgSelect","onGradSelect","setCgVisible","cgCurrentHex","setCgCurrentHex","onColorSelectedRef","AgePalette","sliderValue","Back","animdelaysJson","sdat","na","brush","speed","QuickAccess","animId","qaHidden","qaMinimised","qaSlider","onQaHoverChanged","onQaExpanded","onQaMinimised","onQaSlider","onPlayClicked","onDrawClicked","onQaClose","onTempPause","onRuleSelect","onShadesSelect","onBrushChanged","onSizeChanged","onSpeedChanged","qaIndex","setQaIndex","slideId","setSlideId","tipIndex","setTipIndex","tipVis","setTipVis","backVis","setBackVis","exPindices","setExPindices","setPhantomUpdateIndex","qaExAction","item","exChangePage","enableBack","showSlider","id","hoverChangedAtIndex","speedLower","speedUpper","ps","animdelays","closeAnimDuration","pi","drawStartHook","drawEndHook","drawHook","MouseReceiver","isPainting","onBrushDown","onBrushUp","onDraw","onErase","onPaint","onPreview","draw","clientY","erase","qaEnabled","isTempPause","Controls","onIsPlayingChanged","onBrushDownChanged","onPreviewStart","onPreviewEnd","hide","exp","slide","qaState","setQaState","setIsPlaying","setIsDrawing","setIsPainting","updateQaHidden","inState","updateQaMinimised","outState","toggleIsPlaying","_isPlaying","toggleIsDrawing","_isDrawing","requestFullscreen","pause","Resizer","isResizing","onResizing","countdown","setCountdown","resizeHandler","clearInterval","setInterval","p","drawSpeed","isBrushDown","isInverseDraw","isAgeShades","isInverseImage","isShapeShades","isPlayingChanged","update","_update","brushDownChanged","_isBrushDown","reconfigureDraw","shadesSelected","updateBackground","setShadeSeq","triggerDraw","speedChanged","spd","startPreview","previewConfig","endPreview","setBackground","bg","setGradient","stops","initInverseDraw","applyGradient","setupImageBackground","createLinearGradient","addColorStop","resizeBgRedraw","findex","pop","updateGrid","_draw","_fdraw","World","fps","setFps","showFps","bgImgSrc","setBgImgSrc","setIsResizing","canvasbgRef","updateCanvasSize","canvasBg","animationFrameId","fLogIndex","fLogTime","context","contextBg","startTime","Date","now","logFps","render","requestAnimationFrame","cancelAnimationFrame","sz","_isResizing","App","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.0cb3ee5c.chunk.js","sourcesContent":["import { useState, useEffect } from 'react'\nimport \"./notifications.css\"\n\nconst AUTO_HIDE_DELAY = 5000\n\nlet tid\n\n// message => string | JSX\n\nconst Notifications = ({ message, timeout, messageIndex }) => {\n  const [show, setShow] = useState(false)\n  const [outPhase, setOutPhase] = useState(false)\n\n  const animEnded = e => {\n    if (e.animationName === \"fade-out-anim\") {\n      setShow(false)\n      setOutPhase(false)\n    }\n  }\n\n  useEffect(() => {\n    if (message) {\n      if (!show) {\n        setShow(true)\n      }\n\n      if (outPhase) {\n        setOutPhase(false)\n      }\n      \n      if (tid) {\n        clearTimeout(tid)\n      }\n      tid = setTimeout(() => {\n        setOutPhase(true)\n        tid = undefined\n      }, timeout * 1000 || AUTO_HIDE_DELAY)\n\n      return () => {\n        if (tid) {\n          clearTimeout(tid)\n        }\n      }\n    } else {\n      setShow(false)\n      setOutPhase(false)\n    }\n  }, [message, messageIndex])\n\n  return (\n    <div>\n      {show && (\n        <div className='notification-container'>\n          <div \n            className={`notification-bubble ${outPhase && 'bubble-out'}`}\n            onAnimationEnd={animEnded}\n          >\n            {message}\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport const RuleNotification = ({ b, s, highlightS }) => (\n  <div>\n    <span className={highlightS && \"text-dim\"}>B{b}</span>{\" \"}\n    <span className={!highlightS && \"text-dim\"}>S{s}</span>\n  </div>\n)\n\nexport default Notifications","import { createContext, useState } from 'react'\n\nimport shapes from '../static/shapes.json'\n\nlet gridW = Math.floor(window.innerWidth / 5)\nlet gridH = Math.floor(window.innerHeight / 5)\n\nconst rules = [\n  { name: 'Conway\\'s Life', b: '3',       s: '23' },\n  { name: '2x2',            b: '36',      s: '125' },\n  { name: '34 Life',        b: '34',      s: '34' },\n  { name: 'Amoeba',         b: '357',     s: '1358' },\n  { name: 'Anneal',         b: '4678',    s: '35678' },\n  { name: 'Assimilation',   b: '345',     s: '4567' },\n  { name: 'Coagulations',   b: '378',     s: '235678' },\n  { name: 'Coral',          b: '3',       s: '45678' },\n  { name: 'Day & Night',    b: '3678',    s: '34678' },\n  { name: 'Diamoeba',       b: '35678',   s: '5678' },\n  { name: 'Gnarl',          b: '1',       s: '1' },\n  { name: 'High Life',      b: '36',      s: '23' },\n  { name: 'Inverse Life',   b: '0123478', s: '34678' },\n  { name: 'Life w/ Death',  b: '3',       s: '012345678' },\n  { name: 'Long Life',      b: '345',     s: '5' },\n  { name: 'Maze',           b: '3',       s: '12345' },\n  { name: 'Mazectric',      b: '3',       s: '1234' },\n  { name: 'Morley',         b: '368',     s: '245' },\n  { name: 'Move',           b: '368',     s: '245' },\n  { name: 'Pseudo Life',    b: '357',     s: '238' },\n  { name: 'Replicator',     b: '1357',    s: '1357' },\n  { name: 'Seeds',          b: '2',       s: '' },\n  { name: 'Serviettes',     b: '234',     s: '' },\n  { name: 'Stains',         b: '3678',    s: '235678' },\n  { name: 'Untitled',       b: '25',      s: '4' },\n  { name: 'Walled Cities',  b: '45678',   s: '2345' }\n]\n\nconst constructFillers = () => {\n  return [\n    { name: 'Chaotic Random', fill: 'random', config: [\n      { name: 'Density', init: 50, range: [1, 99] }\n    ]},\n    { name: 'Ordered Random', fill: 'wraplines', config: [\n      { name: 'Offset A', init: Math.floor(gridW / 20), range: [1, Math.floor(gridW / 2)] },\n      { name: 'Offset B', init: Math.floor(gridW / 15), range: [1, Math.floor(gridW / 2)] }\n    ]},\n    { name: 'Vertical Stripes', fill: 'vstripes', config: [\n      { name: 'Spacing', init: 1, range: [1, Math.floor(gridW / 2)] },\n      { name: 'Thickness', init: 1, range: [1, Math.floor(gridW / 2)] }\n    ]},\n    { name: 'Horizontal Stripes', fill: 'hstripes', config: [\n      { name: 'Spacing', init: 1, range: [1, Math.floor(gridH / 2)] } ,\n      { name: 'Thickness', init: 1, range: [1, Math.floor(gridH / 2)] }\n    ]},\n    { name: 'Diagonal Stripes', fill: 'dstripes', config: [\n      { name: 'Spacing', init: 5, range: [1, Math.floor(Math.min(gridW, gridH) / 2)] },\n      { name: 'Thickness', init: 2, range: [1, Math.floor(Math.min(gridW, gridH) / 2)] }\n    ]},\n    { name: 'Rectangle', fill: 'rect', config: [\n      { name: 'Width', init: gridW, range: [2, gridW] }, \n      { name: 'Height', init: gridH, range: [2, gridH] }\n    ]},\n    { name: 'Checkered', fill: 'checkered', config: [\n      { name: 'Width', init: 4, range: [1, Math.floor(gridW / 2)] },\n      { name: 'Height', init: 4, range: [1, Math.floor(gridH / 2)] }\n    ]},\n    { name: 'Cross', fill: 'cross', config: [\n      { name: 'X Offset', init: 0, range: [-gridW / 2, gridW / 2 - (1 - gridW % 2)] }, // -1 if gridW is even\n      { name: 'Y Offset', init: 0, range: [-gridH / 2, gridH / 2 - (1 - gridH % 2)] }, \n      { name: 'Width', init: 1, range: [1, gridW / 2] }, \n      { name: 'Height', init: 1, range: [1, gridW / 2] }, \n    ]},\n    { name: 'Mesh', fill: 'mesh', config: [\n      { name: 'X Spacing', init: 5, range: [1, Math.floor(gridW / 2)] },\n      { name: 'Y Spacing', init: 5, range: [1, Math.floor(gridH / 2)] },\n      { name: 'X Thickness', init: 1, range: [1, Math.floor(gridW / 2)] },\n      { name: 'X Thickness', init: 1, range: [1, Math.floor(gridH / 2)] }\n    ]},\n  ]\n}\n\nconst fillers = constructFillers()\n\nconst contextState = { gridW, gridH, rules, shapes, fillers }\nconst DataContext = createContext(contextState)\n\nconst DataProvider = ({ children }) => {\n  const [state, setState] = useState(contextState)\n\n  const setDimensions = (_gridW, _gridH) => {\n    gridW = _gridW; gridH = _gridH\n    setState({ ...state, fillers: constructFillers() })\n  }\n\n  return (\n    <DataContext.Provider value={{ ...state, setDimensions }}>\n      {children}\n    </DataContext.Provider>\n  )\n}\n\nexport { DataContext, DataProvider }","import { createContext, useState } from \"react\"\nimport Notifications from \"../components/notifications/Notifications\"\n\nconst NotificationContext = createContext({})\n\nconst NotificationProvider = ({ children }) => {\n  const [message, setMessage] = useState(\"\")\n  const [timeout, setTimeout] = useState(0)\n  const [messageIndex, setMessageIndex] = useState(0)\n\n  const showNotification = (message, timeout = 0) => {\n    setMessage(message)\n    setTimeout(timeout)\n    setMessageIndex(pv => pv + 1)\n  }\n\n  return (\n    <NotificationContext.Provider value={{ showNotification }}>\n      {children}\n      <Notifications \n        message={message} \n        timeout={timeout}\n        messageIndex={messageIndex} \n      />\n    </NotificationContext.Provider>\n  )\n}\n\nexport { NotificationContext, NotificationProvider }","const helperNames = []\nwindow.helperNames = helperNames\n\nconst createHelpers = (helpers) => {\n  helpers.forEach(helper => {\n    let name = helper.name\n    if (window[name]) name = `f${name.charAt(0).toUpperCase()}${name.substring(1)}`\n    window[name] = helper\n    helperNames.push(name)\n  })\n}\n\nwindow.print2dArray = (arr2d) => {\n  let printStr = \"\"\n  for (let y = 0; y < arr2d.length; y++) {\n    for (let x = 0; x < arr2d[y].length; x++) {\n      printStr += `${arr2d[y][x]} `\n    }\n    printStr += '\\n'\n  }\n  console.log(printStr)\n}\n\nMath.clamp = (x, a, b) => Math.min(Math.max(x, a), b)\nMath.lerp = (a, b, x) => a + (b - a) * Math.clamp(x, 0, 1)\nMath.inverseLerp = (a, b, x) => Math.clamp((x - a) / (b - a), 0, 1)\n\nexport { createHelpers }","const COLOR_GRID = []\n\nconst hsl2rgb = (h, s, l) => {\n  l /= 100;\n  const a = s * Math.min(l, 1 - l) / 100;\n  const f = n => {\n    const k = (n + h / 30) % 12;\n    const color = l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);\n    return Math.round(255 * color).toString(16).padStart(2, '0');   // convert to Hex and prefix \"0\" if needed\n  };\n  return `#${f(0)}${f(8)}${f(4)}`;\n}\n\nconst kStep = 100 / 17\nfor (let k = 0; k < 17; k++) {\n  COLOR_GRID.push(hsl2rgb(0, 0, k * kStep))\n}\nCOLOR_GRID.push(\"#ffffff\")\n\nconst iStep = 360 / 16\nconst jStep = 80 / 18\nfor (let i = 0; i < 16; i++) {\n  for (let j = 0; j < 18; j++) {\n    COLOR_GRID.push(hsl2rgb(i * iStep, 100, 10 + j * jStep))\n  }\n}\n\nexport default COLOR_GRID","let bX, bY, selectedShape, selectedFill\n\nconst randomInit = [\n  'random', 'vstripes', 'hstripes', 'dstripes', \n  'rect','checkered', 'cross', 'mesh', 'wraplines'\n]\n\nconst setBounds = (x, y) => {\n  bX = x\n  bY = y\n}\n\nconst setShape = shape => {\n  selectedShape = shape\n}\n\nconst getShape = (gX, gY) => {\n  const cells = []\n  let outOfBounds = false\n  for (let [offX, offY] of selectedShape) {\n    const x = gX + offX\n    const y = gY + offY\n    if (checkBounds(x, y)) {\n      cells.push([x, y])\n    } else {\n      if (!outOfBounds) {\n        outOfBounds = true\n      }\n    }\n  }\n\n  return { cells, outOfBounds }\n}\n\nconst createGrid = ({ fill, grid, args }) => {\n  selectedFill = fill\n  return constructGrid(fill, grid, args)\n}\n\nconst createRandom = ({ grid }) => {\n  const fill = randomInit[Math.floor(Math.random() * randomInit.length)]\n  console.log(`Created random fill: ${fill}`)\n  return createGrid({ fill, grid })\n}\n\nconst reCreateGrid = ({ grid }) => {\n  return constructGrid(selectedFill, grid)\n}\n\nconst constructGrid = (fill, grid, args) => {\n  switch (fill) {\n    case 'clear': return clear()\n    case 'invert': return invert(grid)\n    case 'random': return random(args)\n    case 'vstripes': return vstripes(args)\n    case 'hstripes': return hstripes(args)\n    case 'dstripes': return dstripes(args)\n    case 'rect': return rect(args)\n    case 'checkered': return checkered(args)\n    case 'cross': return cross(args)\n    case 'mesh': return mesh(args)\n    case 'wraplines': return wraplines(args)\n    default: break\n  }\n}\n\nconst clear = () => create2dArray(() => 0)\nconst invert = (grid) => create2dArray(({ x, y }) => 1 - grid[y][x])\n\nconst random = (args = [50]) => create2dArray(() => {\n  return Math.random() < args[0] / 100 ? 1 : 0\n})\n\nconst vstripes = (args = [1, 1]) => {\n  const [s, w] = args\n  let si, wi, a\n  return create2dArray(() => {\n    if (a) {\n      if (wi < w) { wi += 1; a = 1 } \n      else { si = 1; a = 0 }\n    } else {\n      if (si < s) { si += 1; a = 0 } \n      else { a = 1; wi = 1 }\n    }\n    return a\n  }, () => {\n    a = 0; wi = 0; si = 0\n  })\n}\n\nconst hstripes = (args = [1, 1]) => {\n  const [s, h] = args\n  let si = 0, hi = 0, a = 0\n  return create2dArray(() => {\n    return a\n  }, () => {\n    if (a) {\n      if (hi < h) { hi += 1; a = 1 }\n      else { si = 1; a = 0 }\n    } else {\n      if (si < s) { si += 1; a = 0 }\n      else { a = 1; hi = 1 }\n    }\n  })\n}\n\nconst dstripes = (args = [1, 1]) => {\n  /* Lazy code. Need to find better alternative */\n  const [s, w] = args\n  const snapshot = []\n  let wi = 0, si = 0, di = 0, a = 0\n  return create2dArray(({ y }) => {\n    if (y === 0) snapshot.push({ wi, si, a })\n    if (a) {\n      if (wi < w) { wi += 1; a = 1 } \n      else { si = 1; a = 0 }\n    } else {\n      if (si < s) { si += 1; a = 0 } \n      else { a = 1; wi = 1 }\n    }\n    return a\n  }, ({ y }) => {\n    if (y > 0) {\n      wi = snapshot[y].wi\n      si = snapshot[y].si\n      a = snapshot[y].a\n    }\n  })\n}\n\nconst rect = (args = [bX, bY]) => {\n  const [w, h] = args\n  const start = { \n    x: Math.floor((bX - w) / 2), \n    y: Math.floor((bY - h) / 2)\n  }\n  const end = { x: start.x + w - 1, y: start.y + h - 1 }\n  const grid = create2dArray(() => 0)\n  for (let wi = start.x; wi <= end.x; wi++) {\n    grid[start.y][wi] = 1\n    grid[end.y][wi] = 1\n  }\n  for (let hi = start.y; hi <= end.y; hi++) {\n    grid[hi][start.x] = 1\n    grid[hi][end.x] = 1\n  }\n  return grid\n}\n\nconst checkered = (args = [4, 4]) => {\n  const [w, h] = args\n  let wi = 0, hi = 0, astart = 0, a = astart\n  return create2dArray(() => {\n    if (wi < w) { wi += 1 }\n    else { wi = 1; a = 1 - a }\n    return a\n  }, () => {\n    if (hi < h) { hi += 1 }\n    else { hi = 1; astart = 1 - astart }\n    a = astart; wi = 0\n  })\n}\n\nconst cross = (args = [0, 0, bX, bY]) => {\n  const [xoff, yoff, w, h] = args\n  const xstart = Math.floor(bX / 2) + xoff - Math.floor(w / 2)\n  const ystart = Math.floor(bY / 2) + yoff - Math.floor(h / 2)\n  const grid = create2dArray(() => 0)\n  for (let xi = 0; xi < bX; xi++) {\n    for (let hi = 0; hi < h; hi++) {\n      if (ystart + hi < bY) {\n        grid[ystart + hi][xi] = 1\n      }\n    }\n  }\n  for (let yi = 0; yi < bY; yi++) {\n    for (let wi = 0; wi < w; wi++) {\n      if (xstart + wi < bX) {\n        grid[yi][xstart + wi] = 1\n      }\n    }\n  }\n  return grid\n}\n\nconst mesh = (args = [1, 1, 1, 1]) => {\n  const [sx, sy, w, h] = args\n  let sxi, wi, ax\n  let syi = 0, hi = 0, ay = 0\n  return create2dArray(() => {\n    if (ay) {\n      return 1\n    } else if (ax) {\n      if (wi < w) { wi += 1; ax = 1 }\n      else { sxi = 1; ax = 0 }\n    } else {\n      if (sxi < sx) { sxi += 1; ax = 0 }\n      else { ax = 1; wi = 1 }\n    }\n    return ax\n  }, () => {\n    ax = 0; wi = 0; sxi = 0\n    if (ay) {\n      if (hi < h) { hi += 1; ay = 1 }\n      else { syi = 1; ay = 0 }\n    } else {\n      if (syi < sy) { syi += 1; ay = 0 }\n      else { ay = 1; hi = 1 }\n    }\n  })\n}\n\nconst wraplines = (args = [1, 1]) => {\n  const [w, s] = args\n  let si = 0, wi = 0, a = 0\n  return create2dArray(() => {\n    if (a) {\n      if (wi < w) { wi += 1; a = 1 } \n      else { si = 1; a = 0 }\n    } else {\n      if (si < s) { si += 1; a = 0 } \n      else { a = 1; wi = 1 }\n    }\n    return a\n  })\n}\n\nconst create2dArray = (func, yiter = () => {}) => {\n  const array = []\n  for (let y = 0; y < bY; y++) {\n    array[y] = []\n    yiter({ y })\n    for (let x = 0; x < bX; x++) {\n      array[y][x] = func({ x, y })\n    }\n  }\n  return array\n}\n\n/* Yes this is a duplicate of grid.js checkBounds */\nconst checkBounds = (x, y) => x > -1 && y > -1 && x < bX && y < bY\n\nexport { setBounds, setShape, getShape, createGrid, reCreateGrid, createRandom }","let monoShade, shades, isLooped, ages, ageMax, updateAge, selectedShadesSeq\n\nconst getShade = (x, y) => shades[ages[y][x]]\n\nconst setShades = ({ shadeSeq, isLoop, grid }) => {\n  selectedShadesSeq = shadeSeq\n  isLooped = isLoop\n  constructShades(shadeSeq, grid)\n}\n\nconst updateShades = ({ grid }) => {\n  constructShades(selectedShadesSeq, grid)\n}\n\nconst resetAges = () => ages = ages ? ages.map(row => row.map(_ => 0)) : []\n\nconst constructShades = (shadeSeq, grid) => {\n  if (shadeSeq.length > 1) {\n    shades = ['age starts from index 1', ...shadeSeq]\n    ageMax = shades.length - 1\n    ages = grid.map(row => row.map(i => 0))\n    updateAge = isLooped ? _updateLoopedAge : _updateAge\n  } else {\n    monoShade = shadeSeq[0]\n    updateAge = () => {}\n  }\n}\n\nconst _incrementAge = (x, y) => {\n  if (ages[y][x] < ageMax) {\n    ages[y][x] += 1\n  }\n}\n\nconst _incrementLoopedAge = (x, y) => {\n  if (ages[y][x] < ageMax) {\n    ages[y][x] += 1\n  } else {\n    ages[y][x] = 0\n  }\n}\n\nconst _resetAge = (x, y) => {\n  if (ages[y][x] > 0) {\n    ages[y][x] = 0\n  }\n}\n\nconst _updateAge = (isAlive, x, y) => {\n  if (isAlive) _incrementAge(x, y)\n  else _resetAge(x, y)\n}\n\nconst _updateLoopedAge = (isAlive, x, y) => {\n  if (isAlive) _incrementLoopedAge(x, y)\n  else _resetAge(x, y)\n}\n\nexport { monoShade, getShade, setShades, updateShades, resetAges, updateAge }","import { createHelpers } from './helpers'\nimport { setBounds, setShape, getShape, createGrid, reCreateGrid, createRandom } from './shapes'\nimport { setRule, checkSurvival, checkBirth } from './rules'\nimport { monoShade, getShade, setShades, updateShades, resetAges, updateAge } from './shades'\n\nlet gridW, gridH, size, brushSize\nlet grid, neighbours, wrapEnabled\nlet pCells, pOutOfBounds, pX, pY // pX, pY = Current preview cell coordinates\nlet inverseBg, alphaBg, background, drawBackground, isClearCanvas // background = inverseBg + alphaBg\n\n\n/* --- Exports --- */\n\nconst initGrid = () => {\n  size = 5\n  brushSize = 25\n  calculateDimensions()\n\n  wrapEnabled = false\n\n  grid = createRandom({ grid })\n  generateNeighbours(gridW, gridH)\n\n  alphaBg = '00'\n  background = inverseBg + alphaBg // inverseBg initialised in World init\n  setShades({ shadeSeq: ['#ffffff'], grid })\n\n  isClearCanvas = true\n  updateDrawBackground()\n}\n\nconst reInitGrid = () => {\n  calculateDimensions()\n  grid = reCreateGrid({ grid })\n  updateShades({ grid })\n  generateNeighbours(gridW, gridH)\n\n  return { gridW, gridH }\n}\n\nconst updateGrid = () => {\n  let isAlive\n  const pop = []\n  for (let yi = 0; yi < grid.length; yi++) {\n    const row = []\n    for (let xi = 0; xi < grid[yi].length; xi++) {\n      const alive = neighbours[yi][xi](xi, yi)\n      if (grid[yi][xi]) {\n        isAlive = checkSurvival(alive, xi, yi)\n      } else {\n        isAlive = checkBirth(alive, xi, yi)\n      }\n      row.push(isAlive)\n      updateAge(isAlive, xi, yi)\n    }\n    pop.push(row)\n  }\n  grid = pop\n}\n\nconst drawGrid = (ctx) => {\n  drawBackground(ctx)\n  ctx.fillStyle = monoShade\n  for (let yi = 0; yi < grid.length; yi++) {\n    for (let xi = 0; xi < grid[yi].length; xi++) {\n      if (grid[yi][xi]) {\n        ctx.fillRect(xi * size, yi * size, size, size)\n      }\n    }\n  }\n}\n\nconst drawInverse = (ctx) => {\n  ctx.fillStyle = inverseBg\n  ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height)\n  for (let yi = 0; yi < grid.length; yi++) {\n    for (let xi = 0; xi < grid[yi].length; xi++) {\n      if (grid[yi][xi]) {\n        ctx.clearRect(xi * size, yi * size, size, size)\n      }\n    }\n  }\n}\n\nconst drawShaded = (ctx) => {\n  drawBackground(ctx)\n  for (let yi = 0; yi < grid.length; yi++) {\n    for (let xi = 0; xi < grid[yi].length; xi++) {\n      if (grid[yi][xi]) {\n        ctx.fillStyle = getShade(xi, yi)\n        ctx.fillRect(xi * size, yi * size, size, size)\n      }\n    }\n  }\n}\n\nconst drawShapes = (ctx) => {\n  ctx.fillStyle = '#000000'\n  ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height)\n  ctx.fillStyle = '#a2a2a2'\n  for (let yi = 0; yi < grid.length; yi++) {\n    for (let xi = 0; xi < grid[yi].length; xi++) {\n      if (grid[yi][xi]) {\n        ctx.fillRect(xi * size, yi * size, size, size)\n      }\n    }\n  }\n  ctx.fillStyle = pOutOfBounds ? '#ff3434' : '#ffffff'\n  for (let i = 0; i < pCells.length; i++) {\n    const [x, y] = pCells[i]\n    ctx.fillRect(x * size, y * size, size, size)\n  }\n}\n\nconst setBrushSize = bsz => brushSize = bsz\n\nconst drawOnGrid = (x, y) => applyBrush(x, y, 1)\nconst eraseOnGrid = (x, y) => applyBrush(x, y, 0)\n\nconst paint = () => {\n  if (!pOutOfBounds) {\n    for (let i = 0; i < pCells.length; i++) {\n      const [x, y] = pCells[i]\n      grid[y][x] = 1\n    }\n  }\n}\n\nconst preview = (x, y) => { \n  const cx = Math.min(Math.floor(x / size), gridW - 1)\n  const cy = Math.min(Math.floor(y / size), gridH - 1)\n  if (cx !== pX || cy !== pY) {\n    pX = cx; pY = cy\n    const { cells, outOfBounds } = getShape(cx, cy)\n    pCells = cells; pOutOfBounds = outOfBounds\n  }\n}\n\nconst setSize = (sz) => {\n  if (sz !== size) {\n    size = sz\n    reInitGrid()\n  }\n\n  return { gridW, gridH }\n}\n\nconst setupPreview = shape => {\n  setShape(shape)\n  pX = -1; pY = -1\n  pCells = []; pOutOfBounds = false\n}\n\nconst setGridWrap = wrap => {\n  wrapEnabled = wrap\n  generateNeighbours(gridW, gridH)\n}\n\nconst setFill = (fill, args) => {\n  grid = createGrid({ fill, grid, args })\n  resetAges()\n}\n\nconst setInverseBg = invbg => {\n  inverseBg = invbg\n  background = inverseBg + alphaBg\n}\n\nconst setShadeSeq = ({ shades, isLoop }) => {\n  setShades({ shadeSeq: shades, isLoop, grid })\n}\n\nconst setTrails = i => {\n  i = 255 - i\n  alphaBg = `${i < 16 ? '0' : ''}${i.toString(16)}`\n  background = inverseBg + alphaBg\n\n  if (i < 255) {\n    if (isClearCanvas) {\n      isClearCanvas = false\n      updateDrawBackground()\n    }\n  } else {\n    /* Cause you can hit 255 only once */\n    isClearCanvas = true\n    updateDrawBackground()\n  }\n}\n\n/* --- End Exports --- */\n\nconst setDimensions = (_gridW, _gridH) => {\n  gridW = _gridW\n  gridH = _gridH\n\n  setBounds(gridW, gridH)\n}\n\nconst calculateDimensions = () => {\n  setDimensions(\n    Math.floor(window.innerWidth / size),\n    Math.floor(window.innerHeight / size)\n  )\n\n  console.log(`Calculated gridW: ${gridW}, gridH: ${gridH}`)\n}\n\nconst updateDrawBackground = () => {\n  drawBackground = isClearCanvas ? ctx => {\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height)\n  } : ctx => {\n    ctx.fillStyle = background\n    ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height)\n  }\n}\n\nconst applyBrush = (x, y, b) => {\n  const bsz = Math.max(1, Math.floor(brushSize / size))\n  const cx = Math.min(Math.floor(x / size), gridW - 1)\n  const cy = Math.min(Math.floor(y / size), gridH - 1)\n  if (bsz > 1) {\n    const hf = Math.floor(bsz / 2)\n    const ox = cx - hf\n    const oy = cy - hf\n    for (let xi = 0; xi < bsz; xi++) {\n      for (let yi = 0; yi < bsz; yi++) {\n        const _x = ox + xi\n        const _y = oy + yi\n        if (checkBounds(_x, _y)) {\n          grid[_y][_x] = b\n        }\n      }\n    }\n  } else {\n    grid[cy][cx] = b\n  }\n}\n\nconst generateNeighbours = (bX, bY) => {\n  const cX = bX - 1\n  const cY = bY - 1\n  const nei = []\n  const generation = (tl, tr, br, bl, t, r, b, l) => {\n    for (let y = 0; y < bY; y++) {\n      nei[y] = []\n      for (let x = 0; x < bX; x++) {\n        if (x === 0 && y === 0) nei[y][x] = tl\n        else if (x === cX && y === 0) nei[y][x] = tr\n        else if (x === cX && y === cY) nei[y][x] = br\n        else if (x === 0 && y === cY) nei[y][x] = bl\n        else if (y === 0) nei[y][x] = t\n        else if (x === cX) nei[y][x] = r\n        else if (y === cY) nei[y][x] = b\n        else if (x === 0) nei[y][x] = l\n        else nei[y][x] = n_center\n      }\n    }\n  }\n  if (!wrapEnabled) generation(n_topLt, n_topRt, n_botRt, n_botLt, n_top, n_right, n_bottom, n_left)\n  else generation(n_topLtW, n_topRtW, n_botRtW, n_botLtW, n_topW, n_rightW, n_bottomW, n_leftW) \n  neighbours = nei\n}\n\n/* --- NAMING ---\n * topRt    - Top Right\n * topRtW   - Top Right Wraped\n * topRtWC  - Top Right Wraped Corner \n * rtTopW   - Right Top Wraped\n * 'Corners' and 'topRtW/rtTopW separations' are extra checks that arise because of wraping\n */\n\nconst top = (x, y) => grid[y - 1][x]\nconst topRt = (x, y) => grid[y - 1][x + 1]\nconst right = (x, y) => grid[y][x + 1]\nconst botRt = (x, y) => grid[y + 1][x + 1]\nconst bottom = (x, y) => grid[y + 1][x]\nconst botLt = (x, y) => grid[y + 1][x - 1]\nconst left = (x, y) => grid[y][x - 1]\nconst topLt = (x, y) => grid[y - 1][x - 1]\n\nconst topW = (x) => grid[gridH - 1][x]\nconst topRtW = (x) => grid[gridH - 1][x + 1]\nconst topRtWC = () => grid[gridH - 1][0]\nconst rtTopW = (_, y) => grid[y - 1][0]\nconst rightW = (_, y) => grid[y][0]\nconst rtBotW = (_, y) => grid[y + 1][0]\nconst botRtWC = () => grid[0][0]\nconst botRtW = (x) => grid[0][x + 1]\nconst bottomW = (x) => grid[0][x]\nconst botLtW = (x) => grid[0][x - 1]\nconst botLtWC = () => grid[0][gridW - 1]\nconst ltBotW = (_, y) => grid[y + 1][gridW - 1]\nconst leftW = (_, y) => grid[y][gridW - 1]\nconst ltTopW = (_, y) => grid[y - 1][gridW - 1]\nconst topLtWC = () => grid[gridH - 1][gridW - 1]\nconst topLtW = (x) => grid[gridH - 1][x - 1]\n\nconst n_top = (x, y) => right(x, y) + botRt(x, y) + bottom(x, y) + botLt(x, y) + left(x, y)\nconst n_topRt = (x, y) => bottom(x, y) + botLt(x, y) + left(x, y)\nconst n_right = (x, y) => top(x, y) + bottom(x, y) + botLt(x, y) + left(x, y) + topLt(x, y)\nconst n_botRt = (x, y) => top(x, y) + left(x, y) + topLt(x, y)\nconst n_bottom = (x, y) => top(x, y) + topRt(x, y) + right(x, y) + left(x, y) + topLt(x, y)\nconst n_botLt = (x, y) => top(x, y) + topRt(x, y) + right(x, y)\nconst n_left = (x, y) => top(x, y) + topRt(x, y) + right(x, y) + botRt(x, y) + bottom(x, y)\nconst n_topLt = (x, y) => right(x, y) + botRt(x, y) + bottom(x, y)\nconst n_center = (x, y) => top(x, y) + topRt(x, y) + right(x, y) + botRt(x, y) + bottom(x, y) + botLt(x, y) + left(x, y) + topLt(x, y)\n\nconst n_topW = (x, y) => topW(x, y) + topRtW(x, y) + right(x, y) + botRt(x, y) + bottom(x, y) + botLt(x, y) + left(x, y) + topLtW(x, y)\nconst n_topRtW = (x, y) => topW(x, y) + topRtWC(x, y) + rightW(x, y) + rtBotW(x, y) + bottom(x, y) + botLt(x, y) + left(x, y) + topLtW(x, y)\nconst n_rightW = (x, y) => top(x, y) + rtTopW(x, y) + rightW(x, y) + rtBotW(x, y) + bottom(x, y) + botLt(x, y) + left(x, y) + topLt(x, y)\nconst n_botRtW = (x, y) => top(x, y) + rtTopW(x, y) + rightW(x, y) + botRtWC(x, y) + bottomW(x, y) + botLtW(x, y) + left(x, y) + topLt(x, y)\nconst n_bottomW = (x, y) => top(x, y) + topRt(x, y) + right(x, y) + botRtW(x, y) + bottomW(x, y) + botLtW(x, y) + left(x, y) + topLt(x, y)\nconst n_botLtW = (x, y) => top(x, y) + topRt(x, y) + right(x, y) + botRtW(x, y) + bottomW(x, y) + botLtWC(x, y) + leftW(x, y) + ltTopW(x, y)\nconst n_leftW = (x, y) => top(x, y) + topRt(x, y) + right(x, y) + botRt(x, y) + bottom(x, y) + ltBotW(x, y) + leftW(x, y) + ltTopW(x, y)\nconst n_topLtW = (x, y) => topW(x, y) + topRtW(x, y) + right(x, y) + botRt(x, y) + bottom(x, y) + ltBotW(x, y) + leftW(x, y) + topLtWC(x, y)\n\nconst checkBounds = (x, y) => x > -1 && y > -1 && x < gridW && y < gridH\n\n// createHelpers([])\n\nexport { \n  initGrid, reInitGrid, updateGrid, drawGrid, drawInverse, drawShaded, drawShapes, drawOnGrid, eraseOnGrid, paint, preview,\n  setBrushSize, setSize, setupPreview, setFill, setGridWrap, setRule, setShadeSeq, setInverseBg, setTrails\n}","let global_S = [2, 3]\nlet global_B = [3]\n\nconst setRule = ({ b, s }) => {\n  global_B = b.split('').map(i => parseInt(i))\n  global_S = s.split('').map(i => parseInt(i))\n}\n\nconst globalSurvivalTrigger = (alive, x, y) => {\n  return global_S.indexOf(alive) > -1 ? 1 : 0\n}\n\nconst globalBirthTrigger = (alive, x, y) => {\n  return global_B.indexOf(alive) > -1 ? 1 : 0\n}\n\nconst localSurvivalTrigger = (alive, x, y) => {\n\n}\n\nconst localBirthTrigger = (alive, x, y) => {\n\n}\n\nlet checkSurvival = globalSurvivalTrigger\nlet checkBirth = globalBirthTrigger\n\nexport { setRule, checkSurvival, checkBirth }","import { useState, useRef, useEffect } from 'react'\nimport { IoMdCheckboxOutline, IoMdSquareOutline } from 'react-icons/io'\n\n/* Need to adjust width if any changes to qa */\nconst width = 324 * 2\n\nconst ExCon = ({ title, isCurrent, children }) => {\n  return (\n    <div className={`ex-con ex-con-${isCurrent ? 'in' : 'out'}`}>\n      <div className='ex-title'>\n        <div className='ex-title-lbl center'>\n          {title.split('').join(' ').toUpperCase()}\n        </div>\n      </div>\n      <div className='ex-cont'>\n        {children}\n      </div>\n    </div>\n  )\n}\n\nconst ExIndicator = (props) => {\n  const { selectedIndex } = props\n  const canvasRef = useRef(null)\n\n  const style = {\n    width, left: (8 - width / 2 + 22) + (44 * selectedIndex)\n  }\n\n  useEffect(() => {\n    const canvas = canvasRef.current\n    const ctx = canvas.getContext('2d')\n\n    canvas.setAttribute('width', width)\n    canvas.setAttribute('height', 444)\n\n    ctx.lineWidth = 2\n    ctx.strokeStyle = '#a2a2a2'\n\n    const points = [[width / 2 - 10, 400], [width / 2, 406], [width / 2 + 10, 400], [width, 400]]\n\n    ctx.moveTo(0, 400)\n    points.forEach(([x, y]) => ctx.lineTo(x, y))\n    ctx.stroke()\n\n  }, [])\n\n  return (\n    <canvas className='ex-indic' ref={canvasRef} style={style} />\n  )\n}\n\nconst ExSubTitle = ({ \n  children,\n  subtitle, fontSize = 10,\n  width, isScrollable = false, \n  left = 0, right = 0 \n}) => {\n  const className = `ex-st-con ex-item-${isScrollable ? 'scrl' : 'con'}`\n\n  return (\n    <div className={className} style={{height: fontSize + 3}}>\n      <div className='ex-st-hr' style={{ width, left }} />\n      <div className='ex-st-lbl' style={{ fontSize }}>\n        {subtitle ? subtitle.toUpperCase() : children}\n      </div>\n      <div className='ex-st-hr' style={{ width, right }} />\n    </div>\n  )\n}\n\nconst ExCheckbox = ({ name, checked, style = {}, onChange }) => {\n  return (\n    <div \n      className='ex-cb-con' style={style} \n      onClick={() => onChange(!checked)}\n    >\n      {name}\n      {checked ? \n      <IoMdCheckboxOutline className='ex-cb-ico' /> : \n      <IoMdSquareOutline className='ex-cb-ico' />}\n    </div>\n  )\n}\n\nconst ExHexButton = ({ name, x, y, onClick }) => {\n  const [hovered, setHovered] = useState(false)\n  const [pressed, setPressed] = useState(false)\n\n  const mouseLeave = _ => {\n    setHovered(false)\n    setPressed(false)\n  }\n\n  const fill = pressed ? '#fff' : '#00000000'\n  const stroke = hovered ? '#fff' : '#a2a2a2'\n  const textStyle = { color: pressed ? '#000' : stroke }\n\n  return (\n    <div\n      className='ex-hb-con'\n      style={{left: x, top: y}}\n      onMouseEnter={_ => setHovered(true)}\n      onMouseLeave={mouseLeave}\n      onMouseDown={_ => setPressed(true)}\n      onMouseUp={_ => setPressed(false)}\n      onClick={onClick}\n    >\n      <svg className='ex-hb-svg'>\n        <path d='M 0 13 L 10 0 L 134 0 L 144 13 L 134 26 L 10 26 Z' fill={fill} />\n        <path d='M 1 13 L 10 0 M 133 0 L 142 13 L 133 26 M 10 26 L 0 13' strokeWidth={1.5} stroke={stroke} fill='#00000000' />\n        <path d='M 10 0 L 134 0 M 133 26 L 10 26' strokeWidth={2.5} stroke={stroke} />\n      </svg>\n      <div className='ex-hb-lbl center' style={textStyle}>{name}</div>\n    </div>\n  )\n}\n\nexport { ExCon, ExIndicator, ExSubTitle, ExCheckbox, ExHexButton }","import { useRef } from 'react'\nimport { FaPlay, FaPause } from 'react-icons/fa'\nimport { IoSpeedometer } from 'react-icons/io5'\nimport { CgExtension } from 'react-icons/cg'\nimport { RiHeartPulseFill } from 'react-icons/ri'\nimport { RiBrushFill, RiBrushLine } from 'react-icons/ri'\nimport { IoIosColorPalette, IoMdCloseCircle } from 'react-icons/io'\n\nconst QaButton = ({ \n  children, unhide, animDelay, animDuration = 240, \n  onClick, onRightClick = () => {}, onHoverChanged \n}) => {\n  const hoverRef = useRef(false)\n\n  const rightClick = (e) => {\n    e.preventDefault()\n    onRightClick()\n  }\n\n  const mouseEnter = () => {\n    hoverRef.current = true\n    setTimeout(() => {\n      if (hoverRef.current) {\n        onHoverChanged(true)\n      }\n    }, 1000)\n  }\n\n  const mouseLeave = () => {\n    hoverRef.current = false\n    onHoverChanged(false)\n  }\n\n  const className = `qa-btn-con ${unhide ? 'qa-btn-in' : 'qa-btn-out'}`\n\n  const style = {\n    animationDuration: `${animDuration}ms`,\n    animationDelay: unhide ? `${animDelay}ms` : '0ms'\n  }\n\n  return (\n    <div \n      className={className} style={style}\n      onClick={onClick} onContextMenu={rightClick}\n      onMouseEnter={mouseEnter} onMouseLeave={mouseLeave}\n    >{children}</div>\n  )\n}\n\nconst Play = ({ isPlaying, unhide, animDelay, onClick, onHoverChanged }) => {\n  return (\n    <QaButton \n      onClick={onClick} \n      unhide={unhide} \n      animDelay={animDelay} \n      onHoverChanged={onHoverChanged}\n    >\n      {isPlaying ?\n      <FaPause className='center' /> :\n      <FaPlay className='center' />}\n    </QaButton>\n  )\n}\n\nconst Draw = ({ isDrawing, unhide, animDelay, onClick, onRightClick, onHoverChanged }) => {\n  return (\n    <QaButton \n      onClick={onClick} \n      onRightClick={onRightClick} \n      unhide={unhide} \n      animDelay={animDelay} \n      onHoverChanged={onHoverChanged}\n    >\n      {isDrawing ? <RiBrushFill className='center qa-draw' /> : <BrushIcon />}\n    </QaButton>\n  )\n}\n\nconst Speed = ({ unhide, animDelay, onClick, onHoverChanged }) => {\n  return (\n    <QaButton \n      onClick={onClick} \n      unhide={unhide} \n      animDelay={animDelay} \n      onHoverChanged={onHoverChanged}\n    >\n      <SpeedIcon />\n    </QaButton>\n  )\n}\n\nconst Shapes = ({ unhide, animDelay, onClick, onRightClick, onHoverChanged }) => {\n  return (\n    <QaButton \n      onClick={onClick} \n      onRightClick={onRightClick} \n      unhide={unhide} \n      animDelay={animDelay} \n      onHoverChanged={onHoverChanged}\n    >\n      <GridIcon />\n    </QaButton>\n  )\n}\n\nconst Rules = ({ unhide, animDelay, onClick, onRightClick, onHoverChanged }) => {\n  return (\n    <QaButton \n      onClick={onClick} \n      onRightClick={onRightClick}\n      unhide={unhide} \n      animDelay={animDelay} \n      onHoverChanged={onHoverChanged}\n    >\n      <RiHeartPulseFill className='center qa-rules' />\n    </QaButton>\n  )\n}\n\nconst Colors = ({ unhide, animDelay, onClick, onRightClick, onHoverChanged }) => {\n  return (\n    <QaButton \n      onClick={onClick} \n      onRightClick={onRightClick}\n      unhide={unhide} \n      animDelay={animDelay} \n      onHoverChanged={onHoverChanged}\n    >\n      <IoIosColorPalette className='center qa-colors' />\n    </QaButton>\n  )\n}\n\nconst Close = ({ unhide, animDelay, animDuration, onClick, onRightClick, onHoverChanged }) => {\n  return (\n    <QaButton \n      onClick={onClick} \n      onRightClick={onRightClick}\n      unhide={unhide} \n      animDelay={animDelay} \n      animDuration={animDuration}\n      onHoverChanged={onHoverChanged}\n    >\n      <IoMdCloseCircle className='center qa-close' />\n    </QaButton>\n  )\n}\n\nconst BrushIcon = () => <RiBrushLine className='center qa-draw' />\nconst GridIcon = () => <CgExtension className='center qa-shapes' />\nconst SpeedIcon = () => <IoSpeedometer className='center qa-speed' />\n\nexport { \n  Play, Draw, Speed, Shapes, Rules, Colors, Close,\n  BrushIcon, GridIcon, SpeedIcon\n}","const QaTooltip = ({ vis, index }) => {\n  const startX = (window.innerWidth - 324) / 2\n  const midX = startX + 8 + (44 * index) + 22\n  const path = `M ${midX - 12} 8 L ${midX} 0 L ${midX + 12} 8`\n  const msgConStyle = { left: midX }\n\n  const className = `qa-tt-con ${vis ? 'qa-tt-con-in' : ''}`\n  const tip = tips[index]\n\n  return (\n    <div className={className}>\n      <svg className='qa-tt-svg'>\n        <path d={path} fill='#dfdfdf' />\n      </svg>\n      <div className='qa-tt-msg-con' style={msgConStyle}>\n        <div className='qa-tt-msg'>{tip}</div>\n      </div>\n    </div>\n  )\n}\n\nconst tips = {\n  0: ['Play | Pause'],\n  1: ['LMB: Toggle Brush | RMB: Brush Size'],\n  2: ['LMB: Pattern List | RMB: Grid Cell Size'],\n  3: ['LMB: Configure Rules | RMB: Rule Presets'],\n  4: ['LMB: Color Palette | RMB: Age Based Palette'],\n  5: ['Sim Speed'],\n  6: ['LMB: Close | RMB: Minimise']\n}\n\nexport default QaTooltip\n","import { useState, useEffect, useCallback } from 'react'\nimport { IoMdCloseCircle } from 'react-icons/io'\n\nlet liveValue = 0\n\nconst QaSlider = ({ unhide, icon, value, range, onChange, onDismiss }) => {\n  const offsetX = window.innerWidth / 2 - 162\n  \n  const [trackX, setTrackX] = useState(150)\n  const [isPressed, setIsPressed] = useState(false)\n  const [isHovered, setIsHovered] = useState(false)\n\n  useEffect(() => {\n    const [lower, upper] = range\n    updateTrackX(Math.lerp(20, 300, Math.inverseLerp(lower, upper, value)))\n  }, [value])\n\n  const updateTrackX = (trackX) => {\n    setTrackX(trackX)\n    const [lower, upper] = range\n    const rounded = Math.round(Math.lerp(lower, upper, Math.inverseLerp(20, 300, trackX)))\n    \n    if (rounded !== liveValue) {\n      liveValue = rounded\n      onChange(rounded)\n    }\n  }\n\n  const mouseMove = (e) => {\n    if (isPressed && e.button === 0) {\n      updateTrackX(Math.clamp(e.clientX - offsetX, 20, 300))\n    }\n  }\n\n  const mouseClick = (e) => {\n    updateTrackX(Math.clamp(e.clientX - offsetX, 20, 300))\n  }\n\n  const rightClick = (e) => {\n    e.preventDefault()\n    onDismiss()\n  }\n\n  const mouseDown = useCallback((e) => {\n    if (e.button === 0) {\n      setIsPressed(true)\n      document.addEventListener('mouseup', mouseUp, { once: true })\n    }\n  }, [])\n\n  const mouseUp = () => {\n    setIsPressed(false)\n  }\n\n  const trackStyle = { width: trackX }\n  const thumbStyle = { left: trackX - 20 }\n  const labelStyle = { left: trackX + offsetX - 18 }\n  const conClass = `qa-sl-con ${unhide ? 'qa-sl-in' : ''}`\n  const thumbClass = `qa-sl-thumb ${isHovered ? 'qa-sl-thumb-hov' : ''}`\n  const labelClass = `qa-sl-lbl ${isPressed ? 'qa-sl-lbl-pressed' : ''}`\n  const closeClass = `qa-sl-x ${unhide ? 'qa-sl-x-in' : 'qa-sl-x-out'}`\n\n  return (\n    <div className={conClass}>\n      <div className='qa-sl-track-con'>\n        <div className='qa-sl-track' style={trackStyle} />\n      </div>\n\n      <div className={thumbClass} style={thumbStyle}>\n        {icon}\n      </div>\n\n      <div \n        className='qa-sl-receiver' \n        onMouseMove={mouseMove} \n        onMouseDown={mouseDown}\n        onMouseEnter={_ => setIsHovered(true)}\n        onMouseLeave={_ => setIsHovered(false)}\n        onContextMenu={rightClick}\n        onClick={mouseClick}\n      >\n        <div className={labelClass} style={labelStyle}>{liveValue}</div>\n      </div>\n\n      <div className={closeClass} onClick={onDismiss}>\n        <IoMdCloseCircle className='qa-sl-x-ico' />\n      </div>\n    </div>\n  )\n}\n\nexport default QaSlider\n","import { useState, useEffect, useContext, useCallback } from 'react'\nimport { FiChevronRight } from 'react-icons/fi'\n\nimport { DataContext } from '../../context/DataContext'\nimport { NotificationContext } from '../../context/NotificationContext'\nimport { RuleNotification } from '../notifications/Notifications'\nimport { ExCon, ExSubTitle, ExCheckbox } from './ex-comps'\n\nlet isKeyModeSurvival = false\n\nconst ExRules = ({ isCurrent, pindex, onSelect, onWrapChanged, onPindexChanged }) => {\n  const { rules } = useContext(DataContext)\n  const { showNotification } = useContext(NotificationContext)\n\n  const [arIndex, setArIndex] = useState(0)\n  const [activeRule, setActiveRule] = useState(rules[arIndex]) // Conway's Life\n\n  const pconStyle = {\n    transform: `translateX(${pindex * -324}px)`\n  }\n\n  const updateActiveRule = useCallback(({ b, s, ari }) => {\n    let selectedRule = {...activeRule}\n    if (ari > -1) {\n      if (ari !== arIndex) {\n        setArIndex(ari)\n        selectedRule = rules[ari]\n      }\n    } else {\n      let isCustom = true\n      for (let i = 0; i < rules.length; i++) {\n        if (rules[i].b === b && rules[i].s === s) {\n          if (arIndex !== i) {\n            isCustom = false\n            setArIndex(i)\n            selectedRule = rules[i]\n          }\n          break\n        }\n      }\n      if (isCustom) {\n        selectedRule = { name: 'Custom', b, s }\n        setArIndex(-1)\n      }\n    }\n    setActiveRule(selectedRule)\n    onSelect(selectedRule)\n  }, [activeRule, arIndex, onSelect, rules])\n\n  useEffect(() => {\n    const keyListener = e => {\n      const { b, s } = activeRule\n      switch (e.key) {\n        case \"b\": \n          isKeyModeSurvival = 0\n          showNotification(<RuleNotification b={b} s={s} highlightS={false} />)\n          break\n        case \"s\":\n          isKeyModeSurvival = 1\n          showNotification(<RuleNotification b={b} s={s} highlightS={true} />)\n          break\n        case \"0\":\n        case \"1\":\n        case \"2\":\n        case \"3\":\n        case \"4\":\n        case \"5\":\n        case \"6\":\n        case \"7\":\n        case \"8\": \n          if (isKeyModeSurvival) {\n            const sarr = s.split(\"\")\n            const si = sarr.indexOf(e.key)\n            if (si > -1) {\n              sarr.splice(si, 1)\n            } else {\n              sarr.push(e.key)\n            }\n            const _s = sarr.sort().join(\"\")\n            updateActiveRule({ b, s: _s, ari: -1 })\n            showNotification(<RuleNotification b={b} s={_s} highlightS={true} />)\n          } else {\n            const barr = b.split(\"\")\n            const bi = barr.indexOf(e.key)\n            if (bi > -1) {\n              barr.splice(bi, 1)\n            } else {\n              barr.push(e.key)\n            }\n            const _b = barr.sort().join(\"\")\n            updateActiveRule({ b: _b, s, ari: -1 })\n            showNotification(<RuleNotification b={_b} s={s} highlightS={false} />)\n          }\n          break\n        default:\n          if (e.keyCode === 38) {\n            if (arIndex > 0) {\n              updateActiveRule({ ari: arIndex - 1 })\n              showNotification(rules[arIndex - 1].name)\n            }\n          } else if (e.keyCode === 40) {\n            if (arIndex < rules.length - 1) {\n              updateActiveRule({ ari: arIndex + 1 })\n              showNotification(rules[arIndex + 1].name)\n            }\n          }\n          break\n      }\n    }\n\n    document.body.addEventListener(\"keydown\", keyListener)\n\n    return () => {\n      document.body.removeEventListener(\"keydown\", keyListener)\n    }\n  }, [updateActiveRule])\n\n  return (\n    <ExCon title='Rules' isCurrent={isCurrent}>\n      <div className='ex-pcon' style={pconStyle}>\n        <Presets \n          rules={rules} \n          currentIndex={arIndex} \n          onSelect={updateActiveRule} \n        />\n\n        <Custom \n          activeRule={activeRule}\n          onChanged={updateActiveRule} \n          onWrapChanged={onWrapChanged}\n          onSelectPresets={() => onPindexChanged(1)} \n        />\n      </div>\n    </ExCon>\n  )\n}\n\nconst Presets = ({ rules, currentIndex, onSelect }) => {\n  return (\n    <div className='ex-pg ex-pg2'>\n      <div className='ex-flick'>\n        {rules.map(({name, b, s}, index) => \n        <RuleCell \n          key={index}  \n          name={name} b={b} s={s} \n          selected={currentIndex === index}\n          onClick={() => onSelect({ ari: index })} \n        />)}\n      </div>\n    </div>\n  )\n}\n\nconst Custom = ({ activeRule, onSelectPresets, onWrapChanged, onChanged }) => {\n  const { name, b, s } = activeRule\n\n  const updateRule = ({ nb, ns }) => {\n    onChanged({\n      ari: -1,\n      b: nb !== undefined ? nb : b,\n      s: ns !== undefined ? ns : s\n    })\n  }\n\n  return (\n    <div className='ex-pg'>\n      <div style={{height: 5}} />\n\n      <WrapGrid onChanged={onWrapChanged} />\n      <ActiveRule name={name} onClick={onSelectPresets} />\n\n      <div style={{height: 8}} />\n      <div className='rule-info'>\n        NUMBER OF NEIGHBOUR CELLS REQUIRED FOR\n      </div>\n\n      <div style={{height: 4}} />\n      <ExSubTitle fontSize={13} width={68}>A NEW CELL TO BE <b>B</b>ORN</ExSubTitle>\n      <Numbers numbers={b} onNumbersChanged={nb => updateRule({ nb })} />\n\n      <div style={{height: 8}} />\n      <ExSubTitle fontSize={13} width={50}>AN EXISTING CELL TO <b>S</b>URVIVE</ExSubTitle>\n      <Numbers numbers={s} onNumbersChanged={ns => updateRule({ ns })} />\n    </div>\n  )\n}\n\nconst WrapGrid = ({ onChanged }) => {\n  const [checked, setChecked] = useState(false)\n\n  const updateChecked = () => {\n    const _checked = !checked\n    setChecked(_checked)\n    onChanged(_checked)\n  }\n\n  return <ExCheckbox \n    name='Wrap Grid' \n    checked={checked}\n    style={{marginTop: 10}}\n    onChange={updateChecked} \n  />\n}\n\nconst ActiveRule = ({ name, onClick }) => {\n  return (\n    <RuleOption title='Active Rule' onClick={onClick}>\n      <div className='roc-lbl'>{name}</div>\n      <FiChevronRight className='roc-ico roc-chev' />\n    </RuleOption>\n  )\n}\n\nconst RuleOption = ({ children, title, onClick }) => {\n  return (\n    <div className='rule-opt-con' onClick={onClick}>\n      {title}\n      <div className='ro-ctrl'>{children}</div>\n    </div>\n  )\n}\n\nconst Numbers = ({ numbers, onNumbersChanged }) => {\n  const [toggles, setToggles] = useState([0, 0, 0, 0, 0, 0, 0, 0, 0])\n\n  const updateNumbers = (index, value) => {\n    let numbers = ''\n    toggles.map(\n      (n, i) => i === index ? value : n\n    ).forEach(\n      (t, i) => numbers += `${t ? i : ''}`\n    )\n    onNumbersChanged(numbers)\n  }\n\n  useEffect(() => {\n    const togs = [0, 0, 0, 0, 0, 0, 0, 0, 0]\n    for (let i = 0; i < numbers.length; i++) {\n      togs[parseInt(numbers.charAt(i))] = 1\n    }\n    setToggles(togs)\n\n  }, [numbers])\n\n  return (\n    <div className='dia-lt'>\n      <DiamondBtn text={0} x={10} y={10} checked={toggles[0]} checkChanged={v => updateNumbers(0, v)} />\n      <DiamondBtn text={1} x={40} y={40} checked={toggles[1]} checkChanged={v => updateNumbers(1, v)} />\n      <DiamondBtn text={2} x={70} y={10} checked={toggles[2]} checkChanged={v => updateNumbers(2, v)} />\n      <DiamondBtn text={3} x={100} y={40} checked={toggles[3]} checkChanged={v => updateNumbers(3, v)} />\n      <DiamondBtn text={4} x={130} y={10} checked={toggles[4]} checkChanged={v => updateNumbers(4, v)} />\n      <DiamondBtn text={5} x={160} y={40} checked={toggles[5]} checkChanged={v => updateNumbers(5, v)} />\n      <DiamondBtn text={6} x={190} y={10} checked={toggles[6]} checkChanged={v => updateNumbers(6, v)} />\n      <DiamondBtn text={7} x={220} y={40} checked={toggles[7]} checkChanged={v => updateNumbers(7, v)} />\n      <DiamondBtn text={8} x={250} y={10} checked={toggles[8]} checkChanged={v => updateNumbers(8, v)} />\n    </div>\n  )\n}\n\nconst DiamondBtn = ({ text, x, y, checked, checkChanged }) => {\n  const toggleCheck = () => checkChanged(1 - checked)\n\n  const btnStyle = { left: x , top: y }\n  const btnClass = `dia-btn ${checked ? 'dia-btn-c' : ''}`\n  const cbClass = `dia-cb ${checked ? 'dia-cb-c' : ''}`\n\n  return (\n    <div className={btnClass} style={btnStyle} onClick={toggleCheck} >\n      <div className={cbClass} />\n      <div className='dia-lbl-con'>\n        <div className='dia-lbl center'>{text}</div>\n      </div>\n    </div>\n  )\n}\n\nconst RuleCell = ({ selected, name, b, s, onClick }) => {\n  const nameCN = `rule-item-name ${selected ? 'rule-item-name-sel' : ''}`\n  const ruleCN = `rule-item-rule ${selected ? 'rule-item-rule-sel' : ''}`\n\n  return (\n    <div \n      className='rule-item-con'\n      onClick={onClick}\n    >\n      <div className={nameCN}>{name}</div>\n      <div className={ruleCN}><b>B</b>{b} <b>S</b>{s}</div>\n    </div>\n  )\n}\n\nexport default ExRules\n","import { HiOutlineAdjustments } from 'react-icons/hi'\nimport { IoChevronUp } from 'react-icons/io5'\n\nimport { useState, useEffect, useRef, useContext } from 'react'\nimport { DataContext } from '../../context/DataContext'\n\nimport { ExCon, ExHexButton, ExSubTitle } from './ex-comps'\n\nconst ExShapes = ({ isCurrent, onShapeSelect, onFillSelect, onClear, onSliding }) => {\n  const [isShapes, setIsShapes] = useState(true)\n  const { shapes, fillers } = useContext(DataContext)\n\n  const className = `shape-con ${isShapes ? '' : 'shape-up'}`\n\n  return (\n    <ExCon title='Patterns' isCurrent={isCurrent}>\n      <div className={className}>\n        <Fillers fillers={fillers} onSelect={onFillSelect} onSliding={onSliding} />\n\n        <div className='shape-mid'>\n          <ExHexButton name='Clear'   x={1}   y={6} onClick={onClear} />\n          <ExHexButton name='Invert'  x={159} y={6} onClick={() => onFillSelect('invert')} />\n\n          <MidIndic y={4} visible={!isShapes} onClick={_ => setIsShapes(true)} paths={[\n            'M 1 1 L 10 12 L 19 1', 'M 0 0 L 20 0'\n          ]} />\n\n          <MidIndic y={17} visible={isShapes} onClick={_ => setIsShapes(false)} paths={[\n            'M 1 12 L 10 1 L 19 12', 'M 0 13 L 20 13'\n          ]} />\n        </div>\n\n        <Shapes shapes={shapes} onSelect={onShapeSelect} />\n      </div>\n    </ExCon>\n  )\n}\n\nconst Shapes = ({ shapes, onSelect }) => {\n  return (\n    <div className='shape-list'>\n      <div className='shape-info'>\n        The patterns listed below are meant to be used in<br/>\n        conjuction with <b>Conway's Life (B3-S23)</b> rule.\n      </div>\n      {shapes.map(({ name, shapes }, icat) => (\n        <div key={icat}>\n          <div className='shape-item-pad' />\n          <ExSubTitle subtitle={name} width={132 - name.length * 2} isScrollable={true} />\n\n          {shapes.map(({ name, shape }, ishape) => (\n            <div className='sc-con' key={ishape} onClick={() => onSelect(shape)} >\n              <div className='sc-lbl center'>{name}</div>\n            </div>\n          ))}\n        </div>\n      ))}\n\n    </div>\n  )\n}\n\nconst Fillers = ({ fillers, onSelect, onSliding }) => {\n  const [currentIndex, setCurrentIndex] = useState(-1)\n\n  const exAction = (index) => setCurrentIndex(index === currentIndex ? -1 : index)\n\n  return (\n    <div className='shape-list'>\n      <div className='shape-item-pad' />\n\n      {fillers.map(({ name, fill, config }, index) =>\n        <FillCell \n          key={index}\n          name={name} \n          config={config} \n          ex={currentIndex === index} \n          onSelect={args => onSelect(fill, args)} \n          onSliding={onSliding}\n          onExpanded={() => exAction(index)}\n        />)}\n    </div>\n  )\n}\n\nconst FillCell = ({ name, config, ex, onSelect, onSliding, onExpanded }) => {\n  const [hovered, setHovered] = useState(false)\n  const [pressed, setPressed] = useState(false)\n  const args = useRef(config.map(({init}) => init))\n\n  const style = {\n    height: ex ? 32 + 24 * config.length : 30,\n    backgroundColor: pressed && !ex ? '#ffffff' : '#00000000',\n    color: ex || pressed ? '#000000' : (hovered ? '#ffffff' : '#a2a2a2'),\n    borderColor: ex ? '#a2a2a2' : (hovered ? '#ffffff' : '#00000000')\n  }\n\n  const configAction = e => {\n    e.stopPropagation()\n    onExpanded()\n  }\n\n  const moded = (value, index) => {\n    args.current[index] = value\n    onSelect(args.current)\n  }\n\n  const select = () => onSelect(args.current)\n  \n  const labelClass = `fc-lbl-con ${ex ? 'fc-lbl-con-ex' : ''}`\n  const iconClass = `fc-icon ${ex ? 'fc-icon-ex' : `${hovered ? '' : 'fc-icon-hid'}`}`\n\n  return (\n    <div \n      className='fc-con' \n      style={style} \n      onMouseEnter={() => setHovered(true)}\n      onMouseLeave={() => setHovered(false)}\n      onMouseDown={() => setPressed(true)}\n      onMouseUp={() => setPressed(false)}\n    >\n      <div className={labelClass} onClick={select}>\n        <div className='fc-lbl center'>{name}</div>\n      </div>\n      \n      {ex ? \n      <IoChevronUp className={iconClass} onClick={configAction} /> :\n      <HiOutlineAdjustments className={iconClass} onClick={configAction} onMouseDown={e => e.stopPropagation()} />}\n\n      <div className='fc-ex'>\n        {config.map(({ name, init, range }, index) => <FSlide \n          key={index}\n          name={name} init={init} range={range} \n          onChange={(value) => moded(value, index)}\n          onDown={() => onSliding(true)}\n          onUp={() => onSliding(false)} \n        />)}\n      </div>\n    </div>\n  )\n}\n\nconst FSlide = ({ name, init, range, onChange, onDown, onUp }) => {\n  const [hov, setHov] = useState(false)\n  const [value, setValue] = useState(1)\n\n  const slideAction = e => {\n    const v = parseInt(e.target.value)\n    setValue(v)\n    onChange(v)\n  }\n\n  useEffect(() => {\n    setValue(init)\n  }, [])\n\n  const slideClass = `fslide ${hov ? 'fslide-hov' : ''}`\n\n  return (\n    <div className='fslide-con'>\n      <div className='fslide-lbl'>{name} (<b>{value}</b>)</div>\n      <input \n        className={slideClass} \n        type='range'\n        value={value}\n        step={1}\n        min={range[0]} max={range[1]}\n        onMouseEnter={() => setHov(true)}\n        onMouseLeave={() => setHov(false)}\n        onMouseDown={onDown}\n        onMouseUp={onUp}\n        onChange={slideAction}\n      ></input>\n      {/* <div className='fslide-val'>{value}</div> */}\n    </div>\n  )\n}\n\nconst MidIndic = ({ paths, visible, y, onClick }) => {\n  const [hovered, setHovered] = useState(false)\n  const [pressed, setPressed] = useState(false)\n\n  const mouseLeave = _ => {\n    setHovered(false)\n    setPressed(false)\n  }\n\n  const fill = pressed ? '#fff' : '#00000000'\n  const stroke = hovered ? '#fff' : '#a2a2a2'\n  const className = `mi-con ${visible ? '' : 'mi-not'}`\n\n  return (\n    <div\n      className={className}\n      style={{top: y}}\n      onClick={onClick}\n      onMouseEnter={_ => setHovered(true)}\n      onMouseLeave={mouseLeave}\n      onMouseDown={_ => setPressed(true)}\n      onMouseUp={_ => setPressed(false)}\n    >\n      <svg className='mi-svg'>\n        <path d={paths[0]} strokeWidth={1.5} stroke={stroke} fill={fill} />\n        <path d={paths[1]} strokeWidth={2.5} stroke={stroke} />\n      </svg>\n    </div>\n  )\n}\n\nexport default ExShapes","import { useState, useEffect, useRef, useCallback } from 'react'\nimport { BsChevronRight, BsCloudUpload } from 'react-icons/bs'\n\nimport { ExSubTitle } from '../ex-comps'\n\nconst offsetX = window.innerWidth / 2 - 152\n\nconst PrefsPalette = ({ \n  shades, onBackgroundSelect, onMonoSelect, onGradientSelect, \n  onImageSelect, onAgeConfigure, onTrailsChanged, selectColor\n}) => {\n  /* trails state in Modes */\n  const [modeEx, setModeEx] = useState(false)\n  const [modeIndex, setModeIndex] = useState(0)\n  const [modeStates, setModeStates] = useState([\n    '#ffffff', ['#ff2600', '#0096ff'], '', shades\n  ])\n\n  const select = i => {\n    if (i !== modeIndex) {\n      const events = [onMonoSelect, onGradientSelect, onImageSelect, onAgeConfigure]\n      events[i](modeStates[i])\n      setModeIndex(i)\n    }\n\n    setModeEx(false)\n  }\n\n  const monoSelect = mono => {\n    setModeStates(modeStates.map((st, i) => i === 0 ? mono : st))\n    onMonoSelect(mono)\n  }\n\n  const gradientSelect = grad => {\n    setModeStates(modeStates.map((st, i) => i === 1 ? grad : st))\n    onGradientSelect(grad)\n  }\n\n  const imageSelect = src => {\n    setModeStates(modeStates.map((st, i) => i === 2 ? src : st))\n    onImageSelect(src)\n  }\n\n  useEffect(() => {\n    const nextStates = [...modeStates]\n    if (shades.shades.length === 1) {\n      setModeIndex(0)\n      nextStates[0] = shades.shades[0]\n    } else {\n      setModeIndex(3)\n    }\n    nextStates[3] = shades\n    setModeStates(nextStates)\n  }, [shades])\n\n  return (\n    <div className='ex-pg'>\n      <ExSubTitle fontSize={13} width={78} subtitle='BACKGROUND COLOR' />\n      <ColorSelection color='#000000' selectColor={selectColor} onChange={onBackgroundSelect} />\n\n      <div style={{height: 12}} />\n\n      <ExSubTitle fontSize={13} width={103} subtitle='COLOR MODE' />\n      <ModeDropdown \n        ex={modeEx} onExpand={ex => setModeEx(ex)}\n        currentIndex={modeIndex} onSelect={select} \n      />\n\n      <Modes \n        vis={!modeEx} \n        currentIndex={modeIndex} \n        states={modeStates}\n        selectColor={selectColor}\n        onMonoChanged={monoSelect}\n        onGradientChanged={gradientSelect}\n        onImageSelect={imageSelect}\n        onAgeConfigure={onAgeConfigure}\n        onTrailsChanged={onTrailsChanged}\n      />\n    </div>\n  )\n} \n\nconst Modes = ({ \n  vis, currentIndex, states, selectColor,\n  onMonoChanged, onGradientChanged, onImageSelect, onAgeConfigure, onTrailsChanged\n}) => {\n  const [mono, gradient, src, shades] = states\n\n  const [trails, setTrails] = useState(0)\n  const uploadRef = useRef(null)\n  const canvasRef = useRef(null)\n\n  const modesClass = `mds-con ${vis ? '' : 'mds-inv'}`\n\n  const updateGradientStops = (v, index) => {\n    onGradientChanged(gradient.map((s, i) => i === index ? v : s))\n  }\n\n  const trailsChanged = trails => {\n    setTrails(trails)\n    onTrailsChanged(trails)\n  }\n\n  const uploadImage = () => uploadRef.current.click()\n\n  const onSrcChange = e => {\n    if (e.target.files && e.target.files[0]) {\n      onImageSelect(URL.createObjectURL(e.target.files[0]))\n    }\n  }\n\n  const renderContent = () => {\n    switch (currentIndex) {\n      // Mono\n      case 0: return (\n        <div>\n          <ExSubTitle fontSize={13} width={102} subtitle='MONO COLOR' />\n          <ColorSelection color={mono} selectColor={selectColor} onChange={onMonoChanged} />\n          <Trails value={trails} onChange={trailsChanged} />\n        </div>\n      )\n\n      // Gradient\n      case 1: return (\n        <div>\n          <ExSubTitle fontSize={13} width={91} subtitle='GRADIENT STOPS' />\n          <ColorSelection color={gradient[0]} selectColor={selectColor} onChange={v => updateGradientStops(v, 0)} />\n          <div style={{ height: 4 }} />\n          <ColorSelection color={gradient[1]} selectColor={selectColor} onChange={v => updateGradientStops(v, 1)} />\n        </div>\n      )\n\n      // Image\n      case 2: return (\n        <div>\n          {src ? <img className='upl-preview' src={src} alt=\"\" /> : <div />}\n          <div className='pp-con ppb-con' onClick={uploadImage}>\n            <div className='ppb-lbl'>Upload Image</div>\n            <div className='ppb-ri-con' style={{right: 4}}>\n              <BsCloudUpload className='ppb-ri center' />\n            </div>\n            <input type='file' ref={uploadRef} onChange={onSrcChange} />\n          </div>\n        </div>\n      )\n\n      // AgeBased\n      case 3: return (\n        <div>\n          <ExSubTitle fontSize={11} width={22}>Cells change color from left to right as they age</ExSubTitle>\n          <div className='pp-con'>\n            <canvas className='age-preview' ref={canvasRef} />\n          </div>\n          <div style={{ height: 12 }} />\n          <div className='pp-con ppb-con' onClick={onAgeConfigure}>\n            <div className='ppb-lbl'>Configure Age Based</div>\n            <div className='ppb-ri-con'>\n              <BsChevronRight className='ppb-ri center' />\n            </div>\n          </div>\n          <Trails value={trails} onChange={trailsChanged} />\n        </div>\n      )\n\n      default: return <div />\n    }\n  }\n\n  useEffect(() => {\n    if (currentIndex === 3) {\n      const canvas = canvasRef.current\n      canvas.setAttribute('width', 304)\n      canvas.setAttribute('height', 26)\n\n      const ctx = canvas.getContext('2d')\n      const width = 304 / shades.shades.length\n\n      ctx.clearRect(0, 0, 304, 26)\n      for (let i = 0; i < shades.shades.length; i++) {\n        ctx.fillStyle = shades.shades[i]\n        ctx.fillRect(i * width, 0, width, 26)\n      }\n    }\n  }, [currentIndex, shades])\n\n  return (\n    <div className={modesClass}>\n      <div style={{ height: 12 }} />\n      {renderContent()}\n    </div>\n  )\n}\n\nconst ColorSelection = ({ color, selectColor, onChange }) => {\n  const [hex, setHex] = useState('#000000')\n  const [hasFocus, setHasFocus] = useState(false)\n\n  const showColorGrid = () => {\n    selectColor(_hex => {\n      setHex(_hex)\n      onChange(_hex)\n    }, hex)\n  }\n\n  const updateHex = e => {\n    const text = e.target.value\n    if (text.indexOf('#') < 0) {\n      setHex(`#${text}`)\n    } else if (text.length > hex.length && text.length < 8) {\n      if (/^[0-9A-Fa-f]+$/.test(text.substring(1))) setHex(text)\n      if (text.length === 7) onChange(text)\n    } else if (text.length < hex.length && text.length > 0) {\n      setHex(text)\n    }\n  }\n\n  const editingComplete = () => {\n    let _hex = hex\n    const padding = 7 - _hex.length\n    for (let i = 0; i < padding; i++) {\n      _hex += \"0\"\n    }\n    setHex(_hex)\n    setHasFocus(false)\n    onChange(_hex)\n  }\n\n  useEffect(() => setHex(color), [color])\n\n  return (\n    <div className='pp-con' style={{borderColor: hasFocus ? '#ffffff' : '#a2a2a2'}}>\n      <div className='cs-cp' style={{backgroundColor: hex}} onClick={showColorGrid} />\n      <input \n        type='text' className='cs-tf tint-tf' value={hex.toUpperCase()} \n        onChange={updateHex} onFocus={() => setHasFocus(true)} onBlur={editingComplete}\n      />\n    </div>\n  )\n}\n\nconst ModeDropdown = ({ ex, currentIndex, onExpand, onSelect }) => {\n  const baseClick = () => {\n    if (!ex) onExpand(true)\n  }\n\n  const baseClass = `pp-con md-con ${ex ? 'md-ex' : ''}`\n  const lblClass = `md-lbl ${ex ? 'md-lbl-ex' : ''}`\n\n  return (\n    <div className={baseClass} onClick={baseClick}>\n      <div className={lblClass}>{modes[currentIndex]}</div>\n        \n      <div className='mex-con'>\n        {modes.map((mode, i) => (\n          <div className='mex-item' key={i}\n            onClick={() => onSelect(i)}>{mode}\n          </div>\n        ))}\n      </div>\n    </div>\n  )\n}\n\nconst Trails = ({ value, onChange }) => {\n  const [trackX, setTrackX] = useState(13)\n  const [isPressed, setIsPressed] = useState(false)\n  const [showInfo, setShowInfo] = useState(false)\n\n  const updateTrackX = trackX => {\n    setTrackX(trackX)\n    const rounded = Math.round(Math.lerp(0, 255, Math.inverseLerp(13, 289, trackX)))\n    setShowInfo(rounded > 200)\n    onChange(rounded)\n  }\n\n  const mouseMove = e => {\n    if (isPressed && e.button === 0) {\n      /* min/max should have been 14 and 300 but is -1 each instead (because topMargin: -1) */\n      updateTrackX(Math.clamp(e.clientX - offsetX, 13, 289))\n    }\n  }\n\n  const mouseDown = useCallback((e) => {\n    if (e.button === 0) {\n      setIsPressed(true)\n      document.addEventListener('mouseup', mouseUp, { once: true })\n    }\n  }, [])\n\n  const mouseClick = e => {\n    updateTrackX(Math.clamp(e.clientX - offsetX, 13, 289))\n  }\n\n  useEffect(() => {\n    updateTrackX(Math.lerp(13, 289, Math.inverseLerp(0, 255, value)))\n  }, [])\n\n  const mouseUp = () => setIsPressed(false)\n\n  const trackStyle = { width: Math.max(trackX - 14, 0) }\n  const thumbStyle = { transform: `translateX(${trackX - 14}px)` }\n\n  return (\n    <div>\n      <div style={{height: 12}} />\n      <ExSubTitle fontSize={13} width={124} subtitle='TRAILS' />\n\n      <div \n        className='pp-con pps-con' \n        onMouseMove={mouseMove}\n        onMouseDown={mouseDown}\n        onClick={mouseClick}\n      >\n        <div className='pps-trk' style={trackStyle} />\n          <div className='pps-th' style={thumbStyle}>\n        </div>\n      </div>\n\n      <div className='clr-info' style={{opacity: showInfo ? 1 : 0}}><i>Higher values will \n        cause the canvas to not clear when applying patterns or changing rules and palette. \n        Use </i><b>Clear</b><i> button in </i><b>PATTERNS</b><i> to force clear the grid.</i></div> : <div />\n    </div>\n  )\n}\n\nconst modes = [\"Mono\", \"Gradient\", \"Image\", \"Age Based\"]\n\nexport default PrefsPalette\n","import { VscChevronLeft, VscChevronRight, VscTrash } from 'react-icons/vsc'\nimport { IoColorPaletteOutline } from 'react-icons/io5'\nimport { useState, useRef, useEffect } from 'react'\nimport { ExSubTitle } from '../ex-comps'\n\nlet animActive = false, scrollListenerAttached = false\nlet lastApplied = { isLoop: false, list: [{ isTint: true, value: '#ffffff', outId: '' }] }\n\nconst ExPalette = ({ isCurrent, selectColor, onSelect }) => {\n  const [list, setList] = useState([\n    { isTint: true, value: '#ffffff', outId: '' }\n  ])\n\n  const [isLoop, setIsLoop] = useState(false)\n  const [scrollAtEnd, setScrollAtEnd] = useState(false)\n\n  const listRef = useRef(null)\n\n  const updateTint = ({ index, value }) => {\n    const updatedList = [...list]\n    updatedList[index]['value'] = value\n    setList(updatedList)\n  }\n\n  const updateSteps = ({ index, value }) => {\n    if (/^\\d*\\.?\\d*$/.test(value) && value.length < 5) {\n      const updatedList = [...list]\n      updatedList[index]['value'] = value === '' ? 0 : parseInt(value)\n      setList(updatedList)\n    }\n  }\n\n  const createGradient = (index) => {\n    const g1 = list[index - 1] ? list[index - 1].value : '#ffffff'\n    const g2 = list[index + 1] ? list[index + 1].value : '#ffffff'\n    return `linear-gradient(${g1}, ${g2})`\n  }\n\n  const scrollToEnd = _ => {\n    setTimeout(_ => {\n      listRef.current.scroll({ top: listRef.current.scrollHeight, behavior: 'smooth' })\n    }, 60)\n  }\n\n  const scrollListener = () => {\n    setScrollAtEnd(listRef.current.scrollTop < listRef.current.scrollHeight - listRef.current.clientHeight)\n  }\n\n  /* --- Footer Actions --- */\n\n  const clear = () => {\n    listRef.current.scrollTop = listRef.current.scrollHeight\n    setList([{ isTint: true, value: '#ffffff', outId: '' }])\n    setIsLoop(false)\n  }\n\n  const reset = () => {\n    listRef.current.scrollTop = listRef.current.scrollHeight\n    setIsLoop(lastApplied.isLoop)\n\n    /* \n     * --- Some Bizarre react bug (Or prolly me being ignorant of how react works) ---\n     * \n     * The following lines seem to set a reference of lastApplied.list to list instead of setting a copy of the lastApplied.list:\n     * setList(lastApplied.list) -> This seems obvious\n     * setList([...lastApplied.list]) -> Isnt this supposed to create a new array with elements of lastApplied.list?\n     * setList(lastApplied.list.slice()) -> Isnt this supposed to create a copy of lastApplied.list?\n     * setList(lastApplied.list.map(item => item)) -> Again isnt this supposed to be a completely new array?\n     * Seriously WTF is going on?\n     * - Could be cause Im not using useRef to store lastApplied. NEED TO TEST.\n     * \n     * Only the line below seems to create a copy. I could really use some explaination on this.\n     */\n    setList(lastApplied.list.map(({ isTint, value, outId }) => ({ isTint, value, outId })))\n  }\n\n  const addTint = () => {\n    if (!animActive) {\n      setList([...list, { isTint: true, value: '#ffffff', outId: '' }])\n      scrollToEnd()\n    }\n  }\n\n  const addGradient = () => {\n    if (!animActive) {\n      animActive = true\n\n      const _list = [...list, { isTint: false, value: 20, outId: '' }]\n      setList(_list)\n\n      setTimeout(_ => {\n        setList([..._list, { isTint: true, value: '#ffffff', outId: '' }])\n        scrollToEnd()\n        animActive = false\n      }, 60)\n    }\n  }\n\n  const addLoop = () => setIsLoop(!isLoop)\n\n  const deleteQueuedAtIndex = index => {\n    if (list.length > 1 && !animActive) {\n      const deleteIndices = [index]\n      if (index > 0 && !list[index - 1].isTint) {\n        deleteIndices.push(index - 1)\n      } else if (index == 0 && !list[index + 1].isTint) {\n        deleteIndices.push(index + 1)\n      }\n\n      const _list = [...list]\n      _list[deleteIndices[0]].outId = 'pc-out'\n      if (deleteIndices.length > 1) {\n        _list[deleteIndices[1]].outId = 'pc-out'\n      }\n      setList(_list)\n    }\n  }\n\n  const deleteAtIndex = () => {\n    setList(list.filter(({ outId }) => outId != 'pc-out'))\n  }\n\n  const apply = () => {\n    lastApplied = { isLoop, list }\n    onSelect({ isLoop, shades: generateShades(list)})\n  }\n\n  useEffect(() => {\n    if (isCurrent) {\n      reset()\n    \n      if (!scrollListenerAttached) {\n        listRef.current.addEventListener('scroll', scrollListener)\n        scrollListenerAttached = true\n      }\n    }\n    return () => {\n      if (scrollListenerAttached) {\n        listRef.current.removeEventListener('scroll', scrollListener)\n        scrollListenerAttached = false\n      }\n    }\n  }, [isCurrent])\n\n  const isScrollable = list.length > 8\n\n  return (\n    <div className='ex-pg ex-pg2'>\n      <div className='palette-list' ref={listRef}>\n        {isLoop ? <LoopCell isStart={true} isScrollable={isScrollable} /> : <div />}\n\n        {list.map(({ isTint, outId, value }, index) => (\n          isTint ? \n          <TintCell \n            key={index}\n            color={value} outId={outId}\n            isScrollable={isScrollable}\n            selectColor={selectColor}\n            onChange={v => updateTint({ index, value: v })} \n            onDeleteQueue={_ => deleteQueuedAtIndex(index)}\n            onDeleteFinish={_ => deleteAtIndex(index)}\n          /> : \n          <StepCell \n            key={index}\n            steps={value} outId={outId}\n            isScrollable={isScrollable}\n            gradient={createGradient(index)} \n            onChange={value => updateSteps({ index, value })} \n          />\n        ))}\n\n        {isLoop ? <LoopCell isStart={false} isScrollable={isScrollable} /> : <div />}\n\n        {list.length > 1 ? <div />:\n        <div className='palette-info'><i>Color mode will be converted to Mono on </i><b>Apply</b>.<br/>\n        <i>To use Age Based color mode add at least one </i><b>Color</b> <i>or</i> <b>Gradient</b> <i>from the</i> <b>Add</b> <i>menu</i></div>}\n\n        <div style={{ height: isScrollable ? 65 : 0 }} />\n      </div>\n\n      <Footer \n        hasBg={isScrollable && scrollAtEnd}\n        isLoop={isLoop}\n        onClear={clear} onReset={reset} onApply={apply}\n        onAddGradient={addGradient} onAddTint={addTint} onAddLoop={addLoop}\n      />\n    </div>\n  )\n}\n\nconst Footer = ({ \n  hasBg, isLoop,\n  onClear, onReset, onApply,\n  onAddTint, onAddGradient, onAddLoop \n}) => {\n  const [isAdd, setIsAdd] = useState(false)\n\n  const className = `palette-footer ${hasBg ? 'pf-bg' : ''}`\n  const loopName = `${isLoop ? '-' : '+'} Loop`\n\n  return (\n    <div className={className}>\n      <FooterButton name={isAdd ? '< Back' : '+ Add'} isControl={true} isIn={true} x={100} onClick={_ => setIsAdd(!isAdd)} />\n      <FooterButton name='Clear' isControl={true} isIn={!isAdd} x={1} y={22} onClick={onClear} />\n      <FooterButton name='Reset' isControl={true} isIn={!isAdd} x={199} y={21} onClick={onReset} />\n      <FooterButton name='Apply' isControl={true} isIn={!isAdd} x={100} y={37} onClick={onApply} />\n\n      {/* <FooterButton name='< Controls' isControl={false} isIn={isAdd} x={100} onClick={_ => setIsAdd(false)} /> */}\n      <FooterButton name='+ Color'    isControl={false} isIn={isAdd} x={1} y={22} onClick={onAddTint} />\n      <FooterButton name='+ Gradient' isControl={false} isIn={isAdd} x={199} y={21} onClick={onAddGradient} />\n      <FooterButton name={loopName}   isControl={false} isIn={isAdd} x={100} y={37} onClick={onAddLoop} />\n    </div>\n  )\n}\n\nconst FooterButton = ({ name, isControl, isIn, x, y, onClick }) => {\n  const [hovered, setHovered] = useState(false)\n  const [pressed, setPressed] = useState(false)\n\n  const fill = pressed ? '#fff' : '#00000000'\n  const stroke = hovered ? '#fff' : '#a2a2a2'\n  const textStyle = { color: pressed ? '#000' : stroke }\n\n  const id = isControl ? 1 : 2\n  const className = `fb-con fb-${id}-${isIn ? 'in' : 'out'}`\n\n  const mouseLeave = _ => {\n    setHovered(false)\n    setPressed(false)\n  }\n\n  return (\n    <div \n      className={className}\n      style={{left: x, top: y}}\n      onClick={onClick}\n      onMouseEnter={_ => setHovered(true)}\n      onMouseLeave={mouseLeave}\n      onMouseDown={_ => setPressed(true)}\n      onMouseUp={_ => setPressed(false)}\n    >\n      <svg className='fb-svg'>\n        <path d='M 0 13 L 10 0 L 94 0 L 104 13 L 94 26 L 10 26 Z' fill={fill} />\n        <path d='M 1 13 L 10 0 M 93 0 L 103 13 L 93 26 M 10 26 L 0 13' strokeWidth={1.5} stroke={stroke} fill='#00000000' />\n        <path d='M 10 0 L 94 0 M 93 26 L 10 26' strokeWidth={2.5} stroke={stroke} />\n      </svg>\n      <div className='fb-lbl center' style={textStyle}>{name}</div>\n    </div>\n  )\n}\n\nconst TintCell = ({ color, isScrollable, outId, selectColor, onChange, onDeleteQueue, onDeleteFinish }) => {\n  const [hex, setHex] = useState('#FFFFFF')\n\n  const getAccent = () => {\n    const { r, g, b } = hex2rgb(color)\n    const bright = (r * 299 + g * 587 + b * 114) / 1000\n    return bright < 140 ? '#ffffff' : '#000000'\n  }\n\n  const animEnded = event => {\n    if (event.animationName === 'pc-out-anim') {\n      onDeleteFinish()\n    }\n  }\n\n  const updateHex = e => {\n    const text = e.target.value\n    if (text.indexOf('#') < 0) {\n      setHex(`#${text}`)\n    } else if (text.length > hex.length && text.length < 8) {\n      if (/^[0-9A-Fa-f]+$/.test(text.substring(1))) setHex(text)\n      if (text.length === 7) onChange(text)\n    } else if (text.length < hex.length && text.length > 0) {\n      setHex(text)\n    }\n  }\n\n  const editingComplete = () => {\n    let _hex = hex\n    const padding = 7 - _hex.length\n    for (let i = 0; i < padding; i++) {\n      _hex += \"0\"\n    }\n    setHex(_hex)\n    onChange(_hex)\n  }\n\n  const showColorGrid = () => {\n    selectColor(_hex => {\n      onChange(_hex)\n    }, hex)\n  }\n\n  useEffect(() => setHex(color), [color])\n\n  const style = { backgroundColor: color }\n  const contentStyle = { color: getAccent() }\n  const className = `tint-con pc-${isScrollable ? 'scrl' : 'con'} ${outId}`\n\n  return (\n    <div className={className} style={style} onAnimationEnd={animEnded}>\n      <div className='tint-icon-con'>\n        <IoColorPaletteOutline className='tint-icon center' style={contentStyle} onClick={showColorGrid} />\n      </div>\n      <div className='tint-icon-con tint-trash-con' onClick={onDeleteQueue}>\n        <VscTrash className='tint-icon center' style={contentStyle} />\n      </div>\n\n      <input \n        className='palette-tf tint-tf' type='input' \n        value={hex.toUpperCase()} style={contentStyle} \n        onChange={updateHex} onBlur={editingComplete}\n      />\n    </div>\n  )\n}\n\nconst StepCell = ({ steps, isScrollable, outId, gradient, onChange }) => {\n  const style = { borderImageSource: gradient }\n  \n  const stepper = (diff) => {\n    onChange(`${steps + diff}`)\n  }\n\n  const rightClick = (e, diff) => {\n    stepper(diff)\n    e.preventDefault()\n  }\n\n  const className = `step-con pc-${isScrollable ? 'scrl' : 'con'} ${outId}`\n\n  return (\n    <div className={className}>\n      <VscChevronLeft className='step-arrow' onClick={_ => stepper(-1)} onContextMenu={e => rightClick(e, -10)} />\n      <VscChevronRight className='step-arrow step-right' onClick={_ => stepper(1)} onContextMenu={e => rightClick(e, 10)} />\n\n      <input \n        className='palette-tf step-tf' type='input' \n        value={steps} style={style} \n        onChange={e => onChange(e.target.value)}\n      />\n    </div>\n  )\n}\n\nconst LoopCell = ({ isStart, isScrollable }) => <ExSubTitle \n  subtitle={`LOOP ${isStart ? 'START' : 'END'}`} \n  width={isStart ? 118 : 122} isScrollable={isScrollable}\n/>\n\nconst generateShades = (list) => {\n  const shades = []\n\n  let index = 0\n  while (index < list.length) {\n    const { isTint, value } = list[index]\n\n    if (isTint) {\n      shades.push(value)\n      index += 1\n    } else {\n      const prev = hex2rgb(list[index - 1].value)\n      const next = hex2rgb(list[index + 1].value)\n      const steps = value + 1\n\n      const dr = (next.r - prev.r) / steps\n      const dg = (next.g - prev.g) / steps\n      const db = (next.b - prev.b) / steps\n\n      for (let i = 1; i < steps; i++) {\n        shades.push(rgb2hex({ r: prev.r + dr * i, g: prev.g + dg * i, b: prev.b + db * i }))\n      }\n\n      shades.push(rgb2hex({ r: next.r, g: next.g, b: next.b }))\n      index += 2\n    }\n  }\n\n  return shades\n}\n\nconst hex2rgb = (hex) => {\n  const bigint = parseInt(hex.substring(1), 16)\n  return {\n    r: (bigint >> 16) & 255,\n    g: (bigint >> 8) & 255,\n    b: bigint & 255\n  }\n}\n\nconst rgb2hex = ({ r, g, b }) => {\n  return \"#\" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1, 7)\n}\n\nexport default ExPalette","import { useState, useEffect, useCallback, useContext } from 'react'\n\nimport { NotificationContext } from '../../context/NotificationContext'\nimport QuickAccess from '../quick-access/QuickAccess'\nimport MouseReceiver from '../receivers/MouseReceiver'\n\nimport './controls.css'\n\nlet qaEnabled = true, isTempPause = false\nlet hideTimeoutIndex, mouseMoveIndex\n\nconst Controls = ({ \n  onIsPlayingChanged, onBrushDownChanged, onDraw, onErase, onPaint, onPreview,\n\n  onPreviewStart, onPreviewEnd, onFillSelect, onClear, onRuleSelect, onWrapChanged, \n  onBgSelect, onShadesSelect, onGradSelect, onImageSelect, onTrailsChanged,\n\n  onBrushChanged, onSizeChanged, onSpeedChanged\n}) => {\n  const { showNotification } = useContext(NotificationContext)\n\n  const [qaState, setQaState] = useState({\n    prev: 'out', next: 'in', hide: false, exp: false, slide: false, min: false\n  })\n\n  const [isPlaying, setIsPlaying] = useState(true)\n  const [isDrawing, setIsDrawing] = useState(false)\n  const [isPainting, setIsPainting] = useState(false)\n\n  const updateQaHidden = (qaHidden) => {\n    const inState = qaState.min ? 'min' : 'in'\n    if (qaHidden) {\n      setQaState({ ...qaState, prev: inState, next: 'out', hide: true })\n    } else {\n      setQaState({ ...qaState, prev: 'out', next: inState, hide: false })\n    }\n  }\n\n  const updateQaExpanded = (qaExpanded) => {\n    if (qaExpanded) {\n      setQaState({ ...qaState, prev: 'in', next: 'ex', exp: true })\n    } else {\n      setQaState({ ...qaState, prev: 'ex', next: 'in', exp: false })\n    }\n  }\n\n  const updateQaSlider = (qaSlider) => {\n    if (qaSlider) {\n      if (qaState.exp) {\n        setQaState({ ...qaState, prev: 'ex', next: 'sl', exp: false, slide: true })\n      } else {\n        setQaState({ ...qaState, prev: 'in', next: 'sl', slide: true })\n      }\n    } else {\n      setQaState({ ...qaState, prev: 'sl', next: 'in', slide: false })\n    }\n  }\n\n  const updateQaMinimised = useCallback((qaMinimised) => {\n    if (qaMinimised) {\n      const inState = qaState.exp ? 'ex' : 'in'\n      setQaState({ ...qaState, prev: inState, next: 'min', min: true, exp: false })\n    } else {\n      const outState = isPainting ? 'ex' : 'in'\n      setQaState({ ...qaState, prev: 'min', next: outState, min: false, exp: isPainting })\n      \n      // End preview if Painting\n      if (isPainting) {\n        setIsPainting(false)\n        onPreviewEnd()\n      }\n    }\n  }, [isPainting, onPreviewEnd, qaState])\n\n  const toggleIsPlaying = useCallback(() => {\n    const _isPlaying = !isPlaying\n    setIsPlaying(_isPlaying)\n    onIsPlayingChanged(_isPlaying)\n  }, [isPlaying, onIsPlayingChanged]);\n\n  const toggleIsDrawing = () => {\n    const _isDrawing = !isDrawing\n    if (_isDrawing) {\n      showNotification(<span>Brush Enabled<br/>Press left mouse button to draw and right mouse button to erase on the grid.</span>)\n    } else {\n      showNotification(\"Brush Disabled\")\n    }\n    setIsDrawing(_isDrawing)\n    console.log(_isDrawing, isDrawing)\n  }\n\n  const mouseMove = () => {\n    /* \n     * Maybe do it a different way. This just seems like cheating \n     * qaState.min is always true when isPainting is true so no need to add it as a condition\n     */\n    if (!(qaState.exp || qaState.slide || isPainting)) {\n      if (qaState.hide) {\n        if (qaEnabled) {\n          updateQaHidden(false)\n          hideTimeoutIndex = setTimeout(() => updateQaHidden(true), 5000)\n        }\n      } else {\n        if (mouseMoveIndex % 20 === 0) {\n          clearTimeout(hideTimeoutIndex)\n          hideTimeoutIndex = setTimeout(() => updateQaHidden(true), 5000)\n        }\n        mouseMoveIndex += 1\n      }\n    }\n  }\n\n  const qaHoverChanged = (hovered) => {\n    if (hovered) clearTimeout(hideTimeoutIndex)\n    else if (!(qaState.exp || qaState.slide || isPainting)) {\n      if (qaEnabled) {\n        hideTimeoutIndex = setTimeout(() => updateQaHidden(true), 5000)\n      }\n    }\n  }\n\n  const hideQa = () => {\n    updateQaHidden(true)\n    qaEnabled = false\n    setTimeout(() => qaEnabled = true, 1000)\n  }\n\n  /* Hooking brushDownChanged to trigger draw-on-every-update when sliding filler modifiers */\n  const tempPause = (pause) => {\n    if (isPlaying) {\n      toggleIsPlaying()\n      onBrushDownChanged(true)\n      isTempPause = true \n    } else {\n      if (isTempPause) {\n        toggleIsPlaying()\n        onBrushDownChanged(false)\n        isTempPause = false\n      }\n    }\n  }\n\n  const shapeSelected = shape => {\n    setIsPainting(true)\n    updateQaMinimised(true)\n    onPreviewStart(shape)\n    showNotification(\n      (<span>\n        Left click to place pattern on grid. For best results clear the grid (shortcut: C)<br/>\n        Click on the small circle at the bottom or press Esc to go back to pattern list\n      </span>), 10\n    )\n  }\n\n  useEffect(() => {\n    mouseMoveIndex = 0\n\n    const keyListener = e => {\n      console.log(`keydown with code ${e.keyCode}`)\n      switch (e.keyCode) {\n        case 27: \n          if (qaState.min) {\n            updateQaMinimised()\n          } \n          break\n        case 32: toggleIsPlaying(); break\n        case 67: \n          onClear()\n          showNotification('Grid cleared')\n          break\n        case 70: document.body.requestFullscreen(); break\n        case 73:\n          onFillSelect('invert')\n          showNotification('Grid inverted')\n          break\n        case 80: toggleIsDrawing(); break\n        default: break\n      }\n    }\n\n    document.body.addEventListener(\"keydown\", keyListener)\n\n    return () => {\n      document.body.removeEventListener(\"keydown\", keyListener)\n    }\n  }, [onClear, qaState.min, toggleIsPlaying, toggleIsDrawing, updateQaMinimised])\n\n  return (\n    <div className='controls-base'>\n      <MouseReceiver \n        isDrawing={isDrawing} \n        isPainting={isPainting}\n        onBrushDown={() => onBrushDownChanged(true)}\n        onBrushUp={() => onBrushDownChanged(false)}\n        onDraw={onDraw}\n        onErase={onErase}\n        onPaint={onPaint}\n        onPreview={onPreview}\n        onMouseMove={mouseMove}\n      />\n\n      <QuickAccess\n        animId={`${qaState.prev}2${qaState.next}`}\n        qaHidden={qaState.hide}\n        qaExpanded={qaState.exp}\n        qaMinimised={qaState.min}\n        qaSlider={qaState.slide}\n        isPlaying={isPlaying}\n        isDrawing={isDrawing}\n        onQaHoverChanged={qaHoverChanged}\n        onQaExpanded={updateQaExpanded}\n        onQaMinimised={updateQaMinimised}\n        onQaSlider={updateQaSlider}\n        onPlayClicked={toggleIsPlaying} \n        onDrawClicked={toggleIsDrawing}\n        onQaClose={hideQa}\n        onTempPause={tempPause}\n        onShapeSelect={shapeSelected}\n        onFillSelect={onFillSelect}\n        onClear={onClear}\n        onRuleSelect={onRuleSelect}\n        onWrapChanged={onWrapChanged}\n        onBgSelect={onBgSelect}\n        onShadesSelect={onShadesSelect}\n        onGradSelect={onGradSelect}\n        onImageSelect={onImageSelect}\n        onTrailsChanged={onTrailsChanged}\n        onBrushChanged={onBrushChanged}\n        onSizeChanged={onSizeChanged}\n        onSpeedChanged={onSpeedChanged}\n      />\n    </div>\n  )\n}\n\nexport default Controls","import React, { useEffect, useState } from 'react'\nimport { GiResize } from \"react-icons/gi\"\nimport './Resizer.css'\n\nconst COUNTDOWN_MAX = 1\nlet timer\n\nconst Resizer = ({ isResizing, onResizing }) => {\n  const [countdown, setCountdown] = useState(COUNTDOWN_MAX)\n\n  useEffect(() => {\n    const resizeHandler = () => {\n      onResizing(true)\n      setCountdown(COUNTDOWN_MAX)\n\n      if (timer) {\n        clearInterval(timer)\n      }\n\n      timer = setInterval(() => {\n        setCountdown(p => p - 1)\n      }, 1000)\n    }\n\n    window.addEventListener(\"resize\", resizeHandler)\n    return () => window.removeEventListener(\"resize\", resizeHandler)\n  }, [])\n\n  useEffect(() => {\n    if (countdown === 0) {\n      clearInterval(timer)\n      timer = null\n      onResizing(false)\n    }\n  }, [countdown])\n\n  if (isResizing) {\n    return (\n      <div className='resizer-base fill'>\n        <GiResize className='resizer-icon center' />\n      </div>\n    )\n  } else {\n    return null\n  }\n}\n\nexport default Resizer\n","import { useRef, useState, useEffect, useContext } from 'react'\nimport { \n  initGrid, updateGrid, drawGrid, drawInverse, drawShaded, drawShapes, drawOnGrid, eraseOnGrid, paint, preview,\n  setBrushSize, setSize, setupPreview, setFill, setRule, setGridWrap, setShadeSeq, setInverseBg, setTrails, reInitGrid\n} from './grid.js'\n\nimport Controls from './controls/Controls'\nimport { DataContext } from '../context/DataContext'\nimport Resizer from './resizer/Resizer.js'\n\nlet ctx\nlet ctxbg, background, gradientStops\n\nlet speed = 4, drawSpeed = speed\nlet isBrushDown = false, isInverseDraw = false, isAgeShades = false, isInverseImage = false, isShapeShades = false\n\nconst World = (props) => {\n  const [fps, setFps] = useState(0)\n  const [showFps, setShowFps] = useState(false)\n  const [bgImgSrc, setBgImgSrc] = useState('')\n  const [isResizing, setIsResizing] = useState(false)\n\n  const canvasRef = useRef(null)\n  const canvasbgRef = useRef(null)\n  \n  const { setDimensions } = useContext(DataContext)\n\n  const sizeChanged = size => {\n    const { gridW, gridH } = setSize(size)\n    setDimensions(gridW, gridH)\n  }\n\n  const setBgImage = src => {\n    if (src) {\n      isInverseImage = true\n      setBgImgSrc(src)\n      setupImageBackground()\n    }\n  }\n\n  const windowResized = (_isResizing) => {\n    if (_isResizing !== isResizing) {\n      setIsResizing(_isResizing)\n      isPlayingChanged(!_isResizing)\n\n      if (!_isResizing) {\n        /* Resizing finished */\n        \n        updateCanvasSize()\n        resizeBgRedraw()\n        \n        const { gridW, gridH } = reInitGrid()\n        setDimensions(gridW, gridH)\n      }\n    }\n  }\n\n  const updateCanvasSize = () => {\n    const canvas = canvasRef.current\n    const canvasBg = canvasbgRef.current\n\n    canvas.setAttribute('width', window.innerWidth)\n    canvas.setAttribute('height', window.innerHeight)\n    canvasBg.setAttribute('width', window.innerWidth)\n    canvasBg.setAttribute('height', window.innerHeight)\n  }\n\n  useEffect(() => {\n    const context = canvasRef.current.getContext('2d')\n    const contextBg = canvasbgRef.current.getContext('2d')\n\n    const startTime = Date.now()\n    let findex, animationFrameId, fLogIndex, fLogTime\n\n    const init = () => {\n      findex = 0\n      fLogIndex = 0\n      fLogTime = startTime\n\n      ctx = context\n      ctxbg = contextBg\n\n      updateCanvasSize()\n      setBackground('#000000')\n    }\n\n    const render = () => {\n      findex += 1\n\n      update(findex)\n      draw(context, findex)\n\n      logFps()\n      animationFrameId = window.requestAnimationFrame(render)\n    }\n\n    const logFps = () => {\n      if (showFps) {\n        const now = Date.now()\n        if (now - fLogTime < 1000) {\n          fLogIndex += 1\n        } else {\n          setFps(Math.floor(fLogIndex / (now - fLogTime) * 1000))\n          fLogTime = now\n          fLogIndex = 0\n        }\n      }\n    }\n\n    init()\n    render()\n\n    return () => {\n      window.cancelAnimationFrame(animationFrameId)\n    }\n  }, [])\n\n  return (\n    <div className='world'>\n      <img className='bg-img' src={bgImgSrc} alt=\"Background\" />\n\n      <canvas ref={canvasbgRef} {...props} />\n      <canvas ref={canvasRef} {...props} />\n\n      {showFps ? <div className='fpsCounter'>{fps}</div> : <div />}\n\n      <Controls\n        onIsPlayingChanged={isPlayingChanged} \n        onBrushDownChanged={brushDownChanged}\n        onDraw={drawOnGrid}\n        onErase={eraseOnGrid}\n        onPaint={paint}\n        onPreview={preview}\n\n        onPreviewStart={startPreview}\n        onPreviewEnd={endPreview}\n        onFillSelect={setFill}\n        onClear={clear}\n        onRuleSelect={setRule}\n        onWrapChanged={setGridWrap}\n        onBgSelect={setBackground}\n        onShadesSelect={shadesSelected}\n        onGradSelect={setGradient}\n        onImageSelect={setBgImage}\n        onTrailsChanged={setTrails}\n\n        onSizeChanged={sizeChanged}\n        onSpeedChanged={speedChanged}\n        onBrushChanged={setBrushSize}\n      />\n\n      <Resizer isResizing={isResizing} onResizing={windowResized} />\n    </div>\n  )\n}\n\n/* --- CONTROLS --- */\n\nconst isPlayingChanged = (isPlaying) => {\n  update = isPlaying ? _update : () => {}\n}\n\nconst brushDownChanged = (_isBrushDown) => {\n  isBrushDown = _isBrushDown\n  reconfigureDraw()\n}\n\nconst shadesSelected = ({ shades, isLoop }) => {\n  if (isInverseDraw) {\n    isInverseDraw = false\n    updateBackground()\n  }\n\n  isAgeShades = shades.length > 1\n  setShadeSeq({ shades, isLoop })\n  reconfigureDraw()\n  triggerDraw()\n}\n\nconst speedChanged = (spd) => {\n  speed = 101 - spd\n  drawSpeed = speed\n  reconfigureDraw()\n}\n\nconst startPreview = shape => {\n  setupPreview(shape)\n  previewConfig({ isStart: true })\n}\n\nconst endPreview = () => {\n  previewConfig({ isStart: false })\n}\n\nconst previewConfig = ({ isStart }) => {\n  isBrushDown = isStart\n  isShapeShades = isStart\n  reconfigureDraw()\n}\n\nconst clear = () => {\n  /* Will clear both canvas and grid */\n  ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height)\n  setFill('clear')\n}\n\n/* --- BACKGROUND LAYER --- */\n\nconst setBackground = bg => {\n  background = bg\n  setInverseBg(bg)\n  \n  if (!isInverseDraw) {\n    updateBackground()\n  }\n}\n\nconst setGradient = stops => {\n  isInverseImage = false\n  gradientStops = stops\n  initInverseDraw()\n  applyGradient()\n}\n\nconst setupImageBackground = () => {\n  initInverseDraw()\n  ctxbg.clearRect(0, 0, ctxbg.canvas.width, ctxbg.canvas.height)\n}\n\nconst updateBackground = () => {\n  ctxbg.fillStyle = background\n  ctxbg.fillRect(0, 0, ctxbg.canvas.width, ctxbg.canvas.height)\n}\n\nconst applyGradient = () => {\n  const grad = ctxbg.createLinearGradient(0, 0, ctxbg.canvas.width, 0)\n  grad.addColorStop(0, gradientStops[0])\n  grad.addColorStop(1, gradientStops[1])\n\n  ctxbg.fillStyle = grad\n  ctxbg.fillRect(0, 0, ctxbg.canvas.width, ctxbg.canvas.height)\n}\n\nconst initInverseDraw = () => {\n  if (!isInverseDraw) {\n    isInverseDraw = true\n    isAgeShades = false\n    reconfigureDraw()\n    triggerDraw()\n  }\n}\n\nconst resizeBgRedraw = () => {\n  if (isInverseDraw) {\n    if (isInverseImage) {\n      setupImageBackground()\n    } else applyGradient()\n  } else {\n    updateBackground()\n  }\n}\n\n\n/* --- EXT FUNCTIONS --- */\n\nconst initExt = () => {\n  initGrid()\n}\n\nconst triggerDraw = () => draw(ctx, drawSpeed)\n\n/* - UPDATE - */\n\nconst _update = (findex) => {\n  if (findex % speed === 0) {\n    /* All updates go here */\n\n    updateGrid(findex)\n  }\n}\n\nlet update = _update\n\nconst reconfigureDraw = () => {\n  if (isShapeShades) _draw = drawShapes\n  else if (isInverseDraw) _draw = drawInverse\n  else if (isAgeShades) _draw = drawShaded\n  else _draw = drawGrid\n\n  draw = isBrushDown || drawSpeed === 1 ? _draw : _fdraw\n}\n\n/* - DRAW - */\n/*\n * Changed draw implemention to only use draw-on-each-render (not fast) for:\n * 1. When in brush mode and mouse is held down\n * 2. When previewing a shape for placement\n * 3. When previewing the filler modifiers\n */\n\nlet _draw = drawGrid\n\nconst _fdraw = (ctx, findex) => {\n  if (findex % drawSpeed === 0) {\n    _draw(ctx)\n  }\n}\n\nlet draw = _fdraw\n\ninitExt()\n\nexport default World\n","import { useState, useRef, useEffect } from 'react'\nimport { ExCon, ExHexButton } from '../ex-comps'\n\nimport PrefsPalette from './PrefsPalette'\nimport AgePalette from './AgePalette.js'\nimport COLOR_GRID from '../../../static/color-grid'\n\nimport './palette.css'\n\nconst ExPalette = ({ \n  isCurrent, pindex, qaExpanded, onBgSelect, onSelect, \n  onGradSelect, onImageSelect, onTrailsChanged, onPindexChanged \n}) => {\n  const [shades, setShades] = useState({ isLoop: false, shades: ['#ffffff'] })\n  const [cgVisible, setCgVisible] = useState(false)\n  const [cgCurrentHex, setCgCurrentHex] = useState('#fff')\n\n  const onColorSelectedRef = useRef(null)\n  \n  const monoSelect = mono => onSelect({ isLoop: false, shades: [mono] })\n  const ageSelect = shades => { setShades(shades); onSelect(shades) }\n\n  const selectColor = (onSelect, current = '#000') => {\n    setCgVisible(true)\n    setCgCurrentHex(current)\n    onColorSelectedRef.current = onSelect\n  }\n\n  const onColorSelected = hex => {\n    setCgVisible(false)\n    onColorSelectedRef.current(hex)\n  }\n\n  const onCustomSelected = hex => {\n    onColorSelectedRef.current(hex)\n  }\n\n  const pconStyle = {\n    transform: `translateX(${pindex * -324}px)`\n  }\n\n  useEffect(() => {\n    if (!isCurrent || !qaExpanded) {\n      setCgVisible(false)\n    }\n  }, [isCurrent, qaExpanded])\n\n  return (\n    <ExCon title='Palette' isCurrent={isCurrent}>\n      <div className='ex-pcon' style={pconStyle}>\n        <PrefsPalette \n          shades={shades}\n          selectColor={selectColor}\n          onBackgroundSelect={onBgSelect} \n          onMonoSelect={monoSelect}\n          onGradientSelect={onGradSelect}\n          onImageSelect={onImageSelect}\n          onTrailsChanged={onTrailsChanged}\n          onAgeConfigure={() => onPindexChanged(1)} \n        />\n\n        <AgePalette \n          isCurrent={isCurrent} \n          selectColor={selectColor}\n          onSelect={ageSelect} \n        />\n      </div>\n\n      <ColorGrid \n        cgVisible={cgVisible} \n        currentHex={cgCurrentHex}\n        onSelect={onColorSelected}\n        onCustom={onCustomSelected}\n        onCancel={() => setCgVisible(false)} \n      />\n    </ExCon>\n  )\n}\n\nconst ColorGrid = ({ cgVisible, currentHex, onSelect, onCustom, onCancel }) => {\n  const [isVisible, setIsVisible] = useState(false)\n  const [isCustomChanged, setIsCustomChanged] = useState(false)\n  const inputRef = useRef(null)\n\n  const animEnded = (e, i) => {\n    if (i === COLOR_GRID.length - 1 && e.animationName === 'cgc-out-anim') {\n      setIsVisible(false)\n    }\n  }\n\n  const customChange = e => {\n    if (!isCustomChanged) {\n      setIsCustomChanged(true)\n    }\n    onCustom(e.target.value)\n  }\n\n  useEffect(() => {\n    if (cgVisible) {\n      setIsVisible(true)\n      setIsCustomChanged(false)\n    }\n  }, [cgVisible])\n\n  return (\n    <>\n      {isVisible && (\n        <div className='color-grid'>\n          <div className={`cg-bg ${!cgVisible && 'cg-bg-out'}`}>\n            <div className='cg-footer'>\n              <ExHexButton name={isCustomChanged ? 'Apply' : 'Cancel'} x={13} y={4} onClick={onCancel} />\n              <ExHexButton name='Custom' x={171} y={4} onClick={() => inputRef.current.click()} />\n              <input \n                className='cg-dummy-input' \n                type='color' \n                value={currentHex}\n                ref={inputRef}\n                onChange={customChange} \n              />\n            </div>\n          </div>\n          <div className='cg-container'>\n            {COLOR_GRID.map((hex, i) => (\n              <div \n                key={hex}\n                className={`cg-cell ${!cgVisible && 'cg-cell-out'}`} \n                style={{ background: hex }} \n                onAnimationEnd={e => animEnded(e, i)}\n                onClick={() => onSelect(hex)}\n              />\n            ))}\n          </div>\n        </div>\n      )}\n    </>\n  )\n}\n\nexport default ExPalette\n","import { BsChevronLeft } from 'react-icons/bs'\n\nimport { ExIndicator } from './ex-comps'\nimport { useState, useEffect, useContext } from 'react'\nimport { \n  Play, Draw, Speed, Shapes, Rules, Colors, Close,\n  BrushIcon, GridIcon, SpeedIcon \n} from './qa-buttons'\n\nimport QaTooltip from './QaTooltip'\nimport QaSlider from './QaSlider'\nimport ExRules from './ExRules'\nimport ExShapes from './ExShapes'\nimport ExPalette from './palette/ExPalette'\n\nimport './quick-access.css'\nimport { NotificationContext } from '../../context/NotificationContext'\n\nlet sliderValue = 0\n\nconst QuickAccess = ({ \n  animId, qaHidden, qaExpanded, qaMinimised, \n  qaSlider, isPlaying, isDrawing, \n\n  onQaHoverChanged, onQaExpanded, onQaMinimised, onQaSlider, \n  onPlayClicked, onDrawClicked, onQaClose, onTempPause,\n\n  onShapeSelect, onFillSelect, onClear, onRuleSelect, onWrapChanged, onBgSelect, onShadesSelect, \n  onGradSelect, onImageSelect, onTrailsChanged, onBrushChanged, onSizeChanged, onSpeedChanged, \n}) => {\n  const { showNotification } = useContext(NotificationContext)\n\n  const [qaIndex, setQaIndex] = useState(0)\n  const [slideId, setSlideId] = useState('na')\n  const [tipIndex, setTipIndex] = useState(0)\n  const [tipVis, setTipVis] = useState(false)\n  const [backVis, setBackVis] = useState(false)\n  const [exPindices, setExPindices] = useState([0, 0, 0, 0, 0, 0])\n  const [, setPhantomUpdateIndex] = useState(0)\n\n  const qaExAction = (index, pindex = 0) => {\n    if (!qaExpanded) {\n      onQaExpanded(true)\n    } else {\n      if (qaIndex === index && exPindices[index] === pindex) {\n        onQaExpanded(false)\n        return\n      }\n    }\n\n    setExPindices(exPindices.map((item, i) => i === index ? pindex : item))\n    if (backVis) setBackVis(false)\n    setQaIndex(index)\n  }\n\n  const exChangePage = (index, pindex, enableBack = false) => {\n    setExPindices(exPindices.map((item, i) => i === index ? pindex : item))\n    setBackVis(enableBack)\n  }\n\n  const closeAction = () => {\n    if (qaExpanded) onQaExpanded(false)\n    else onQaClose()\n  }\n\n  const minimise = () => onQaMinimised(true)\n\n  const maximise = () => {\n    if (qaMinimised) onQaMinimised(false)\n  }\n\n  const showSlider = (id) => {\n    setSlideId(id)\n    onQaSlider(true)\n  }\n\n  const dismissSlider = () => {\n    onQaSlider(false)\n    if (slideId === 'grid') {\n      onSizeChanged(sliderValue)\n    }\n  }\n\n  const sliderValueChanged = (value) => {\n    sdat[slideId].value = value\n    sliderValue = value\n    \n    switch (slideId) {\n      case 'speed': onSpeedChanged(value); break\n      case 'brush': onBrushChanged(value); break\n      default: break\n    }\n  }\n\n  const hoverChangedAtIndex = (hovered, index) => {\n    setTipVis(hovered)\n    if (hovered) setTipIndex(index)\n  }\n\n  const phantomUpdate = _ => {\n    setPhantomUpdateIndex(ps => ps + 1)\n  }\n\n  useEffect(() => {\n    const keyListener = e => {\n      if (e.keyCode === 37 || e.keyCode === 39) {\n        let speed = sdat['speed'].value\n        const [speedLower, speedUpper] = sdat['speed'].range\n        if (e.keyCode === 37 && speed > speedLower) {\n          speed -= 1\n        } else if (e.keyCode === 39 && speed < speedUpper) {\n          speed += 1\n        }\n        sdat['speed'].value = speed\n        onSpeedChanged(speed)\n        showNotification(`Sim Speed ${speed}`)\n\n        if (slideId === \"speed\") {\n          phantomUpdate()\n        }\n      }\n    }\n\n    document.body.addEventListener(\"keydown\", keyListener)\n\n    return () => {\n      document.body.removeEventListener(\"keydown\", keyListener) \n    }\n  }, [onSpeedChanged, slideId])\n\n  const animdelays = animdelaysJson[animId]\n  const unhide = !qaHidden && !qaSlider && !qaMinimised\n  const closeAnimDuration = animId === 'sl2in' || animId === 'in2sl' || animId === 'ex2sl' ? 0 : 240\n\n  return (\n    <div className='qa-root'>\n      <div \n        className={`base base-${animId}`}\n        onClick={maximise}\n        onMouseEnter={() => onQaHoverChanged(true)}\n        onMouseLeave={() => onQaHoverChanged(false)}\n      >\n        <div className={`ex-base ex-base-${animId}`}>\n          <ExIndicator selectedIndex={qaIndex} />\n\n          <ExShapes \n            isCurrent={qaIndex === 2} \n            onShapeSelect={onShapeSelect} \n            onFillSelect={onFillSelect}\n            onClear={onClear}\n            onSliding={onTempPause} \n          />\n\n          <ExRules \n            isCurrent={qaIndex === 3} \n            pindex={exPindices[3]}\n            onSelect={onRuleSelect} \n            onWrapChanged={onWrapChanged}\n            onPindexChanged={pi => exChangePage(3, 1, true)}\n          />\n\n          <ExPalette \n            isCurrent={qaIndex === 4} \n            pindex={exPindices[4]}\n            qaExpanded={qaExpanded}\n            onBgSelect={onBgSelect}\n            onSelect={onShadesSelect} \n            onGradSelect={onGradSelect}\n            onImageSelect={onImageSelect}\n            onTrailsChanged={onTrailsChanged}\n            onPindexChanged={pi => exChangePage(4, 1, true)}\n          />\n\n          <Back vis={backVis} onClick={() => exChangePage(qaIndex, 0)} />\n        </div>\n\n        <div className='con'>\n          <QaSlider \n            unhide={qaSlider} \n            icon={sdat[slideId].icon} \n            value={sdat[slideId].value}\n            range={sdat[slideId].range}\n            onChange={sliderValueChanged}\n            onDismiss={dismissSlider} \n          />\n\n          <div className='qa-padding' />\n\n          <Play \n            isPlaying={isPlaying} unhide={unhide} animDelay={animdelays[0]} \n            onClick={onPlayClicked} \n            onHoverChanged={h => hoverChangedAtIndex(h, 0)}\n          />\n\n          <Draw \n            isDrawing={isDrawing} unhide={unhide} animDelay={animdelays[1]} \n            onClick={onDrawClicked} onRightClick={_ => showSlider('brush')} \n            onHoverChanged={h => hoverChangedAtIndex(h, 1)}\n          />\n          \n          <Shapes \n            unhide={unhide} animDelay={animdelays[2]} \n            onClick={_ => qaExAction(2)} onRightClick={_ => showSlider('grid')} \n            onHoverChanged={h => hoverChangedAtIndex(h, 2)}\n          />\n\n          <Rules \n            unhide={unhide} animDelay={animdelays[3]} \n            onClick={_ => qaExAction(3, 0)} onRightClick={_ => qaExAction(3, 1)} \n            onHoverChanged={h => hoverChangedAtIndex(h, 3)}\n          />\n\n          <Colors \n            unhide={unhide} animDelay={animdelays[4]} \n            onClick={_ => qaExAction(4)} onRightClick={_ => qaExAction(4, 1)}\n            onHoverChanged={h => hoverChangedAtIndex(h, 4)}\n          />\n\n          <Speed \n            unhide={unhide} animDelay={animdelays[5]} \n            onClick={_ => showSlider('speed')} \n            onHoverChanged={h => hoverChangedAtIndex(h, 5)}\n          />\n\n          <Close \n            unhide={unhide} animDelay={animdelays[6]} animDuration={closeAnimDuration}\n            onClick={closeAction} onRightClick={minimise}\n            onHoverChanged={h => hoverChangedAtIndex(h, 6)}\n          />\n\n          <div className='qa-padding' />\n        </div>\n      </div>\n\n      <QaTooltip vis={tipVis} index={tipIndex} />\n    </div>\n  )\n}\n\nconst Back = ({ vis, onClick }) => {\n  return (\n    <div \n      className={`ex-back ${vis ? 'ex-back-vis' : ''}`}\n      onClick={onClick}\n    >\n      <BsChevronLeft className='ex-back-ico center' />\n      {/* <div className='ex-back-lbl center'>{'<'}</div> */}\n    </div>\n  )\n}\n\nconst animdelaysJson = {\n  'out2in': [280, 320, 360, 400, 440, 480, 520],\n  'in2out': [0, 0, 0, 0, 0, 0, 0],\n  'min2out': [0, 0, 0, 0, 0, 0, 0],\n  'out2min': [0, 0, 0, 0, 0, 0, 0],\n  'in2min': [0, 0, 0, 0, 0, 0, 0],\n  'min2in': [280, 320, 360, 400, 440, 480, 520],\n  'in2ex': [0, 0, 0, 0, 0, 0, 0],\n  'ex2in': [0, 0, 0, 0, 0, 0, 0],\n  'ex2sl': [0, 0, 0, 0, 0, 0, 0],\n  'ex2min': [0, 0, 0, 0, 0, 0, 0],\n  'min2ex': [280, 320, 360, 400, 440, 480, 520],\n  'sl2in': [240, 200, 160, 120, 80, 40, 240],\n  'in2sl': [0, 0, 0, 0, 0, 0, 0]\n}\n\nconst sdat = {\n  na: { value: -1, range: [0, 1], icon: <div /> },\n  brush: { value: 25, range: [1, 100], icon: <BrushIcon /> },\n  grid: { value: 5, range: [1, 50], icon: <GridIcon /> },\n  speed: { value: 97, range: [1, 100], icon: <SpeedIcon /> }\n}\n\nexport default QuickAccess\n","const MouseReceiver = ({ \n  isDrawing, isPainting, \n  onBrushDown, onBrushUp,\n  onDraw, onErase, onPaint, onMouseMove, onPreview \n}) => {\n\n  /* Hooked onPreview to drawHook */\n  \n  const draw = (e) => onDraw(e.clientX, e.clientY)\n  const erase = (e) => onErase(e.clientX, e.clientY)\n  const preview = e => onPreview(e.clientX, e.clientY)\n  \n  const drawStart = (e) => {\n    if (e.button === 0) drawHook = draw\n    else if (e.button === 2) drawHook = erase\n    onBrushDown()\n  }\n  \n  const drawEnd = (e) => {\n    drawHook(e)\n    drawHook = () => {}\n    onBrushUp()\n  }\n  \n  const mouseMove = (e) => {\n    drawHook(e)\n    onMouseMove()\n  }\n\n  const clickAction = () => {\n    if (isPainting) onPaint()\n  }\n\n  const contextAction = e => {\n    e.preventDefault()\n  }\n\n  /* --- Init --- */\n  if (isPainting) {\n    drawStartHook = () => {}\n    drawEndHook = () => {}\n    drawHook = preview\n  } else if (isDrawing) {\n    drawStartHook = drawStart\n    drawEndHook = drawEnd\n    drawHook = () => {}\n  } else {\n    drawStartHook = () => {}\n    drawEndHook = () => {}\n    drawHook = () => {}\n  }\n\n  return (\n    <div \n      className={`receiver${isDrawing || isPainting ? ' receiver-active' : ''}`}\n      \n      onClick={clickAction}\n      onContextMenu={contextAction}\n      onMouseDown={drawStartHook}\n      onMouseUp={drawEndHook}\n      onMouseLeave={drawEndHook}\n      onMouseMove={mouseMove}\n    />\n  )\n}\n  \nlet drawStartHook = () => {}\nlet drawEndHook = () => {}\nlet drawHook = () => {}\n\nexport default MouseReceiver\n","import { DataProvider } from './context/DataContext'\nimport { NotificationProvider } from './context/NotificationContext';\n\n// import Prototype from './prototypes/Prototype'\nimport World from './components/World'\n\n/**\n * TODO:\n * [ ] OPTIMIZE CANVAS (Google how to)\n * [ ] Disable key controls on input focus\n * [ ] Add Cellular Automata as starting shape\n * [ ] Add limits to palette cells\n * [ ] Add Next as right click of Play/Pause\n * [ ] Add trailing palette (Start palette once cell dies to black)\n * [ ] Divide grid into different rules\n *     [ ] Add different colors for different rules\n * [ ] Add X, Y offsets to all fillers (like Cross)\n * [ ] Replace LMB and RMB with icons\n * [ ] Improve cross browser compatibility with line-height: 1 (see md-con and children in palette.css)\n * [ ] Add rotate on right mouse click to placable patterns\n * [ ] Add change shapes on mouse wheel\n * [ ] Age Based loop from a different index (currently from 0)\n * [] Fix palette first cell delete when second cell is step cell \n * [] Implement textfields of palette cells\n * [] Add wrap to grid \n * [] Add background image / gradient and alive cells are transparent / dead cells are black (better perormance) \n * [] Option to 'Keep' earlier iterations in grid (Dont clear canvas)\n *     [] Maybe \"clear\" the rect with rgba(0, 0, 0, .1) each draw cycle? (or some smaller a;)\n * [] Add notifications on key pressess\n * [-] Add fullscreen\n *     * Done only on key press\n * [x] Add border-radius to palette cells \n *     * Not possible to add border radius to border image\n */\n\nfunction App() {\n  return (\n    // <Prototype />\n    <DataProvider>\n      <NotificationProvider>\n        <World />\n      </NotificationProvider>\n    </DataProvider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}