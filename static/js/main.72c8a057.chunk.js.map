{"version":3,"sources":["components/notifications/Notifications.js","context/DataContext.js","context/NotificationContext.js","components/helpers.js","components/shapes.js","components/shades.js","components/grid.js","components/controls/Controls.js","components/resizer/Resizer.js","components/World.js","components/rules.js","components/quick-access/ex-comps.js","components/quick-access/qa-buttons.js","components/quick-access/QaTooltip.js","components/quick-access/QaSlider.js","components/quick-access/ExRules.js","components/quick-access/ExShapes.js","components/quick-access/palette/PrefsPalette.js","components/quick-access/palette/AgePalette.js","components/quick-access/palette/ExPalette.js","components/quick-access/QuickAccess.js","components/receivers/MouseReceiver.js","App.js","index.js"],"names":["tid","gridW","Math","floor","window","innerWidth","gridH","innerHeight","constructFillers","name","fill","config","init","range","min","fillers","contextState","rules","b","s","shapes","DataContext","createContext","DataProvider","children","useState","state","setState","Provider","value","setDimensions","_gridW","_gridH","RuleNotification","highlightS","className","Notifications","message","timeout","messageIndex","show","setShow","outPhase","setOutPhase","console","log","useEffect","clearTimeout","setTimeout","undefined","onAnimationEnd","e","animationName","NotificationContext","NotificationProvider","setMessage","setMessageIndex","showNotification","pv","helperNames","print2dArray","arr2d","printStr","y","length","x","clamp","a","max","lerp","inverseLerp","bX","bY","selectedShape","selectedFill","monoShade","shades","isLooped","ages","ageMax","updateAge","selectedShadesSeq","size","brushSize","grid","neighbours","wrapEnabled","pCells","pOutOfBounds","pX","pY","inverseBg","alphaBg","background","drawBackground","isClearCanvas","hideTimeoutIndex","mouseMoveIndex","timer","ctx","ctxbg","gradientStops","randomInit","createGrid","args","constructGrid","clear","invert","random","vstripes","hstripes","dstripes","rect","checkered","cross","mesh","wraplines","create2dArray","si","wi","w","h","hi","snapshot","push","start","end","astart","xoff","yoff","xstart","ystart","xi","yi","sxi","ax","sx","sy","syi","ay","func","yiter","array","checkBounds","global_S","global_B","setRule","split","map","i","parseInt","checkSurvival","alive","indexOf","checkBirth","setShades","shadeSeq","isLoop","constructShades","row","_updateLoopedAge","_updateAge","_resetAge","isAlive","_incrementAge","_incrementLoopedAge","initGrid","calculateDimensions","createRandom","generateNeighbours","updateDrawBackground","reInitGrid","updateShades","reCreateGrid","drawGrid","fillStyle","fillRect","drawInverse","canvas","width","height","clearRect","drawShaded","drawShapes","setBrushSize","bsz","drawOnGrid","applyBrush","eraseOnGrid","paint","preview","cx","cy","gX","gY","cells","outOfBounds","offX","offY","getShape","setupPreview","shape","setShape","setGridWrap","wrap","setFill","_","setTrails","toString","hf","ox","oy","_x","_y","cX","cY","nei","generation","tl","tr","br","bl","t","r","l","n_center","n_topLtW","n_topRtW","n_botRtW","n_botLtW","n_topW","n_rightW","n_bottomW","n_leftW","n_topLt","n_topRt","n_botRt","n_botLt","n_top","n_right","n_bottom","n_left","top","topRt","right","botRt","bottom","botLt","left","topLt","topW","topRtW","rtTopW","rightW","rtBotW","botRtW","bottomW","botLtW","ltBotW","leftW","ltTopW","topLtW","ExCon","title","isCurrent","join","toUpperCase","ExIndicator","props","selectedIndex","canvasRef","useRef","style","current","getContext","setAttribute","lineWidth","strokeStyle","points","moveTo","forEach","lineTo","stroke","ref","ExSubTitle","subtitle","fontSize","isScrollable","ExCheckbox","checked","onChange","onClick","QaButton","unhide","animDelay","animDuration","onRightClick","onHoverChanged","hoverRef","animationDuration","animationDelay","onContextMenu","preventDefault","onMouseEnter","onMouseLeave","Play","isPlaying","Draw","isDrawing","Speed","Shapes","Rules","Colors","Close","BrushIcon","GridIcon","SpeedIcon","tips","0","1","2","3","4","5","6","QaTooltip","vis","index","midX","path","msgConStyle","tip","d","liveValue","QaSlider","icon","onDismiss","offsetX","trackX","setTrackX","isPressed","setIsPressed","isHovered","setIsHovered","lower","upper","updateTrackX","rounded","round","mouseDown","useCallback","button","document","addEventListener","mouseUp","once","trackStyle","thumbStyle","labelStyle","conClass","thumbClass","labelClass","closeClass","onMouseMove","clientX","onMouseDown","isKeyModeSurvival","Presets","currentIndex","onSelect","selected","ari","Custom","activeRule","onSelectPresets","onWrapChanged","onChanged","updateRule","nb","ns","numbers","onNumbersChanged","WrapGrid","setChecked","marginTop","_checked","ActiveRule","RuleOption","Numbers","toggles","setToggles","updateNumbers","n","togs","charAt","text","checkChanged","v","DiamondBtn","btnStyle","btnClass","cbClass","RuleCell","nameCN","ruleCN","ExRules","pindex","onPindexChanged","useContext","arIndex","setArIndex","setActiveRule","pconStyle","transform","updateActiveRule","selectedRule","isCustom","keyListener","key","sarr","splice","_s","sort","barr","bi","_b","keyCode","body","removeEventListener","icat","ishape","Fillers","onSliding","setCurrentIndex","ex","onExpanded","exAction","FillCell","hovered","setHovered","pressed","setPressed","backgroundColor","color","borderColor","configAction","stopPropagation","iconClass","onMouseUp","moded","onDown","onUp","FSlide","hov","setHov","setValue","slideClass","type","step","target","MidButton","textStyle","strokeWidth","MidIndic","paths","visible","ExShapes","onShapeSelect","onFillSelect","onClear","isShapes","setIsShapes","Modes","states","onMonoChanged","onGradientChanged","onImageSelect","onAgeConfigure","onTrailsChanged","trails","modesClass","trailsChanged","gradient","src","uploaded","render","Mono","Gradient","updateStops","Image","uploadRef","click","files","URL","createObjectURL","AgeBased","ColorSelection","hex","setHex","hasFocus","setHasFocus","test","substring","onFocus","onBlur","_hex","padding","ModeDropdown","onExpand","baseClass","lblClass","modes","mode","Trails","showInfo","setShowInfo","opacity","PrefsPalette","onBackgroundSelect","onMonoSelect","onGradientSelect","modeEx","setModeEx","modeIndex","setModeIndex","modeStates","setModeStates","nextStates","mono","st","grad","animActive","scrollListenerAttached","lastApplied","list","isTint","outId","Footer","hasBg","onReset","onApply","onAddTint","onAddGradient","onAddLoop","isAdd","setIsAdd","loopName","isControl","isIn","FooterButton","TintCell","onDeleteQueue","onDeleteFinish","contentStyle","hex2rgb","g","getAccent","event","StepCell","steps","borderImageSource","stepper","diff","LoopCell","isStart","generateShades","prev","next","dr","dg","db","rgb2hex","bigint","slice","ExPalette","setList","setIsLoop","scrollAtEnd","setScrollAtEnd","listRef","createGradient","g1","g2","scrollToEnd","scroll","scrollHeight","behavior","scrollListener","scrollTop","clientHeight","reset","updatedList","updateTint","deleteIndices","_list","deleteQueuedAtIndex","filter","updateSteps","onBgSelect","onGradSelect","AgePalette","sliderValue","Back","animdelaysJson","sdat","na","brush","speed","QuickAccess","animId","qaHidden","qaExpanded","qaMinimised","qaSlider","onQaHoverChanged","onQaExpanded","onQaMinimised","onQaSlider","onPlayClicked","onDrawClicked","onQaClose","onTempPause","onRuleSelect","onShadesSelect","onBrushChanged","onSizeChanged","onSpeedChanged","qaIndex","setQaIndex","slideId","setSlideId","tipIndex","setTipIndex","tipVis","setTipVis","backVis","setBackVis","exPindices","setExPindices","setPhantomUpdateIndex","qaExAction","item","exChangePage","enableBack","showSlider","id","hoverChangedAtIndex","speedLower","speedUpper","ps","animdelays","closeAnimDuration","pi","drawStartHook","drawEndHook","drawHook","MouseReceiver","isPainting","onBrushDown","onBrushUp","onDraw","onErase","onPaint","onPreview","draw","clientY","erase","qaEnabled","isTempPause","Controls","onIsPlayingChanged","onBrushDownChanged","onPreviewStart","onPreviewEnd","hide","exp","slide","qaState","setQaState","setIsPlaying","setIsDrawing","setIsPainting","updateQaHidden","inState","updateQaMinimised","outState","updateToggleState","setter","updateIsPlaying","requestFullscreen","pause","Resizer","isResizing","onResizing","countdown","setCountdown","resizeHandler","clearInterval","setInterval","p","drawSpeed","isBrushDown","isInverseDraw","isAgeShades","isInverseImage","isShapeShades","isPlayingChanged","update","_update","brushDownChanged","_isBrushDown","reconfigureDraw","shadesSelected","updateBackground","setShadeSeq","triggerDraw","speedChanged","spd","startPreview","previewConfig","endPreview","setBackground","bg","setGradient","stops","initInverseDraw","applyGradient","setupImageBackground","createLinearGradient","addColorStop","resizeBgRedraw","findex","pop","updateGrid","_draw","_fdraw","World","fps","setFps","showFps","bgImgSrc","setBgImgSrc","setIsResizing","canvasbgRef","updateCanvasSize","canvasBg","animationFrameId","fLogIndex","fLogTime","context","contextBg","startTime","Date","now","logFps","requestAnimationFrame","cancelAnimationFrame","alt","sz","_isResizing","App","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.72c8a057.chunk.js","sourcesContent":["import { useState, useEffect } from 'react'\nimport \"./notifications.css\"\n\nconst AUTO_HIDE_DELAY = 5000\n\nlet tid\n\n// message => string | JSX\n\nconst Notifications = ({ message, timeout, messageIndex }) => {\n  const [show, setShow] = useState(false)\n  const [outPhase, setOutPhase] = useState(false)\n\n  console.log(message)\n\n  const animEnded = e => {\n    if (e.animationName === \"fade-out-anim\") {\n      setShow(false)\n      setOutPhase(false)\n    }\n  }\n\n  useEffect(() => {\n    if (message) {\n      if (!show) {\n        setShow(true)\n      }\n\n      if (outPhase) {\n        setOutPhase(false)\n      }\n      \n      if (tid) {\n        clearTimeout(tid)\n      }\n      tid = setTimeout(() => {\n        setOutPhase(true)\n        tid = undefined\n      }, timeout * 1000 || AUTO_HIDE_DELAY)\n\n      return () => {\n        if (tid) {\n          clearTimeout(tid)\n        }\n      }\n    } else {\n      setShow(false)\n      setOutPhase(false)\n    }\n  }, [message, messageIndex])\n\n  return (\n    <div>\n      {show && (\n        <div className='notification-container'>\n          <div \n            className={`notification-bubble ${outPhase && 'bubble-out'}`}\n            onAnimationEnd={animEnded}\n          >\n            {message}\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport const RuleNotification = ({ b, s, highlightS }) => (\n  <div>\n    <span className={highlightS && \"text-dim\"}>B{b}</span>{\" \"}\n    <span className={!highlightS && \"text-dim\"}>S{s}</span>\n  </div>\n)\n\nexport default Notifications","import { createContext, useState } from 'react'\n\nimport shapes from './shapes.json'\n\nlet gridW = Math.floor(window.innerWidth / 5)\nlet gridH = Math.floor(window.innerHeight / 5)\n\nconst rules = [\n  { name: 'Conway\\'s Life', b: '3',       s: '23' },\n  { name: '2x2',            b: '36',      s: '125' },\n  { name: '34 Life',        b: '34',      s: '34' },\n  { name: 'Amoeba',         b: '357',     s: '1358' },\n  { name: 'Anneal',         b: '4678',    s: '35678' },\n  { name: 'Assimilation',   b: '345',     s: '4567' },\n  { name: 'Coagulations',   b: '378',     s: '235678' },\n  { name: 'Coral',          b: '3',       s: '45678' },\n  { name: 'Day & Night',    b: '3678',    s: '34678' },\n  { name: 'Diamoeba',       b: '35678',   s: '5678' },\n  { name: 'Gnarl',          b: '1',       s: '1' },\n  { name: 'High Life',      b: '36',      s: '23' },\n  { name: 'Inverse Life',   b: '0123478', s: '34678' },\n  { name: 'Life w/ Death',  b: '3',       s: '012345678' },\n  { name: 'Long Life',      b: '345',     s: '5' },\n  { name: 'Maze',           b: '3',       s: '12345' },\n  { name: 'Mazectric',      b: '3',       s: '1234' },\n  { name: 'Morley',         b: '368',     s: '245' },\n  { name: 'Move',           b: '368',     s: '245' },\n  { name: 'Pseudo Life',    b: '357',     s: '238' },\n  { name: 'Replicator',     b: '1357',    s: '1357' },\n  { name: 'Seeds',          b: '2',       s: '' },\n  { name: 'Serviettes',     b: '234',     s: '' },\n  { name: 'Stains',         b: '3678',    s: '235678' },\n  { name: 'Untitled',       b: '25',      s: '4' },\n  { name: 'Walled Cities',  b: '45678',   s: '2345' }\n]\n\nconst constructFillers = () => {\n  return [\n    { name: 'Chaotic Random', fill: 'random', config: [\n      { name: 'Density', init: 50, range: [1, 99] }\n    ]},\n    { name: 'Ordered Random', fill: 'wraplines', config: [\n      { name: 'Offset A', init: Math.floor(gridW / 20), range: [1, Math.floor(gridW / 2)] },\n      { name: 'Offset B', init: Math.floor(gridW / 15), range: [1, Math.floor(gridW / 2)] }\n    ]},\n    { name: 'Vertical Stripes', fill: 'vstripes', config: [\n      { name: 'Spacing', init: 1, range: [1, Math.floor(gridW / 2)] },\n      { name: 'Thickness', init: 1, range: [1, Math.floor(gridW / 2)] }\n    ]},\n    { name: 'Horizontal Stripes', fill: 'hstripes', config: [\n      { name: 'Spacing', init: 1, range: [1, Math.floor(gridH / 2)] } ,\n      { name: 'Thickness', init: 1, range: [1, Math.floor(gridH / 2)] }\n    ]},\n    { name: 'Diagonal Stripes', fill: 'dstripes', config: [\n      { name: 'Spacing', init: 5, range: [1, Math.floor(Math.min(gridW, gridH) / 2)] },\n      { name: 'Thickness', init: 2, range: [1, Math.floor(Math.min(gridW, gridH) / 2)] }\n    ]},\n    { name: 'Rectangle', fill: 'rect', config: [\n      { name: 'Width', init: gridW, range: [2, gridW] }, \n      { name: 'Height', init: gridH, range: [2, gridH] }\n    ]},\n    { name: 'Checkered', fill: 'checkered', config: [\n      { name: 'Width', init: 4, range: [1, Math.floor(gridW / 2)] },\n      { name: 'Height', init: 4, range: [1, Math.floor(gridH / 2)] }\n    ]},\n    { name: 'Cross', fill: 'cross', config: [\n      { name: 'X Offset', init: 0, range: [-gridW / 2, gridW / 2 - (1 - gridW % 2)] }, // -1 if gridW is even\n      { name: 'Y Offset', init: 0, range: [-gridH / 2, gridH / 2 - (1 - gridH % 2)] }, \n      { name: 'Width', init: 1, range: [1, gridW / 2] }, \n      { name: 'Height', init: 1, range: [1, gridW / 2] }, \n    ]},\n    { name: 'Mesh', fill: 'mesh', config: [\n      { name: 'X Spacing', init: 5, range: [1, Math.floor(gridW / 2)] },\n      { name: 'Y Spacing', init: 5, range: [1, Math.floor(gridH / 2)] },\n      { name: 'X Thickness', init: 1, range: [1, Math.floor(gridW / 2)] },\n      { name: 'X Thickness', init: 1, range: [1, Math.floor(gridH / 2)] }\n    ]},\n  ]\n}\n\nconst fillers = constructFillers()\n\nconst contextState = { gridW, gridH, rules, shapes, fillers }\nconst DataContext = createContext(contextState)\n\nconst DataProvider = ({ children }) => {\n  const [state, setState] = useState(contextState)\n\n  const setDimensions = (_gridW, _gridH) => {\n    gridW = _gridW; gridH = _gridH\n    setState({ ...state, fillers: constructFillers() })\n  }\n\n  return (\n    <DataContext.Provider value={{ ...state, setDimensions }}>\n      {children}\n    </DataContext.Provider>\n  )\n}\n\nexport { DataContext, DataProvider }","import { createContext, useState } from \"react\"\nimport Notifications from \"../components/notifications/Notifications\"\n\nconst NotificationContext = createContext({})\n\nconst NotificationProvider = ({ children }) => {\n  const [message, setMessage] = useState(\"\")\n  const [timeout, setTimeout] = useState(0)\n  const [messageIndex, setMessageIndex] = useState(0)\n\n  const showNotification = (message, timeout = 0) => {\n    setMessage(message)\n    setTimeout(timeout)\n    setMessageIndex(pv => pv + 1)\n  }\n\n  return (\n    <NotificationContext.Provider value={{ showNotification }}>\n      {children}\n      <Notifications \n        message={message} \n        timeout={timeout}\n        messageIndex={messageIndex} \n      />\n    </NotificationContext.Provider>\n  )\n}\n\nexport { NotificationContext, NotificationProvider }","const helperNames = []\nwindow.helperNames = helperNames\n\nconst createHelpers = (helpers) => {\n  helpers.forEach(helper => {\n    let name = helper.name\n    if (window[name]) name = `f${name.charAt(0).toUpperCase()}${name.substring(1)}`\n    window[name] = helper\n    helperNames.push(name)\n  })\n}\n\nwindow.print2dArray = (arr2d) => {\n  let printStr = \"\"\n  for (let y = 0; y < arr2d.length; y++) {\n    for (let x = 0; x < arr2d[y].length; x++) {\n      printStr += `${arr2d[y][x]} `\n    }\n    printStr += '\\n'\n  }\n  console.log(printStr)\n}\n\nMath.clamp = (x, a, b) => Math.min(Math.max(x, a), b)\nMath.lerp = (a, b, x) => a + (b - a) * Math.clamp(x, 0, 1)\nMath.inverseLerp = (a, b, x) => Math.clamp((x - a) / (b - a), 0, 1)\n\nexport { createHelpers }","let bX, bY, selectedShape, selectedFill\n\nconst randomInit = [\n  'random', 'vstripes', 'hstripes', 'dstripes', \n  'rect','checkered', 'cross', 'mesh', 'wraplines'\n]\n\nconst setBounds = (x, y) => {\n  bX = x\n  bY = y\n}\n\nconst setShape = shape => {\n  selectedShape = shape\n}\n\nconst getShape = (gX, gY) => {\n  const cells = []\n  let outOfBounds = false\n  for (let [offX, offY] of selectedShape) {\n    const x = gX + offX\n    const y = gY + offY\n    if (checkBounds(x, y)) {\n      cells.push([x, y])\n    } else {\n      if (!outOfBounds) {\n        outOfBounds = true\n      }\n    }\n  }\n\n  return { cells, outOfBounds }\n}\n\nconst createGrid = ({ fill, grid, args }) => {\n  selectedFill = fill\n  return constructGrid(fill, grid, args)\n}\n\nconst createRandom = ({ grid }) => {\n  const fill = randomInit[Math.floor(Math.random() * randomInit.length)]\n  console.log(`Created random fill: ${fill}`)\n  return createGrid({ fill, grid })\n}\n\nconst reCreateGrid = ({ grid }) => {\n  return constructGrid(selectedFill, grid)\n}\n\nconst constructGrid = (fill, grid, args) => {\n  switch (fill) {\n    case 'clear': return clear()\n    case 'invert': return invert(grid)\n    case 'random': return random(args)\n    case 'vstripes': return vstripes(args)\n    case 'hstripes': return hstripes(args)\n    case 'dstripes': return dstripes(args)\n    case 'rect': return rect(args)\n    case 'checkered': return checkered(args)\n    case 'cross': return cross(args)\n    case 'mesh': return mesh(args)\n    case 'wraplines': return wraplines(args)\n    default: break\n  }\n}\n\nconst clear = () => create2dArray(() => 0)\nconst invert = (grid) => create2dArray(({ x, y }) => 1 - grid[y][x])\n\nconst random = (args = [50]) => create2dArray(() => {\n  return Math.random() < args[0] / 100 ? 1 : 0\n})\n\nconst vstripes = (args = [1, 1]) => {\n  const [s, w] = args\n  let si, wi, a\n  return create2dArray(() => {\n    if (a) {\n      if (wi < w) { wi += 1; a = 1 } \n      else { si = 1; a = 0 }\n    } else {\n      if (si < s) { si += 1; a = 0 } \n      else { a = 1; wi = 1 }\n    }\n    return a\n  }, () => {\n    a = 0; wi = 0; si = 0\n  })\n}\n\nconst hstripes = (args = [1, 1]) => {\n  const [s, h] = args\n  let si = 0, hi = 0, a = 0\n  return create2dArray(() => {\n    return a\n  }, () => {\n    if (a) {\n      if (hi < h) { hi += 1; a = 1 }\n      else { si = 1; a = 0 }\n    } else {\n      if (si < s) { si += 1; a = 0 }\n      else { a = 1; hi = 1 }\n    }\n  })\n}\n\nconst dstripes = (args = [1, 1]) => {\n  /* Lazy code. Need to find better alternative */\n  const [s, w] = args\n  const snapshot = []\n  let wi = 0, si = 0, di = 0, a = 0\n  return create2dArray(({ y }) => {\n    if (y === 0) snapshot.push({ wi, si, a })\n    if (a) {\n      if (wi < w) { wi += 1; a = 1 } \n      else { si = 1; a = 0 }\n    } else {\n      if (si < s) { si += 1; a = 0 } \n      else { a = 1; wi = 1 }\n    }\n    return a\n  }, ({ y }) => {\n    if (y > 0) {\n      wi = snapshot[y].wi\n      si = snapshot[y].si\n      a = snapshot[y].a\n    }\n  })\n}\n\nconst rect = (args = [bX, bY]) => {\n  const [w, h] = args\n  const start = { \n    x: Math.floor((bX - w) / 2), \n    y: Math.floor((bY - h) / 2)\n  }\n  const end = { x: start.x + w - 1, y: start.y + h - 1 }\n  const grid = create2dArray(() => 0)\n  for (let wi = start.x; wi <= end.x; wi++) {\n    grid[start.y][wi] = 1\n    grid[end.y][wi] = 1\n  }\n  for (let hi = start.y; hi <= end.y; hi++) {\n    grid[hi][start.x] = 1\n    grid[hi][end.x] = 1\n  }\n  return grid\n}\n\nconst checkered = (args = [4, 4]) => {\n  const [w, h] = args\n  let wi = 0, hi = 0, astart = 0, a = astart\n  return create2dArray(() => {\n    if (wi < w) { wi += 1 }\n    else { wi = 1; a = 1 - a }\n    return a\n  }, () => {\n    if (hi < h) { hi += 1 }\n    else { hi = 1; astart = 1 - astart }\n    a = astart; wi = 0\n  })\n}\n\nconst cross = (args = [0, 0, bX, bY]) => {\n  const [xoff, yoff, w, h] = args\n  const xstart = Math.floor(bX / 2) + xoff - Math.floor(w / 2)\n  const ystart = Math.floor(bY / 2) + yoff - Math.floor(h / 2)\n  const grid = create2dArray(() => 0)\n  for (let xi = 0; xi < bX; xi++) {\n    for (let hi = 0; hi < h; hi++) {\n      if (ystart + hi < bY) {\n        grid[ystart + hi][xi] = 1\n      }\n    }\n  }\n  for (let yi = 0; yi < bY; yi++) {\n    for (let wi = 0; wi < w; wi++) {\n      if (xstart + wi < bX) {\n        grid[yi][xstart + wi] = 1\n      }\n    }\n  }\n  return grid\n}\n\nconst mesh = (args = [1, 1, 1, 1]) => {\n  const [sx, sy, w, h] = args\n  let sxi, wi, ax\n  let syi = 0, hi = 0, ay = 0\n  return create2dArray(() => {\n    if (ay) {\n      return 1\n    } else if (ax) {\n      if (wi < w) { wi += 1; ax = 1 }\n      else { sxi = 1; ax = 0 }\n    } else {\n      if (sxi < sx) { sxi += 1; ax = 0 }\n      else { ax = 1; wi = 1 }\n    }\n    return ax\n  }, () => {\n    ax = 0; wi = 0; sxi = 0\n    if (ay) {\n      if (hi < h) { hi += 1; ay = 1 }\n      else { syi = 1; ay = 0 }\n    } else {\n      if (syi < sy) { syi += 1; ay = 0 }\n      else { ay = 1; hi = 1 }\n    }\n  })\n}\n\nconst wraplines = (args = [1, 1]) => {\n  const [w, s] = args\n  let si = 0, wi = 0, a = 0\n  return create2dArray(() => {\n    if (a) {\n      if (wi < w) { wi += 1; a = 1 } \n      else { si = 1; a = 0 }\n    } else {\n      if (si < s) { si += 1; a = 0 } \n      else { a = 1; wi = 1 }\n    }\n    return a\n  })\n}\n\nconst create2dArray = (func, yiter = () => {}) => {\n  const array = []\n  for (let y = 0; y < bY; y++) {\n    array[y] = []\n    yiter({ y })\n    for (let x = 0; x < bX; x++) {\n      array[y][x] = func({ x, y })\n    }\n  }\n  return array\n}\n\n/* Yes this is a duplicate of grid.js checkBounds */\nconst checkBounds = (x, y) => x > -1 && y > -1 && x < bX && y < bY\n\nexport { setBounds, setShape, getShape, createGrid, reCreateGrid, createRandom }","let monoShade, shades, isLooped, ages, ageMax, updateAge, selectedShadesSeq\n\nconst getShade = (x, y) => shades[ages[y][x]]\n\nconst setShades = ({ shadeSeq, isLoop, grid }) => {\n  selectedShadesSeq = shadeSeq\n  isLooped = isLoop\n  constructShades(shadeSeq, grid)\n}\n\nconst updateShades = ({ grid }) => {\n  constructShades(selectedShadesSeq, grid)\n}\n\nconst resetAges = () => ages = ages ? ages.map(row => row.map(_ => 0)) : []\n\nconst constructShades = (shadeSeq, grid) => {\n  if (shadeSeq.length > 1) {\n    shades = ['age starts from index 1', ...shadeSeq]\n    ageMax = shades.length - 1\n    ages = grid.map(row => row.map(i => 0))\n    updateAge = isLooped ? _updateLoopedAge : _updateAge\n  } else {\n    monoShade = shadeSeq[0]\n    updateAge = () => {}\n  }\n}\n\nconst _incrementAge = (x, y) => {\n  if (ages[y][x] < ageMax) {\n    ages[y][x] += 1\n  }\n}\n\nconst _incrementLoopedAge = (x, y) => {\n  if (ages[y][x] < ageMax) {\n    ages[y][x] += 1\n  } else {\n    ages[y][x] = 0\n  }\n}\n\nconst _resetAge = (x, y) => {\n  if (ages[y][x] > 0) {\n    ages[y][x] = 0\n  }\n}\n\nconst _updateAge = (isAlive, x, y) => {\n  if (isAlive) _incrementAge(x, y)\n  else _resetAge(x, y)\n}\n\nconst _updateLoopedAge = (isAlive, x, y) => {\n  if (isAlive) _incrementLoopedAge(x, y)\n  else _resetAge(x, y)\n}\n\nexport { monoShade, getShade, setShades, updateShades, resetAges, updateAge }","import { createHelpers } from './helpers'\nimport { setBounds, setShape, getShape, createGrid, reCreateGrid, createRandom } from './shapes'\nimport { setRule, checkSurvival, checkBirth } from './rules'\nimport { monoShade, getShade, setShades, updateShades, resetAges, updateAge } from './shades'\n\nlet gridW, gridH, size, brushSize\nlet grid, neighbours, wrapEnabled\nlet pCells, pOutOfBounds, pX, pY // pX, pY = Current preview cell coordinates\nlet inverseBg, alphaBg, background, drawBackground, isClearCanvas // background = inverseBg + alphaBg\n\n\n/* --- Exports --- */\n\nconst initGrid = () => {\n  size = 5\n  brushSize = 25\n  calculateDimensions()\n\n  wrapEnabled = false\n\n  grid = createRandom({ grid })\n  generateNeighbours(gridW, gridH)\n\n  alphaBg = '00'\n  background = inverseBg + alphaBg // inverseBg initialised in World init\n  setShades({ shadeSeq: ['#ffffff'], grid })\n\n  isClearCanvas = true\n  updateDrawBackground()\n}\n\nconst reInitGrid = () => {\n  calculateDimensions()\n  grid = reCreateGrid({ grid })\n  updateShades({ grid })\n  generateNeighbours(gridW, gridH)\n\n  return { gridW, gridH }\n}\n\nconst updateGrid = () => {\n  let isAlive\n  const pop = []\n  for (let yi = 0; yi < grid.length; yi++) {\n    const row = []\n    for (let xi = 0; xi < grid[yi].length; xi++) {\n      const alive = neighbours[yi][xi](xi, yi)\n      if (grid[yi][xi]) {\n        isAlive = checkSurvival(alive, xi, yi)\n      } else {\n        isAlive = checkBirth(alive, xi, yi)\n      }\n      row.push(isAlive)\n      updateAge(isAlive, xi, yi)\n    }\n    pop.push(row)\n  }\n  grid = pop\n}\n\nconst drawGrid = (ctx) => {\n  drawBackground(ctx)\n  ctx.fillStyle = monoShade\n  for (let yi = 0; yi < grid.length; yi++) {\n    for (let xi = 0; xi < grid[yi].length; xi++) {\n      if (grid[yi][xi]) {\n        ctx.fillRect(xi * size, yi * size, size, size)\n      }\n    }\n  }\n}\n\nconst drawInverse = (ctx) => {\n  ctx.fillStyle = inverseBg\n  ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height)\n  for (let yi = 0; yi < grid.length; yi++) {\n    for (let xi = 0; xi < grid[yi].length; xi++) {\n      if (grid[yi][xi]) {\n        ctx.clearRect(xi * size, yi * size, size, size)\n      }\n    }\n  }\n}\n\nconst drawShaded = (ctx) => {\n  drawBackground(ctx)\n  for (let yi = 0; yi < grid.length; yi++) {\n    for (let xi = 0; xi < grid[yi].length; xi++) {\n      if (grid[yi][xi]) {\n        ctx.fillStyle = getShade(xi, yi)\n        ctx.fillRect(xi * size, yi * size, size, size)\n      }\n    }\n  }\n}\n\nconst drawShapes = (ctx) => {\n  ctx.fillStyle = '#000000'\n  ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height)\n  ctx.fillStyle = '#a2a2a2'\n  for (let yi = 0; yi < grid.length; yi++) {\n    for (let xi = 0; xi < grid[yi].length; xi++) {\n      if (grid[yi][xi]) {\n        ctx.fillRect(xi * size, yi * size, size, size)\n      }\n    }\n  }\n  ctx.fillStyle = pOutOfBounds ? '#ff3434' : '#ffffff'\n  for (let i = 0; i < pCells.length; i++) {\n    const [x, y] = pCells[i]\n    ctx.fillRect(x * size, y * size, size, size)\n  }\n}\n\nconst setBrushSize = bsz => brushSize = bsz\n\nconst drawOnGrid = (x, y) => applyBrush(x, y, 1)\nconst eraseOnGrid = (x, y) => applyBrush(x, y, 0)\n\nconst paint = () => {\n  if (!pOutOfBounds) {\n    for (let i = 0; i < pCells.length; i++) {\n      const [x, y] = pCells[i]\n      grid[y][x] = 1\n    }\n  }\n}\n\nconst preview = (x, y) => { \n  const cx = Math.min(Math.floor(x / size), gridW - 1)\n  const cy = Math.min(Math.floor(y / size), gridH - 1)\n  if (cx !== pX || cy !== pY) {\n    pX = cx; pY = cy\n    const { cells, outOfBounds } = getShape(cx, cy)\n    pCells = cells; pOutOfBounds = outOfBounds\n  }\n}\n\nconst setSize = (sz) => {\n  if (sz !== size) {\n    size = sz\n    reInitGrid()\n  }\n\n  return { gridW, gridH }\n}\n\nconst setupPreview = shape => {\n  setShape(shape)\n  pX = -1; pY = -1\n  pCells = []; pOutOfBounds = false\n}\n\nconst setGridWrap = wrap => {\n  wrapEnabled = wrap\n  generateNeighbours(gridW, gridH)\n}\n\nconst setFill = (fill, args) => {\n  grid = createGrid({ fill, grid, args })\n  resetAges()\n}\n\nconst setInverseBg = invbg => {\n  inverseBg = invbg\n  background = inverseBg + alphaBg\n}\n\nconst setShadeSeq = ({ shades, isLoop }) => {\n  setShades({ shadeSeq: shades, isLoop, grid })\n}\n\nconst setTrails = i => {\n  i = 255 - i\n  alphaBg = `${i < 16 ? '0' : ''}${i.toString(16)}`\n  background = inverseBg + alphaBg\n\n  if (i < 255) {\n    if (isClearCanvas) {\n      isClearCanvas = false\n      updateDrawBackground()\n    }\n  } else {\n    /* Cause you can hit 255 only once */\n    isClearCanvas = true\n    updateDrawBackground()\n  }\n}\n\n/* --- End Exports --- */\n\nconst setDimensions = (_gridW, _gridH) => {\n  gridW = _gridW\n  gridH = _gridH\n\n  setBounds(gridW, gridH)\n}\n\nconst calculateDimensions = () => {\n  setDimensions(\n    Math.floor(window.innerWidth / size),\n    Math.floor(window.innerHeight / size)\n  )\n\n  console.log(`Calculated gridW: ${gridW}, gridH: ${gridH}`)\n}\n\nconst updateDrawBackground = () => {\n  drawBackground = isClearCanvas ? ctx => {\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height)\n  } : ctx => {\n    ctx.fillStyle = background\n    ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height)\n  }\n}\n\nconst applyBrush = (x, y, b) => {\n  const bsz = Math.max(1, Math.floor(brushSize / size))\n  const cx = Math.min(Math.floor(x / size), gridW - 1)\n  const cy = Math.min(Math.floor(y / size), gridH - 1)\n  if (bsz > 1) {\n    const hf = Math.floor(bsz / 2)\n    const ox = cx - hf\n    const oy = cy - hf\n    for (let xi = 0; xi < bsz; xi++) {\n      for (let yi = 0; yi < bsz; yi++) {\n        const _x = ox + xi\n        const _y = oy + yi\n        if (checkBounds(_x, _y)) {\n          grid[_y][_x] = b\n        }\n      }\n    }\n  } else {\n    grid[cy][cx] = b\n  }\n}\n\nconst generateNeighbours = (bX, bY) => {\n  const cX = bX - 1\n  const cY = bY - 1\n  const nei = []\n  const generation = (tl, tr, br, bl, t, r, b, l) => {\n    for (let y = 0; y < bY; y++) {\n      nei[y] = []\n      for (let x = 0; x < bX; x++) {\n        if (x === 0 && y === 0) nei[y][x] = tl\n        else if (x === cX && y === 0) nei[y][x] = tr\n        else if (x === cX && y === cY) nei[y][x] = br\n        else if (x === 0 && y === cY) nei[y][x] = bl\n        else if (y === 0) nei[y][x] = t\n        else if (x === cX) nei[y][x] = r\n        else if (y === cY) nei[y][x] = b\n        else if (x === 0) nei[y][x] = l\n        else nei[y][x] = n_center\n      }\n    }\n  }\n  if (!wrapEnabled) generation(n_topLt, n_topRt, n_botRt, n_botLt, n_top, n_right, n_bottom, n_left)\n  else generation(n_topLtW, n_topRtW, n_botRtW, n_botLtW, n_topW, n_rightW, n_bottomW, n_leftW) \n  neighbours = nei\n}\n\n/* --- NAMING ---\n * topRt    - Top Right\n * topRtW   - Top Right Wraped\n * topRtWC  - Top Right Wraped Corner \n * rtTopW   - Right Top Wraped\n * 'Corners' and 'topRtW/rtTopW separations' are extra checks that arise because of wraping\n */\n\nconst top = (x, y) => grid[y - 1][x]\nconst topRt = (x, y) => grid[y - 1][x + 1]\nconst right = (x, y) => grid[y][x + 1]\nconst botRt = (x, y) => grid[y + 1][x + 1]\nconst bottom = (x, y) => grid[y + 1][x]\nconst botLt = (x, y) => grid[y + 1][x - 1]\nconst left = (x, y) => grid[y][x - 1]\nconst topLt = (x, y) => grid[y - 1][x - 1]\n\nconst topW = (x) => grid[gridH - 1][x]\nconst topRtW = (x) => grid[gridH - 1][x + 1]\nconst topRtWC = () => grid[gridH - 1][0]\nconst rtTopW = (_, y) => grid[y - 1][0]\nconst rightW = (_, y) => grid[y][0]\nconst rtBotW = (_, y) => grid[y + 1][0]\nconst botRtWC = () => grid[0][0]\nconst botRtW = (x) => grid[0][x + 1]\nconst bottomW = (x) => grid[0][x]\nconst botLtW = (x) => grid[0][x - 1]\nconst botLtWC = () => grid[0][gridW - 1]\nconst ltBotW = (_, y) => grid[y + 1][gridW - 1]\nconst leftW = (_, y) => grid[y][gridW - 1]\nconst ltTopW = (_, y) => grid[y - 1][gridW - 1]\nconst topLtWC = () => grid[gridH - 1][gridW - 1]\nconst topLtW = (x) => grid[gridH - 1][x - 1]\n\nconst n_top = (x, y) => right(x, y) + botRt(x, y) + bottom(x, y) + botLt(x, y) + left(x, y)\nconst n_topRt = (x, y) => bottom(x, y) + botLt(x, y) + left(x, y)\nconst n_right = (x, y) => top(x, y) + bottom(x, y) + botLt(x, y) + left(x, y) + topLt(x, y)\nconst n_botRt = (x, y) => top(x, y) + left(x, y) + topLt(x, y)\nconst n_bottom = (x, y) => top(x, y) + topRt(x, y) + right(x, y) + left(x, y) + topLt(x, y)\nconst n_botLt = (x, y) => top(x, y) + topRt(x, y) + right(x, y)\nconst n_left = (x, y) => top(x, y) + topRt(x, y) + right(x, y) + botRt(x, y) + bottom(x, y)\nconst n_topLt = (x, y) => right(x, y) + botRt(x, y) + bottom(x, y)\nconst n_center = (x, y) => top(x, y) + topRt(x, y) + right(x, y) + botRt(x, y) + bottom(x, y) + botLt(x, y) + left(x, y) + topLt(x, y)\n\nconst n_topW = (x, y) => topW(x, y) + topRtW(x, y) + right(x, y) + botRt(x, y) + bottom(x, y) + botLt(x, y) + left(x, y) + topLtW(x, y)\nconst n_topRtW = (x, y) => topW(x, y) + topRtWC(x, y) + rightW(x, y) + rtBotW(x, y) + bottom(x, y) + botLt(x, y) + left(x, y) + topLtW(x, y)\nconst n_rightW = (x, y) => top(x, y) + rtTopW(x, y) + rightW(x, y) + rtBotW(x, y) + bottom(x, y) + botLt(x, y) + left(x, y) + topLt(x, y)\nconst n_botRtW = (x, y) => top(x, y) + rtTopW(x, y) + rightW(x, y) + botRtWC(x, y) + bottomW(x, y) + botLtW(x, y) + left(x, y) + topLt(x, y)\nconst n_bottomW = (x, y) => top(x, y) + topRt(x, y) + right(x, y) + botRtW(x, y) + bottomW(x, y) + botLtW(x, y) + left(x, y) + topLt(x, y)\nconst n_botLtW = (x, y) => top(x, y) + topRt(x, y) + right(x, y) + botRtW(x, y) + bottomW(x, y) + botLtWC(x, y) + leftW(x, y) + ltTopW(x, y)\nconst n_leftW = (x, y) => top(x, y) + topRt(x, y) + right(x, y) + botRt(x, y) + bottom(x, y) + ltBotW(x, y) + leftW(x, y) + ltTopW(x, y)\nconst n_topLtW = (x, y) => topW(x, y) + topRtW(x, y) + right(x, y) + botRt(x, y) + bottom(x, y) + ltBotW(x, y) + leftW(x, y) + topLtWC(x, y)\n\nconst checkBounds = (x, y) => x > -1 && y > -1 && x < gridW && y < gridH\n\n// createHelpers([])\n\nexport { \n  initGrid, reInitGrid, updateGrid, drawGrid, drawInverse, drawShaded, drawShapes, drawOnGrid, eraseOnGrid, paint, preview,\n  setBrushSize, setSize, setupPreview, setFill, setGridWrap, setRule, setShadeSeq, setInverseBg, setTrails\n}","import { useState, useEffect, useCallback, useContext } from 'react'\n\nimport { NotificationContext } from '../../context/NotificationContext'\nimport QuickAccess from '../quick-access/QuickAccess'\nimport MouseReceiver from '../receivers/MouseReceiver'\n\nimport './controls.css'\n\nlet qaEnabled = true, isTempPause = false\nlet hideTimeoutIndex, mouseMoveIndex\n\nconst Controls = ({ \n  onIsPlayingChanged, onBrushDownChanged, onDraw, onErase, onPaint, onPreview,\n\n  onPreviewStart, onPreviewEnd, onFillSelect, onClear, onRuleSelect, onWrapChanged, \n  onBgSelect, onShadesSelect, onGradSelect, onImageSelect, onTrailsChanged,\n\n  onBrushChanged, onSizeChanged, onSpeedChanged\n}) => {\n  const { showNotification } = useContext(NotificationContext)\n\n  const [qaState, setQaState] = useState({\n    prev: 'out', next: 'in', hide: false, exp: false, slide: false, min: false\n  })\n\n  const [isPlaying, setIsPlaying] = useState(true)\n  const [isDrawing, setIsDrawing] = useState(false)\n  const [isPainting, setIsPainting] = useState(false)\n\n  const updateQaHidden = (qaHidden) => {\n    const inState = qaState.min ? 'min' : 'in'\n    if (qaHidden) {\n      setQaState({ ...qaState, prev: inState, next: 'out', hide: true })\n    } else {\n      setQaState({ ...qaState, prev: 'out', next: inState, hide: false })\n    }\n  }\n\n  const updateQaExpanded = (qaExpanded) => {\n    if (qaExpanded) {\n      setQaState({ ...qaState, prev: 'in', next: 'ex', exp: true })\n    } else {\n      setQaState({ ...qaState, prev: 'ex', next: 'in', exp: false })\n    }\n  }\n\n  const updateQaSlider = (qaSlider) => {\n    if (qaSlider) {\n      if (qaState.exp) {\n        setQaState({ ...qaState, prev: 'ex', next: 'sl', exp: false, slide: true })\n      } else {\n        setQaState({ ...qaState, prev: 'in', next: 'sl', slide: true })\n      }\n    } else {\n      setQaState({ ...qaState, prev: 'sl', next: 'in', slide: false })\n    }\n  }\n\n  const updateQaMinimised = useCallback((qaMinimised) => {\n    if (qaMinimised) {\n      const inState = qaState.exp ? 'ex' : 'in'\n      setQaState({ ...qaState, prev: inState, next: 'min', min: true, exp: false })\n    } else {\n      const outState = isPainting ? 'ex' : 'in'\n      setQaState({ ...qaState, prev: 'min', next: outState, min: false, exp: isPainting })\n      \n      // End preview if Painting\n      if (isPainting) {\n        setIsPainting(false)\n        onPreviewEnd()\n      }\n    }\n  }, [isPainting, onPreviewEnd, qaState])\n\n  const updateToggleState = (value, setter, event) => {\n    setter(value)\n    event(value)\n  }\n\n  const updateIsPlaying = useCallback(\n    () => updateToggleState(!isPlaying, setIsPlaying, onIsPlayingChanged), \n    [isPlaying, onIsPlayingChanged]\n  )\n\n  const updateIsDrawing = () => updateToggleState(!isDrawing, setIsDrawing, () => {})\n\n  const mouseMove = () => {\n    /* \n     * Maybe do it a different way. This just seems like cheating \n     * qaState.min is always true when isPainting is true so no need to add it as a condition\n     */\n    if (!(qaState.exp || qaState.slide || isPainting)) {\n      if (qaState.hide) {\n        if (qaEnabled) {\n          updateQaHidden(false)\n          hideTimeoutIndex = setTimeout(() => updateQaHidden(true), 5000)\n        }\n      } else {\n        if (mouseMoveIndex % 20 === 0) {\n          clearTimeout(hideTimeoutIndex)\n          hideTimeoutIndex = setTimeout(() => updateQaHidden(true), 5000)\n        }\n        mouseMoveIndex += 1\n      }\n    }\n  }\n\n  const qaHoverChanged = (hovered) => {\n    if (hovered) clearTimeout(hideTimeoutIndex)\n    else if (!(qaState.exp || qaState.slide || isPainting)) {\n      if (qaEnabled) {\n        hideTimeoutIndex = setTimeout(() => updateQaHidden(true), 5000)\n      }\n    }\n  }\n\n  const hideQa = () => {\n    updateQaHidden(true)\n    qaEnabled = false\n    setTimeout(() => qaEnabled = true, 1000)\n  }\n\n  /* Hooking brushDownChanged to trigger draw-on-every-update when sliding filler modifiers */\n  const tempPause = (pause) => {\n    if (isPlaying) {\n      updateIsPlaying()\n      onBrushDownChanged(true)\n      isTempPause = true \n    } else {\n      if (isTempPause) {\n        updateIsPlaying()\n        onBrushDownChanged(false)\n        isTempPause = false\n      }\n    }\n  }\n\n  const shapeSelected = shape => {\n    setIsPainting(true)\n    updateQaMinimised(true)\n    onPreviewStart(shape)\n    showNotification(\n      (<span>\n        Left click to place pattern on grid. For best results clear the grid (shortcut: C)<br/>\n        Click on the small circle at the bottom or press Esc to go back to pattern list\n      </span>), 10\n    )\n  }\n\n  useEffect(() => {\n    mouseMoveIndex = 0\n\n    const keyListener = e => {\n      console.log(`keydown with code ${e.keyCode}`)\n      switch (e.keyCode) {\n        case 27: \n          if (qaState.min) {\n            updateQaMinimised()\n          } \n          break\n        case 32: updateIsPlaying(); break\n        case 67: \n          onClear()\n          showNotification('Grid cleared')\n          break\n        case 70: document.body.requestFullscreen(); break\n        case 73:\n          onFillSelect('invert')\n          showNotification('Grid inverted')\n          break\n        default: break\n      }\n    }\n\n    document.body.addEventListener(\"keydown\", keyListener)\n\n    return () => {\n      document.body.removeEventListener(\"keydown\", keyListener)\n    }\n  }, [onClear, qaState.min, updateIsPlaying, updateQaMinimised])\n\n  return (\n    <div className='controls-base'>\n      <MouseReceiver \n        isDrawing={isDrawing} \n        isPainting={isPainting}\n        onBrushDown={() => onBrushDownChanged(true)}\n        onBrushUp={() => onBrushDownChanged(false)}\n        onDraw={onDraw}\n        onErase={onErase}\n        onPaint={onPaint}\n        onPreview={onPreview}\n        onMouseMove={mouseMove}\n      />\n\n      <QuickAccess\n        animId={`${qaState.prev}2${qaState.next}`}\n        qaHidden={qaState.hide}\n        qaExpanded={qaState.exp}\n        qaMinimised={qaState.min}\n        qaSlider={qaState.slide}\n        isPlaying={isPlaying}\n        isDrawing={isDrawing}\n        onQaHoverChanged={qaHoverChanged}\n        onQaExpanded={updateQaExpanded}\n        onQaMinimised={updateQaMinimised}\n        onQaSlider={updateQaSlider}\n        onPlayClicked={updateIsPlaying} \n        onDrawClicked={updateIsDrawing}\n        onQaClose={hideQa}\n        onTempPause={tempPause}\n        onShapeSelect={shapeSelected}\n        onFillSelect={onFillSelect}\n        onClear={onClear}\n        onRuleSelect={onRuleSelect}\n        onWrapChanged={onWrapChanged}\n        onBgSelect={onBgSelect}\n        onShadesSelect={onShadesSelect}\n        onGradSelect={onGradSelect}\n        onImageSelect={onImageSelect}\n        onTrailsChanged={onTrailsChanged}\n        onBrushChanged={onBrushChanged}\n        onSizeChanged={onSizeChanged}\n        onSpeedChanged={onSpeedChanged}\n      />\n    </div>\n  )\n}\n\nexport default Controls","import React, { useEffect, useState } from 'react'\nimport { GiResize } from \"react-icons/gi\"\nimport './Resizer.css'\n\nconst COUNTDOWN_MAX = 1\nlet timer\n\nconst Resizer = ({ isResizing, onResizing }) => {\n  const [countdown, setCountdown] = useState(COUNTDOWN_MAX)\n\n  useEffect(() => {\n    const resizeHandler = () => {\n      onResizing(true)\n      setCountdown(COUNTDOWN_MAX)\n\n      if (timer) {\n        clearInterval(timer)\n      }\n\n      timer = setInterval(() => {\n        setCountdown(p => p - 1)\n      }, 1000)\n    }\n\n    window.addEventListener(\"resize\", resizeHandler)\n    return () => window.removeEventListener(\"resize\", resizeHandler)\n  }, [])\n\n  useEffect(() => {\n    if (countdown === 0) {\n      clearInterval(timer)\n      timer = null\n      onResizing(false)\n    }\n  }, [countdown])\n\n  if (isResizing) {\n    return (\n      <div className='resizer-base fill'>\n        <GiResize className='resizer-icon center' />\n      </div>\n    )\n  } else {\n    return null\n  }\n}\n\nexport default Resizer\n","import { useRef, useState, useEffect, useContext } from 'react'\nimport { \n  initGrid, updateGrid, drawGrid, drawInverse, drawShaded, drawShapes, drawOnGrid, eraseOnGrid, paint, preview,\n  setBrushSize, setSize, setupPreview, setFill, setRule, setGridWrap, setShadeSeq, setInverseBg, setTrails, reInitGrid\n} from './grid.js'\n\nimport Controls from './controls/Controls'\nimport { DataContext } from '../context/DataContext'\nimport Resizer from './resizer/Resizer.js'\n\nlet ctx\nlet ctxbg, background, gradientStops\n\nlet speed = 4, drawSpeed = speed\nlet isBrushDown = false, isInverseDraw = false, isAgeShades = false, isInverseImage = false, isShapeShades = false\n\nconst World = (props) => {\n  const [fps, setFps] = useState(0)\n  const [showFps, setShowFps] = useState(false)\n  const [bgImgSrc, setBgImgSrc] = useState('')\n  const [isResizing, setIsResizing] = useState(false)\n\n  const canvasRef = useRef(null)\n  const canvasbgRef = useRef(null)\n  \n  const { setDimensions } = useContext(DataContext)\n\n  const sizeChanged = size => {\n    const { gridW, gridH } = setSize(size)\n    setDimensions(gridW, gridH)\n  }\n\n  const setBgImage = src => {\n    if (src) {\n      isInverseImage = true\n      setBgImgSrc(src)\n      setupImageBackground()\n    }\n  }\n\n  const windowResized = (_isResizing) => {\n    if (_isResizing !== isResizing) {\n      setIsResizing(_isResizing)\n      isPlayingChanged(!_isResizing)\n\n      if (!_isResizing) {\n        /* Resizing finished */\n        \n        updateCanvasSize()\n        resizeBgRedraw()\n        \n        const { gridW, gridH } = reInitGrid()\n        setDimensions(gridW, gridH)\n      }\n    }\n  }\n\n  const updateCanvasSize = () => {\n    const canvas = canvasRef.current\n    const canvasBg = canvasbgRef.current\n\n    canvas.setAttribute('width', window.innerWidth)\n    canvas.setAttribute('height', window.innerHeight)\n    canvasBg.setAttribute('width', window.innerWidth)\n    canvasBg.setAttribute('height', window.innerHeight)\n  }\n\n  useEffect(() => {\n    const context = canvasRef.current.getContext('2d')\n    const contextBg = canvasbgRef.current.getContext('2d')\n\n    const startTime = Date.now()\n    let findex, animationFrameId, fLogIndex, fLogTime\n\n    const init = () => {\n      findex = 0\n      fLogIndex = 0\n      fLogTime = startTime\n\n      ctx = context\n      ctxbg = contextBg\n\n      updateCanvasSize()\n      setBackground('#000000')\n    }\n\n    const render = () => {\n      findex += 1\n\n      update(findex)\n      draw(context, findex)\n\n      logFps()\n      animationFrameId = window.requestAnimationFrame(render)\n    }\n\n    const logFps = () => {\n      if (showFps) {\n        const now = Date.now()\n        if (now - fLogTime < 1000) {\n          fLogIndex += 1\n        } else {\n          setFps(Math.floor(fLogIndex / (now - fLogTime) * 1000))\n          fLogTime = now\n          fLogIndex = 0\n        }\n      }\n    }\n\n    init()\n    render()\n\n    return () => {\n      window.cancelAnimationFrame(animationFrameId)\n    }\n  }, [])\n\n  return (\n    <div className='world'>\n      <img className='bg-img' src={bgImgSrc} alt=\"Background\" />\n\n      <canvas ref={canvasbgRef} {...props} />\n      <canvas ref={canvasRef} {...props} />\n\n      {showFps ? <div className='fpsCounter'>{fps}</div> : <div />}\n\n      <Controls\n        onIsPlayingChanged={isPlayingChanged} \n        onBrushDownChanged={brushDownChanged}\n        onDraw={drawOnGrid}\n        onErase={eraseOnGrid}\n        onPaint={paint}\n        onPreview={preview}\n\n        onPreviewStart={startPreview}\n        onPreviewEnd={endPreview}\n        onFillSelect={setFill}\n        onClear={clear}\n        onRuleSelect={setRule}\n        onWrapChanged={setGridWrap}\n        onBgSelect={setBackground}\n        onShadesSelect={shadesSelected}\n        onGradSelect={setGradient}\n        onImageSelect={setBgImage}\n        onTrailsChanged={setTrails}\n\n        onSizeChanged={sizeChanged}\n        onSpeedChanged={speedChanged}\n        onBrushChanged={setBrushSize}\n      />\n\n      <Resizer isResizing={isResizing} onResizing={windowResized} />\n    </div>\n  )\n}\n\n/* --- CONTROLS --- */\n\nconst isPlayingChanged = (isPlaying) => {\n  update = isPlaying ? _update : () => {}\n}\n\nconst brushDownChanged = (_isBrushDown) => {\n  isBrushDown = _isBrushDown\n  reconfigureDraw()\n}\n\nconst shadesSelected = ({ shades, isLoop }) => {\n  if (isInverseDraw) {\n    isInverseDraw = false\n    updateBackground()\n  }\n\n  isAgeShades = shades.length > 1\n  setShadeSeq({ shades, isLoop })\n  reconfigureDraw()\n  triggerDraw()\n}\n\nconst speedChanged = (spd) => {\n  speed = 101 - spd\n  drawSpeed = speed\n  reconfigureDraw()\n}\n\nconst startPreview = shape => {\n  setupPreview(shape)\n  previewConfig({ isStart: true })\n}\n\nconst endPreview = () => {\n  previewConfig({ isStart: false })\n}\n\nconst previewConfig = ({ isStart }) => {\n  isBrushDown = isStart\n  isShapeShades = isStart\n  reconfigureDraw()\n}\n\nconst clear = () => {\n  /* Will clear both canvas and grid */\n  ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height)\n  setFill('clear')\n}\n\n/* --- BACKGROUND LAYER --- */\n\nconst setBackground = bg => {\n  background = bg\n  setInverseBg(bg)\n  \n  if (!isInverseDraw) {\n    updateBackground()\n  }\n}\n\nconst setGradient = stops => {\n  isInverseImage = false\n  gradientStops = stops\n  initInverseDraw()\n  applyGradient()\n}\n\nconst setupImageBackground = () => {\n  initInverseDraw()\n  ctxbg.clearRect(0, 0, ctxbg.canvas.width, ctxbg.canvas.height)\n}\n\nconst updateBackground = () => {\n  ctxbg.fillStyle = background\n  ctxbg.fillRect(0, 0, ctxbg.canvas.width, ctxbg.canvas.height)\n}\n\nconst applyGradient = () => {\n  const grad = ctxbg.createLinearGradient(0, 0, ctxbg.canvas.width, 0)\n  grad.addColorStop(0, gradientStops[0])\n  grad.addColorStop(1, gradientStops[1])\n\n  ctxbg.fillStyle = grad\n  ctxbg.fillRect(0, 0, ctxbg.canvas.width, ctxbg.canvas.height)\n}\n\nconst initInverseDraw = () => {\n  if (!isInverseDraw) {\n    isInverseDraw = true\n    isAgeShades = false\n    reconfigureDraw()\n    triggerDraw()\n  }\n}\n\nconst resizeBgRedraw = () => {\n  if (isInverseDraw) {\n    if (isInverseImage) {\n      setupImageBackground()\n    } else applyGradient()\n  } else {\n    updateBackground()\n  }\n}\n\n\n/* --- EXT FUNCTIONS --- */\n\nconst initExt = () => {\n  initGrid()\n}\n\nconst triggerDraw = () => draw(ctx, drawSpeed)\n\n/* - UPDATE - */\n\nconst _update = (findex) => {\n  if (findex % speed === 0) {\n    /* All updates go here */\n\n    updateGrid(findex)\n  }\n}\n\nlet update = _update\n\nconst reconfigureDraw = () => {\n  if (isShapeShades) _draw = drawShapes\n  else if (isInverseDraw) _draw = drawInverse\n  else if (isAgeShades) _draw = drawShaded\n  else _draw = drawGrid\n\n  draw = isBrushDown || drawSpeed === 1 ? _draw : _fdraw\n}\n\n/* - DRAW - */\n/*\n * Changed draw implemention to only use draw-on-each-render (not fast) for:\n * 1. When in brush mode and mouse is held down\n * 2. When previewing a shape for placement\n * 3. When previewing the filler modifiers\n */\n\nlet _draw = drawGrid\n\nconst _fdraw = (ctx, findex) => {\n  if (findex % drawSpeed === 0) {\n    _draw(ctx)\n  }\n}\n\nlet draw = _fdraw\n\ninitExt()\n\nexport default World\n","let global_S = [2, 3]\nlet global_B = [3]\n\nconst setRule = ({ b, s }) => {\n  global_B = b.split('').map(i => parseInt(i))\n  global_S = s.split('').map(i => parseInt(i))\n}\n\nconst globalSurvivalTrigger = (alive, x, y) => {\n  return global_S.indexOf(alive) > -1 ? 1 : 0\n}\n\nconst globalBirthTrigger = (alive, x, y) => {\n  return global_B.indexOf(alive) > -1 ? 1 : 0\n}\n\nconst localSurvivalTrigger = (alive, x, y) => {\n\n}\n\nconst localBirthTrigger = (alive, x, y) => {\n\n}\n\nlet checkSurvival = globalSurvivalTrigger\nlet checkBirth = globalBirthTrigger\n\nexport { setRule, checkSurvival, checkBirth }","import { useRef, useEffect } from 'react'\nimport { IoMdCheckboxOutline, IoMdSquareOutline } from 'react-icons/io'\n\n/* Need to adjust width if any changes to qa */\nconst width = 324 * 2\n\nconst ExCon = ({ title, isCurrent, children }) => {\n  return (\n    <div className={`ex-con ex-con-${isCurrent ? 'in' : 'out'}`}>\n      <div className='ex-title'>\n        <div className='ex-title-lbl center'>\n          {title.split('').join(' ').toUpperCase()}\n        </div>\n      </div>\n      <div className='ex-cont'>\n        {children}\n      </div>\n    </div>\n  )\n}\n\nconst ExIndicator = (props) => {\n  const { selectedIndex } = props\n  const canvasRef = useRef(null)\n\n  const style = {\n    width, left: (8 - width / 2 + 22) + (44 * selectedIndex)\n  }\n\n  useEffect(() => {\n    const canvas = canvasRef.current\n    const ctx = canvas.getContext('2d')\n\n    canvas.setAttribute('width', width)\n    canvas.setAttribute('height', 444)\n\n    ctx.lineWidth = 2\n    ctx.strokeStyle = '#a2a2a2'\n\n    const points = [[width / 2 - 10, 400], [width / 2, 406], [width / 2 + 10, 400], [width, 400]]\n\n    ctx.moveTo(0, 400)\n    points.forEach(([x, y]) => ctx.lineTo(x, y))\n    ctx.stroke()\n\n  }, [])\n\n  return (\n    <canvas className='ex-indic' ref={canvasRef} style={style} />\n  )\n}\n\nconst ExSubTitle = ({ \n  children,\n  subtitle, fontSize = 10,\n  width, isScrollable = false, \n  left = 0, right = 0 \n}) => {\n  const className = `ex-st-con ex-item-${isScrollable ? 'scrl' : 'con'}`\n\n  return (\n    <div className={className} style={{height: fontSize + 3}}>\n      <div className='ex-st-hr' style={{ width, left }} />\n      <div className='ex-st-lbl' style={{ fontSize }}>\n        {subtitle ? subtitle.toUpperCase() : children}\n      </div>\n      <div className='ex-st-hr' style={{ width, right }} />\n    </div>\n  )\n}\n\nconst ExCheckbox = ({ name, checked, style = {}, onChange }) => {\n  return (\n    <div \n      className='ex-cb-con' style={style} \n      onClick={() => onChange(!checked)}\n    >\n      {name}\n      {checked ? \n      <IoMdCheckboxOutline className='ex-cb-ico' /> : \n      <IoMdSquareOutline className='ex-cb-ico' />}\n    </div>\n  )\n}\n\nexport { ExCon, ExIndicator, ExSubTitle, ExCheckbox }","import { useRef } from 'react'\nimport { FaPlay, FaPause } from 'react-icons/fa'\nimport { IoSpeedometer } from 'react-icons/io5'\nimport { CgExtension } from 'react-icons/cg'\nimport { RiHeartPulseFill } from 'react-icons/ri'\nimport { RiBrushFill, RiBrushLine } from 'react-icons/ri'\nimport { IoIosColorPalette, IoMdCloseCircle } from 'react-icons/io'\n\nconst QaButton = ({ \n  children, unhide, animDelay, animDuration = 240, \n  onClick, onRightClick = () => {}, onHoverChanged \n}) => {\n  const hoverRef = useRef(false)\n\n  const rightClick = (e) => {\n    e.preventDefault()\n    onRightClick()\n  }\n\n  const mouseEnter = () => {\n    hoverRef.current = true\n    setTimeout(() => {\n      if (hoverRef.current) {\n        onHoverChanged(true)\n      }\n    }, 1000)\n  }\n\n  const mouseLeave = () => {\n    hoverRef.current = false\n    onHoverChanged(false)\n  }\n\n  const className = `qa-btn-con ${unhide ? 'qa-btn-in' : 'qa-btn-out'}`\n\n  const style = {\n    animationDuration: `${animDuration}ms`,\n    animationDelay: unhide ? `${animDelay}ms` : '0ms'\n  }\n\n  return (\n    <div \n      className={className} style={style}\n      onClick={onClick} onContextMenu={rightClick}\n      onMouseEnter={mouseEnter} onMouseLeave={mouseLeave}\n    >{children}</div>\n  )\n}\n\nconst Play = ({ isPlaying, unhide, animDelay, onClick, onHoverChanged }) => {\n  return (\n    <QaButton \n      onClick={onClick} \n      unhide={unhide} \n      animDelay={animDelay} \n      onHoverChanged={onHoverChanged}\n    >\n      {isPlaying ?\n      <FaPause className='center' /> :\n      <FaPlay className='center' />}\n    </QaButton>\n  )\n}\n\nconst Draw = ({ isDrawing, unhide, animDelay, onClick, onRightClick, onHoverChanged }) => {\n  return (\n    <QaButton \n      onClick={onClick} \n      onRightClick={onRightClick} \n      unhide={unhide} \n      animDelay={animDelay} \n      onHoverChanged={onHoverChanged}\n    >\n      {isDrawing ? <RiBrushFill className='center qa-draw' /> : <BrushIcon />}\n    </QaButton>\n  )\n}\n\nconst Speed = ({ unhide, animDelay, onClick, onHoverChanged }) => {\n  return (\n    <QaButton \n      onClick={onClick} \n      unhide={unhide} \n      animDelay={animDelay} \n      onHoverChanged={onHoverChanged}\n    >\n      <SpeedIcon />\n    </QaButton>\n  )\n}\n\nconst Shapes = ({ unhide, animDelay, onClick, onRightClick, onHoverChanged }) => {\n  return (\n    <QaButton \n      onClick={onClick} \n      onRightClick={onRightClick} \n      unhide={unhide} \n      animDelay={animDelay} \n      onHoverChanged={onHoverChanged}\n    >\n      <GridIcon />\n    </QaButton>\n  )\n}\n\nconst Rules = ({ unhide, animDelay, onClick, onRightClick, onHoverChanged }) => {\n  return (\n    <QaButton \n      onClick={onClick} \n      onRightClick={onRightClick}\n      unhide={unhide} \n      animDelay={animDelay} \n      onHoverChanged={onHoverChanged}\n    >\n      <RiHeartPulseFill className='center qa-rules' />\n    </QaButton>\n  )\n}\n\nconst Colors = ({ unhide, animDelay, onClick, onRightClick, onHoverChanged }) => {\n  return (\n    <QaButton \n      onClick={onClick} \n      onRightClick={onRightClick}\n      unhide={unhide} \n      animDelay={animDelay} \n      onHoverChanged={onHoverChanged}\n    >\n      <IoIosColorPalette className='center qa-colors' />\n    </QaButton>\n  )\n}\n\nconst Close = ({ unhide, animDelay, animDuration, onClick, onRightClick, onHoverChanged }) => {\n  return (\n    <QaButton \n      onClick={onClick} \n      onRightClick={onRightClick}\n      unhide={unhide} \n      animDelay={animDelay} \n      animDuration={animDuration}\n      onHoverChanged={onHoverChanged}\n    >\n      <IoMdCloseCircle className='center qa-close' />\n    </QaButton>\n  )\n}\n\nconst BrushIcon = () => <RiBrushLine className='center qa-draw' />\nconst GridIcon = () => <CgExtension className='center qa-shapes' />\nconst SpeedIcon = () => <IoSpeedometer className='center qa-speed' />\n\nexport { \n  Play, Draw, Speed, Shapes, Rules, Colors, Close,\n  BrushIcon, GridIcon, SpeedIcon\n}","const QaTooltip = ({ vis, index }) => {\n  const startX = (window.innerWidth - 324) / 2\n  const midX = startX + 8 + (44 * index) + 22\n  const path = `M ${midX - 12} 8 L ${midX} 0 L ${midX + 12} 8`\n  const msgConStyle = { left: midX }\n\n  const className = `qa-tt-con ${vis ? 'qa-tt-con-in' : ''}`\n  const tip = tips[index]\n\n  return (\n    <div className={className}>\n      <svg className='qa-tt-svg'>\n        <path d={path} fill='#dfdfdf' />\n      </svg>\n      <div className='qa-tt-msg-con' style={msgConStyle}>\n        <div className='qa-tt-msg'>{tip}</div>\n      </div>\n    </div>\n  )\n}\n\nconst tips = {\n  0: ['Play | Pause'],\n  1: ['LMB: Toggle Brush | RMB: Brush Size'],\n  2: ['LMB: Pattern List | RMB: Grid Cell Size'],\n  3: ['LMB: Configure Rules | RMB: Rule Presets'],\n  4: ['LMB: Color Palette | RMB: Age Based Palette'],\n  5: ['Sim Speed'],\n  6: ['LMB: Close | RMB: Minimise']\n}\n\nexport default QaTooltip\n","import { useState, useEffect, useCallback } from 'react'\nimport { IoMdCloseCircle } from 'react-icons/io'\n\nlet liveValue = 0\n\nconst QaSlider = ({ unhide, icon, value, range, onChange, onDismiss }) => {\n  const offsetX = window.innerWidth / 2 - 162\n  \n  const [trackX, setTrackX] = useState(150)\n  const [isPressed, setIsPressed] = useState(false)\n  const [isHovered, setIsHovered] = useState(false)\n\n  useEffect(() => {\n    const [lower, upper] = range\n    updateTrackX(Math.lerp(20, 300, Math.inverseLerp(lower, upper, value)))\n  }, [value])\n\n  const updateTrackX = (trackX) => {\n    setTrackX(trackX)\n    const [lower, upper] = range\n    const rounded = Math.round(Math.lerp(lower, upper, Math.inverseLerp(20, 300, trackX)))\n    \n    if (rounded !== liveValue) {\n      liveValue = rounded\n      onChange(rounded)\n    }\n  }\n\n  const mouseMove = (e) => {\n    if (isPressed && e.button === 0) {\n      updateTrackX(Math.clamp(e.clientX - offsetX, 20, 300))\n    }\n  }\n\n  const mouseClick = (e) => {\n    updateTrackX(Math.clamp(e.clientX - offsetX, 20, 300))\n  }\n\n  const rightClick = (e) => {\n    e.preventDefault()\n    onDismiss()\n  }\n\n  const mouseDown = useCallback((e) => {\n    if (e.button === 0) {\n      setIsPressed(true)\n      document.addEventListener('mouseup', mouseUp, { once: true })\n    }\n  }, [])\n\n  const mouseUp = () => {\n    setIsPressed(false)\n  }\n\n  const trackStyle = { width: trackX }\n  const thumbStyle = { left: trackX - 20 }\n  const labelStyle = { left: trackX + offsetX - 18 }\n  const conClass = `qa-sl-con ${unhide ? 'qa-sl-in' : ''}`\n  const thumbClass = `qa-sl-thumb ${isHovered ? 'qa-sl-thumb-hov' : ''}`\n  const labelClass = `qa-sl-lbl ${isPressed ? 'qa-sl-lbl-pressed' : ''}`\n  const closeClass = `qa-sl-x ${unhide ? 'qa-sl-x-in' : 'qa-sl-x-out'}`\n\n  return (\n    <div className={conClass}>\n      <div className='qa-sl-track-con'>\n        <div className='qa-sl-track' style={trackStyle} />\n      </div>\n\n      <div className={thumbClass} style={thumbStyle}>\n        {icon}\n      </div>\n\n      <div \n        className='qa-sl-receiver' \n        onMouseMove={mouseMove} \n        onMouseDown={mouseDown}\n        onMouseEnter={_ => setIsHovered(true)}\n        onMouseLeave={_ => setIsHovered(false)}\n        onContextMenu={rightClick}\n        onClick={mouseClick}\n      >\n        <div className={labelClass} style={labelStyle}>{liveValue}</div>\n      </div>\n\n      <div className={closeClass} onClick={onDismiss}>\n        <IoMdCloseCircle className='qa-sl-x-ico' />\n      </div>\n    </div>\n  )\n}\n\nexport default QaSlider\n","import { useState, useEffect, useContext, useCallback } from 'react'\nimport { FiChevronRight } from 'react-icons/fi'\n\nimport { DataContext } from '../../context/DataContext'\nimport { NotificationContext } from '../../context/NotificationContext'\nimport { RuleNotification } from '../notifications/Notifications'\nimport { ExCon, ExSubTitle, ExCheckbox } from './ex-comps'\n\nlet isKeyModeSurvival = false\n\nconst ExRules = ({ isCurrent, pindex, onSelect, onWrapChanged, onPindexChanged }) => {\n  const { rules } = useContext(DataContext)\n  const { showNotification } = useContext(NotificationContext)\n\n  const [arIndex, setArIndex] = useState(0)\n  const [activeRule, setActiveRule] = useState(rules[arIndex]) // Conway's Life\n\n  const pconStyle = {\n    transform: `translateX(${pindex * -324}px)`\n  }\n\n  const updateActiveRule = useCallback(({ b, s, ari }) => {\n    let selectedRule = {...activeRule}\n    if (ari > -1) {\n      if (ari !== arIndex) {\n        setArIndex(ari)\n        selectedRule = rules[ari]\n      }\n    } else {\n      let isCustom = true\n      for (let i = 0; i < rules.length; i++) {\n        if (rules[i].b === b && rules[i].s === s) {\n          if (arIndex !== i) {\n            isCustom = false\n            setArIndex(i)\n            selectedRule = rules[i]\n          }\n          break\n        }\n      }\n      if (isCustom) {\n        selectedRule = { name: 'Custom', b, s }\n        setArIndex(-1)\n      }\n    }\n    setActiveRule(selectedRule)\n    onSelect(selectedRule)\n  }, [activeRule, arIndex, onSelect, rules])\n\n  useEffect(() => {\n    const keyListener = e => {\n      const { b, s } = activeRule\n      switch (e.key) {\n        case \"b\": \n          isKeyModeSurvival = 0\n          showNotification(<RuleNotification b={b} s={s} highlightS={false} />)\n          break\n        case \"s\":\n          isKeyModeSurvival = 1\n          showNotification(<RuleNotification b={b} s={s} highlightS={true} />)\n          break\n        case \"0\":\n        case \"1\":\n        case \"2\":\n        case \"3\":\n        case \"4\":\n        case \"5\":\n        case \"6\":\n        case \"7\":\n        case \"8\": \n          if (isKeyModeSurvival) {\n            const sarr = s.split(\"\")\n            const si = sarr.indexOf(e.key)\n            if (si > -1) {\n              sarr.splice(si, 1)\n            } else {\n              sarr.push(e.key)\n            }\n            const _s = sarr.sort().join(\"\")\n            updateActiveRule({ b, s: _s, ari: -1 })\n            showNotification(<RuleNotification b={b} s={_s} highlightS={true} />)\n          } else {\n            const barr = b.split(\"\")\n            const bi = barr.indexOf(e.key)\n            if (bi > -1) {\n              barr.splice(bi, 1)\n            } else {\n              barr.push(e.key)\n            }\n            const _b = barr.sort().join(\"\")\n            updateActiveRule({ b: _b, s, ari: -1 })\n            showNotification(<RuleNotification b={_b} s={s} highlightS={false} />)\n          }\n          break\n        default:\n          if (e.keyCode === 38) {\n            if (arIndex > 0) {\n              updateActiveRule({ ari: arIndex - 1 })\n              showNotification(rules[arIndex - 1].name)\n            }\n          } else if (e.keyCode === 40) {\n            if (arIndex < rules.length - 1) {\n              updateActiveRule({ ari: arIndex + 1 })\n              showNotification(rules[arIndex + 1].name)\n            }\n          }\n          break\n      }\n    }\n\n    document.body.addEventListener(\"keydown\", keyListener)\n\n    return () => {\n      document.body.removeEventListener(\"keydown\", keyListener)\n    }\n  }, [updateActiveRule])\n\n  return (\n    <ExCon title='Rules' isCurrent={isCurrent}>\n      <div className='ex-pcon' style={pconStyle}>\n        <Presets \n          rules={rules} \n          currentIndex={arIndex} \n          onSelect={updateActiveRule} \n        />\n\n        <Custom \n          activeRule={activeRule}\n          onChanged={updateActiveRule} \n          onWrapChanged={onWrapChanged}\n          onSelectPresets={() => onPindexChanged(1)} \n        />\n      </div>\n    </ExCon>\n  )\n}\n\nconst Presets = ({ rules, currentIndex, onSelect }) => {\n  return (\n    <div className='ex-pg ex-pg2'>\n      <div className='ex-flick'>\n        {rules.map(({name, b, s}, index) => \n        <RuleCell \n          key={index}  \n          name={name} b={b} s={s} \n          selected={currentIndex === index}\n          onClick={() => onSelect({ ari: index })} \n        />)}\n      </div>\n    </div>\n  )\n}\n\nconst Custom = ({ activeRule, onSelectPresets, onWrapChanged, onChanged }) => {\n  const { name, b, s } = activeRule\n\n  const updateRule = ({ nb, ns }) => {\n    onChanged({\n      ari: -1,\n      b: nb !== undefined ? nb : b,\n      s: ns !== undefined ? ns : s\n    })\n  }\n\n  return (\n    <div className='ex-pg'>\n      <div style={{height: 5}} />\n\n      <WrapGrid onChanged={onWrapChanged} />\n      <ActiveRule name={name} onClick={onSelectPresets} />\n\n      <div style={{height: 8}} />\n      <div className='rule-info'>\n        NUMBER OF NEIGHBOUR CELLS REQUIRED FOR\n      </div>\n\n      <div style={{height: 4}} />\n      <ExSubTitle fontSize={13} width={68}>A NEW CELL TO BE <b>B</b>ORN</ExSubTitle>\n      <Numbers numbers={b} onNumbersChanged={nb => updateRule({ nb })} />\n\n      <div style={{height: 8}} />\n      <ExSubTitle fontSize={13} width={50}>AN EXISTING CELL TO <b>S</b>URVIVE</ExSubTitle>\n      <Numbers numbers={s} onNumbersChanged={ns => updateRule({ ns })} />\n    </div>\n  )\n}\n\nconst WrapGrid = ({ onChanged }) => {\n  const [checked, setChecked] = useState(false)\n\n  const updateChecked = () => {\n    const _checked = !checked\n    setChecked(_checked)\n    onChanged(_checked)\n  }\n\n  return <ExCheckbox \n    name='Wrap Grid' \n    checked={checked}\n    style={{marginTop: 10}}\n    onChange={updateChecked} \n  />\n}\n\nconst ActiveRule = ({ name, onClick }) => {\n  return (\n    <RuleOption title='Active Rule' onClick={onClick}>\n      <div className='roc-lbl'>{name}</div>\n      <FiChevronRight className='roc-ico roc-chev' />\n    </RuleOption>\n  )\n}\n\nconst RuleOption = ({ children, title, onClick }) => {\n  return (\n    <div className='rule-opt-con' onClick={onClick}>\n      {title}\n      <div className='ro-ctrl'>{children}</div>\n    </div>\n  )\n}\n\nconst Numbers = ({ numbers, onNumbersChanged }) => {\n  const [toggles, setToggles] = useState([0, 0, 0, 0, 0, 0, 0, 0, 0])\n\n  const updateNumbers = (index, value) => {\n    let numbers = ''\n    toggles.map(\n      (n, i) => i === index ? value : n\n    ).forEach(\n      (t, i) => numbers += `${t ? i : ''}`\n    )\n    onNumbersChanged(numbers)\n  }\n\n  useEffect(() => {\n    const togs = [0, 0, 0, 0, 0, 0, 0, 0, 0]\n    for (let i = 0; i < numbers.length; i++) {\n      togs[parseInt(numbers.charAt(i))] = 1\n    }\n    setToggles(togs)\n\n  }, [numbers])\n\n  return (\n    <div className='dia-lt'>\n      <DiamondBtn text={0} x={10} y={10} checked={toggles[0]} checkChanged={v => updateNumbers(0, v)} />\n      <DiamondBtn text={1} x={40} y={40} checked={toggles[1]} checkChanged={v => updateNumbers(1, v)} />\n      <DiamondBtn text={2} x={70} y={10} checked={toggles[2]} checkChanged={v => updateNumbers(2, v)} />\n      <DiamondBtn text={3} x={100} y={40} checked={toggles[3]} checkChanged={v => updateNumbers(3, v)} />\n      <DiamondBtn text={4} x={130} y={10} checked={toggles[4]} checkChanged={v => updateNumbers(4, v)} />\n      <DiamondBtn text={5} x={160} y={40} checked={toggles[5]} checkChanged={v => updateNumbers(5, v)} />\n      <DiamondBtn text={6} x={190} y={10} checked={toggles[6]} checkChanged={v => updateNumbers(6, v)} />\n      <DiamondBtn text={7} x={220} y={40} checked={toggles[7]} checkChanged={v => updateNumbers(7, v)} />\n      <DiamondBtn text={8} x={250} y={10} checked={toggles[8]} checkChanged={v => updateNumbers(8, v)} />\n    </div>\n  )\n}\n\nconst DiamondBtn = ({ text, x, y, checked, checkChanged }) => {\n  const toggleCheck = () => checkChanged(1 - checked)\n\n  const btnStyle = { left: x , top: y }\n  const btnClass = `dia-btn ${checked ? 'dia-btn-c' : ''}`\n  const cbClass = `dia-cb ${checked ? 'dia-cb-c' : ''}`\n\n  return (\n    <div className={btnClass} style={btnStyle} onClick={toggleCheck} >\n      <div className={cbClass} />\n      <div className='dia-lbl-con'>\n        <div className='dia-lbl center'>{text}</div>\n      </div>\n    </div>\n  )\n}\n\nconst RuleCell = ({ selected, name, b, s, onClick }) => {\n  const nameCN = `rule-item-name ${selected ? 'rule-item-name-sel' : ''}`\n  const ruleCN = `rule-item-rule ${selected ? 'rule-item-rule-sel' : ''}`\n\n  return (\n    <div \n      className='rule-item-con'\n      onClick={onClick}\n    >\n      <div className={nameCN}>{name}</div>\n      <div className={ruleCN}><b>B</b>{b} <b>S</b>{s}</div>\n    </div>\n  )\n}\n\nexport default ExRules\n","import { HiOutlineAdjustments } from 'react-icons/hi'\nimport { IoChevronUp } from 'react-icons/io5'\n\nimport { useState, useEffect, useRef, useContext } from 'react'\nimport { DataContext } from '../../context/DataContext'\n\nimport { ExCon, ExSubTitle } from './ex-comps'\n\nconst ExShapes = ({ isCurrent, onShapeSelect, onFillSelect, onClear, onSliding }) => {\n  const [isShapes, setIsShapes] = useState(true)\n  const { shapes, fillers } = useContext(DataContext)\n\n  const className = `shape-con ${isShapes ? '' : 'shape-up'}`\n\n  return (\n    <ExCon title='Patterns' isCurrent={isCurrent}>\n      <div className={className}>\n        <Fillers fillers={fillers} onSelect={onFillSelect} onSliding={onSliding} />\n\n        <div className='shape-mid'>\n          <MidButton name='Clear'   x={1}   y={6} onClick={onClear} />\n          <MidButton name='Invert'  x={159} y={6} onClick={() => onFillSelect('invert')} />\n\n          <MidIndic y={4} visible={!isShapes} onClick={_ => setIsShapes(true)} paths={[\n            'M 1 1 L 10 12 L 19 1', 'M 0 0 L 20 0'\n          ]} />\n\n          <MidIndic y={17} visible={isShapes} onClick={_ => setIsShapes(false)} paths={[\n            'M 1 12 L 10 1 L 19 12', 'M 0 13 L 20 13'\n          ]} />\n        </div>\n\n        <Shapes shapes={shapes} onSelect={onShapeSelect} />\n      </div>\n    </ExCon>\n  )\n}\n\nconst Shapes = ({ shapes, onSelect }) => {\n  return (\n    <div className='shape-list'>\n      <div className='shape-info'>\n        The patterns listed below are meant to be used in<br/>\n        conjuction with <b>Conway's Life (B3-S23)</b> rule.\n      </div>\n      {shapes.map(({ name, shapes }, icat) => (\n        <div key={icat}>\n          <div className='shape-item-pad' />\n          <ExSubTitle subtitle={name} width={132 - name.length * 2} isScrollable={true} />\n\n          {shapes.map(({ name, shape }, ishape) => (\n            <div className='sc-con' key={ishape} onClick={() => onSelect(shape)} >\n              <div className='sc-lbl center'>{name}</div>\n            </div>\n          ))}\n        </div>\n      ))}\n\n    </div>\n  )\n}\n\nconst Fillers = ({ fillers, onSelect, onSliding }) => {\n  const [currentIndex, setCurrentIndex] = useState(-1)\n\n  const exAction = (index) => setCurrentIndex(index === currentIndex ? -1 : index)\n\n  return (\n    <div className='shape-list'>\n      <div className='shape-item-pad' />\n\n      {fillers.map(({ name, fill, config }, index) =>\n        <FillCell \n          key={index}\n          name={name} \n          config={config} \n          ex={currentIndex === index} \n          onSelect={args => onSelect(fill, args)} \n          onSliding={onSliding}\n          onExpanded={() => exAction(index)}\n        />)}\n    </div>\n  )\n}\n\nconst FillCell = ({ name, config, ex, onSelect, onSliding, onExpanded }) => {\n  const [hovered, setHovered] = useState(false)\n  const [pressed, setPressed] = useState(false)\n  const args = useRef(config.map(({init}) => init))\n\n  const style = {\n    height: ex ? 32 + 24 * config.length : 30,\n    backgroundColor: pressed && !ex ? '#ffffff' : '#00000000',\n    color: ex || pressed ? '#000000' : (hovered ? '#ffffff' : '#a2a2a2'),\n    borderColor: ex ? '#a2a2a2' : (hovered ? '#ffffff' : '#00000000')\n  }\n\n  const configAction = e => {\n    e.stopPropagation()\n    onExpanded()\n  }\n\n  const moded = (value, index) => {\n    args.current[index] = value\n    onSelect(args.current)\n  }\n\n  const select = () => onSelect(args.current)\n  \n  const labelClass = `fc-lbl-con ${ex ? 'fc-lbl-con-ex' : ''}`\n  const iconClass = `fc-icon ${ex ? 'fc-icon-ex' : `${hovered ? '' : 'fc-icon-hid'}`}`\n\n  return (\n    <div \n      className='fc-con' \n      style={style} \n      onMouseEnter={() => setHovered(true)}\n      onMouseLeave={() => setHovered(false)}\n      onMouseDown={() => setPressed(true)}\n      onMouseUp={() => setPressed(false)}\n    >\n      <div className={labelClass} onClick={select}>\n        <div className='fc-lbl center'>{name}</div>\n      </div>\n      \n      {ex ? \n      <IoChevronUp className={iconClass} onClick={configAction} /> :\n      <HiOutlineAdjustments className={iconClass} onClick={configAction} onMouseDown={e => e.stopPropagation()} />}\n\n      <div className='fc-ex'>\n        {config.map(({ name, init, range }, index) => <FSlide \n          key={index}\n          name={name} init={init} range={range} \n          onChange={(value) => moded(value, index)}\n          onDown={() => onSliding(true)}\n          onUp={() => onSliding(false)} \n        />)}\n      </div>\n    </div>\n  )\n}\n\nconst FSlide = ({ name, init, range, onChange, onDown, onUp }) => {\n  const [hov, setHov] = useState(false)\n  const [value, setValue] = useState(1)\n\n  const slideAction = e => {\n    const v = parseInt(e.target.value)\n    setValue(v)\n    onChange(v)\n  }\n\n  useEffect(() => {\n    setValue(init)\n  }, [])\n\n  const slideClass = `fslide ${hov ? 'fslide-hov' : ''}`\n\n  return (\n    <div className='fslide-con'>\n      <div className='fslide-lbl'>{name} (<b>{value}</b>)</div>\n      <input \n        className={slideClass} \n        type='range'\n        value={value}\n        step={1}\n        min={range[0]} max={range[1]}\n        onMouseEnter={() => setHov(true)}\n        onMouseLeave={() => setHov(false)}\n        onMouseDown={onDown}\n        onMouseUp={onUp}\n        onChange={slideAction}\n      ></input>\n      {/* <div className='fslide-val'>{value}</div> */}\n    </div>\n  )\n}\n\nconst MidButton = ({ name, x, y, onClick }) => {\n  const [hovered, setHovered] = useState(false)\n  const [pressed, setPressed] = useState(false)\n\n  const mouseLeave = _ => {\n    setHovered(false)\n    setPressed(false)\n  }\n\n  const fill = pressed ? '#fff' : '#00000000'\n  const stroke = hovered ? '#fff' : '#a2a2a2'\n  const textStyle = { color: pressed ? '#000' : stroke }\n\n  return (\n    <div\n      className='mb-con'\n      style={{left: x, top: y}}\n      onMouseEnter={_ => setHovered(true)}\n      onMouseLeave={mouseLeave}\n      onMouseDown={_ => setPressed(true)}\n      onMouseUp={_ => setPressed(false)}\n      onClick={onClick}\n    >\n      <svg className='mb-svg'>\n        <path d='M 0 13 L 10 0 L 134 0 L 144 13 L 134 26 L 10 26 Z' fill={fill} />\n        <path d='M 1 13 L 10 0 M 133 0 L 142 13 L 133 26 M 10 26 L 0 13' strokeWidth={1.5} stroke={stroke} fill='#00000000' />\n        <path d='M 10 0 L 134 0 M 133 26 L 10 26' strokeWidth={2.5} stroke={stroke} />\n      </svg>\n      <div className='fb-lbl center' style={textStyle}>{name}</div>\n    </div>\n  )\n}\n\nconst MidIndic = ({ paths, visible, y, onClick }) => {\n  const [hovered, setHovered] = useState(false)\n  const [pressed, setPressed] = useState(false)\n\n  const mouseLeave = _ => {\n    setHovered(false)\n    setPressed(false)\n  }\n\n  const fill = pressed ? '#fff' : '#00000000'\n  const stroke = hovered ? '#fff' : '#a2a2a2'\n  const className = `mi-con ${visible ? '' : 'mi-not'}`\n\n  return (\n    <div\n      className={className}\n      style={{top: y}}\n      onClick={onClick}\n      onMouseEnter={_ => setHovered(true)}\n      onMouseLeave={mouseLeave}\n      onMouseDown={_ => setPressed(true)}\n      onMouseUp={_ => setPressed(false)}\n    >\n      <svg className='mi-svg'>\n        <path d={paths[0]} strokeWidth={1.5} stroke={stroke} fill={fill} />\n        <path d={paths[1]} strokeWidth={2.5} stroke={stroke} />\n      </svg>\n    </div>\n  )\n}\n\nexport default ExShapes","import { useState, useEffect, useRef, useCallback } from 'react'\nimport { BsChevronRight, BsCloudUpload } from 'react-icons/bs'\n\nimport { ExSubTitle } from '../ex-comps'\n\nconst offsetX = window.innerWidth / 2 - 152\n\nconst PrefsPalette = ({ \n  shades, onBackgroundSelect, onMonoSelect, onGradientSelect, \n  onImageSelect, onAgeConfigure, onTrailsChanged,\n}) => {\n  /* trails state in Modes */\n  const [modeEx, setModeEx] = useState(false)\n  const [modeIndex, setModeIndex] = useState(0)\n  const [modeStates, setModeStates] = useState([\n    '#ffffff', ['#ff2600', '#0096ff'], '', shades\n  ])\n\n  const select = i => {\n    if (i !== modeIndex) {\n      const events = [onMonoSelect, onGradientSelect, onImageSelect, onAgeConfigure]\n      events[i](modeStates[i])\n      setModeIndex(i)\n    }\n\n    setModeEx(false)\n  }\n\n  const monoSelect = mono => {\n    setModeStates(modeStates.map((st, i) => i === 0 ? mono : st))\n    onMonoSelect(mono)\n  }\n\n  const gradientSelect = grad => {\n    setModeStates(modeStates.map((st, i) => i === 1 ? grad : st))\n    onGradientSelect(grad)\n  }\n\n  const imageSelect = src => {\n    setModeStates(modeStates.map((st, i) => i === 2 ? src : st))\n    onImageSelect(src)\n  }\n\n  useEffect(() => {\n    const nextStates = [...modeStates]\n    if (shades.shades.length === 1) {\n      setModeIndex(0)\n      nextStates[0] = shades.shades[0]\n    } else {\n      setModeIndex(3)\n    }\n    nextStates[3] = shades\n    setModeStates(nextStates)\n  }, [shades])\n\n  return (\n    <div className='ex-pg'>\n      <ExSubTitle fontSize={13} width={78} subtitle='BACKGROUND COLOR' />\n      <ColorSelection color='#000000' onChange={onBackgroundSelect} />\n\n      <div style={{height: 12}} />\n\n      <ExSubTitle fontSize={13} width={103} subtitle='COLOR MODE' />\n      <ModeDropdown \n        ex={modeEx} onExpand={ex => setModeEx(ex)}\n        currentIndex={modeIndex} onSelect={select} \n      />\n\n      <Modes \n        vis={!modeEx} \n        currentIndex={modeIndex} \n        states={modeStates}\n        onMonoChanged={monoSelect}\n        onGradientChanged={gradientSelect}\n        onImageSelect={imageSelect}\n        onAgeConfigure={onAgeConfigure}\n        onTrailsChanged={onTrailsChanged}\n      />\n    </div>\n  )\n} \n\nconst Modes = ({ \n  vis, currentIndex, states, \n  onMonoChanged, onGradientChanged, onImageSelect, onAgeConfigure, onTrailsChanged\n}) => {\n  const [trails, setTrails] = useState(0)\n  const modesClass = `mds-con ${vis ? '' : 'mds-inv'}`\n\n  const trailsChanged = trails => {\n    setTrails(trails)\n    onTrailsChanged(trails)\n  }\n\n  const render = () => {\n    switch (currentIndex) {\n      case 0: return <Mono color={states[0]} trails={trails} onChange={onMonoChanged} onTrailsChanged={trailsChanged} />\n      case 1: return <Gradient gradient={states[1]} onChange={onGradientChanged} />\n      case 2: return <Image src={states[2]} uploaded={onImageSelect} />\n      case 3: return <AgeBased shades={states[3]} trails={trails} onClick={onAgeConfigure} onTrailsChanged={trailsChanged} />\n      default: return <div />\n    }\n  }\n\n  return (\n    <div className={modesClass}>\n      <div style={{ height: 12 }} />\n      {render()}\n    </div>\n  )\n}\n\nconst Mono = ({ color, trails, onChange, onTrailsChanged }) => {\n  return (\n    <div>\n      <ExSubTitle fontSize={13} width={102} subtitle='MONO COLOR' />\n      <ColorSelection color={color} onChange={onChange} />\n      <Trails value={trails} onChange={onTrailsChanged} />\n    </div>\n  )\n}\n\nconst Gradient = ({ gradient, onChange }) => {\n  const updateStops = (v, index) => {\n    onChange(gradient.map((s, i) => i === index ? v : s))\n  }\n\n  return (\n    <div>\n      <ExSubTitle fontSize={13} width={91} subtitle='GRADIENT STOPS' />\n      <ColorSelection color={gradient[0]} onChange={v => updateStops(v, 0)} />\n      <div style={{ height: 4 }} />\n      <ColorSelection color={gradient[1]} onChange={v => updateStops(v, 1)} />\n    </div>\n  )\n}\n\nconst Image = ({ src, uploaded }) => {\n  const uploadRef = useRef(null)\n\n  const upload = () => uploadRef.current.click()\n\n  const onChange = e => {\n    if (e.target.files && e.target.files[0]) {\n      uploaded(URL.createObjectURL(e.target.files[0]))\n    }\n  }\n\n  return (\n    <div>\n      {src ? <img className='upl-preview' src={src} /> : <div />}\n      <div className='pp-con ppb-con' onClick={upload}>\n        <div className='ppb-lbl'>Upload Image</div>\n        <div className='ppb-ri-con' style={{right: 4}}>\n          <BsCloudUpload className='ppb-ri center' />\n        </div>\n        <input type='file' ref={uploadRef} onChange={onChange} />\n      </div>\n    </div>\n  )\n}\n\nconst AgeBased = ({ shades, trails, onClick, onTrailsChanged }) => {\n  const canvasRef = useRef(null)\n\n  useEffect(() => {\n    const canvas = canvasRef.current\n    canvas.setAttribute('width', 304)\n    canvas.setAttribute('height', 26)\n\n    const ctx = canvas.getContext('2d')\n    const width = 304 / shades.shades.length\n\n    ctx.clearRect(0, 0, 304, 26)\n    for (let i = 0; i < shades.shades.length; i++) {\n      ctx.fillStyle = shades.shades[i]\n      ctx.fillRect(i * width, 0, width, 26)\n    }\n  }, [shades])\n\n  return (\n    <div>\n      <ExSubTitle fontSize={11} width={22}>Cells change color from left to right as they age</ExSubTitle>\n      <div className='pp-con'>\n        <canvas className='age-preview' ref={canvasRef} />\n      </div>\n      <div style={{ height: 12 }} />\n      <div className='pp-con ppb-con' onClick={onClick}>\n        <div className='ppb-lbl'>Configure Age Based</div>\n        <div className='ppb-ri-con'>\n          <BsChevronRight className='ppb-ri center' />\n        </div>\n      </div>\n      <Trails value={trails} onChange={onTrailsChanged} />\n    </div>\n  )\n}\n\nconst ColorSelection = ({ color, onChange }) => {\n  const [hex, setHex] = useState('#000000')\n  const [hasFocus, setHasFocus] = useState(false)\n\n  const inputSelection = e => {\n    const hex = e.target.value\n    setHex(hex)\n    onChange(hex)\n  }\n\n  const updateHex = e => {\n    const text = e.target.value\n    if (text.indexOf('#') < 0) {\n      setHex(`#${text}`)\n    } else if (text.length > hex.length && text.length < 8) {\n      if (/^[0-9A-Fa-f]+$/.test(text.substring(1))) setHex(text)\n      if (text.length === 7) onChange(text)\n    } else if (text.length < hex.length && text.length > 0) {\n      setHex(text)\n    }\n  }\n\n  const editingComplete = () => {\n    let _hex = hex\n    const padding = 7 - _hex.length\n    for (let i = 0; i < padding; i++) {\n      _hex += \"0\"\n    }\n    setHex(_hex)\n    setHasFocus(false)\n    onChange(_hex)\n  }\n\n  useEffect(() => setHex(color), [color])\n\n  return (\n    <div className='pp-con' style={{borderColor: hasFocus ? '#ffffff' : '#a2a2a2'}}>\n      <div className='cs-cp' style={{backgroundColor: hex}}>\n        <input type='color' className='tint-input' onChange={inputSelection} />\n      </div>\n      <input \n        type='text' className='cs-tf tint-tf' value={hex.toUpperCase()} \n        onChange={updateHex} onFocus={() => setHasFocus(true)} onBlur={editingComplete}\n      />\n    </div>\n  )\n}\n\nconst ModeDropdown = ({ ex, currentIndex, onExpand, onSelect }) => {\n  const baseClick = () => {\n    if (!ex) onExpand(true)\n  }\n\n  const baseClass = `pp-con md-con ${ex ? 'md-ex' : ''}`\n  const lblClass = `md-lbl ${ex ? 'md-lbl-ex' : ''}`\n\n  return (\n    <div className={baseClass} onClick={baseClick}>\n      <div className={lblClass}>{modes[currentIndex]}</div>\n        \n      <div className='mex-con'>\n        {modes.map((mode, i) => (\n          <div className='mex-item' key={i}\n            onClick={() => onSelect(i)}>{mode}\n          </div>\n        ))}\n      </div>\n    </div>\n  )\n}\n\nconst Trails = ({ value, onChange }) => {\n  const [trackX, setTrackX] = useState(13)\n  const [isPressed, setIsPressed] = useState(false)\n  const [showInfo, setShowInfo] = useState(false)\n\n  const updateTrackX = trackX => {\n    setTrackX(trackX)\n    const rounded = Math.round(Math.lerp(0, 255, Math.inverseLerp(13, 289, trackX)))\n    setShowInfo(rounded > 200)\n    onChange(rounded)\n  }\n\n  const mouseMove = e => {\n    if (isPressed && e.button === 0) {\n      /* min/max should have been 14 and 300 but is -1 each instead (because topMargin: -1) */\n      updateTrackX(Math.clamp(e.clientX - offsetX, 13, 289))\n    }\n  }\n\n  const mouseDown = useCallback((e) => {\n    if (e.button === 0) {\n      setIsPressed(true)\n      document.addEventListener('mouseup', mouseUp, { once: true })\n    }\n  }, [])\n\n  const mouseClick = e => {\n    updateTrackX(Math.clamp(e.clientX - offsetX, 13, 289))\n  }\n\n  useEffect(() => {\n    updateTrackX(Math.lerp(13, 289, Math.inverseLerp(0, 255, value)))\n  }, [])\n\n  const mouseUp = () => setIsPressed(false)\n\n  const trackStyle = { width: Math.max(trackX - 14, 0) }\n  const thumbStyle = { transform: `translateX(${trackX - 14}px)` }\n\n  return (\n    <div>\n      <div style={{height: 12}} />\n      <ExSubTitle fontSize={13} width={124} subtitle='TRAILS' />\n\n      <div \n        className='pp-con pps-con' \n        onMouseMove={mouseMove}\n        onMouseDown={mouseDown}\n        onClick={mouseClick}\n      >\n        <div className='pps-trk' style={trackStyle} />\n          <div className='pps-th' style={thumbStyle}>\n        </div>\n      </div>\n\n      <div className='clr-info' style={{opacity: showInfo ? 1 : 0}}><i>Higher values will \n        cause the canvas to not clear when applying patterns or changing rules and palette. \n        Use </i><b>Clear</b><i> button in </i><b>PATTERNS</b><i> to force clear the grid.</i></div> : <div />\n    </div>\n  )\n}\n\nconst modes = [\"Mono\", \"Gradient\", \"Image\", \"Age Based\"]\n\nexport default PrefsPalette\n","import { VscChevronLeft, VscChevronRight, VscTrash } from 'react-icons/vsc'\nimport { IoColorPaletteOutline } from 'react-icons/io5'\nimport { useState, useRef, useEffect } from 'react'\nimport { ExSubTitle } from '../ex-comps'\n\nlet animActive = false, scrollListenerAttached = false\nlet lastApplied = { isLoop: false, list: [{ isTint: true, value: '#ffffff', outId: '' }] }\n\nconst ExPalette = ({ isCurrent, onSelect }) => {\n  const [list, setList] = useState([\n    { isTint: true, value: '#ffffff', outId: '' }\n  ])\n\n  const [isLoop, setIsLoop] = useState(false)\n  const [scrollAtEnd, setScrollAtEnd] = useState(false)\n\n  const listRef = useRef(null)\n\n  const updateTint = ({ index, value }) => {\n    const updatedList = [...list]\n    updatedList[index]['value'] = value\n    setList(updatedList)\n  }\n\n  const updateSteps = ({ index, value }) => {\n    if (/^\\d*\\.?\\d*$/.test(value) && value.length < 5) {\n      const updatedList = [...list]\n      updatedList[index]['value'] = value === '' ? 0 : parseInt(value)\n      setList(updatedList)\n    }\n  }\n\n  const createGradient = (index) => {\n    const g1 = list[index - 1] ? list[index - 1].value : '#ffffff'\n    const g2 = list[index + 1] ? list[index + 1].value : '#ffffff'\n    return `linear-gradient(${g1}, ${g2})`\n  }\n\n  const scrollToEnd = _ => {\n    setTimeout(_ => {\n      listRef.current.scroll({ top: listRef.current.scrollHeight, behavior: 'smooth' })\n    }, 60)\n  }\n\n  const scrollListener = () => {\n    setScrollAtEnd(listRef.current.scrollTop < listRef.current.scrollHeight - listRef.current.clientHeight)\n  }\n\n  /* --- Footer Actions --- */\n\n  const clear = () => {\n    listRef.current.scrollTop = listRef.current.scrollHeight\n    setList([{ isTint: true, value: '#ffffff', outId: '' }])\n    setIsLoop(false)\n  }\n\n  const reset = () => {\n    listRef.current.scrollTop = listRef.current.scrollHeight\n    setIsLoop(lastApplied.isLoop)\n\n    /* \n     * --- Some Bizarre react bug (Or prolly me being ignorant of how react works) ---\n     * \n     * The following lines seem to set a reference of lastApplied.list to list instead of setting a copy of the lastApplied.list:\n     * setList(lastApplied.list) -> This seems obvious\n     * setList([...lastApplied.list]) -> Isnt this supposed to create a new array with elements of lastApplied.list?\n     * setList(lastApplied.list.slice()) -> Isnt this supposed to create a copy of lastApplied.list?\n     * setList(lastApplied.list.map(item => item)) -> Again isnt this supposed to be a completely new array?\n     * Seriously WTF is going on?\n     * - Could be cause Im not using useRef to store lastApplied. NEED TO TEST.\n     * \n     * Only the line below seems to create a copy. I could really use some explaination on this.\n     */\n    setList(lastApplied.list.map(({ isTint, value, outId }) => ({ isTint, value, outId })))\n  }\n\n  const addTint = () => {\n    if (!animActive) {\n      setList([...list, { isTint: true, value: '#ffffff', outId: '' }])\n      scrollToEnd()\n    }\n  }\n\n  const addGradient = () => {\n    if (!animActive) {\n      animActive = true\n\n      const _list = [...list, { isTint: false, value: 20, outId: '' }]\n      setList(_list)\n\n      setTimeout(_ => {\n        setList([..._list, { isTint: true, value: '#ffffff', outId: '' }])\n        scrollToEnd()\n        animActive = false\n      }, 60)\n    }\n  }\n\n  const addLoop = () => setIsLoop(!isLoop)\n\n  const deleteQueuedAtIndex = index => {\n    if (list.length > 1 && !animActive) {\n      const deleteIndices = [index]\n      if (index > 0 && !list[index - 1].isTint) {\n        deleteIndices.push(index - 1)\n      } else if (index == 0 && !list[index + 1].isTint) {\n        deleteIndices.push(index + 1)\n      }\n\n      const _list = [...list]\n      _list[deleteIndices[0]].outId = 'pc-out'\n      if (deleteIndices.length > 1) {\n        _list[deleteIndices[1]].outId = 'pc-out'\n      }\n      setList(_list)\n    }\n  }\n\n  const deleteAtIndex = () => {\n    setList(list.filter(({ outId }) => outId != 'pc-out'))\n  }\n\n  const apply = () => {\n    lastApplied = { isLoop, list }\n    onSelect({ isLoop, shades: generateShades(list)})\n  }\n\n  useEffect(() => {\n    if (isCurrent) {\n      reset()\n    \n      if (!scrollListenerAttached) {\n        listRef.current.addEventListener('scroll', scrollListener)\n        scrollListenerAttached = true\n      }\n    }\n    return () => {\n      if (scrollListenerAttached) {\n        listRef.current.removeEventListener('scroll', scrollListener)\n        scrollListenerAttached = false\n      }\n    }\n  }, [isCurrent])\n\n  const isScrollable = list.length > 8\n\n  return (\n    <div className='ex-pg ex-pg2'>\n      <div className='palette-list' ref={listRef}>\n        {isLoop ? <LoopCell isStart={true} isScrollable={isScrollable} /> : <div />}\n\n        {list.map(({ isTint, outId, value }, index) => (\n          isTint ? \n          <TintCell \n            key={index}\n            color={value} outId={outId}\n            isScrollable={isScrollable}\n            onChange={v => updateTint({ index, value: v })} \n            onDeleteQueue={_ => deleteQueuedAtIndex(index)}\n            onDeleteFinish={_ => deleteAtIndex(index)}\n          /> : \n          <StepCell \n            key={index}\n            steps={value} outId={outId}\n            isScrollable={isScrollable}\n            gradient={createGradient(index)} \n            onChange={value => updateSteps({ index, value })} \n          />\n        ))}\n\n        {isLoop ? <LoopCell isStart={false} isScrollable={isScrollable} /> : <div />}\n\n        {list.length > 1 ? <div />:\n        <div className='palette-info'><i>Color mode will be converted to Mono on </i><b>Apply</b>.<br/>\n        <i>To use Age Based color mode add at least one </i><b>Color</b> <i>or</i> <b>Gradient</b> <i>from the</i> <b>Add</b> <i>menu</i></div>}\n\n        <div style={{ height: isScrollable ? 65 : 0 }} />\n      </div>\n\n      <Footer \n        hasBg={isScrollable && scrollAtEnd}\n        isLoop={isLoop}\n        onClear={clear} onReset={reset} onApply={apply}\n        onAddGradient={addGradient} onAddTint={addTint} onAddLoop={addLoop}\n      />\n    </div>\n  )\n}\n\nconst Footer = ({ \n  hasBg, isLoop,\n  onClear, onReset, onApply,\n  onAddTint, onAddGradient, onAddLoop \n}) => {\n  const [isAdd, setIsAdd] = useState(false)\n\n  const className = `palette-footer ${hasBg ? 'pf-bg' : ''}`\n  const loopName = `${isLoop ? '-' : '+'} Loop`\n\n  return (\n    <div className={className}>\n      <FooterButton name='+ Add' isControl={true} isIn={!isAdd} x={100} onClick={_ => setIsAdd(true)} />\n      <FooterButton name='Clear' isControl={true} isIn={!isAdd} x={1} y={22} onClick={onClear} />\n      <FooterButton name='Reset' isControl={true} isIn={!isAdd} x={199} y={21} onClick={onReset} />\n      <FooterButton name='Apply' isControl={true} isIn={!isAdd} x={100} y={37} onClick={onApply} />\n\n      <FooterButton name='< Controls' isControl={false} isIn={isAdd} x={100} onClick={_ => setIsAdd(false)} />\n      <FooterButton name='+ Color'    isControl={false} isIn={isAdd} x={1} y={22} onClick={onAddTint} />\n      <FooterButton name='+ Gradient' isControl={false} isIn={isAdd} x={199} y={21} onClick={onAddGradient} />\n      <FooterButton name={loopName}   isControl={false} isIn={isAdd} x={100} y={37} onClick={onAddLoop} />\n    </div>\n  )\n}\n\nconst FooterButton = ({ name, isControl, isIn, x, y, onClick }) => {\n  const [hovered, setHovered] = useState(false)\n  const [pressed, setPressed] = useState(false)\n\n  const fill = pressed ? '#fff' : '#00000000'\n  const stroke = hovered ? '#fff' : '#a2a2a2'\n  const textStyle = { color: pressed ? '#000' : stroke }\n\n  const id = isControl ? 1 : 2\n  const className = `fb-con fb-${id}-${isIn ? 'in' : 'out'}`\n\n  const mouseLeave = _ => {\n    setHovered(false)\n    setPressed(false)\n  }\n\n  return (\n    <div \n      className={className}\n      style={{left: x, top: y}}\n      onClick={onClick}\n      onMouseEnter={_ => setHovered(true)}\n      onMouseLeave={mouseLeave}\n      onMouseDown={_ => setPressed(true)}\n      onMouseUp={_ => setPressed(false)}\n    >\n      <svg className='fb-svg'>\n        <path d='M 0 13 L 10 0 L 94 0 L 104 13 L 94 26 L 10 26 Z' fill={fill} />\n        <path d='M 1 13 L 10 0 M 93 0 L 103 13 L 93 26 M 10 26 L 0 13' strokeWidth={1.5} stroke={stroke} fill='#00000000' />\n        <path d='M 10 0 L 94 0 M 93 26 L 10 26' strokeWidth={2.5} stroke={stroke} />\n      </svg>\n      <div className='fb-lbl center' style={textStyle}>{name}</div>\n    </div>\n  )\n}\n\nconst TintCell = ({ color, isScrollable, outId, onChange, onDeleteQueue, onDeleteFinish }) => {\n  const [hex, setHex] = useState('#FFFFFF')\n\n  const getAccent = () => {\n    const { r, g, b } = hex2rgb(color)\n    const bright = (r * 299 + g * 587 + b * 114) / 1000\n    return bright < 140 ? '#ffffff' : '#000000'\n  }\n\n  const animEnded = event => {\n    if (event.animationName == 'pc-out-anim') {\n      onDeleteFinish()\n    }\n  }\n\n  const updateHex = e => {\n    const text = e.target.value\n    if (text.indexOf('#') < 0) {\n      setHex(`#${text}`)\n    } else if (text.length > hex.length && text.length < 8) {\n      if (/^[0-9A-Fa-f]+$/.test(text.substring(1))) setHex(text)\n      if (text.length === 7) onChange(text)\n    } else if (text.length < hex.length && text.length > 0) {\n      setHex(text)\n    }\n  }\n\n  const editingComplete = () => {\n    let _hex = hex\n    const padding = 7 - _hex.length\n    for (let i = 0; i < padding; i++) {\n      _hex += \"0\"\n    }\n    setHex(_hex)\n    onChange(_hex)\n  }\n\n  useEffect(() => setHex(color), [color])\n\n  const style = { backgroundColor: color }\n  const contentStyle = { color: getAccent() }\n  const className = `tint-con pc-${isScrollable ? 'scrl' : 'con'} ${outId}`\n\n  return (\n    <div className={className} style={style} onAnimationEnd={animEnded}>\n      <div className='tint-icon-con'>\n        <IoColorPaletteOutline className='tint-icon center' style={contentStyle} />\n        <input className='tint-input' type='color' value={color} onChange={e => onChange(e.target.value)} />\n      </div>\n      <div className='tint-icon-con tint-trash-con' onClick={onDeleteQueue}>\n        <VscTrash className='tint-icon center' style={contentStyle} />\n      </div>\n\n      <input \n        className='palette-tf tint-tf' type='input' \n        value={hex.toUpperCase()} style={contentStyle} \n        onChange={updateHex} onBlur={editingComplete}\n      />\n    </div>\n  )\n}\n\nconst StepCell = ({ steps, isScrollable, outId, gradient, onChange }) => {\n  const style = { borderImageSource: gradient }\n  \n  const stepper = (diff) => {\n    onChange(`${steps + diff}`)\n  }\n\n  const className = `step-con pc-${isScrollable ? 'scrl' : 'con'} ${outId}`\n\n  return (\n    <div className={className}>\n      <VscChevronLeft className='step-arrow' onClick={_ => stepper(-1)} />\n      <VscChevronRight className='step-arrow step-right' onClick={_ => stepper(1)} />\n\n      <input \n        className='palette-tf step-tf' type='input' \n        value={steps} style={style} \n        onChange={e => onChange(e.target.value)}\n      />\n    </div>\n  )\n}\n\nconst LoopCell = ({ isStart, isScrollable }) => <ExSubTitle \n  subtitle={`LOOP ${isStart ? 'START' : 'END'}`} \n  width={isStart ? 118 : 122} isScrollable={isScrollable}\n/>\n\nconst generateShades = (list) => {\n  const shades = []\n\n  let index = 0\n  while (index < list.length) {\n    const { isTint, value } = list[index]\n\n    if (isTint) {\n      shades.push(value)\n      index += 1\n    } else {\n      const prev = hex2rgb(list[index - 1].value)\n      const next = hex2rgb(list[index + 1].value)\n      const steps = value + 1\n\n      const dr = (next.r - prev.r) / steps\n      const dg = (next.g - prev.g) / steps\n      const db = (next.b - prev.b) / steps\n\n      for (let i = 1; i < steps; i++) {\n        shades.push(rgb2hex({ r: prev.r + dr * i, g: prev.g + dg * i, b: prev.b + db * i }))\n      }\n\n      shades.push(rgb2hex({ r: next.r, g: next.g, b: next.b }))\n      index += 2\n    }\n  }\n\n  return shades\n}\n\nconst hex2rgb = (hex) => {\n  const bigint = parseInt(hex.substring(1), 16)\n  return {\n    r: (bigint >> 16) & 255,\n    g: (bigint >> 8) & 255,\n    b: bigint & 255\n  }\n}\n\nconst rgb2hex = ({ r, g, b }) => {\n  return \"#\" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1, 7)\n}\n\nexport default ExPalette","import { useState } from 'react'\nimport { ExCon } from '../ex-comps'\n\nimport PrefsPalette from './PrefsPalette'\nimport AgePalette from './AgePalette.js'\n\nimport './palette.css'\n\nconst ExPalette = ({ \n  isCurrent, pindex, onBgSelect, onSelect, \n  onGradSelect, onImageSelect, onTrailsChanged, onPindexChanged \n}) => {\n  const [shades, setShades] = useState({ isLoop: false, shades: ['#ffffff'] })\n  \n  const monoSelect = mono => onSelect({ isLoop: false, shades: [mono] })\n  const ageSelect = shades => { setShades(shades); onSelect(shades) }\n\n  const pconStyle = {\n    transform: `translateX(${pindex * -324}px)`\n  }\n\n  return (\n    <ExCon title='Palette' isCurrent={isCurrent}>\n      <div className='ex-pcon' style={pconStyle}>\n        <PrefsPalette \n          shades={shades}\n          onBackgroundSelect={onBgSelect} \n          onMonoSelect={monoSelect}\n          onGradientSelect={onGradSelect}\n          onImageSelect={onImageSelect}\n          onTrailsChanged={onTrailsChanged}\n          onAgeConfigure={() => onPindexChanged(1)} \n        />\n\n        <AgePalette \n          isCurrent={isCurrent} \n          onSelect={ageSelect} \n        />\n      </div>\n    </ExCon>\n  )\n}\n\nexport default ExPalette\n","import { BsChevronLeft } from 'react-icons/bs'\n\nimport { ExIndicator } from './ex-comps'\nimport { useState, useEffect, useContext } from 'react'\nimport { \n  Play, Draw, Speed, Shapes, Rules, Colors, Close,\n  BrushIcon, GridIcon, SpeedIcon \n} from './qa-buttons'\n\nimport QaTooltip from './QaTooltip'\nimport QaSlider from './QaSlider'\nimport ExRules from './ExRules'\nimport ExShapes from './ExShapes'\nimport ExPalette from './palette/ExPalette'\n\nimport './quick-access.css'\nimport { NotificationContext } from '../../context/NotificationContext'\n\nlet sliderValue = 0\n\nconst QuickAccess = ({ \n  animId, qaHidden, qaExpanded, qaMinimised, \n  qaSlider, isPlaying, isDrawing, \n\n  onQaHoverChanged, onQaExpanded, onQaMinimised, onQaSlider, \n  onPlayClicked, onDrawClicked, onQaClose, onTempPause,\n\n  onShapeSelect, onFillSelect, onClear, onRuleSelect, onWrapChanged, onBgSelect, onShadesSelect, \n  onGradSelect, onImageSelect, onTrailsChanged, onBrushChanged, onSizeChanged, onSpeedChanged, \n}) => {\n  const { showNotification } = useContext(NotificationContext)\n\n  const [qaIndex, setQaIndex] = useState(0)\n  const [slideId, setSlideId] = useState('na')\n  const [tipIndex, setTipIndex] = useState(0)\n  const [tipVis, setTipVis] = useState(false)\n  const [backVis, setBackVis] = useState(false)\n  const [exPindices, setExPindices] = useState([0, 0, 0, 0, 0, 0])\n  const [, setPhantomUpdateIndex] = useState(0)\n\n  const qaExAction = (index, pindex = 0) => {\n    if (!qaExpanded) {\n      onQaExpanded(true)\n    } else {\n      if (qaIndex === index && exPindices[index] === pindex) {\n        onQaExpanded(false)\n        return\n      }\n    }\n\n    setExPindices(exPindices.map((item, i) => i === index ? pindex : item))\n    if (backVis) setBackVis(false)\n    setQaIndex(index)\n  }\n\n  const exChangePage = (index, pindex, enableBack = false) => {\n    setExPindices(exPindices.map((item, i) => i === index ? pindex : item))\n    setBackVis(enableBack)\n  }\n\n  const closeAction = () => {\n    if (qaExpanded) onQaExpanded(false)\n    else onQaClose()\n  }\n\n  const minimise = () => onQaMinimised(true)\n\n  const maximise = () => {\n    if (qaMinimised) onQaMinimised(false)\n  }\n\n  const showSlider = (id) => {\n    setSlideId(id)\n    onQaSlider(true)\n  }\n\n  const dismissSlider = () => {\n    onQaSlider(false)\n    if (slideId === 'grid') {\n      onSizeChanged(sliderValue)\n    }\n  }\n\n  const sliderValueChanged = (value) => {\n    sdat[slideId].value = value\n    sliderValue = value\n    \n    switch (slideId) {\n      case 'speed': onSpeedChanged(value); break\n      case 'brush': onBrushChanged(value); break\n      default: break\n    }\n  }\n\n  const hoverChangedAtIndex = (hovered, index) => {\n    setTipVis(hovered)\n    if (hovered) setTipIndex(index)\n  }\n\n  const phantomUpdate = _ => {\n    setPhantomUpdateIndex(ps => ps + 1)\n  }\n\n  useEffect(() => {\n    const keyListener = e => {\n      if (e.keyCode === 37 || e.keyCode === 39) {\n        let speed = sdat['speed'].value\n        const [speedLower, speedUpper] = sdat['speed'].range\n        if (e.keyCode === 37 && speed > speedLower) {\n          speed -= 1\n        } else if (e.keyCode === 39 && speed < speedUpper) {\n          speed += 1\n        }\n        sdat['speed'].value = speed\n        onSpeedChanged(speed)\n        showNotification(`Sim Speed ${speed}`)\n\n        if (slideId === \"speed\") {\n          phantomUpdate()\n        }\n      }\n    }\n\n    document.body.addEventListener(\"keydown\", keyListener)\n\n    return () => {\n      document.body.removeEventListener(\"keydown\", keyListener) \n    }\n  }, [onSpeedChanged, slideId])\n\n  useEffect(() => {\n    if (isDrawing) {\n      showNotification(<span>Brush Enabled<br/>Press left mouse button to draw and right mouse button to erase on the grid.</span>)\n    } else {\n      showNotification(\"Brush Disabled\")\n    }\n  }, [isDrawing])\n\n  const animdelays = animdelaysJson[animId]\n  const unhide = !qaHidden && !qaSlider && !qaMinimised\n  const closeAnimDuration = animId === 'sl2in' || animId === 'in2sl' || animId === 'ex2sl' ? 0 : 240\n\n  return (\n    <div className='qa-root'>\n      <div \n        className={`base base-${animId}`}\n        onClick={maximise}\n        onMouseEnter={() => onQaHoverChanged(true)}\n        onMouseLeave={() => onQaHoverChanged(false)}\n      >\n        <div className={`ex-base ex-base-${animId}`}>\n          <ExIndicator selectedIndex={qaIndex} />\n\n          <ExShapes \n            isCurrent={qaIndex === 2} \n            onShapeSelect={onShapeSelect} \n            onFillSelect={onFillSelect}\n            onClear={onClear}\n            onSliding={onTempPause} \n          />\n\n          <ExRules \n            isCurrent={qaIndex === 3} \n            pindex={exPindices[3]}\n            onSelect={onRuleSelect} \n            onWrapChanged={onWrapChanged}\n            onPindexChanged={pi => exChangePage(3, 1, true)}\n          />\n\n          <ExPalette \n            isCurrent={qaIndex === 4} \n            pindex={exPindices[4]}\n            onBgSelect={onBgSelect}\n            onSelect={onShadesSelect} \n            onGradSelect={onGradSelect}\n            onImageSelect={onImageSelect}\n            onTrailsChanged={onTrailsChanged}\n            onPindexChanged={pi => exChangePage(4, 1, true)}\n          />\n\n          <Back vis={backVis} onClick={() => exChangePage(qaIndex, 0)} />\n        </div>\n\n        <div className='con'>\n          <QaSlider \n            unhide={qaSlider} \n            icon={sdat[slideId].icon} \n            value={sdat[slideId].value}\n            range={sdat[slideId].range}\n            onChange={sliderValueChanged}\n            onDismiss={dismissSlider} \n          />\n\n          <div className='qa-padding' />\n\n          <Play \n            isPlaying={isPlaying} unhide={unhide} animDelay={animdelays[0]} \n            onClick={onPlayClicked} \n            onHoverChanged={h => hoverChangedAtIndex(h, 0)}\n          />\n\n          <Draw \n            isDrawing={isDrawing} unhide={unhide} animDelay={animdelays[1]} \n            onClick={onDrawClicked} onRightClick={_ => showSlider('brush')} \n            onHoverChanged={h => hoverChangedAtIndex(h, 1)}\n          />\n          \n          <Shapes \n            unhide={unhide} animDelay={animdelays[2]} \n            onClick={_ => qaExAction(2)} onRightClick={_ => showSlider('grid')} \n            onHoverChanged={h => hoverChangedAtIndex(h, 2)}\n          />\n\n          <Rules \n            unhide={unhide} animDelay={animdelays[3]} \n            onClick={_ => qaExAction(3, 0)} onRightClick={_ => qaExAction(3, 1)} \n            onHoverChanged={h => hoverChangedAtIndex(h, 3)}\n          />\n\n          <Colors \n            unhide={unhide} animDelay={animdelays[4]} \n            onClick={_ => qaExAction(4)} onRightClick={_ => qaExAction(4, 1)}\n            onHoverChanged={h => hoverChangedAtIndex(h, 4)}\n          />\n\n          <Speed \n            unhide={unhide} animDelay={animdelays[5]} \n            onClick={_ => showSlider('speed')} \n            onHoverChanged={h => hoverChangedAtIndex(h, 5)}\n          />\n\n          <Close \n            unhide={unhide} animDelay={animdelays[6]} animDuration={closeAnimDuration}\n            onClick={closeAction} onRightClick={minimise}\n            onHoverChanged={h => hoverChangedAtIndex(h, 6)}\n          />\n\n          <div className='qa-padding' />\n        </div>\n      </div>\n\n      <QaTooltip vis={tipVis} index={tipIndex} />\n    </div>\n  )\n}\n\nconst Back = ({ vis, onClick }) => {\n  return (\n    <div \n      className={`ex-back ${vis ? 'ex-back-vis' : ''}`}\n      onClick={onClick}\n    >\n      <BsChevronLeft className='ex-back-ico center' />\n      {/* <div className='ex-back-lbl center'>{'<'}</div> */}\n    </div>\n  )\n}\n\nconst animdelaysJson = {\n  'out2in': [280, 320, 360, 400, 440, 480, 520],\n  'in2out': [0, 0, 0, 0, 0, 0, 0],\n  'min2out': [0, 0, 0, 0, 0, 0, 0],\n  'out2min': [0, 0, 0, 0, 0, 0, 0],\n  'in2min': [0, 0, 0, 0, 0, 0, 0],\n  'min2in': [280, 320, 360, 400, 440, 480, 520],\n  'in2ex': [0, 0, 0, 0, 0, 0, 0],\n  'ex2in': [0, 0, 0, 0, 0, 0, 0],\n  'ex2sl': [0, 0, 0, 0, 0, 0, 0],\n  'ex2min': [0, 0, 0, 0, 0, 0, 0],\n  'min2ex': [280, 320, 360, 400, 440, 480, 520],\n  'sl2in': [240, 200, 160, 120, 80, 40, 240],\n  'in2sl': [0, 0, 0, 0, 0, 0, 0]\n}\n\nconst sdat = {\n  na: { value: -1, range: [0, 1], icon: <div /> },\n  brush: { value: 25, range: [1, 100], icon: <BrushIcon /> },\n  grid: { value: 5, range: [1, 50], icon: <GridIcon /> },\n  speed: { value: 97, range: [1, 100], icon: <SpeedIcon /> }\n}\n\nexport default QuickAccess\n","const MouseReceiver = ({ \n  isDrawing, isPainting, \n  onBrushDown, onBrushUp,\n  onDraw, onErase, onPaint, onMouseMove, onPreview \n}) => {\n\n  /* Hooked onPreview to drawHook */\n  \n  const draw = (e) => onDraw(e.clientX, e.clientY)\n  const erase = (e) => onErase(e.clientX, e.clientY)\n  const preview = e => onPreview(e.clientX, e.clientY)\n  \n  const drawStart = (e) => {\n    if (e.button === 0) drawHook = draw\n    else if (e.button === 2) drawHook = erase\n    onBrushDown()\n  }\n  \n  const drawEnd = (e) => {\n    drawHook(e)\n    drawHook = () => {}\n    onBrushUp()\n  }\n  \n  const mouseMove = (e) => {\n    drawHook(e)\n    onMouseMove()\n  }\n\n  const clickAction = () => {\n    if (isPainting) onPaint()\n  }\n\n  const contextAction = e => {\n    e.preventDefault()\n  }\n\n  /* --- Init --- */\n  if (isPainting) {\n    drawStartHook = () => {}\n    drawEndHook = () => {}\n    drawHook = preview\n  } else if (isDrawing) {\n    drawStartHook = drawStart\n    drawEndHook = drawEnd\n    drawHook = () => {}\n  } else {\n    drawStartHook = () => {}\n    drawEndHook = () => {}\n    drawHook = () => {}\n  }\n\n  return (\n    <div \n      className={`receiver${isDrawing || isPainting ? ' receiver-active' : ''}`}\n      \n      onClick={clickAction}\n      onContextMenu={contextAction}\n      onMouseDown={drawStartHook}\n      onMouseUp={drawEndHook}\n      onMouseLeave={drawEndHook}\n      onMouseMove={mouseMove}\n    />\n  )\n}\n  \nlet drawStartHook = () => {}\nlet drawEndHook = () => {}\nlet drawHook = () => {}\n\nexport default MouseReceiver\n","import { DataProvider } from './context/DataContext'\nimport { NotificationProvider } from './context/NotificationContext';\n\n// import Prototype from './prototypes/Prototype'\nimport World from './components/World'\n\n/**\n * TODO:\n * [ ] OPTIMIZE CANVAS (Google how to)\n * [] Fix palette first cell delete when second cell is step cell \n * [x] Add border-radius to palette cells \n *     * Not possible to add border radius to border image\n * [] Implement textfields of palette cells\n * [ ] Add limits to palette cells\n * [ ] Add Next as right click of Play/Pause\n * [] Add wrap to grid \n * [ ] Add trailing palette (Start palette once cell dies to black)\n * [ ] Divide grid into different rules\n *     [ ] Add different colors for different rules\n * [] Add background image / gradient and alive cells are transparent / dead cells are black (better perormance) \n * [] Option to 'Keep' earlier iterations in grid (Dont clear canvas)\n *     [] Maybe \"clear\" the rect with rgba(0, 0, 0, .1) each draw cycle? (or some smaller a;)\n * [ ] Add X, Y offsets to all fillers (like Cross)\n * [ ] Replace LMB and RMB with icons\n * [ ] Improve cross browser compatibility with line-height: 1 (see md-con and children in palette.css)\n * [ ] Add rotate on right mouse click to placable patterns\n * [ ] Add change shapes on mouse wheel\n * [-] Add fullscreen\n *     * Done only on key press\n * [] Add notifications on key pressess\n */\n\nfunction App() {\n  return (\n    // <Prototype />\n    <DataProvider>\n      <NotificationProvider>\n        <World />\n      </NotificationProvider>\n    </DataProvider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}